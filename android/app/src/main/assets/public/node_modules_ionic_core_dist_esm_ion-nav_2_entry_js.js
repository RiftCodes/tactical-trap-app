"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_ion-nav_2_entry_js"],{

/***/ 393:
/*!**************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/ion-nav_2.entry.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ion_nav: () => (/* binding */ Nav),
/* harmony export */   ion_nav_link: () => (/* binding */ NavLink)
/* harmony export */ });
/* harmony import */ var C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 9204);
/* harmony import */ var _index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-B_U9CtaY.js */ 4917);
/* harmony import */ var _cubic_bezier_hHmYLOfE_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cubic-bezier-hHmYLOfE.js */ 239);
/* harmony import */ var _helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helpers-1O4D2b7y.js */ 450);
/* harmony import */ var _index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-DfBA5ztX.js */ 6153);
/* harmony import */ var _framework_delegate_DxcnWic_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./framework-delegate-DxcnWic_.js */ 8104);

/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */





const VIEW_STATE_NEW = 1;
const VIEW_STATE_ATTACHED = 2;
const VIEW_STATE_DESTROYED = 3;
// TODO(FW-2832): types
class ViewController {
  constructor(component, params) {
    this.component = component;
    this.params = params;
    this.state = VIEW_STATE_NEW;
  }
  init(container) {
    var _this = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.state = VIEW_STATE_ATTACHED;
      if (!_this.element) {
        const component = _this.component;
        _this.element = yield (0,_framework_delegate_DxcnWic_js__WEBPACK_IMPORTED_MODULE_5__.a)(_this.delegate, container, component, ['ion-page', 'ion-page-invisible'], _this.params);
      }
    })();
  }
  /**
   * DOM WRITE
   */
  _destroy() {
    (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(this.state !== VIEW_STATE_DESTROYED, 'view state must be ATTACHED');
    const element = this.element;
    if (element) {
      if (this.delegate) {
        this.delegate.removeViewFromDom(element.parentElement, element);
      } else {
        element.remove();
      }
    }
    this.nav = undefined;
    this.state = VIEW_STATE_DESTROYED;
  }
}
const matches = (view, id, params) => {
  if (!view) {
    return false;
  }
  if (view.component !== id) {
    return false;
  }
  return (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.s)(view.params, params);
};
const convertToView = (page, params) => {
  if (!page) {
    return null;
  }
  if (page instanceof ViewController) {
    return page;
  }
  return new ViewController(page, params);
};
const convertToViews = pages => {
  return pages.map(page => {
    if (page instanceof ViewController) {
      return page;
    }
    if ('component' in page) {
      return convertToView(page.component, page.componentProps === null ? undefined : page.componentProps);
    }
    return convertToView(page, undefined);
  }).filter(v => v !== null);
};
const navCss = ":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}";
const Nav = class {
  constructor(hostRef) {
    (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.ionNavWillLoad = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "ionNavWillLoad", 7);
    this.ionNavWillChange = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "ionNavWillChange", 3);
    this.ionNavDidChange = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "ionNavDidChange", 3);
    this.transInstr = [];
    this.gestureOrAnimationInProgress = false;
    this.useRouter = false;
    this.isTransitioning = false;
    this.destroyed = false;
    this.views = [];
    this.didLoad = false;
    /**
     * If `true`, the nav should animate the transition of components.
     */
    this.animated = true;
  }
  swipeGestureChanged() {
    if (this.gesture) {
      this.gesture.enable(this.swipeGesture === true);
    }
  }
  rootChanged() {
    if (this.root === undefined) {
      return;
    }
    if (this.didLoad === false) {
      /**
       * If the component has not loaded yet, we can skip setting up the root component.
       * It will be called when `componentDidLoad` fires.
       */
      return;
    }
    if (!this.useRouter) {
      if (this.root !== undefined) {
        this.setRoot(this.root, this.rootParams);
      }
    }
  }
  componentWillLoad() {
    this.useRouter = document.querySelector('ion-router') !== null && this.el.closest('[no-router]') === null;
    if (this.swipeGesture === undefined) {
      const mode = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.e)(this);
      this.swipeGesture = _index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.l.getBoolean('swipeBackEnabled', mode === 'ios');
    }
    this.ionNavWillLoad.emit();
  }
  componentDidLoad() {
    var _this2 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      // We want to set this flag before any watch callbacks are manually called
      _this2.didLoad = true;
      _this2.rootChanged();
      _this2.gesture = (yield __webpack_require__.e(/*! import() */ "common").then(__webpack_require__.bind(__webpack_require__, /*! ./swipe-back-VdaUzLWy.js */ 9019))).createSwipeBackGesture(_this2.el, _this2.canStart.bind(_this2), _this2.onStart.bind(_this2), _this2.onMove.bind(_this2), _this2.onEnd.bind(_this2));
      _this2.swipeGestureChanged();
    })();
  }
  connectedCallback() {
    this.destroyed = false;
  }
  disconnectedCallback() {
    for (const view of this.views) {
      (0,_index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_4__.l)(view.element, _index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_4__.d);
      view._destroy();
    }
    // Release swipe back gesture and transition.
    if (this.gesture) {
      this.gesture.destroy();
      this.gesture = undefined;
    }
    this.transInstr.length = 0;
    this.views.length = 0;
    this.destroyed = true;
  }
  /**
   * Push a new component onto the current navigation stack. Pass any additional
   * information along as an object. This additional information is accessible
   * through NavParams.
   *
   * @param component The component to push onto the navigation stack.
   * @param componentProps Any properties of the component.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  push(component, componentProps, opts, done) {
    return this.insert(-1, component, componentProps, opts, done);
  }
  /**
   * Inserts a component into the navigation stack at the specified index.
   * This is useful to add a component at any point in the navigation stack.
   *
   * @param insertIndex The index to insert the component at in the stack.
   * @param component The component to insert into the navigation stack.
   * @param componentProps Any properties of the component.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  insert(insertIndex, component, componentProps, opts, done) {
    return this.insertPages(insertIndex, [{
      component,
      componentProps
    }], opts, done);
  }
  /**
   * Inserts an array of components into the navigation stack at the specified index.
   * The last component in the array will become instantiated as a view, and animate
   * in to become the active view.
   *
   * @param insertIndex The index to insert the components at in the stack.
   * @param insertComponents The components to insert into the navigation stack.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  insertPages(insertIndex, insertComponents, opts, done) {
    return this.queueTrns({
      insertStart: insertIndex,
      insertViews: insertComponents,
      opts
    }, done);
  }
  /**
   * Pop a component off of the navigation stack. Navigates back from the current
   * component.
   *
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  pop(opts, done) {
    return this.removeIndex(-1, 1, opts, done);
  }
  /**
   * Pop to a specific index in the navigation stack.
   *
   * @param indexOrViewCtrl The index or view controller to pop to.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  popTo(indexOrViewCtrl, opts, done) {
    const ti = {
      removeStart: -1,
      removeCount: -1,
      opts
    };
    if (typeof indexOrViewCtrl === 'object' && indexOrViewCtrl.component) {
      ti.removeView = indexOrViewCtrl;
      ti.removeStart = 1;
    } else if (typeof indexOrViewCtrl === 'number') {
      ti.removeStart = indexOrViewCtrl + 1;
    }
    return this.queueTrns(ti, done);
  }
  /**
   * Navigate back to the root of the stack, no matter how far back that is.
   *
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  popToRoot(opts, done) {
    return this.removeIndex(1, -1, opts, done);
  }
  /**
   * Removes a component from the navigation stack at the specified index.
   *
   * @param startIndex The number to begin removal at.
   * @param removeCount The number of components to remove.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  removeIndex(startIndex, removeCount = 1, opts, done) {
    return this.queueTrns({
      removeStart: startIndex,
      removeCount,
      opts
    }, done);
  }
  /**
   * Set the root for the current navigation stack to a component.
   *
   * @param component The component to set as the root of the navigation stack.
   * @param componentProps Any properties of the component.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  setRoot(component, componentProps, opts, done) {
    return this.setPages([{
      component,
      componentProps
    }], opts, done);
  }
  /**
   * Set the views of the current navigation stack and navigate to the last view.
   * By default animations are disabled, but they can be enabled by passing options
   * to the navigation controller. Navigation parameters can also be passed to the
   * individual pages in the array.
   *
   * @param views The list of views to set as the navigation stack.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  setPages(views, opts, done) {
    opts !== null && opts !== void 0 ? opts : opts = {};
    // if animation wasn't set to true then default it to NOT animate
    if (opts.animated !== true) {
      opts.animated = false;
    }
    return this.queueTrns({
      insertStart: 0,
      insertViews: views,
      removeStart: 0,
      removeCount: -1,
      opts
    }, done);
  }
  /**
   * Called by the router to update the view.
   *
   * @param id The component tag.
   * @param params The component params.
   * @param direction A direction hint.
   * @param animation an AnimationBuilder.
   *
   * @return the status.
   * @internal
   */
  setRouteId(id, params, direction, animation) {
    const active = this.getActiveSync();
    if (matches(active, id, params)) {
      return Promise.resolve({
        changed: false,
        element: active.element
      });
    }
    let resolve;
    const promise = new Promise(r => resolve = r);
    let finish;
    const commonOpts = {
      updateURL: false,
      viewIsReady: enteringEl => {
        let mark;
        const p = new Promise(r => mark = r);
        resolve({
          changed: true,
          element: enteringEl,
          markVisible: function () {
            var _ref = (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
              mark();
              yield finish;
            });
            return function markVisible() {
              return _ref.apply(this, arguments);
            };
          }()
        });
        return p;
      }
    };
    if (direction === 'root') {
      finish = this.setRoot(id, params, commonOpts);
    } else {
      // Look for a view matching the target in the view stack.
      const viewController = this.views.find(v => matches(v, id, params));
      if (viewController) {
        finish = this.popTo(viewController, Object.assign(Object.assign({}, commonOpts), {
          direction: 'back',
          animationBuilder: animation
        }));
      } else if (direction === 'forward') {
        finish = this.push(id, params, Object.assign(Object.assign({}, commonOpts), {
          animationBuilder: animation
        }));
      } else if (direction === 'back') {
        finish = this.setRoot(id, params, Object.assign(Object.assign({}, commonOpts), {
          direction: 'back',
          animated: true,
          animationBuilder: animation
        }));
      }
    }
    return promise;
  }
  /**
   * Called by <ion-router> to retrieve the current component.
   *
   * @internal
   */
  getRouteId() {
    var _this3 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const active = _this3.getActiveSync();
      if (active) {
        return {
          id: active.element.tagName,
          params: active.params,
          element: active.element
        };
      }
      return undefined;
    })();
  }
  /**
   * Get the active view.
   */
  getActive() {
    var _this4 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this4.getActiveSync();
    })();
  }
  /**
   * Get the view at the specified index.
   *
   * @param index The index of the view.
   */
  getByIndex(index) {
    var _this5 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this5.views[index];
    })();
  }
  /**
   * Returns `true` if the current view can go back.
   *
   * @param view The view to check.
   */
  canGoBack(view) {
    var _this6 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this6.canGoBackSync(view);
    })();
  }
  /**
   * Get the previous view.
   *
   * @param view The view to get.
   */
  getPrevious(view) {
    var _this7 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this7.getPreviousSync(view);
    })();
  }
  /**
   * Returns the number of views in the stack.
   */
  getLength() {
    var _this8 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return Promise.resolve(_this8.views.length);
    })();
  }
  getActiveSync() {
    return this.views[this.views.length - 1];
  }
  canGoBackSync(view = this.getActiveSync()) {
    return !!(view && this.getPreviousSync(view));
  }
  getPreviousSync(view = this.getActiveSync()) {
    if (!view) {
      return undefined;
    }
    const views = this.views;
    const index = views.indexOf(view);
    return index > 0 ? views[index - 1] : undefined;
  }
  /**
   * Adds a navigation stack change to the queue and schedules it to run.
   *
   * @returns Whether the transition succeeds.
   */
  queueTrns(ti, done) {
    var _this9 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      var _a, _b;
      if (_this9.isTransitioning && ((_a = ti.opts) === null || _a === void 0 ? void 0 : _a.skipIfBusy)) {
        return false;
      }
      const promise = new Promise((resolve, reject) => {
        ti.resolve = resolve;
        ti.reject = reject;
      });
      ti.done = done;
      /**
       * If using router, check to see if navigation hooks
       * will allow us to perform this transition. This
       * is required in order for hooks to work with
       * the ion-back-button or swipe to go back.
       */
      if (ti.opts && ti.opts.updateURL !== false && _this9.useRouter) {
        const router = document.querySelector('ion-router');
        if (router) {
          const canTransition = yield router.canTransition();
          if (canTransition === false) {
            return false;
          }
          if (typeof canTransition === 'string') {
            router.push(canTransition, ti.opts.direction || 'back');
            return false;
          }
        }
      }
      // Normalize empty
      if (((_b = ti.insertViews) === null || _b === void 0 ? void 0 : _b.length) === 0) {
        ti.insertViews = undefined;
      }
      // Enqueue transition instruction
      _this9.transInstr.push(ti);
      // if there isn't a transition already happening
      // then this will kick off this transition
      _this9.nextTrns();
      return promise;
    })();
  }
  success(result, ti) {
    if (this.destroyed) {
      this.fireError('nav controller was destroyed', ti);
      return;
    }
    if (ti.done) {
      ti.done(result.hasCompleted, result.requiresTransition, result.enteringView, result.leavingView, result.direction);
    }
    ti.resolve(result.hasCompleted);
    if (ti.opts.updateURL !== false && this.useRouter) {
      const router = document.querySelector('ion-router');
      if (router) {
        const direction = result.direction === 'back' ? 'back' : 'forward';
        router.navChanged(direction);
      }
    }
  }
  failed(rejectReason, ti) {
    if (this.destroyed) {
      this.fireError('nav controller was destroyed', ti);
      return;
    }
    this.transInstr.length = 0;
    this.fireError(rejectReason, ti);
  }
  fireError(rejectReason, ti) {
    if (ti.done) {
      ti.done(false, false, rejectReason);
    }
    if (ti.reject && !this.destroyed) {
      ti.reject(rejectReason);
    } else {
      ti.resolve(false);
    }
  }
  /**
   * Consumes the next transition in the queue.
   *
   * @returns whether the transition is executed.
   */
  nextTrns() {
    // this is the framework's bread 'n butta function
    // only one transition is allowed at any given time
    if (this.isTransitioning) {
      return false;
    }
    // there is no transition happening right now, executes the next instructions.
    const ti = this.transInstr.shift();
    if (!ti) {
      return false;
    }
    this.runTransition(ti);
    return true;
  }
  /** Executes all the transition instruction from the queue. */
  runTransition(ti) {
    var _this0 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      try {
        // set that this nav is actively transitioning
        _this0.ionNavWillChange.emit();
        _this0.isTransitioning = true;
        _this0.prepareTI(ti);
        const leavingView = _this0.getActiveSync();
        const enteringView = _this0.getEnteringView(ti, leavingView);
        if (!leavingView && !enteringView) {
          throw new Error('no views in the stack to be removed');
        }
        if (enteringView && enteringView.state === VIEW_STATE_NEW) {
          yield enteringView.init(_this0.el);
        }
        _this0.postViewInit(enteringView, leavingView, ti);
        // Needs transition?
        const requiresTransition = (ti.enteringRequiresTransition || ti.leavingRequiresTransition) && enteringView !== leavingView;
        if (requiresTransition && ti.opts && leavingView) {
          const isBackDirection = ti.opts.direction === 'back';
          /**
           * If heading back, use the entering page's animation
           * unless otherwise specified by the developer.
           */
          if (isBackDirection) {
            ti.opts.animationBuilder = ti.opts.animationBuilder || (enteringView === null || enteringView === void 0 ? void 0 : enteringView.animationBuilder);
          }
          leavingView.animationBuilder = ti.opts.animationBuilder;
        }
        let result;
        if (requiresTransition) {
          result = yield _this0.transition(enteringView, leavingView, ti);
        } else {
          // transition is not required, so we are already done!
          // they're inserting/removing the views somewhere in the middle or
          // beginning, so visually nothing needs to animate/transition
          // resolve immediately because there's no animation that's happening
          result = {
            hasCompleted: true,
            requiresTransition: false
          };
        }
        _this0.success(result, ti);
        _this0.ionNavDidChange.emit();
      } catch (rejectReason) {
        _this0.failed(rejectReason, ti);
      }
      _this0.isTransitioning = false;
      _this0.nextTrns();
    })();
  }
  prepareTI(ti) {
    var _a, _b;
    var _c;
    const viewsLength = this.views.length;
    (_a = ti.opts) !== null && _a !== void 0 ? _a : ti.opts = {};
    (_b = (_c = ti.opts).delegate) !== null && _b !== void 0 ? _b : _c.delegate = this.delegate;
    if (ti.removeView !== undefined) {
      (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(ti.removeStart !== undefined, 'removeView needs removeStart');
      (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(ti.removeCount !== undefined, 'removeView needs removeCount');
      const index = this.views.indexOf(ti.removeView);
      if (index < 0) {
        throw new Error('removeView was not found');
      }
      ti.removeStart += index;
    }
    if (ti.removeStart !== undefined) {
      if (ti.removeStart < 0) {
        ti.removeStart = viewsLength - 1;
      }
      if (ti.removeCount < 0) {
        ti.removeCount = viewsLength - ti.removeStart;
      }
      ti.leavingRequiresTransition = ti.removeCount > 0 && ti.removeStart + ti.removeCount === viewsLength;
    }
    if (ti.insertViews) {
      // allow -1 to be passed in to auto push it on the end
      // and clean up the index if it's larger then the size of the stack
      if (ti.insertStart < 0 || ti.insertStart > viewsLength) {
        ti.insertStart = viewsLength;
      }
      ti.enteringRequiresTransition = ti.insertStart === viewsLength;
    }
    const insertViews = ti.insertViews;
    if (!insertViews) {
      return;
    }
    (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(insertViews.length > 0, 'length can not be zero');
    const viewControllers = convertToViews(insertViews);
    if (viewControllers.length === 0) {
      throw new Error('invalid views to insert');
    }
    // Check all the inserted view are correct
    for (const view of viewControllers) {
      view.delegate = ti.opts.delegate;
      const nav = view.nav;
      if (nav && nav !== this) {
        throw new Error('inserted view was already inserted');
      }
      if (view.state === VIEW_STATE_DESTROYED) {
        throw new Error('inserted view was already destroyed');
      }
    }
    ti.insertViews = viewControllers;
  }
  /**
   * Returns the view that will be entered considering the transition instructions.
   *
   * @param ti The instructions.
   * @param leavingView The view being left or undefined if none.
   *
   * @returns The view that will be entered, undefined if none.
   */
  getEnteringView(ti, leavingView) {
    // The last inserted view will be entered when view are inserted.
    const insertViews = ti.insertViews;
    if (insertViews !== undefined) {
      return insertViews[insertViews.length - 1];
    }
    // When views are deleted, we will enter the last view that is not removed and not the view being left.
    const removeStart = ti.removeStart;
    if (removeStart !== undefined) {
      const views = this.views;
      const removeEnd = removeStart + ti.removeCount;
      for (let i = views.length - 1; i >= 0; i--) {
        const view = views[i];
        if ((i < removeStart || i >= removeEnd) && view !== leavingView) {
          return view;
        }
      }
    }
    return undefined;
  }
  /**
   * Adds and Removes the views from the navigation stack.
   *
   * @param enteringView The view being entered.
   * @param leavingView The view being left.
   * @param ti The instructions.
   */
  postViewInit(enteringView, leavingView, ti) {
    var _a, _b, _c;
    (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(leavingView || enteringView, 'Both leavingView and enteringView are null');
    (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(ti.resolve, 'resolve must be valid');
    (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(ti.reject, 'reject must be valid');
    // Compute the views to remove.
    const opts = ti.opts;
    const {
      insertViews,
      removeStart,
      removeCount
    } = ti;
    /** Records the view to destroy */
    let destroyQueue;
    // there are views to remove
    if (removeStart !== undefined && removeCount !== undefined) {
      (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(removeStart >= 0, 'removeStart can not be negative');
      (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(removeCount >= 0, 'removeCount can not be negative');
      destroyQueue = [];
      for (let i = removeStart; i < removeStart + removeCount; i++) {
        const view = this.views[i];
        if (view !== undefined && view !== enteringView && view !== leavingView) {
          destroyQueue.push(view);
        }
      }
      // default the direction to "back"
      (_a = opts.direction) !== null && _a !== void 0 ? _a : opts.direction = 'back';
    }
    const finalNumViews = this.views.length + ((_b = insertViews === null || insertViews === void 0 ? void 0 : insertViews.length) !== null && _b !== void 0 ? _b : 0) - (removeCount !== null && removeCount !== void 0 ? removeCount : 0);
    (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(finalNumViews >= 0, 'final balance can not be negative');
    if (finalNumViews === 0) {
      (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.m)(`[ion-nav] - You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.`, this, this.el);
      throw new Error('navigation stack needs at least one root page');
    }
    // At this point the transition can not be rejected, any throw should be an error
    // Insert the new views in the stack.
    if (insertViews) {
      // add the views to the
      let insertIndex = ti.insertStart;
      for (const view of insertViews) {
        this.insertViewAt(view, insertIndex);
        insertIndex++;
      }
      if (ti.enteringRequiresTransition) {
        // default to forward if not already set
        (_c = opts.direction) !== null && _c !== void 0 ? _c : opts.direction = 'forward';
      }
    }
    // if the views to be removed are in the beginning or middle
    // and there is not a view that needs to visually transition out
    // then just destroy them and don't transition anything
    // batch all of lifecycles together
    // let's make sure, callbacks are zoned
    if (destroyQueue && destroyQueue.length > 0) {
      for (const view of destroyQueue) {
        (0,_index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_4__.l)(view.element, _index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_4__.b);
        (0,_index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_4__.l)(view.element, _index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_4__.c);
        (0,_index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_4__.l)(view.element, _index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_4__.d);
      }
      // once all lifecycle events has been delivered, we can safely detroy the views
      for (const view of destroyQueue) {
        this.destroyView(view);
      }
    }
  }
  transition(enteringView, leavingView, ti) {
    var _this1 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      // we should animate (duration > 0) if the pushed page is not the first one (startup)
      // or if it is a portal (modal, actionsheet, etc.)
      const opts = ti.opts;
      const progressCallback = opts.progressAnimation ? ani => {
        /**
         * Because this progress callback is called asynchronously
         * it is possible for the gesture to start and end before
         * the animation is ever set. In that scenario, we should
         * immediately call progressEnd so that the transition promise
         * resolves and the gesture does not get locked up.
         */
        if (ani !== undefined && !_this1.gestureOrAnimationInProgress) {
          _this1.gestureOrAnimationInProgress = true;
          ani.onFinish(() => {
            _this1.gestureOrAnimationInProgress = false;
          }, {
            oneTimeCallback: true
          });
          /**
           * Playing animation to beginning
           * with a duration of 0 prevents
           * any flickering when the animation
           * is later cleaned up.
           */
          ani.progressEnd(0, 0, 0);
        } else {
          _this1.sbAni = ani;
        }
      } : undefined;
      const mode = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.e)(_this1);
      const enteringEl = enteringView.element;
      // eslint-disable-next-line @typescript-eslint/prefer-optional-chain
      const leavingEl = leavingView && leavingView.element;
      const animationOpts = Object.assign(Object.assign({
        mode,
        showGoBack: _this1.canGoBackSync(enteringView),
        baseEl: _this1.el,
        progressCallback,
        animated: _this1.animated && _index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.l.getBoolean('animated', true),
        enteringEl,
        leavingEl
      }, opts), {
        animationBuilder: opts.animationBuilder || _this1.animation || _index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.l.get('navAnimation')
      });
      const {
        hasCompleted
      } = yield (0,_index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_4__.t)(animationOpts);
      return _this1.transitionFinish(hasCompleted, enteringView, leavingView, opts);
    })();
  }
  transitionFinish(hasCompleted, enteringView, leavingView, opts) {
    /**
     * If the transition did not complete, the leavingView will still be the active
     * view on the stack. Otherwise unmount all the views after the enteringView.
     */
    const activeView = hasCompleted ? enteringView : leavingView;
    if (activeView) {
      this.unmountInactiveViews(activeView);
    }
    return {
      hasCompleted,
      requiresTransition: true,
      enteringView,
      leavingView,
      direction: opts.direction
    };
  }
  /**
   * Inserts a view at the specified index.
   *
   * When the view already is in the stack it will be moved to the new position.
   *
   * @param view The view to insert.
   * @param index The index where to insert the view.
   */
  insertViewAt(view, index) {
    const views = this.views;
    const existingIndex = views.indexOf(view);
    if (existingIndex > -1) {
      (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(view.nav === this, 'view is not part of the nav');
      // The view already in the stack, removes it.
      views.splice(existingIndex, 1);
      // and add it back at the requested index.
      views.splice(index, 0, view);
    } else {
      (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(!view.nav, 'nav is used');
      // this is a new view to add to the stack
      // create the new entering view
      view.nav = this;
      views.splice(index, 0, view);
    }
  }
  /**
   * Removes a view from the stack.
   *
   * @param view The view to remove.
   */
  removeView(view) {
    (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(view.state === VIEW_STATE_ATTACHED || view.state === VIEW_STATE_DESTROYED, 'view state should be loaded or destroyed');
    const views = this.views;
    const index = views.indexOf(view);
    (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_3__.l)(index > -1, 'view must be part of the stack');
    if (index >= 0) {
      views.splice(index, 1);
    }
  }
  destroyView(view) {
    view._destroy();
    this.removeView(view);
  }
  /**
   * Unmounts all inactive views after the specified active view.
   *
   * DOM WRITE
   *
   * @param activeView The view that is actively visible in the stack. Used to calculate which views to unmount.
   */
  unmountInactiveViews(activeView) {
    // ok, cleanup time!! Destroy all of the views that are
    // INACTIVE and come after the active view
    // only do this if the views exist, though
    if (this.destroyed) {
      return;
    }
    const views = this.views;
    const activeViewIndex = views.indexOf(activeView);
    for (let i = views.length - 1; i >= 0; i--) {
      const view = views[i];
      /**
       * When inserting multiple views via insertPages
       * the last page will be transitioned to, but the
       * others will not be. As a result, a DOM element
       * will only be created for the last page inserted.
       * As a result, it is possible to have views in the
       * stack that do not have `view.element` yet.
       */
      const element = view.element;
      if (element) {
        if (i > activeViewIndex) {
          // this view comes after the active view
          // let's unload it
          (0,_index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_4__.l)(element, _index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_4__.d);
          this.destroyView(view);
        } else if (i < activeViewIndex) {
          // this view comes before the active view
          // and it is not a portal then ensure it is hidden
          (0,_index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_4__.s)(element, true);
        }
      }
    }
  }
  canStart() {
    return !this.gestureOrAnimationInProgress && !!this.swipeGesture && !this.isTransitioning && this.transInstr.length === 0 && this.canGoBackSync();
  }
  onStart() {
    this.gestureOrAnimationInProgress = true;
    this.pop({
      direction: 'back',
      progressAnimation: true
    });
  }
  onMove(stepValue) {
    if (this.sbAni) {
      this.sbAni.progressStep(stepValue);
    }
  }
  onEnd(shouldComplete, stepValue, dur) {
    if (this.sbAni) {
      this.sbAni.onFinish(() => {
        this.gestureOrAnimationInProgress = false;
      }, {
        oneTimeCallback: true
      });
      // Account for rounding errors in JS
      let newStepValue = shouldComplete ? -1e-3 : 0.001;
      /**
       * Animation will be reversed here, so need to
       * reverse the easing curve as well
       *
       * Additionally, we need to account for the time relative
       * to the new easing curve, as `stepValue` is going to be given
       * in terms of a linear curve.
       */
      if (!shouldComplete) {
        this.sbAni.easing('cubic-bezier(1, 0, 0.68, 0.28)');
        newStepValue += (0,_cubic_bezier_hHmYLOfE_js__WEBPACK_IMPORTED_MODULE_2__.g)([0, 0], [1, 0], [0.68, 0.28], [1, 1], stepValue)[0];
      } else {
        newStepValue += (0,_cubic_bezier_hHmYLOfE_js__WEBPACK_IMPORTED_MODULE_2__.g)([0, 0], [0.32, 0.72], [0, 1], [1, 1], stepValue)[0];
      }
      this.sbAni.progressEnd(shouldComplete ? 1 : 0, newStepValue, dur);
    } else {
      this.gestureOrAnimationInProgress = false;
    }
  }
  render() {
    return (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.h)("slot", {
      key: '8067c9835d255daec61f33dba200fd3a6ff839a0'
    });
  }
  get el() {
    return (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.k)(this);
  }
  static get watchers() {
    return {
      "swipeGesture": ["swipeGestureChanged"],
      "root": ["rootChanged"]
    };
  }
};
Nav.style = navCss;
const navLink = (el, routerDirection, component, componentProps, routerAnimation) => {
  const nav = el.closest('ion-nav');
  if (nav) {
    if (routerDirection === 'forward') {
      if (component !== undefined) {
        return nav.push(component, componentProps, {
          skipIfBusy: true,
          animationBuilder: routerAnimation
        });
      }
    } else if (routerDirection === 'root') {
      if (component !== undefined) {
        return nav.setRoot(component, componentProps, {
          skipIfBusy: true,
          animationBuilder: routerAnimation
        });
      }
    } else if (routerDirection === 'back') {
      return nav.pop({
        skipIfBusy: true,
        animationBuilder: routerAnimation
      });
    }
  }
  return Promise.resolve(false);
};
const NavLink = class {
  constructor(hostRef) {
    (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    /**
     * The transition direction when navigating to another page.
     */
    this.routerDirection = 'forward';
    this.onClick = () => {
      return navLink(this.el, this.routerDirection, this.component, this.componentProps, this.routerAnimation);
    };
  }
  render() {
    return (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.j, {
      key: '6dbb1ad4f351e9215375aac11ab9b53762e07a08',
      onClick: this.onClick
    });
  }
  get el() {
    return (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.k)(this);
  }
};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW9uLW5hdl8yX2VudHJ5X2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNpSztBQUN2RjtBQUNNO0FBQzJGO0FBQ25HO0FBRXhFLE1BQU0rQixjQUFjLEdBQUcsQ0FBQztBQUN4QixNQUFNQyxtQkFBbUIsR0FBRyxDQUFDO0FBQzdCLE1BQU1DLG9CQUFvQixHQUFHLENBQUM7QUFDOUI7QUFDQSxNQUFNQyxjQUFjLENBQUM7RUFDakJDLFdBQVdBLENBQUNDLFNBQVMsRUFBRUMsTUFBTSxFQUFFO0lBQzNCLElBQUksQ0FBQ0QsU0FBUyxHQUFHQSxTQUFTO0lBQzFCLElBQUksQ0FBQ0MsTUFBTSxHQUFHQSxNQUFNO0lBQ3BCLElBQUksQ0FBQ0MsS0FBSyxHQUFHUCxjQUFjO0VBQy9CO0VBQ01RLElBQUlBLENBQUNDLFNBQVMsRUFBRTtJQUFBLElBQUFDLEtBQUE7SUFBQSxPQUFBQyxnS0FBQTtNQUNsQkQsS0FBSSxDQUFDSCxLQUFLLEdBQUdOLG1CQUFtQjtNQUNoQyxJQUFJLENBQUNTLEtBQUksQ0FBQ0UsT0FBTyxFQUFFO1FBQ2YsTUFBTVAsU0FBUyxHQUFHSyxLQUFJLENBQUNMLFNBQVM7UUFDaENLLEtBQUksQ0FBQ0UsT0FBTyxTQUFTYixpRUFBZSxDQUFDVyxLQUFJLENBQUNHLFFBQVEsRUFBRUosU0FBUyxFQUFFSixTQUFTLEVBQUUsQ0FBQyxVQUFVLEVBQUUsb0JBQW9CLENBQUMsRUFBRUssS0FBSSxDQUFDSixNQUFNLENBQUM7TUFDOUg7SUFBQztFQUNMO0VBQ0E7QUFDSjtBQUNBO0VBQ0lRLFFBQVFBLENBQUEsRUFBRztJQUNQMUIsdURBQU0sQ0FBQyxJQUFJLENBQUNtQixLQUFLLEtBQUtMLG9CQUFvQixFQUFFLDZCQUE2QixDQUFDO0lBQzFFLE1BQU1VLE9BQU8sR0FBRyxJQUFJLENBQUNBLE9BQU87SUFDNUIsSUFBSUEsT0FBTyxFQUFFO01BQ1QsSUFBSSxJQUFJLENBQUNDLFFBQVEsRUFBRTtRQUNmLElBQUksQ0FBQ0EsUUFBUSxDQUFDRSxpQkFBaUIsQ0FBQ0gsT0FBTyxDQUFDSSxhQUFhLEVBQUVKLE9BQU8sQ0FBQztNQUNuRSxDQUFDLE1BQ0k7UUFDREEsT0FBTyxDQUFDSyxNQUFNLENBQUMsQ0FBQztNQUNwQjtJQUNKO0lBQ0EsSUFBSSxDQUFDQyxHQUFHLEdBQUdDLFNBQVM7SUFDcEIsSUFBSSxDQUFDWixLQUFLLEdBQUdMLG9CQUFvQjtFQUNyQztBQUNKO0FBQ0EsTUFBTWtCLE9BQU8sR0FBR0EsQ0FBQ0MsSUFBSSxFQUFFQyxFQUFFLEVBQUVoQixNQUFNLEtBQUs7RUFDbEMsSUFBSSxDQUFDZSxJQUFJLEVBQUU7SUFDUCxPQUFPLEtBQUs7RUFDaEI7RUFDQSxJQUFJQSxJQUFJLENBQUNoQixTQUFTLEtBQUtpQixFQUFFLEVBQUU7SUFDdkIsT0FBTyxLQUFLO0VBQ2hCO0VBQ0EsT0FBT25DLHVEQUFxQixDQUFDa0MsSUFBSSxDQUFDZixNQUFNLEVBQUVBLE1BQU0sQ0FBQztBQUNyRCxDQUFDO0FBQ0QsTUFBTWlCLGFBQWEsR0FBR0EsQ0FBQ0MsSUFBSSxFQUFFbEIsTUFBTSxLQUFLO0VBQ3BDLElBQUksQ0FBQ2tCLElBQUksRUFBRTtJQUNQLE9BQU8sSUFBSTtFQUNmO0VBQ0EsSUFBSUEsSUFBSSxZQUFZckIsY0FBYyxFQUFFO0lBQ2hDLE9BQU9xQixJQUFJO0VBQ2Y7RUFDQSxPQUFPLElBQUlyQixjQUFjLENBQUNxQixJQUFJLEVBQUVsQixNQUFNLENBQUM7QUFDM0MsQ0FBQztBQUNELE1BQU1tQixjQUFjLEdBQUlDLEtBQUssSUFBSztFQUM5QixPQUFPQSxLQUFLLENBQ1BDLEdBQUcsQ0FBRUgsSUFBSSxJQUFLO0lBQ2YsSUFBSUEsSUFBSSxZQUFZckIsY0FBYyxFQUFFO01BQ2hDLE9BQU9xQixJQUFJO0lBQ2Y7SUFDQSxJQUFJLFdBQVcsSUFBSUEsSUFBSSxFQUFFO01BQ3JCLE9BQU9ELGFBQWEsQ0FBQ0MsSUFBSSxDQUFDbkIsU0FBUyxFQUFFbUIsSUFBSSxDQUFDSSxjQUFjLEtBQUssSUFBSSxHQUFHVCxTQUFTLEdBQUdLLElBQUksQ0FBQ0ksY0FBYyxDQUFDO0lBQ3hHO0lBQ0EsT0FBT0wsYUFBYSxDQUFDQyxJQUFJLEVBQUVMLFNBQVMsQ0FBQztFQUN6QyxDQUFDLENBQUMsQ0FDR1UsTUFBTSxDQUFFQyxDQUFDLElBQUtBLENBQUMsS0FBSyxJQUFJLENBQUM7QUFDbEMsQ0FBQztBQUVELE1BQU1DLE1BQU0sR0FBRyw0RkFBNEY7QUFFM0csTUFBTUMsR0FBRyxHQUFHLE1BQU07RUFDZDVCLFdBQVdBLENBQUM2QixPQUFPLEVBQUU7SUFDakIvRCxxREFBZ0IsQ0FBQyxJQUFJLEVBQUUrRCxPQUFPLENBQUM7SUFDL0IsSUFBSSxDQUFDQyxjQUFjLEdBQUc5RCxxREFBVyxDQUFDLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxDQUFDLENBQUM7SUFDNUQsSUFBSSxDQUFDK0QsZ0JBQWdCLEdBQUcvRCxxREFBVyxDQUFDLElBQUksRUFBRSxrQkFBa0IsRUFBRSxDQUFDLENBQUM7SUFDaEUsSUFBSSxDQUFDZ0UsZUFBZSxHQUFHaEUscURBQVcsQ0FBQyxJQUFJLEVBQUUsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO0lBQzlELElBQUksQ0FBQ2lFLFVBQVUsR0FBRyxFQUFFO0lBQ3BCLElBQUksQ0FBQ0MsNEJBQTRCLEdBQUcsS0FBSztJQUN6QyxJQUFJLENBQUNDLFNBQVMsR0FBRyxLQUFLO0lBQ3RCLElBQUksQ0FBQ0MsZUFBZSxHQUFHLEtBQUs7SUFDNUIsSUFBSSxDQUFDQyxTQUFTLEdBQUcsS0FBSztJQUN0QixJQUFJLENBQUNDLEtBQUssR0FBRyxFQUFFO0lBQ2YsSUFBSSxDQUFDQyxPQUFPLEdBQUcsS0FBSztJQUNwQjtBQUNSO0FBQ0E7SUFDUSxJQUFJLENBQUNDLFFBQVEsR0FBRyxJQUFJO0VBQ3hCO0VBQ0FDLG1CQUFtQkEsQ0FBQSxFQUFHO0lBQ2xCLElBQUksSUFBSSxDQUFDQyxPQUFPLEVBQUU7TUFDZCxJQUFJLENBQUNBLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQ0MsWUFBWSxLQUFLLElBQUksQ0FBQztJQUNuRDtFQUNKO0VBQ0FDLFdBQVdBLENBQUEsRUFBRztJQUNWLElBQUksSUFBSSxDQUFDQyxJQUFJLEtBQUsvQixTQUFTLEVBQUU7TUFDekI7SUFDSjtJQUNBLElBQUksSUFBSSxDQUFDd0IsT0FBTyxLQUFLLEtBQUssRUFBRTtNQUN4QjtBQUNaO0FBQ0E7QUFDQTtNQUNZO0lBQ0o7SUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDSixTQUFTLEVBQUU7TUFDakIsSUFBSSxJQUFJLENBQUNXLElBQUksS0FBSy9CLFNBQVMsRUFBRTtRQUN6QixJQUFJLENBQUNnQyxPQUFPLENBQUMsSUFBSSxDQUFDRCxJQUFJLEVBQUUsSUFBSSxDQUFDRSxVQUFVLENBQUM7TUFDNUM7SUFDSjtFQUNKO0VBQ0FDLGlCQUFpQkEsQ0FBQSxFQUFHO0lBQ2hCLElBQUksQ0FBQ2QsU0FBUyxHQUFHZSxRQUFRLENBQUNDLGFBQWEsQ0FBQyxZQUFZLENBQUMsS0FBSyxJQUFJLElBQUksSUFBSSxDQUFDQyxFQUFFLENBQUNDLE9BQU8sQ0FBQyxhQUFhLENBQUMsS0FBSyxJQUFJO0lBQ3pHLElBQUksSUFBSSxDQUFDVCxZQUFZLEtBQUs3QixTQUFTLEVBQUU7TUFDakMsTUFBTXVDLElBQUksR0FBR3BGLHFEQUFVLENBQUMsSUFBSSxDQUFDO01BQzdCLElBQUksQ0FBQzBFLFlBQVksR0FBR3hFLGlEQUFNLENBQUNtRixVQUFVLENBQUMsa0JBQWtCLEVBQUVELElBQUksS0FBSyxLQUFLLENBQUM7SUFDN0U7SUFDQSxJQUFJLENBQUN4QixjQUFjLENBQUMwQixJQUFJLENBQUMsQ0FBQztFQUM5QjtFQUNNQyxnQkFBZ0JBLENBQUEsRUFBRztJQUFBLElBQUFDLE1BQUE7SUFBQSxPQUFBbkQsZ0tBQUE7TUFDckI7TUFDQW1ELE1BQUksQ0FBQ25CLE9BQU8sR0FBRyxJQUFJO01BQ25CbUIsTUFBSSxDQUFDYixXQUFXLENBQUMsQ0FBQztNQUNsQmEsTUFBSSxDQUFDaEIsT0FBTyxHQUFHLE9BQU8seUlBQWtDLEVBQUVpQixzQkFBc0IsQ0FBQ0QsTUFBSSxDQUFDTixFQUFFLEVBQUVNLE1BQUksQ0FBQ0UsUUFBUSxDQUFDQyxJQUFJLENBQUNILE1BQUksQ0FBQyxFQUFFQSxNQUFJLENBQUNJLE9BQU8sQ0FBQ0QsSUFBSSxDQUFDSCxNQUFJLENBQUMsRUFBRUEsTUFBSSxDQUFDSyxNQUFNLENBQUNGLElBQUksQ0FBQ0gsTUFBSSxDQUFDLEVBQUVBLE1BQUksQ0FBQ00sS0FBSyxDQUFDSCxJQUFJLENBQUNILE1BQUksQ0FBQyxDQUFDO01BQzNMQSxNQUFJLENBQUNqQixtQkFBbUIsQ0FBQyxDQUFDO0lBQUM7RUFDL0I7RUFDQXdCLGlCQUFpQkEsQ0FBQSxFQUFHO0lBQ2hCLElBQUksQ0FBQzVCLFNBQVMsR0FBRyxLQUFLO0VBQzFCO0VBQ0E2QixvQkFBb0JBLENBQUEsRUFBRztJQUNuQixLQUFLLE1BQU1qRCxJQUFJLElBQUksSUFBSSxDQUFDcUIsS0FBSyxFQUFFO01BQzNCckQscURBQVMsQ0FBQ2dDLElBQUksQ0FBQ1QsT0FBTyxFQUFFbkIsaURBQXFCLENBQUM7TUFDOUM0QixJQUFJLENBQUNQLFFBQVEsQ0FBQyxDQUFDO0lBQ25CO0lBQ0E7SUFDQSxJQUFJLElBQUksQ0FBQ2dDLE9BQU8sRUFBRTtNQUNkLElBQUksQ0FBQ0EsT0FBTyxDQUFDeUIsT0FBTyxDQUFDLENBQUM7TUFDdEIsSUFBSSxDQUFDekIsT0FBTyxHQUFHM0IsU0FBUztJQUM1QjtJQUNBLElBQUksQ0FBQ2tCLFVBQVUsQ0FBQ21DLE1BQU0sR0FBRyxDQUFDO0lBQzFCLElBQUksQ0FBQzlCLEtBQUssQ0FBQzhCLE1BQU0sR0FBRyxDQUFDO0lBQ3JCLElBQUksQ0FBQy9CLFNBQVMsR0FBRyxJQUFJO0VBQ3pCO0VBQ0E7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSWdDLElBQUlBLENBQUNwRSxTQUFTLEVBQUV1QixjQUFjLEVBQUU4QyxJQUFJLEVBQUVDLElBQUksRUFBRTtJQUN4QyxPQUFPLElBQUksQ0FBQ0MsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFdkUsU0FBUyxFQUFFdUIsY0FBYyxFQUFFOEMsSUFBSSxFQUFFQyxJQUFJLENBQUM7RUFDakU7RUFDQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJQyxNQUFNQSxDQUFDQyxXQUFXLEVBQUV4RSxTQUFTLEVBQUV1QixjQUFjLEVBQUU4QyxJQUFJLEVBQUVDLElBQUksRUFBRTtJQUN2RCxPQUFPLElBQUksQ0FBQ0csV0FBVyxDQUFDRCxXQUFXLEVBQUUsQ0FBQztNQUFFeEUsU0FBUztNQUFFdUI7SUFBZSxDQUFDLENBQUMsRUFBRThDLElBQUksRUFBRUMsSUFBSSxDQUFDO0VBQ3JGO0VBQ0E7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSUcsV0FBV0EsQ0FBQ0QsV0FBVyxFQUFFRSxnQkFBZ0IsRUFBRUwsSUFBSSxFQUFFQyxJQUFJLEVBQUU7SUFDbkQsT0FBTyxJQUFJLENBQUNLLFNBQVMsQ0FBQztNQUNsQkMsV0FBVyxFQUFFSixXQUFXO01BQ3hCSyxXQUFXLEVBQUVILGdCQUFnQjtNQUM3Qkw7SUFDSixDQUFDLEVBQUVDLElBQUksQ0FBQztFQUNaO0VBQ0E7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSVEsR0FBR0EsQ0FBQ1QsSUFBSSxFQUFFQyxJQUFJLEVBQUU7SUFDWixPQUFPLElBQUksQ0FBQ1MsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRVYsSUFBSSxFQUFFQyxJQUFJLENBQUM7RUFDOUM7RUFDQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJVSxLQUFLQSxDQUFDQyxlQUFlLEVBQUVaLElBQUksRUFBRUMsSUFBSSxFQUFFO0lBQy9CLE1BQU1ZLEVBQUUsR0FBRztNQUNQQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO01BQ2ZDLFdBQVcsRUFBRSxDQUFDLENBQUM7TUFDZmY7SUFDSixDQUFDO0lBQ0QsSUFBSSxPQUFPWSxlQUFlLEtBQUssUUFBUSxJQUFJQSxlQUFlLENBQUNqRixTQUFTLEVBQUU7TUFDbEVrRixFQUFFLENBQUNHLFVBQVUsR0FBR0osZUFBZTtNQUMvQkMsRUFBRSxDQUFDQyxXQUFXLEdBQUcsQ0FBQztJQUN0QixDQUFDLE1BQ0ksSUFBSSxPQUFPRixlQUFlLEtBQUssUUFBUSxFQUFFO01BQzFDQyxFQUFFLENBQUNDLFdBQVcsR0FBR0YsZUFBZSxHQUFHLENBQUM7SUFDeEM7SUFDQSxPQUFPLElBQUksQ0FBQ04sU0FBUyxDQUFDTyxFQUFFLEVBQUVaLElBQUksQ0FBQztFQUNuQztFQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJZ0IsU0FBU0EsQ0FBQ2pCLElBQUksRUFBRUMsSUFBSSxFQUFFO0lBQ2xCLE9BQU8sSUFBSSxDQUFDUyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFVixJQUFJLEVBQUVDLElBQUksQ0FBQztFQUM5QztFQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSVMsV0FBV0EsQ0FBQ1EsVUFBVSxFQUFFSCxXQUFXLEdBQUcsQ0FBQyxFQUFFZixJQUFJLEVBQUVDLElBQUksRUFBRTtJQUNqRCxPQUFPLElBQUksQ0FBQ0ssU0FBUyxDQUFDO01BQ2xCUSxXQUFXLEVBQUVJLFVBQVU7TUFDdkJILFdBQVc7TUFDWGY7SUFDSixDQUFDLEVBQUVDLElBQUksQ0FBQztFQUNaO0VBQ0E7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJeEIsT0FBT0EsQ0FBQzlDLFNBQVMsRUFBRXVCLGNBQWMsRUFBRThDLElBQUksRUFBRUMsSUFBSSxFQUFFO0lBQzNDLE9BQU8sSUFBSSxDQUFDa0IsUUFBUSxDQUFDLENBQUM7TUFBRXhGLFNBQVM7TUFBRXVCO0lBQWUsQ0FBQyxDQUFDLEVBQUU4QyxJQUFJLEVBQUVDLElBQUksQ0FBQztFQUNyRTtFQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0lrQixRQUFRQSxDQUFDbkQsS0FBSyxFQUFFZ0MsSUFBSSxFQUFFQyxJQUFJLEVBQUU7SUFDeEJELElBQUksS0FBSyxJQUFJLElBQUlBLElBQUksS0FBSyxLQUFLLENBQUMsR0FBR0EsSUFBSSxHQUFJQSxJQUFJLEdBQUcsQ0FBQyxDQUFFO0lBQ3JEO0lBQ0EsSUFBSUEsSUFBSSxDQUFDOUIsUUFBUSxLQUFLLElBQUksRUFBRTtNQUN4QjhCLElBQUksQ0FBQzlCLFFBQVEsR0FBRyxLQUFLO0lBQ3pCO0lBQ0EsT0FBTyxJQUFJLENBQUNvQyxTQUFTLENBQUM7TUFDbEJDLFdBQVcsRUFBRSxDQUFDO01BQ2RDLFdBQVcsRUFBRXhDLEtBQUs7TUFDbEI4QyxXQUFXLEVBQUUsQ0FBQztNQUNkQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO01BQ2ZmO0lBQ0osQ0FBQyxFQUFFQyxJQUFJLENBQUM7RUFDWjtFQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSW1CLFVBQVVBLENBQUN4RSxFQUFFLEVBQUVoQixNQUFNLEVBQUV5RixTQUFTLEVBQUVDLFNBQVMsRUFBRTtJQUN6QyxNQUFNQyxNQUFNLEdBQUcsSUFBSSxDQUFDQyxhQUFhLENBQUMsQ0FBQztJQUNuQyxJQUFJOUUsT0FBTyxDQUFDNkUsTUFBTSxFQUFFM0UsRUFBRSxFQUFFaEIsTUFBTSxDQUFDLEVBQUU7TUFDN0IsT0FBTzZGLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDO1FBQ25CQyxPQUFPLEVBQUUsS0FBSztRQUNkekYsT0FBTyxFQUFFcUYsTUFBTSxDQUFDckY7TUFDcEIsQ0FBQyxDQUFDO0lBQ047SUFDQSxJQUFJd0YsT0FBTztJQUNYLE1BQU1FLE9BQU8sR0FBRyxJQUFJSCxPQUFPLENBQUVsSSxDQUFDLElBQU1tSSxPQUFPLEdBQUduSSxDQUFFLENBQUM7SUFDakQsSUFBSXNJLE1BQU07SUFDVixNQUFNQyxVQUFVLEdBQUc7TUFDZkMsU0FBUyxFQUFFLEtBQUs7TUFDaEJDLFdBQVcsRUFBR0MsVUFBVSxJQUFLO1FBQ3pCLElBQUlDLElBQUk7UUFDUixNQUFNQyxDQUFDLEdBQUcsSUFBSVYsT0FBTyxDQUFFbEksQ0FBQyxJQUFNMkksSUFBSSxHQUFHM0ksQ0FBRSxDQUFDO1FBQ3hDbUksT0FBTyxDQUFDO1VBQ0pDLE9BQU8sRUFBRSxJQUFJO1VBQ2J6RixPQUFPLEVBQUUrRixVQUFVO1VBQ25CRyxXQUFXO1lBQUEsSUFBQUMsSUFBQSxHQUFBcEcsZ0tBQUEsQ0FBRSxhQUFZO2NBQ3JCaUcsSUFBSSxDQUFDLENBQUM7Y0FDTixNQUFNTCxNQUFNO1lBQ2hCLENBQUM7WUFBQSxnQkFIRE8sV0FBV0EsQ0FBQTtjQUFBLE9BQUFDLElBQUEsQ0FBQUMsS0FBQSxPQUFBQyxTQUFBO1lBQUE7VUFBQTtRQUlmLENBQUMsQ0FBQztRQUNGLE9BQU9KLENBQUM7TUFDWjtJQUNKLENBQUM7SUFDRCxJQUFJZCxTQUFTLEtBQUssTUFBTSxFQUFFO01BQ3RCUSxNQUFNLEdBQUcsSUFBSSxDQUFDcEQsT0FBTyxDQUFDN0IsRUFBRSxFQUFFaEIsTUFBTSxFQUFFa0csVUFBVSxDQUFDO0lBQ2pELENBQUMsTUFDSTtNQUNEO01BQ0EsTUFBTVUsY0FBYyxHQUFHLElBQUksQ0FBQ3hFLEtBQUssQ0FBQ3lFLElBQUksQ0FBRXJGLENBQUMsSUFBS1YsT0FBTyxDQUFDVSxDQUFDLEVBQUVSLEVBQUUsRUFBRWhCLE1BQU0sQ0FBQyxDQUFDO01BQ3JFLElBQUk0RyxjQUFjLEVBQUU7UUFDaEJYLE1BQU0sR0FBRyxJQUFJLENBQUNsQixLQUFLLENBQUM2QixjQUFjLEVBQUVFLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDRCxNQUFNLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRWIsVUFBVSxDQUFDLEVBQUU7VUFBRVQsU0FBUyxFQUFFLE1BQU07VUFBRXVCLGdCQUFnQixFQUFFdEI7UUFBVSxDQUFDLENBQUMsQ0FBQztNQUN6SSxDQUFDLE1BQ0ksSUFBSUQsU0FBUyxLQUFLLFNBQVMsRUFBRTtRQUM5QlEsTUFBTSxHQUFHLElBQUksQ0FBQzlCLElBQUksQ0FBQ25ELEVBQUUsRUFBRWhCLE1BQU0sRUFBRThHLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDRCxNQUFNLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRWIsVUFBVSxDQUFDLEVBQUU7VUFBRWMsZ0JBQWdCLEVBQUV0QjtRQUFVLENBQUMsQ0FBQyxDQUFDO01BQ2pILENBQUMsTUFDSSxJQUFJRCxTQUFTLEtBQUssTUFBTSxFQUFFO1FBQzNCUSxNQUFNLEdBQUcsSUFBSSxDQUFDcEQsT0FBTyxDQUFDN0IsRUFBRSxFQUFFaEIsTUFBTSxFQUFFOEcsTUFBTSxDQUFDQyxNQUFNLENBQUNELE1BQU0sQ0FBQ0MsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFYixVQUFVLENBQUMsRUFBRTtVQUFFVCxTQUFTLEVBQUUsTUFBTTtVQUFFbkQsUUFBUSxFQUFFLElBQUk7VUFBRTBFLGdCQUFnQixFQUFFdEI7UUFBVSxDQUFDLENBQUMsQ0FBQztNQUN2SjtJQUNKO0lBQ0EsT0FBT00sT0FBTztFQUNsQjtFQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7RUFDVWlCLFVBQVVBLENBQUEsRUFBRztJQUFBLElBQUFDLE1BQUE7SUFBQSxPQUFBN0csZ0tBQUE7TUFDZixNQUFNc0YsTUFBTSxHQUFHdUIsTUFBSSxDQUFDdEIsYUFBYSxDQUFDLENBQUM7TUFDbkMsSUFBSUQsTUFBTSxFQUFFO1FBQ1IsT0FBTztVQUNIM0UsRUFBRSxFQUFFMkUsTUFBTSxDQUFDckYsT0FBTyxDQUFDNkcsT0FBTztVQUMxQm5ILE1BQU0sRUFBRTJGLE1BQU0sQ0FBQzNGLE1BQU07VUFDckJNLE9BQU8sRUFBRXFGLE1BQU0sQ0FBQ3JGO1FBQ3BCLENBQUM7TUFDTDtNQUNBLE9BQU9PLFNBQVM7SUFBQztFQUNyQjtFQUNBO0FBQ0o7QUFDQTtFQUNVdUcsU0FBU0EsQ0FBQSxFQUFHO0lBQUEsSUFBQUMsTUFBQTtJQUFBLE9BQUFoSCxnS0FBQTtNQUNkLE9BQU9nSCxNQUFJLENBQUN6QixhQUFhLENBQUMsQ0FBQztJQUFDO0VBQ2hDO0VBQ0E7QUFDSjtBQUNBO0FBQ0E7QUFDQTtFQUNVMEIsVUFBVUEsQ0FBQ0MsS0FBSyxFQUFFO0lBQUEsSUFBQUMsTUFBQTtJQUFBLE9BQUFuSCxnS0FBQTtNQUNwQixPQUFPbUgsTUFBSSxDQUFDcEYsS0FBSyxDQUFDbUYsS0FBSyxDQUFDO0lBQUM7RUFDN0I7RUFDQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0VBQ1VFLFNBQVNBLENBQUMxRyxJQUFJLEVBQUU7SUFBQSxJQUFBMkcsTUFBQTtJQUFBLE9BQUFySCxnS0FBQTtNQUNsQixPQUFPcUgsTUFBSSxDQUFDQyxhQUFhLENBQUM1RyxJQUFJLENBQUM7SUFBQztFQUNwQztFQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7RUFDVTZHLFdBQVdBLENBQUM3RyxJQUFJLEVBQUU7SUFBQSxJQUFBOEcsTUFBQTtJQUFBLE9BQUF4SCxnS0FBQTtNQUNwQixPQUFPd0gsTUFBSSxDQUFDQyxlQUFlLENBQUMvRyxJQUFJLENBQUM7SUFBQztFQUN0QztFQUNBO0FBQ0o7QUFDQTtFQUNVZ0gsU0FBU0EsQ0FBQSxFQUFHO0lBQUEsSUFBQUMsTUFBQTtJQUFBLE9BQUEzSCxnS0FBQTtNQUNkLE9BQU93RixPQUFPLENBQUNDLE9BQU8sQ0FBQ2tDLE1BQUksQ0FBQzVGLEtBQUssQ0FBQzhCLE1BQU0sQ0FBQztJQUFDO0VBQzlDO0VBQ0EwQixhQUFhQSxDQUFBLEVBQUc7SUFDWixPQUFPLElBQUksQ0FBQ3hELEtBQUssQ0FBQyxJQUFJLENBQUNBLEtBQUssQ0FBQzhCLE1BQU0sR0FBRyxDQUFDLENBQUM7RUFDNUM7RUFDQXlELGFBQWFBLENBQUM1RyxJQUFJLEdBQUcsSUFBSSxDQUFDNkUsYUFBYSxDQUFDLENBQUMsRUFBRTtJQUN2QyxPQUFPLENBQUMsRUFBRTdFLElBQUksSUFBSSxJQUFJLENBQUMrRyxlQUFlLENBQUMvRyxJQUFJLENBQUMsQ0FBQztFQUNqRDtFQUNBK0csZUFBZUEsQ0FBQy9HLElBQUksR0FBRyxJQUFJLENBQUM2RSxhQUFhLENBQUMsQ0FBQyxFQUFFO0lBQ3pDLElBQUksQ0FBQzdFLElBQUksRUFBRTtNQUNQLE9BQU9GLFNBQVM7SUFDcEI7SUFDQSxNQUFNdUIsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSztJQUN4QixNQUFNbUYsS0FBSyxHQUFHbkYsS0FBSyxDQUFDNkYsT0FBTyxDQUFDbEgsSUFBSSxDQUFDO0lBQ2pDLE9BQU93RyxLQUFLLEdBQUcsQ0FBQyxHQUFHbkYsS0FBSyxDQUFDbUYsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHMUcsU0FBUztFQUNuRDtFQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7RUFDVTZELFNBQVNBLENBQUNPLEVBQUUsRUFBRVosSUFBSSxFQUFFO0lBQUEsSUFBQTZELE1BQUE7SUFBQSxPQUFBN0gsZ0tBQUE7TUFDdEIsSUFBSThILEVBQUUsRUFBRUMsRUFBRTtNQUNWLElBQUlGLE1BQUksQ0FBQ2hHLGVBQWUsS0FBSyxDQUFDaUcsRUFBRSxHQUFHbEQsRUFBRSxDQUFDYixJQUFJLE1BQU0sSUFBSSxJQUFJK0QsRUFBRSxLQUFLLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHQSxFQUFFLENBQUNFLFVBQVUsQ0FBQyxFQUFFO1FBQzdGLE9BQU8sS0FBSztNQUNoQjtNQUNBLE1BQU1yQyxPQUFPLEdBQUcsSUFBSUgsT0FBTyxDQUFDLENBQUNDLE9BQU8sRUFBRXdDLE1BQU0sS0FBSztRQUM3Q3JELEVBQUUsQ0FBQ2EsT0FBTyxHQUFHQSxPQUFPO1FBQ3BCYixFQUFFLENBQUNxRCxNQUFNLEdBQUdBLE1BQU07TUFDdEIsQ0FBQyxDQUFDO01BQ0ZyRCxFQUFFLENBQUNaLElBQUksR0FBR0EsSUFBSTtNQUNkO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtNQUNRLElBQUlZLEVBQUUsQ0FBQ2IsSUFBSSxJQUFJYSxFQUFFLENBQUNiLElBQUksQ0FBQytCLFNBQVMsS0FBSyxLQUFLLElBQUkrQixNQUFJLENBQUNqRyxTQUFTLEVBQUU7UUFDMUQsTUFBTXNHLE1BQU0sR0FBR3ZGLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLFlBQVksQ0FBQztRQUNuRCxJQUFJc0YsTUFBTSxFQUFFO1VBQ1IsTUFBTUMsYUFBYSxTQUFTRCxNQUFNLENBQUNDLGFBQWEsQ0FBQyxDQUFDO1VBQ2xELElBQUlBLGFBQWEsS0FBSyxLQUFLLEVBQUU7WUFDekIsT0FBTyxLQUFLO1VBQ2hCO1VBQ0EsSUFBSSxPQUFPQSxhQUFhLEtBQUssUUFBUSxFQUFFO1lBQ25DRCxNQUFNLENBQUNwRSxJQUFJLENBQUNxRSxhQUFhLEVBQUV2RCxFQUFFLENBQUNiLElBQUksQ0FBQ3FCLFNBQVMsSUFBSSxNQUFNLENBQUM7WUFDdkQsT0FBTyxLQUFLO1VBQ2hCO1FBQ0o7TUFDSjtNQUNBO01BQ0EsSUFBSSxDQUFDLENBQUMyQyxFQUFFLEdBQUduRCxFQUFFLENBQUNMLFdBQVcsTUFBTSxJQUFJLElBQUl3RCxFQUFFLEtBQUssS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUdBLEVBQUUsQ0FBQ2xFLE1BQU0sTUFBTSxDQUFDLEVBQUU7UUFDOUVlLEVBQUUsQ0FBQ0wsV0FBVyxHQUFHL0QsU0FBUztNQUM5QjtNQUNBO01BQ0FxSCxNQUFJLENBQUNuRyxVQUFVLENBQUNvQyxJQUFJLENBQUNjLEVBQUUsQ0FBQztNQUN4QjtNQUNBO01BQ0FpRCxNQUFJLENBQUNPLFFBQVEsQ0FBQyxDQUFDO01BQ2YsT0FBT3pDLE9BQU87SUFBQztFQUNuQjtFQUNBMEMsT0FBT0EsQ0FBQ0MsTUFBTSxFQUFFMUQsRUFBRSxFQUFFO0lBQ2hCLElBQUksSUFBSSxDQUFDOUMsU0FBUyxFQUFFO01BQ2hCLElBQUksQ0FBQ3lHLFNBQVMsQ0FBQyw4QkFBOEIsRUFBRTNELEVBQUUsQ0FBQztNQUNsRDtJQUNKO0lBQ0EsSUFBSUEsRUFBRSxDQUFDWixJQUFJLEVBQUU7TUFDVFksRUFBRSxDQUFDWixJQUFJLENBQUNzRSxNQUFNLENBQUNFLFlBQVksRUFBRUYsTUFBTSxDQUFDRyxrQkFBa0IsRUFBRUgsTUFBTSxDQUFDSSxZQUFZLEVBQUVKLE1BQU0sQ0FBQ0ssV0FBVyxFQUFFTCxNQUFNLENBQUNsRCxTQUFTLENBQUM7SUFDdEg7SUFDQVIsRUFBRSxDQUFDYSxPQUFPLENBQUM2QyxNQUFNLENBQUNFLFlBQVksQ0FBQztJQUMvQixJQUFJNUQsRUFBRSxDQUFDYixJQUFJLENBQUMrQixTQUFTLEtBQUssS0FBSyxJQUFJLElBQUksQ0FBQ2xFLFNBQVMsRUFBRTtNQUMvQyxNQUFNc0csTUFBTSxHQUFHdkYsUUFBUSxDQUFDQyxhQUFhLENBQUMsWUFBWSxDQUFDO01BQ25ELElBQUlzRixNQUFNLEVBQUU7UUFDUixNQUFNOUMsU0FBUyxHQUFHa0QsTUFBTSxDQUFDbEQsU0FBUyxLQUFLLE1BQU0sR0FBRyxNQUFNLEdBQUcsU0FBUztRQUNsRThDLE1BQU0sQ0FBQ1UsVUFBVSxDQUFDeEQsU0FBUyxDQUFDO01BQ2hDO0lBQ0o7RUFDSjtFQUNBeUQsTUFBTUEsQ0FBQ0MsWUFBWSxFQUFFbEUsRUFBRSxFQUFFO0lBQ3JCLElBQUksSUFBSSxDQUFDOUMsU0FBUyxFQUFFO01BQ2hCLElBQUksQ0FBQ3lHLFNBQVMsQ0FBQyw4QkFBOEIsRUFBRTNELEVBQUUsQ0FBQztNQUNsRDtJQUNKO0lBQ0EsSUFBSSxDQUFDbEQsVUFBVSxDQUFDbUMsTUFBTSxHQUFHLENBQUM7SUFDMUIsSUFBSSxDQUFDMEUsU0FBUyxDQUFDTyxZQUFZLEVBQUVsRSxFQUFFLENBQUM7RUFDcEM7RUFDQTJELFNBQVNBLENBQUNPLFlBQVksRUFBRWxFLEVBQUUsRUFBRTtJQUN4QixJQUFJQSxFQUFFLENBQUNaLElBQUksRUFBRTtNQUNUWSxFQUFFLENBQUNaLElBQUksQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFOEUsWUFBWSxDQUFDO0lBQ3ZDO0lBQ0EsSUFBSWxFLEVBQUUsQ0FBQ3FELE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQ25HLFNBQVMsRUFBRTtNQUM5QjhDLEVBQUUsQ0FBQ3FELE1BQU0sQ0FBQ2EsWUFBWSxDQUFDO0lBQzNCLENBQUMsTUFDSTtNQUNEbEUsRUFBRSxDQUFDYSxPQUFPLENBQUMsS0FBSyxDQUFDO0lBQ3JCO0VBQ0o7RUFDQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0VBQ0kyQyxRQUFRQSxDQUFBLEVBQUc7SUFDUDtJQUNBO0lBQ0EsSUFBSSxJQUFJLENBQUN2RyxlQUFlLEVBQUU7TUFDdEIsT0FBTyxLQUFLO0lBQ2hCO0lBQ0E7SUFDQSxNQUFNK0MsRUFBRSxHQUFHLElBQUksQ0FBQ2xELFVBQVUsQ0FBQ3FILEtBQUssQ0FBQyxDQUFDO0lBQ2xDLElBQUksQ0FBQ25FLEVBQUUsRUFBRTtNQUNMLE9BQU8sS0FBSztJQUNoQjtJQUNBLElBQUksQ0FBQ29FLGFBQWEsQ0FBQ3BFLEVBQUUsQ0FBQztJQUN0QixPQUFPLElBQUk7RUFDZjtFQUNBO0VBQ01vRSxhQUFhQSxDQUFDcEUsRUFBRSxFQUFFO0lBQUEsSUFBQXFFLE1BQUE7SUFBQSxPQUFBakosZ0tBQUE7TUFDcEIsSUFBSTtRQUNBO1FBQ0FpSixNQUFJLENBQUN6SCxnQkFBZ0IsQ0FBQ3lCLElBQUksQ0FBQyxDQUFDO1FBQzVCZ0csTUFBSSxDQUFDcEgsZUFBZSxHQUFHLElBQUk7UUFDM0JvSCxNQUFJLENBQUNDLFNBQVMsQ0FBQ3RFLEVBQUUsQ0FBQztRQUNsQixNQUFNK0QsV0FBVyxHQUFHTSxNQUFJLENBQUMxRCxhQUFhLENBQUMsQ0FBQztRQUN4QyxNQUFNbUQsWUFBWSxHQUFHTyxNQUFJLENBQUNFLGVBQWUsQ0FBQ3ZFLEVBQUUsRUFBRStELFdBQVcsQ0FBQztRQUMxRCxJQUFJLENBQUNBLFdBQVcsSUFBSSxDQUFDRCxZQUFZLEVBQUU7VUFDL0IsTUFBTSxJQUFJVSxLQUFLLENBQUMscUNBQXFDLENBQUM7UUFDMUQ7UUFDQSxJQUFJVixZQUFZLElBQUlBLFlBQVksQ0FBQzlJLEtBQUssS0FBS1AsY0FBYyxFQUFFO1VBQ3ZELE1BQU1xSixZQUFZLENBQUM3SSxJQUFJLENBQUNvSixNQUFJLENBQUNwRyxFQUFFLENBQUM7UUFDcEM7UUFDQW9HLE1BQUksQ0FBQ0ksWUFBWSxDQUFDWCxZQUFZLEVBQUVDLFdBQVcsRUFBRS9ELEVBQUUsQ0FBQztRQUNoRDtRQUNBLE1BQU02RCxrQkFBa0IsR0FBRyxDQUFDN0QsRUFBRSxDQUFDMEUsMEJBQTBCLElBQUkxRSxFQUFFLENBQUMyRSx5QkFBeUIsS0FBS2IsWUFBWSxLQUFLQyxXQUFXO1FBQzFILElBQUlGLGtCQUFrQixJQUFJN0QsRUFBRSxDQUFDYixJQUFJLElBQUk0RSxXQUFXLEVBQUU7VUFDOUMsTUFBTWEsZUFBZSxHQUFHNUUsRUFBRSxDQUFDYixJQUFJLENBQUNxQixTQUFTLEtBQUssTUFBTTtVQUNwRDtBQUNoQjtBQUNBO0FBQ0E7VUFDZ0IsSUFBSW9FLGVBQWUsRUFBRTtZQUNqQjVFLEVBQUUsQ0FBQ2IsSUFBSSxDQUFDNEMsZ0JBQWdCLEdBQUcvQixFQUFFLENBQUNiLElBQUksQ0FBQzRDLGdCQUFnQixLQUFLK0IsWUFBWSxLQUFLLElBQUksSUFBSUEsWUFBWSxLQUFLLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHQSxZQUFZLENBQUMvQixnQkFBZ0IsQ0FBQztVQUN0SjtVQUNBZ0MsV0FBVyxDQUFDaEMsZ0JBQWdCLEdBQUcvQixFQUFFLENBQUNiLElBQUksQ0FBQzRDLGdCQUFnQjtRQUMzRDtRQUNBLElBQUkyQixNQUFNO1FBQ1YsSUFBSUcsa0JBQWtCLEVBQUU7VUFDcEJILE1BQU0sU0FBU1csTUFBSSxDQUFDckssVUFBVSxDQUFDOEosWUFBWSxFQUFFQyxXQUFXLEVBQUUvRCxFQUFFLENBQUM7UUFDakUsQ0FBQyxNQUNJO1VBQ0Q7VUFDQTtVQUNBO1VBQ0E7VUFDQTBELE1BQU0sR0FBRztZQUNMRSxZQUFZLEVBQUUsSUFBSTtZQUNsQkMsa0JBQWtCLEVBQUU7VUFDeEIsQ0FBQztRQUNMO1FBQ0FRLE1BQUksQ0FBQ1osT0FBTyxDQUFDQyxNQUFNLEVBQUUxRCxFQUFFLENBQUM7UUFDeEJxRSxNQUFJLENBQUN4SCxlQUFlLENBQUN3QixJQUFJLENBQUMsQ0FBQztNQUMvQixDQUFDLENBQ0QsT0FBTzZGLFlBQVksRUFBRTtRQUNqQkcsTUFBSSxDQUFDSixNQUFNLENBQUNDLFlBQVksRUFBRWxFLEVBQUUsQ0FBQztNQUNqQztNQUNBcUUsTUFBSSxDQUFDcEgsZUFBZSxHQUFHLEtBQUs7TUFDNUJvSCxNQUFJLENBQUNiLFFBQVEsQ0FBQyxDQUFDO0lBQUM7RUFDcEI7RUFDQWMsU0FBU0EsQ0FBQ3RFLEVBQUUsRUFBRTtJQUNWLElBQUlrRCxFQUFFLEVBQUVDLEVBQUU7SUFDVixJQUFJMEIsRUFBRTtJQUNOLE1BQU1DLFdBQVcsR0FBRyxJQUFJLENBQUMzSCxLQUFLLENBQUM4QixNQUFNO0lBQ3JDLENBQUNpRSxFQUFFLEdBQUdsRCxFQUFFLENBQUNiLElBQUksTUFBTSxJQUFJLElBQUkrRCxFQUFFLEtBQUssS0FBSyxDQUFDLEdBQUdBLEVBQUUsR0FBSWxELEVBQUUsQ0FBQ2IsSUFBSSxHQUFHLENBQUMsQ0FBRTtJQUM5RCxDQUFDZ0UsRUFBRSxHQUFHLENBQUMwQixFQUFFLEdBQUc3RSxFQUFFLENBQUNiLElBQUksRUFBRTdELFFBQVEsTUFBTSxJQUFJLElBQUk2SCxFQUFFLEtBQUssS0FBSyxDQUFDLEdBQUdBLEVBQUUsR0FBSTBCLEVBQUUsQ0FBQ3ZKLFFBQVEsR0FBRyxJQUFJLENBQUNBLFFBQVM7SUFDN0YsSUFBSTBFLEVBQUUsQ0FBQ0csVUFBVSxLQUFLdkUsU0FBUyxFQUFFO01BQzdCL0IsdURBQU0sQ0FBQ21HLEVBQUUsQ0FBQ0MsV0FBVyxLQUFLckUsU0FBUyxFQUFFLDhCQUE4QixDQUFDO01BQ3BFL0IsdURBQU0sQ0FBQ21HLEVBQUUsQ0FBQ0UsV0FBVyxLQUFLdEUsU0FBUyxFQUFFLDhCQUE4QixDQUFDO01BQ3BFLE1BQU0wRyxLQUFLLEdBQUcsSUFBSSxDQUFDbkYsS0FBSyxDQUFDNkYsT0FBTyxDQUFDaEQsRUFBRSxDQUFDRyxVQUFVLENBQUM7TUFDL0MsSUFBSW1DLEtBQUssR0FBRyxDQUFDLEVBQUU7UUFDWCxNQUFNLElBQUlrQyxLQUFLLENBQUMsMEJBQTBCLENBQUM7TUFDL0M7TUFDQXhFLEVBQUUsQ0FBQ0MsV0FBVyxJQUFJcUMsS0FBSztJQUMzQjtJQUNBLElBQUl0QyxFQUFFLENBQUNDLFdBQVcsS0FBS3JFLFNBQVMsRUFBRTtNQUM5QixJQUFJb0UsRUFBRSxDQUFDQyxXQUFXLEdBQUcsQ0FBQyxFQUFFO1FBQ3BCRCxFQUFFLENBQUNDLFdBQVcsR0FBRzZFLFdBQVcsR0FBRyxDQUFDO01BQ3BDO01BQ0EsSUFBSTlFLEVBQUUsQ0FBQ0UsV0FBVyxHQUFHLENBQUMsRUFBRTtRQUNwQkYsRUFBRSxDQUFDRSxXQUFXLEdBQUc0RSxXQUFXLEdBQUc5RSxFQUFFLENBQUNDLFdBQVc7TUFDakQ7TUFDQUQsRUFBRSxDQUFDMkUseUJBQXlCLEdBQUczRSxFQUFFLENBQUNFLFdBQVcsR0FBRyxDQUFDLElBQUlGLEVBQUUsQ0FBQ0MsV0FBVyxHQUFHRCxFQUFFLENBQUNFLFdBQVcsS0FBSzRFLFdBQVc7SUFDeEc7SUFDQSxJQUFJOUUsRUFBRSxDQUFDTCxXQUFXLEVBQUU7TUFDaEI7TUFDQTtNQUNBLElBQUlLLEVBQUUsQ0FBQ04sV0FBVyxHQUFHLENBQUMsSUFBSU0sRUFBRSxDQUFDTixXQUFXLEdBQUdvRixXQUFXLEVBQUU7UUFDcEQ5RSxFQUFFLENBQUNOLFdBQVcsR0FBR29GLFdBQVc7TUFDaEM7TUFDQTlFLEVBQUUsQ0FBQzBFLDBCQUEwQixHQUFHMUUsRUFBRSxDQUFDTixXQUFXLEtBQUtvRixXQUFXO0lBQ2xFO0lBQ0EsTUFBTW5GLFdBQVcsR0FBR0ssRUFBRSxDQUFDTCxXQUFXO0lBQ2xDLElBQUksQ0FBQ0EsV0FBVyxFQUFFO01BQ2Q7SUFDSjtJQUNBOUYsdURBQU0sQ0FBQzhGLFdBQVcsQ0FBQ1YsTUFBTSxHQUFHLENBQUMsRUFBRSx3QkFBd0IsQ0FBQztJQUN4RCxNQUFNOEYsZUFBZSxHQUFHN0ksY0FBYyxDQUFDeUQsV0FBVyxDQUFDO0lBQ25ELElBQUlvRixlQUFlLENBQUM5RixNQUFNLEtBQUssQ0FBQyxFQUFFO01BQzlCLE1BQU0sSUFBSXVGLEtBQUssQ0FBQyx5QkFBeUIsQ0FBQztJQUM5QztJQUNBO0lBQ0EsS0FBSyxNQUFNMUksSUFBSSxJQUFJaUosZUFBZSxFQUFFO01BQ2hDakosSUFBSSxDQUFDUixRQUFRLEdBQUcwRSxFQUFFLENBQUNiLElBQUksQ0FBQzdELFFBQVE7TUFDaEMsTUFBTUssR0FBRyxHQUFHRyxJQUFJLENBQUNILEdBQUc7TUFDcEIsSUFBSUEsR0FBRyxJQUFJQSxHQUFHLEtBQUssSUFBSSxFQUFFO1FBQ3JCLE1BQU0sSUFBSTZJLEtBQUssQ0FBQyxvQ0FBb0MsQ0FBQztNQUN6RDtNQUNBLElBQUkxSSxJQUFJLENBQUNkLEtBQUssS0FBS0wsb0JBQW9CLEVBQUU7UUFDckMsTUFBTSxJQUFJNkosS0FBSyxDQUFDLHFDQUFxQyxDQUFDO01BQzFEO0lBQ0o7SUFDQXhFLEVBQUUsQ0FBQ0wsV0FBVyxHQUFHb0YsZUFBZTtFQUNwQztFQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSVIsZUFBZUEsQ0FBQ3ZFLEVBQUUsRUFBRStELFdBQVcsRUFBRTtJQUM3QjtJQUNBLE1BQU1wRSxXQUFXLEdBQUdLLEVBQUUsQ0FBQ0wsV0FBVztJQUNsQyxJQUFJQSxXQUFXLEtBQUsvRCxTQUFTLEVBQUU7TUFDM0IsT0FBTytELFdBQVcsQ0FBQ0EsV0FBVyxDQUFDVixNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQzlDO0lBQ0E7SUFDQSxNQUFNZ0IsV0FBVyxHQUFHRCxFQUFFLENBQUNDLFdBQVc7SUFDbEMsSUFBSUEsV0FBVyxLQUFLckUsU0FBUyxFQUFFO01BQzNCLE1BQU11QixLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLO01BQ3hCLE1BQU02SCxTQUFTLEdBQUcvRSxXQUFXLEdBQUdELEVBQUUsQ0FBQ0UsV0FBVztNQUM5QyxLQUFLLElBQUkrRSxDQUFDLEdBQUc5SCxLQUFLLENBQUM4QixNQUFNLEdBQUcsQ0FBQyxFQUFFZ0csQ0FBQyxJQUFJLENBQUMsRUFBRUEsQ0FBQyxFQUFFLEVBQUU7UUFDeEMsTUFBTW5KLElBQUksR0FBR3FCLEtBQUssQ0FBQzhILENBQUMsQ0FBQztRQUNyQixJQUFJLENBQUNBLENBQUMsR0FBR2hGLFdBQVcsSUFBSWdGLENBQUMsSUFBSUQsU0FBUyxLQUFLbEosSUFBSSxLQUFLaUksV0FBVyxFQUFFO1VBQzdELE9BQU9qSSxJQUFJO1FBQ2Y7TUFDSjtJQUNKO0lBQ0EsT0FBT0YsU0FBUztFQUNwQjtFQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0k2SSxZQUFZQSxDQUFDWCxZQUFZLEVBQUVDLFdBQVcsRUFBRS9ELEVBQUUsRUFBRTtJQUN4QyxJQUFJa0QsRUFBRSxFQUFFQyxFQUFFLEVBQUUwQixFQUFFO0lBQ2RoTCx1REFBTSxDQUFDa0ssV0FBVyxJQUFJRCxZQUFZLEVBQUUsNENBQTRDLENBQUM7SUFDakZqSyx1REFBTSxDQUFDbUcsRUFBRSxDQUFDYSxPQUFPLEVBQUUsdUJBQXVCLENBQUM7SUFDM0NoSCx1REFBTSxDQUFDbUcsRUFBRSxDQUFDcUQsTUFBTSxFQUFFLHNCQUFzQixDQUFDO0lBQ3pDO0lBQ0EsTUFBTWxFLElBQUksR0FBR2EsRUFBRSxDQUFDYixJQUFJO0lBQ3BCLE1BQU07TUFBRVEsV0FBVztNQUFFTSxXQUFXO01BQUVDO0lBQVksQ0FBQyxHQUFHRixFQUFFO0lBQ3BEO0lBQ0EsSUFBSWtGLFlBQVk7SUFDaEI7SUFDQSxJQUFJakYsV0FBVyxLQUFLckUsU0FBUyxJQUFJc0UsV0FBVyxLQUFLdEUsU0FBUyxFQUFFO01BQ3hEL0IsdURBQU0sQ0FBQ29HLFdBQVcsSUFBSSxDQUFDLEVBQUUsaUNBQWlDLENBQUM7TUFDM0RwRyx1REFBTSxDQUFDcUcsV0FBVyxJQUFJLENBQUMsRUFBRSxpQ0FBaUMsQ0FBQztNQUMzRGdGLFlBQVksR0FBRyxFQUFFO01BQ2pCLEtBQUssSUFBSUQsQ0FBQyxHQUFHaEYsV0FBVyxFQUFFZ0YsQ0FBQyxHQUFHaEYsV0FBVyxHQUFHQyxXQUFXLEVBQUUrRSxDQUFDLEVBQUUsRUFBRTtRQUMxRCxNQUFNbkosSUFBSSxHQUFHLElBQUksQ0FBQ3FCLEtBQUssQ0FBQzhILENBQUMsQ0FBQztRQUMxQixJQUFJbkosSUFBSSxLQUFLRixTQUFTLElBQUlFLElBQUksS0FBS2dJLFlBQVksSUFBSWhJLElBQUksS0FBS2lJLFdBQVcsRUFBRTtVQUNyRW1CLFlBQVksQ0FBQ2hHLElBQUksQ0FBQ3BELElBQUksQ0FBQztRQUMzQjtNQUNKO01BQ0E7TUFDQSxDQUFDb0gsRUFBRSxHQUFHL0QsSUFBSSxDQUFDcUIsU0FBUyxNQUFNLElBQUksSUFBSTBDLEVBQUUsS0FBSyxLQUFLLENBQUMsR0FBR0EsRUFBRSxHQUFJL0QsSUFBSSxDQUFDcUIsU0FBUyxHQUFHLE1BQU87SUFDcEY7SUFDQSxNQUFNMkUsYUFBYSxHQUFHLElBQUksQ0FBQ2hJLEtBQUssQ0FBQzhCLE1BQU0sSUFBSSxDQUFDa0UsRUFBRSxHQUFHeEQsV0FBVyxLQUFLLElBQUksSUFBSUEsV0FBVyxLQUFLLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHQSxXQUFXLENBQUNWLE1BQU0sTUFBTSxJQUFJLElBQUlrRSxFQUFFLEtBQUssS0FBSyxDQUFDLEdBQUdBLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSWpELFdBQVcsS0FBSyxJQUFJLElBQUlBLFdBQVcsS0FBSyxLQUFLLENBQUMsR0FBR0EsV0FBVyxHQUFHLENBQUMsQ0FBQztJQUN2T3JHLHVEQUFNLENBQUNzTCxhQUFhLElBQUksQ0FBQyxFQUFFLG1DQUFtQyxDQUFDO0lBQy9ELElBQUlBLGFBQWEsS0FBSyxDQUFDLEVBQUU7TUFDckJoTSxxREFBZSxDQUFDLGtIQUFrSCxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM4RSxFQUFFLENBQUM7TUFDbEosTUFBTSxJQUFJdUcsS0FBSyxDQUFDLCtDQUErQyxDQUFDO0lBQ3BFO0lBQ0E7SUFDQTtJQUNBLElBQUk3RSxXQUFXLEVBQUU7TUFDYjtNQUNBLElBQUlMLFdBQVcsR0FBR1UsRUFBRSxDQUFDTixXQUFXO01BQ2hDLEtBQUssTUFBTTVELElBQUksSUFBSTZELFdBQVcsRUFBRTtRQUM1QixJQUFJLENBQUN5RixZQUFZLENBQUN0SixJQUFJLEVBQUV3RCxXQUFXLENBQUM7UUFDcENBLFdBQVcsRUFBRTtNQUNqQjtNQUNBLElBQUlVLEVBQUUsQ0FBQzBFLDBCQUEwQixFQUFFO1FBQy9CO1FBQ0EsQ0FBQ0csRUFBRSxHQUFHMUYsSUFBSSxDQUFDcUIsU0FBUyxNQUFNLElBQUksSUFBSXFFLEVBQUUsS0FBSyxLQUFLLENBQUMsR0FBR0EsRUFBRSxHQUFJMUYsSUFBSSxDQUFDcUIsU0FBUyxHQUFHLFNBQVU7TUFDdkY7SUFDSjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQSxJQUFJMEUsWUFBWSxJQUFJQSxZQUFZLENBQUNqRyxNQUFNLEdBQUcsQ0FBQyxFQUFFO01BQ3pDLEtBQUssTUFBTW5ELElBQUksSUFBSW9KLFlBQVksRUFBRTtRQUM3QnBMLHFEQUFTLENBQUNnQyxJQUFJLENBQUNULE9BQU8sRUFBRWpCLGlEQUFvQixDQUFDO1FBQzdDTixxREFBUyxDQUFDZ0MsSUFBSSxDQUFDVCxPQUFPLEVBQUVmLGlEQUFtQixDQUFDO1FBQzVDUixxREFBUyxDQUFDZ0MsSUFBSSxDQUFDVCxPQUFPLEVBQUVuQixpREFBcUIsQ0FBQztNQUNsRDtNQUNBO01BQ0EsS0FBSyxNQUFNNEIsSUFBSSxJQUFJb0osWUFBWSxFQUFFO1FBQzdCLElBQUksQ0FBQ0csV0FBVyxDQUFDdkosSUFBSSxDQUFDO01BQzFCO0lBQ0o7RUFDSjtFQUNNOUIsVUFBVUEsQ0FBQzhKLFlBQVksRUFBRUMsV0FBVyxFQUFFL0QsRUFBRSxFQUFFO0lBQUEsSUFBQXNGLE1BQUE7SUFBQSxPQUFBbEssZ0tBQUE7TUFDNUM7TUFDQTtNQUNBLE1BQU0rRCxJQUFJLEdBQUdhLEVBQUUsQ0FBQ2IsSUFBSTtNQUNwQixNQUFNb0csZ0JBQWdCLEdBQUdwRyxJQUFJLENBQUNxRyxpQkFBaUIsR0FDeENDLEdBQUcsSUFBSztRQUNQO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtRQUNnQixJQUFJQSxHQUFHLEtBQUs3SixTQUFTLElBQUksQ0FBQzBKLE1BQUksQ0FBQ3ZJLDRCQUE0QixFQUFFO1VBQ3pEdUksTUFBSSxDQUFDdkksNEJBQTRCLEdBQUcsSUFBSTtVQUN4QzBJLEdBQUcsQ0FBQ0MsUUFBUSxDQUFDLE1BQU07WUFDZkosTUFBSSxDQUFDdkksNEJBQTRCLEdBQUcsS0FBSztVQUM3QyxDQUFDLEVBQUU7WUFBRTRJLGVBQWUsRUFBRTtVQUFLLENBQUMsQ0FBQztVQUM3QjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO1VBQ29CRixHQUFHLENBQUNHLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUM1QixDQUFDLE1BQ0k7VUFDRE4sTUFBSSxDQUFDTyxLQUFLLEdBQUdKLEdBQUc7UUFDcEI7TUFDSixDQUFDLEdBQ0M3SixTQUFTO01BQ2YsTUFBTXVDLElBQUksR0FBR3BGLHFEQUFVLENBQUN1TSxNQUFJLENBQUM7TUFDN0IsTUFBTWxFLFVBQVUsR0FBRzBDLFlBQVksQ0FBQ3pJLE9BQU87TUFDdkM7TUFDQSxNQUFNeUssU0FBUyxHQUFHL0IsV0FBVyxJQUFJQSxXQUFXLENBQUMxSSxPQUFPO01BQ3BELE1BQU0wSyxhQUFhLEdBQUdsRSxNQUFNLENBQUNDLE1BQU0sQ0FBQ0QsTUFBTSxDQUFDQyxNQUFNLENBQUM7UUFBRTNELElBQUk7UUFBRTZILFVBQVUsRUFBRVYsTUFBSSxDQUFDNUMsYUFBYSxDQUFDb0IsWUFBWSxDQUFDO1FBQUVtQyxNQUFNLEVBQUVYLE1BQUksQ0FBQ3JILEVBQUU7UUFBRXNILGdCQUFnQjtRQUFFbEksUUFBUSxFQUFFaUksTUFBSSxDQUFDakksUUFBUSxJQUFJcEUsaURBQU0sQ0FBQ21GLFVBQVUsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDO1FBQUVnRCxVQUFVO1FBQ2pOMEU7TUFBVSxDQUFDLEVBQUUzRyxJQUFJLENBQUMsRUFBRTtRQUFFNEMsZ0JBQWdCLEVBQUU1QyxJQUFJLENBQUM0QyxnQkFBZ0IsSUFBSXVELE1BQUksQ0FBQzdFLFNBQVMsSUFBSXhILGlEQUFNLENBQUNpTixHQUFHLENBQUMsY0FBYztNQUFFLENBQUMsQ0FBQztNQUNwSCxNQUFNO1FBQUV0QztNQUFhLENBQUMsU0FBUzVKLHFEQUFVLENBQUMrTCxhQUFhLENBQUM7TUFDeEQsT0FBT1QsTUFBSSxDQUFDYSxnQkFBZ0IsQ0FBQ3ZDLFlBQVksRUFBRUUsWUFBWSxFQUFFQyxXQUFXLEVBQUU1RSxJQUFJLENBQUM7SUFBQztFQUNoRjtFQUNBZ0gsZ0JBQWdCQSxDQUFDdkMsWUFBWSxFQUFFRSxZQUFZLEVBQUVDLFdBQVcsRUFBRTVFLElBQUksRUFBRTtJQUM1RDtBQUNSO0FBQ0E7QUFDQTtJQUNRLE1BQU1pSCxVQUFVLEdBQUd4QyxZQUFZLEdBQUdFLFlBQVksR0FBR0MsV0FBVztJQUM1RCxJQUFJcUMsVUFBVSxFQUFFO01BQ1osSUFBSSxDQUFDQyxvQkFBb0IsQ0FBQ0QsVUFBVSxDQUFDO0lBQ3pDO0lBQ0EsT0FBTztNQUNIeEMsWUFBWTtNQUNaQyxrQkFBa0IsRUFBRSxJQUFJO01BQ3hCQyxZQUFZO01BQ1pDLFdBQVc7TUFDWHZELFNBQVMsRUFBRXJCLElBQUksQ0FBQ3FCO0lBQ3BCLENBQUM7RUFDTDtFQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSTRFLFlBQVlBLENBQUN0SixJQUFJLEVBQUV3RyxLQUFLLEVBQUU7SUFDdEIsTUFBTW5GLEtBQUssR0FBRyxJQUFJLENBQUNBLEtBQUs7SUFDeEIsTUFBTW1KLGFBQWEsR0FBR25KLEtBQUssQ0FBQzZGLE9BQU8sQ0FBQ2xILElBQUksQ0FBQztJQUN6QyxJQUFJd0ssYUFBYSxHQUFHLENBQUMsQ0FBQyxFQUFFO01BQ3BCek0sdURBQU0sQ0FBQ2lDLElBQUksQ0FBQ0gsR0FBRyxLQUFLLElBQUksRUFBRSw2QkFBNkIsQ0FBQztNQUN4RDtNQUNBd0IsS0FBSyxDQUFDb0osTUFBTSxDQUFDRCxhQUFhLEVBQUUsQ0FBQyxDQUFDO01BQzlCO01BQ0FuSixLQUFLLENBQUNvSixNQUFNLENBQUNqRSxLQUFLLEVBQUUsQ0FBQyxFQUFFeEcsSUFBSSxDQUFDO0lBQ2hDLENBQUMsTUFDSTtNQUNEakMsdURBQU0sQ0FBQyxDQUFDaUMsSUFBSSxDQUFDSCxHQUFHLEVBQUUsYUFBYSxDQUFDO01BQ2hDO01BQ0E7TUFDQUcsSUFBSSxDQUFDSCxHQUFHLEdBQUcsSUFBSTtNQUNmd0IsS0FBSyxDQUFDb0osTUFBTSxDQUFDakUsS0FBSyxFQUFFLENBQUMsRUFBRXhHLElBQUksQ0FBQztJQUNoQztFQUNKO0VBQ0E7QUFDSjtBQUNBO0FBQ0E7QUFDQTtFQUNJcUUsVUFBVUEsQ0FBQ3JFLElBQUksRUFBRTtJQUNiakMsdURBQU0sQ0FBQ2lDLElBQUksQ0FBQ2QsS0FBSyxLQUFLTixtQkFBbUIsSUFBSW9CLElBQUksQ0FBQ2QsS0FBSyxLQUFLTCxvQkFBb0IsRUFBRSwwQ0FBMEMsQ0FBQztJQUM3SCxNQUFNd0MsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSztJQUN4QixNQUFNbUYsS0FBSyxHQUFHbkYsS0FBSyxDQUFDNkYsT0FBTyxDQUFDbEgsSUFBSSxDQUFDO0lBQ2pDakMsdURBQU0sQ0FBQ3lJLEtBQUssR0FBRyxDQUFDLENBQUMsRUFBRSxnQ0FBZ0MsQ0FBQztJQUNwRCxJQUFJQSxLQUFLLElBQUksQ0FBQyxFQUFFO01BQ1puRixLQUFLLENBQUNvSixNQUFNLENBQUNqRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQzFCO0VBQ0o7RUFDQStDLFdBQVdBLENBQUN2SixJQUFJLEVBQUU7SUFDZEEsSUFBSSxDQUFDUCxRQUFRLENBQUMsQ0FBQztJQUNmLElBQUksQ0FBQzRFLFVBQVUsQ0FBQ3JFLElBQUksQ0FBQztFQUN6QjtFQUNBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0l1SyxvQkFBb0JBLENBQUNELFVBQVUsRUFBRTtJQUM3QjtJQUNBO0lBQ0E7SUFDQSxJQUFJLElBQUksQ0FBQ2xKLFNBQVMsRUFBRTtNQUNoQjtJQUNKO0lBQ0EsTUFBTUMsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSztJQUN4QixNQUFNcUosZUFBZSxHQUFHckosS0FBSyxDQUFDNkYsT0FBTyxDQUFDb0QsVUFBVSxDQUFDO0lBQ2pELEtBQUssSUFBSW5CLENBQUMsR0FBRzlILEtBQUssQ0FBQzhCLE1BQU0sR0FBRyxDQUFDLEVBQUVnRyxDQUFDLElBQUksQ0FBQyxFQUFFQSxDQUFDLEVBQUUsRUFBRTtNQUN4QyxNQUFNbkosSUFBSSxHQUFHcUIsS0FBSyxDQUFDOEgsQ0FBQyxDQUFDO01BQ3JCO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7TUFDWSxNQUFNNUosT0FBTyxHQUFHUyxJQUFJLENBQUNULE9BQU87TUFDNUIsSUFBSUEsT0FBTyxFQUFFO1FBQ1QsSUFBSTRKLENBQUMsR0FBR3VCLGVBQWUsRUFBRTtVQUNyQjtVQUNBO1VBQ0ExTSxxREFBUyxDQUFDdUIsT0FBTyxFQUFFbkIsaURBQXFCLENBQUM7VUFDekMsSUFBSSxDQUFDbUwsV0FBVyxDQUFDdkosSUFBSSxDQUFDO1FBQzFCLENBQUMsTUFDSSxJQUFJbUosQ0FBQyxHQUFHdUIsZUFBZSxFQUFFO1VBQzFCO1VBQ0E7VUFDQXZNLHFEQUFhLENBQUNvQixPQUFPLEVBQUUsSUFBSSxDQUFDO1FBQ2hDO01BQ0o7SUFDSjtFQUNKO0VBQ0FvRCxRQUFRQSxDQUFBLEVBQUc7SUFDUCxPQUFRLENBQUMsSUFBSSxDQUFDMUIsNEJBQTRCLElBQ3RDLENBQUMsQ0FBQyxJQUFJLENBQUNVLFlBQVksSUFDbkIsQ0FBQyxJQUFJLENBQUNSLGVBQWUsSUFDckIsSUFBSSxDQUFDSCxVQUFVLENBQUNtQyxNQUFNLEtBQUssQ0FBQyxJQUM1QixJQUFJLENBQUN5RCxhQUFhLENBQUMsQ0FBQztFQUM1QjtFQUNBL0QsT0FBT0EsQ0FBQSxFQUFHO0lBQ04sSUFBSSxDQUFDNUIsNEJBQTRCLEdBQUcsSUFBSTtJQUN4QyxJQUFJLENBQUM2QyxHQUFHLENBQUM7TUFBRVksU0FBUyxFQUFFLE1BQU07TUFBRWdGLGlCQUFpQixFQUFFO0lBQUssQ0FBQyxDQUFDO0VBQzVEO0VBQ0E1RyxNQUFNQSxDQUFDNkgsU0FBUyxFQUFFO0lBQ2QsSUFBSSxJQUFJLENBQUNaLEtBQUssRUFBRTtNQUNaLElBQUksQ0FBQ0EsS0FBSyxDQUFDYSxZQUFZLENBQUNELFNBQVMsQ0FBQztJQUN0QztFQUNKO0VBQ0E1SCxLQUFLQSxDQUFDOEgsY0FBYyxFQUFFRixTQUFTLEVBQUVHLEdBQUcsRUFBRTtJQUNsQyxJQUFJLElBQUksQ0FBQ2YsS0FBSyxFQUFFO01BQ1osSUFBSSxDQUFDQSxLQUFLLENBQUNILFFBQVEsQ0FBQyxNQUFNO1FBQ3RCLElBQUksQ0FBQzNJLDRCQUE0QixHQUFHLEtBQUs7TUFDN0MsQ0FBQyxFQUFFO1FBQUU0SSxlQUFlLEVBQUU7TUFBSyxDQUFDLENBQUM7TUFDN0I7TUFDQSxJQUFJa0IsWUFBWSxHQUFHRixjQUFjLEdBQUcsQ0FBQyxJQUFJLEdBQUcsS0FBSztNQUNqRDtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO01BQ1ksSUFBSSxDQUFDQSxjQUFjLEVBQUU7UUFDakIsSUFBSSxDQUFDZCxLQUFLLENBQUNpQixNQUFNLENBQUMsZ0NBQWdDLENBQUM7UUFDbkRELFlBQVksSUFBSW5OLDREQUF1QixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFK00sU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO01BQy9GLENBQUMsTUFDSTtRQUNESSxZQUFZLElBQUluTiw0REFBdUIsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRStNLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUMvRjtNQUNBLElBQUksQ0FBQ1osS0FBSyxDQUFDRCxXQUFXLENBQUNlLGNBQWMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFRSxZQUFZLEVBQUVELEdBQUcsQ0FBQztJQUNyRSxDQUFDLE1BQ0k7TUFDRCxJQUFJLENBQUM3Siw0QkFBNEIsR0FBRyxLQUFLO0lBQzdDO0VBQ0o7RUFDQWdLLE1BQU1BLENBQUEsRUFBRztJQUNMLE9BQU8zTixxREFBQyxDQUFDLE1BQU0sRUFBRTtNQUFFNE4sR0FBRyxFQUFFO0lBQTJDLENBQUMsQ0FBQztFQUN6RTtFQUNBLElBQUkvSSxFQUFFQSxDQUFBLEVBQUc7SUFBRSxPQUFPM0UscURBQVUsQ0FBQyxJQUFJLENBQUM7RUFBRTtFQUNwQyxXQUFXMk4sUUFBUUEsQ0FBQSxFQUFHO0lBQUUsT0FBTztNQUMzQixjQUFjLEVBQUUsQ0FBQyxxQkFBcUIsQ0FBQztNQUN2QyxNQUFNLEVBQUUsQ0FBQyxhQUFhO0lBQzFCLENBQUM7RUFBRTtBQUNQLENBQUM7QUFDRHhLLEdBQUcsQ0FBQ3lLLEtBQUssR0FBRzFLLE1BQU07QUFFbEIsTUFBTTJLLE9BQU8sR0FBR0EsQ0FBQ2xKLEVBQUUsRUFBRW1KLGVBQWUsRUFBRXRNLFNBQVMsRUFBRXVCLGNBQWMsRUFBRWdMLGVBQWUsS0FBSztFQUNqRixNQUFNMUwsR0FBRyxHQUFHc0MsRUFBRSxDQUFDQyxPQUFPLENBQUMsU0FBUyxDQUFDO0VBQ2pDLElBQUl2QyxHQUFHLEVBQUU7SUFDTCxJQUFJeUwsZUFBZSxLQUFLLFNBQVMsRUFBRTtNQUMvQixJQUFJdE0sU0FBUyxLQUFLYyxTQUFTLEVBQUU7UUFDekIsT0FBT0QsR0FBRyxDQUFDdUQsSUFBSSxDQUFDcEUsU0FBUyxFQUFFdUIsY0FBYyxFQUFFO1VBQUUrRyxVQUFVLEVBQUUsSUFBSTtVQUFFckIsZ0JBQWdCLEVBQUVzRjtRQUFnQixDQUFDLENBQUM7TUFDdkc7SUFDSixDQUFDLE1BQ0ksSUFBSUQsZUFBZSxLQUFLLE1BQU0sRUFBRTtNQUNqQyxJQUFJdE0sU0FBUyxLQUFLYyxTQUFTLEVBQUU7UUFDekIsT0FBT0QsR0FBRyxDQUFDaUMsT0FBTyxDQUFDOUMsU0FBUyxFQUFFdUIsY0FBYyxFQUFFO1VBQUUrRyxVQUFVLEVBQUUsSUFBSTtVQUFFckIsZ0JBQWdCLEVBQUVzRjtRQUFnQixDQUFDLENBQUM7TUFDMUc7SUFDSixDQUFDLE1BQ0ksSUFBSUQsZUFBZSxLQUFLLE1BQU0sRUFBRTtNQUNqQyxPQUFPekwsR0FBRyxDQUFDaUUsR0FBRyxDQUFDO1FBQUV3RCxVQUFVLEVBQUUsSUFBSTtRQUFFckIsZ0JBQWdCLEVBQUVzRjtNQUFnQixDQUFDLENBQUM7SUFDM0U7RUFDSjtFQUNBLE9BQU96RyxPQUFPLENBQUNDLE9BQU8sQ0FBQyxLQUFLLENBQUM7QUFDakMsQ0FBQztBQUVELE1BQU15RyxPQUFPLEdBQUcsTUFBTTtFQUNsQnpNLFdBQVdBLENBQUM2QixPQUFPLEVBQUU7SUFDakIvRCxxREFBZ0IsQ0FBQyxJQUFJLEVBQUUrRCxPQUFPLENBQUM7SUFDL0I7QUFDUjtBQUNBO0lBQ1EsSUFBSSxDQUFDMEssZUFBZSxHQUFHLFNBQVM7SUFDaEMsSUFBSSxDQUFDRyxPQUFPLEdBQUcsTUFBTTtNQUNqQixPQUFPSixPQUFPLENBQUMsSUFBSSxDQUFDbEosRUFBRSxFQUFFLElBQUksQ0FBQ21KLGVBQWUsRUFBRSxJQUFJLENBQUN0TSxTQUFTLEVBQUUsSUFBSSxDQUFDdUIsY0FBYyxFQUFFLElBQUksQ0FBQ2dMLGVBQWUsQ0FBQztJQUM1RyxDQUFDO0VBQ0w7RUFDQU4sTUFBTUEsQ0FBQSxFQUFHO0lBQ0wsT0FBTzNOLHFEQUFDLENBQUNJLGlEQUFJLEVBQUU7TUFBRXdOLEdBQUcsRUFBRSwwQ0FBMEM7TUFBRU8sT0FBTyxFQUFFLElBQUksQ0FBQ0E7SUFBUSxDQUFDLENBQUM7RUFDOUY7RUFDQSxJQUFJdEosRUFBRUEsQ0FBQSxFQUFHO0lBQUUsT0FBTzNFLHFEQUFVLENBQUMsSUFBSSxDQUFDO0VBQUU7QUFDeEMsQ0FBQyIsInNvdXJjZXMiOlsiLi9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvZGlzdC9lc20vaW9uLW5hdl8yLmVudHJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogKEMpIElvbmljIGh0dHA6Ly9pb25pY2ZyYW1ld29yay5jb20gLSBNSVQgTGljZW5zZVxuICovXG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGQgYXMgY3JlYXRlRXZlbnQsIGUgYXMgZ2V0SW9uTW9kZSwgbCBhcyBjb25maWcsIG0gYXMgcHJpbnRJb25XYXJuaW5nLCBoLCBrIGFzIGdldEVsZW1lbnQsIGogYXMgSG9zdCB9IGZyb20gJy4vaW5kZXgtQl9VOUN0YVkuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRUaW1lR2l2ZW5Qcm9ncmVzc2lvbiB9IGZyb20gJy4vY3ViaWMtYmV6aWVyLWhIbVlMT2ZFLmpzJztcbmltcG9ydCB7IHMgYXMgc2hhbGxvd0VxdWFsU3RyaW5nTWFwLCBsIGFzIGFzc2VydCB9IGZyb20gJy4vaGVscGVycy0xTzREMmI3eS5qcyc7XG5pbXBvcnQgeyBsIGFzIGxpZmVjeWNsZSwgdCBhcyB0cmFuc2l0aW9uLCBzIGFzIHNldFBhZ2VIaWRkZW4sIGQgYXMgTElGRUNZQ0xFX1dJTExfVU5MT0FELCBiIGFzIExJRkVDWUNMRV9XSUxMX0xFQVZFLCBjIGFzIExJRkVDWUNMRV9ESURfTEVBVkUgfSBmcm9tICcuL2luZGV4LURmQkE1enRYLmpzJztcbmltcG9ydCB7IGEgYXMgYXR0YWNoQ29tcG9uZW50IH0gZnJvbSAnLi9mcmFtZXdvcmstZGVsZWdhdGUtRHhjbldpY18uanMnO1xuXG5jb25zdCBWSUVXX1NUQVRFX05FVyA9IDE7XG5jb25zdCBWSUVXX1NUQVRFX0FUVEFDSEVEID0gMjtcbmNvbnN0IFZJRVdfU1RBVEVfREVTVFJPWUVEID0gMztcbi8vIFRPRE8oRlctMjgzMik6IHR5cGVzXG5jbGFzcyBWaWV3Q29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IoY29tcG9uZW50LCBwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgICAgICB0aGlzLnN0YXRlID0gVklFV19TVEFURV9ORVc7XG4gICAgfVxuICAgIGFzeW5jIGluaXQoY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBWSUVXX1NUQVRFX0FUVEFDSEVEO1xuICAgICAgICBpZiAoIXRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy5jb21wb25lbnQ7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBhd2FpdCBhdHRhY2hDb21wb25lbnQodGhpcy5kZWxlZ2F0ZSwgY29udGFpbmVyLCBjb21wb25lbnQsIFsnaW9uLXBhZ2UnLCAnaW9uLXBhZ2UtaW52aXNpYmxlJ10sIHRoaXMucGFyYW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBET00gV1JJVEVcbiAgICAgKi9cbiAgICBfZGVzdHJveSgpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3RhdGUgIT09IFZJRVdfU1RBVEVfREVTVFJPWUVELCAndmlldyBzdGF0ZSBtdXN0IGJlIEFUVEFDSEVEJyk7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kZWxlZ2F0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUucmVtb3ZlVmlld0Zyb21Eb20oZWxlbWVudC5wYXJlbnRFbGVtZW50LCBlbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uYXYgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBWSUVXX1NUQVRFX0RFU1RST1lFRDtcbiAgICB9XG59XG5jb25zdCBtYXRjaGVzID0gKHZpZXcsIGlkLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIXZpZXcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodmlldy5jb21wb25lbnQgIT09IGlkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHNoYWxsb3dFcXVhbFN0cmluZ01hcCh2aWV3LnBhcmFtcywgcGFyYW1zKTtcbn07XG5jb25zdCBjb252ZXJ0VG9WaWV3ID0gKHBhZ2UsIHBhcmFtcykgPT4ge1xuICAgIGlmICghcGFnZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHBhZ2UgaW5zdGFuY2VvZiBWaWV3Q29udHJvbGxlcikge1xuICAgICAgICByZXR1cm4gcGFnZTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBWaWV3Q29udHJvbGxlcihwYWdlLCBwYXJhbXMpO1xufTtcbmNvbnN0IGNvbnZlcnRUb1ZpZXdzID0gKHBhZ2VzKSA9PiB7XG4gICAgcmV0dXJuIHBhZ2VzXG4gICAgICAgIC5tYXAoKHBhZ2UpID0+IHtcbiAgICAgICAgaWYgKHBhZ2UgaW5zdGFuY2VvZiBWaWV3Q29udHJvbGxlcikge1xuICAgICAgICAgICAgcmV0dXJuIHBhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdjb21wb25lbnQnIGluIHBhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBjb252ZXJ0VG9WaWV3KHBhZ2UuY29tcG9uZW50LCBwYWdlLmNvbXBvbmVudFByb3BzID09PSBudWxsID8gdW5kZWZpbmVkIDogcGFnZS5jb21wb25lbnRQcm9wcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnZlcnRUb1ZpZXcocGFnZSwgdW5kZWZpbmVkKTtcbiAgICB9KVxuICAgICAgICAuZmlsdGVyKCh2KSA9PiB2ICE9PSBudWxsKTtcbn07XG5cbmNvbnN0IG5hdkNzcyA9IFwiOmhvc3R7bGVmdDowO3JpZ2h0OjA7dG9wOjA7Ym90dG9tOjA7cG9zaXRpb246YWJzb2x1dGU7Y29udGFpbjpsYXlvdXQgc2l6ZSBzdHlsZTt6LWluZGV4OjB9XCI7XG5cbmNvbnN0IE5hdiA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIHRoaXMuaW9uTmF2V2lsbExvYWQgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvbk5hdldpbGxMb2FkXCIsIDcpO1xuICAgICAgICB0aGlzLmlvbk5hdldpbGxDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvbk5hdldpbGxDaGFuZ2VcIiwgMyk7XG4gICAgICAgIHRoaXMuaW9uTmF2RGlkQ2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25OYXZEaWRDaGFuZ2VcIiwgMyk7XG4gICAgICAgIHRoaXMudHJhbnNJbnN0ciA9IFtdO1xuICAgICAgICB0aGlzLmdlc3R1cmVPckFuaW1hdGlvbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgdGhpcy51c2VSb3V0ZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy52aWV3cyA9IFtdO1xuICAgICAgICB0aGlzLmRpZExvYWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGB0cnVlYCwgdGhlIG5hdiBzaG91bGQgYW5pbWF0ZSB0aGUgdHJhbnNpdGlvbiBvZiBjb21wb25lbnRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbmltYXRlZCA9IHRydWU7XG4gICAgfVxuICAgIHN3aXBlR2VzdHVyZUNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmdlc3R1cmUpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VzdHVyZS5lbmFibGUodGhpcy5zd2lwZUdlc3R1cmUgPT09IHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJvb3RDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5yb290ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kaWRMb2FkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB0aGUgY29tcG9uZW50IGhhcyBub3QgbG9hZGVkIHlldCwgd2UgY2FuIHNraXAgc2V0dGluZyB1cCB0aGUgcm9vdCBjb21wb25lbnQuXG4gICAgICAgICAgICAgKiBJdCB3aWxsIGJlIGNhbGxlZCB3aGVuIGBjb21wb25lbnREaWRMb2FkYCBmaXJlcy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy51c2VSb3V0ZXIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJvb3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Um9vdCh0aGlzLnJvb3QsIHRoaXMucm9vdFBhcmFtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgICAgIHRoaXMudXNlUm91dGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW9uLXJvdXRlcicpICE9PSBudWxsICYmIHRoaXMuZWwuY2xvc2VzdCgnW25vLXJvdXRlcl0nKSA9PT0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3dpcGVHZXN0dXJlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGUgPSBnZXRJb25Nb2RlKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5zd2lwZUdlc3R1cmUgPSBjb25maWcuZ2V0Qm9vbGVhbignc3dpcGVCYWNrRW5hYmxlZCcsIG1vZGUgPT09ICdpb3MnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlvbk5hdldpbGxMb2FkLmVtaXQoKTtcbiAgICB9XG4gICAgYXN5bmMgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICAgICAgLy8gV2Ugd2FudCB0byBzZXQgdGhpcyBmbGFnIGJlZm9yZSBhbnkgd2F0Y2ggY2FsbGJhY2tzIGFyZSBtYW51YWxseSBjYWxsZWRcbiAgICAgICAgdGhpcy5kaWRMb2FkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yb290Q2hhbmdlZCgpO1xuICAgICAgICB0aGlzLmdlc3R1cmUgPSAoYXdhaXQgaW1wb3J0KCcuL3N3aXBlLWJhY2stVmRhVXpMV3kuanMnKSkuY3JlYXRlU3dpcGVCYWNrR2VzdHVyZSh0aGlzLmVsLCB0aGlzLmNhblN0YXJ0LmJpbmQodGhpcyksIHRoaXMub25TdGFydC5iaW5kKHRoaXMpLCB0aGlzLm9uTW92ZS5iaW5kKHRoaXMpLCB0aGlzLm9uRW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnN3aXBlR2VzdHVyZUNoYW5nZWQoKTtcbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBmb3IgKGNvbnN0IHZpZXcgb2YgdGhpcy52aWV3cykge1xuICAgICAgICAgICAgbGlmZWN5Y2xlKHZpZXcuZWxlbWVudCwgTElGRUNZQ0xFX1dJTExfVU5MT0FEKTtcbiAgICAgICAgICAgIHZpZXcuX2Rlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZWxlYXNlIHN3aXBlIGJhY2sgZ2VzdHVyZSBhbmQgdHJhbnNpdGlvbi5cbiAgICAgICAgaWYgKHRoaXMuZ2VzdHVyZSkge1xuICAgICAgICAgICAgdGhpcy5nZXN0dXJlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuZ2VzdHVyZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYW5zSW5zdHIubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy52aWV3cy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1c2ggYSBuZXcgY29tcG9uZW50IG9udG8gdGhlIGN1cnJlbnQgbmF2aWdhdGlvbiBzdGFjay4gUGFzcyBhbnkgYWRkaXRpb25hbFxuICAgICAqIGluZm9ybWF0aW9uIGFsb25nIGFzIGFuIG9iamVjdC4gVGhpcyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGlzIGFjY2Vzc2libGVcbiAgICAgKiB0aHJvdWdoIE5hdlBhcmFtcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgVGhlIGNvbXBvbmVudCB0byBwdXNoIG9udG8gdGhlIG5hdmlnYXRpb24gc3RhY2suXG4gICAgICogQHBhcmFtIGNvbXBvbmVudFByb3BzIEFueSBwcm9wZXJ0aWVzIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9uZSBUaGUgdHJhbnNpdGlvbiBjb21wbGV0ZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBwdXNoKGNvbXBvbmVudCwgY29tcG9uZW50UHJvcHMsIG9wdHMsIGRvbmUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0KC0xLCBjb21wb25lbnQsIGNvbXBvbmVudFByb3BzLCBvcHRzLCBkb25lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5zZXJ0cyBhIGNvbXBvbmVudCBpbnRvIHRoZSBuYXZpZ2F0aW9uIHN0YWNrIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAgICogVGhpcyBpcyB1c2VmdWwgdG8gYWRkIGEgY29tcG9uZW50IGF0IGFueSBwb2ludCBpbiB0aGUgbmF2aWdhdGlvbiBzdGFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnNlcnRJbmRleCBUaGUgaW5kZXggdG8gaW5zZXJ0IHRoZSBjb21wb25lbnQgYXQgaW4gdGhlIHN0YWNrLlxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgVGhlIGNvbXBvbmVudCB0byBpbnNlcnQgaW50byB0aGUgbmF2aWdhdGlvbiBzdGFjay5cbiAgICAgKiBAcGFyYW0gY29tcG9uZW50UHJvcHMgQW55IHByb3BlcnRpZXMgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0gb3B0cyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBkb25lIFRoZSB0cmFuc2l0aW9uIGNvbXBsZXRlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGluc2VydChpbnNlcnRJbmRleCwgY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgb3B0cywgZG9uZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnNlcnRQYWdlcyhpbnNlcnRJbmRleCwgW3sgY29tcG9uZW50LCBjb21wb25lbnRQcm9wcyB9XSwgb3B0cywgZG9uZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluc2VydHMgYW4gYXJyYXkgb2YgY29tcG9uZW50cyBpbnRvIHRoZSBuYXZpZ2F0aW9uIHN0YWNrIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAgICogVGhlIGxhc3QgY29tcG9uZW50IGluIHRoZSBhcnJheSB3aWxsIGJlY29tZSBpbnN0YW50aWF0ZWQgYXMgYSB2aWV3LCBhbmQgYW5pbWF0ZVxuICAgICAqIGluIHRvIGJlY29tZSB0aGUgYWN0aXZlIHZpZXcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5zZXJ0SW5kZXggVGhlIGluZGV4IHRvIGluc2VydCB0aGUgY29tcG9uZW50cyBhdCBpbiB0aGUgc3RhY2suXG4gICAgICogQHBhcmFtIGluc2VydENvbXBvbmVudHMgVGhlIGNvbXBvbmVudHMgdG8gaW5zZXJ0IGludG8gdGhlIG5hdmlnYXRpb24gc3RhY2suXG4gICAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9uZSBUaGUgdHJhbnNpdGlvbiBjb21wbGV0ZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBpbnNlcnRQYWdlcyhpbnNlcnRJbmRleCwgaW5zZXJ0Q29tcG9uZW50cywgb3B0cywgZG9uZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZVRybnMoe1xuICAgICAgICAgICAgaW5zZXJ0U3RhcnQ6IGluc2VydEluZGV4LFxuICAgICAgICAgICAgaW5zZXJ0Vmlld3M6IGluc2VydENvbXBvbmVudHMsXG4gICAgICAgICAgICBvcHRzLFxuICAgICAgICB9LCBkb25lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUG9wIGEgY29tcG9uZW50IG9mZiBvZiB0aGUgbmF2aWdhdGlvbiBzdGFjay4gTmF2aWdhdGVzIGJhY2sgZnJvbSB0aGUgY3VycmVudFxuICAgICAqIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRzIFRoZSBuYXZpZ2F0aW9uIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgcG9wKG9wdHMsIGRvbmUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlSW5kZXgoLTEsIDEsIG9wdHMsIGRvbmUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQb3AgdG8gYSBzcGVjaWZpYyBpbmRleCBpbiB0aGUgbmF2aWdhdGlvbiBzdGFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmRleE9yVmlld0N0cmwgVGhlIGluZGV4IG9yIHZpZXcgY29udHJvbGxlciB0byBwb3AgdG8uXG4gICAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9uZSBUaGUgdHJhbnNpdGlvbiBjb21wbGV0ZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBwb3BUbyhpbmRleE9yVmlld0N0cmwsIG9wdHMsIGRvbmUpIHtcbiAgICAgICAgY29uc3QgdGkgPSB7XG4gICAgICAgICAgICByZW1vdmVTdGFydDogLTEsXG4gICAgICAgICAgICByZW1vdmVDb3VudDogLTEsXG4gICAgICAgICAgICBvcHRzLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIGluZGV4T3JWaWV3Q3RybCA9PT0gJ29iamVjdCcgJiYgaW5kZXhPclZpZXdDdHJsLmNvbXBvbmVudCkge1xuICAgICAgICAgICAgdGkucmVtb3ZlVmlldyA9IGluZGV4T3JWaWV3Q3RybDtcbiAgICAgICAgICAgIHRpLnJlbW92ZVN0YXJ0ID0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5kZXhPclZpZXdDdHJsID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGkucmVtb3ZlU3RhcnQgPSBpbmRleE9yVmlld0N0cmwgKyAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlVHJucyh0aSwgZG9uZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5hdmlnYXRlIGJhY2sgdG8gdGhlIHJvb3Qgb2YgdGhlIHN0YWNrLCBubyBtYXR0ZXIgaG93IGZhciBiYWNrIHRoYXQgaXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0cyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBkb25lIFRoZSB0cmFuc2l0aW9uIGNvbXBsZXRlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHBvcFRvUm9vdChvcHRzLCBkb25lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZUluZGV4KDEsIC0xLCBvcHRzLCBkb25lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGNvbXBvbmVudCBmcm9tIHRoZSBuYXZpZ2F0aW9uIHN0YWNrIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhcnRJbmRleCBUaGUgbnVtYmVyIHRvIGJlZ2luIHJlbW92YWwgYXQuXG4gICAgICogQHBhcmFtIHJlbW92ZUNvdW50IFRoZSBudW1iZXIgb2YgY29tcG9uZW50cyB0byByZW1vdmUuXG4gICAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9uZSBUaGUgdHJhbnNpdGlvbiBjb21wbGV0ZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICByZW1vdmVJbmRleChzdGFydEluZGV4LCByZW1vdmVDb3VudCA9IDEsIG9wdHMsIGRvbmUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWVUcm5zKHtcbiAgICAgICAgICAgIHJlbW92ZVN0YXJ0OiBzdGFydEluZGV4LFxuICAgICAgICAgICAgcmVtb3ZlQ291bnQsXG4gICAgICAgICAgICBvcHRzLFxuICAgICAgICB9LCBkb25lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSByb290IGZvciB0aGUgY3VycmVudCBuYXZpZ2F0aW9uIHN0YWNrIHRvIGEgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBUaGUgY29tcG9uZW50IHRvIHNldCBhcyB0aGUgcm9vdCBvZiB0aGUgbmF2aWdhdGlvbiBzdGFjay5cbiAgICAgKiBAcGFyYW0gY29tcG9uZW50UHJvcHMgQW55IHByb3BlcnRpZXMgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0gb3B0cyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBkb25lIFRoZSB0cmFuc2l0aW9uIGNvbXBsZXRlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHNldFJvb3QoY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgb3B0cywgZG9uZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRQYWdlcyhbeyBjb21wb25lbnQsIGNvbXBvbmVudFByb3BzIH1dLCBvcHRzLCBkb25lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2aWV3cyBvZiB0aGUgY3VycmVudCBuYXZpZ2F0aW9uIHN0YWNrIGFuZCBuYXZpZ2F0ZSB0byB0aGUgbGFzdCB2aWV3LlxuICAgICAqIEJ5IGRlZmF1bHQgYW5pbWF0aW9ucyBhcmUgZGlzYWJsZWQsIGJ1dCB0aGV5IGNhbiBiZSBlbmFibGVkIGJ5IHBhc3Npbmcgb3B0aW9uc1xuICAgICAqIHRvIHRoZSBuYXZpZ2F0aW9uIGNvbnRyb2xsZXIuIE5hdmlnYXRpb24gcGFyYW1ldGVycyBjYW4gYWxzbyBiZSBwYXNzZWQgdG8gdGhlXG4gICAgICogaW5kaXZpZHVhbCBwYWdlcyBpbiB0aGUgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmlld3MgVGhlIGxpc3Qgb2Ygdmlld3MgdG8gc2V0IGFzIHRoZSBuYXZpZ2F0aW9uIHN0YWNrLlxuICAgICAqIEBwYXJhbSBvcHRzIFRoZSBuYXZpZ2F0aW9uIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgc2V0UGFnZXModmlld3MsIG9wdHMsIGRvbmUpIHtcbiAgICAgICAgb3B0cyAhPT0gbnVsbCAmJiBvcHRzICE9PSB2b2lkIDAgPyBvcHRzIDogKG9wdHMgPSB7fSk7XG4gICAgICAgIC8vIGlmIGFuaW1hdGlvbiB3YXNuJ3Qgc2V0IHRvIHRydWUgdGhlbiBkZWZhdWx0IGl0IHRvIE5PVCBhbmltYXRlXG4gICAgICAgIGlmIChvcHRzLmFuaW1hdGVkICE9PSB0cnVlKSB7XG4gICAgICAgICAgICBvcHRzLmFuaW1hdGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWVUcm5zKHtcbiAgICAgICAgICAgIGluc2VydFN0YXJ0OiAwLFxuICAgICAgICAgICAgaW5zZXJ0Vmlld3M6IHZpZXdzLFxuICAgICAgICAgICAgcmVtb3ZlU3RhcnQ6IDAsXG4gICAgICAgICAgICByZW1vdmVDb3VudDogLTEsXG4gICAgICAgICAgICBvcHRzLFxuICAgICAgICB9LCBkb25lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGJ5IHRoZSByb3V0ZXIgdG8gdXBkYXRlIHRoZSB2aWV3LlxuICAgICAqXG4gICAgICogQHBhcmFtIGlkIFRoZSBjb21wb25lbnQgdGFnLlxuICAgICAqIEBwYXJhbSBwYXJhbXMgVGhlIGNvbXBvbmVudCBwYXJhbXMuXG4gICAgICogQHBhcmFtIGRpcmVjdGlvbiBBIGRpcmVjdGlvbiBoaW50LlxuICAgICAqIEBwYXJhbSBhbmltYXRpb24gYW4gQW5pbWF0aW9uQnVpbGRlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gdGhlIHN0YXR1cy5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZXRSb3V0ZUlkKGlkLCBwYXJhbXMsIGRpcmVjdGlvbiwgYW5pbWF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlU3luYygpO1xuICAgICAgICBpZiAobWF0Y2hlcyhhY3RpdmUsIGlkLCBwYXJhbXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBhY3RpdmUuZWxlbWVudCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXNvbHZlO1xuICAgICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHIpID0+IChyZXNvbHZlID0gcikpO1xuICAgICAgICBsZXQgZmluaXNoO1xuICAgICAgICBjb25zdCBjb21tb25PcHRzID0ge1xuICAgICAgICAgICAgdXBkYXRlVVJMOiBmYWxzZSxcbiAgICAgICAgICAgIHZpZXdJc1JlYWR5OiAoZW50ZXJpbmdFbCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBtYXJrO1xuICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgUHJvbWlzZSgocikgPT4gKG1hcmsgPSByKSk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVudGVyaW5nRWwsXG4gICAgICAgICAgICAgICAgICAgIG1hcmtWaXNpYmxlOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmaW5pc2g7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncm9vdCcpIHtcbiAgICAgICAgICAgIGZpbmlzaCA9IHRoaXMuc2V0Um9vdChpZCwgcGFyYW1zLCBjb21tb25PcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIExvb2sgZm9yIGEgdmlldyBtYXRjaGluZyB0aGUgdGFyZ2V0IGluIHRoZSB2aWV3IHN0YWNrLlxuICAgICAgICAgICAgY29uc3Qgdmlld0NvbnRyb2xsZXIgPSB0aGlzLnZpZXdzLmZpbmQoKHYpID0+IG1hdGNoZXModiwgaWQsIHBhcmFtcykpO1xuICAgICAgICAgICAgaWYgKHZpZXdDb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgZmluaXNoID0gdGhpcy5wb3BUbyh2aWV3Q29udHJvbGxlciwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb21tb25PcHRzKSwgeyBkaXJlY3Rpb246ICdiYWNrJywgYW5pbWF0aW9uQnVpbGRlcjogYW5pbWF0aW9uIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2ZvcndhcmQnKSB7XG4gICAgICAgICAgICAgICAgZmluaXNoID0gdGhpcy5wdXNoKGlkLCBwYXJhbXMsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uT3B0cyksIHsgYW5pbWF0aW9uQnVpbGRlcjogYW5pbWF0aW9uIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2JhY2snKSB7XG4gICAgICAgICAgICAgICAgZmluaXNoID0gdGhpcy5zZXRSb290KGlkLCBwYXJhbXMsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uT3B0cyksIHsgZGlyZWN0aW9uOiAnYmFjaycsIGFuaW1hdGVkOiB0cnVlLCBhbmltYXRpb25CdWlsZGVyOiBhbmltYXRpb24gfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgPGlvbi1yb3V0ZXI+IHRvIHJldHJpZXZlIHRoZSBjdXJyZW50IGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jIGdldFJvdXRlSWQoKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlU3luYygpO1xuICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiBhY3RpdmUuZWxlbWVudC50YWdOYW1lLFxuICAgICAgICAgICAgICAgIHBhcmFtczogYWN0aXZlLnBhcmFtcyxcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBhY3RpdmUuZWxlbWVudCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhY3RpdmUgdmlldy5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFjdGl2ZVN5bmMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSB2aWV3LlxuICAgICAqL1xuICAgIGFzeW5jIGdldEJ5SW5kZXgoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld3NbaW5kZXhdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgY3VycmVudCB2aWV3IGNhbiBnbyBiYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZpZXcgVGhlIHZpZXcgdG8gY2hlY2suXG4gICAgICovXG4gICAgYXN5bmMgY2FuR29CYWNrKHZpZXcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuR29CYWNrU3luYyh2aWV3KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwcmV2aW91cyB2aWV3LlxuICAgICAqXG4gICAgICogQHBhcmFtIHZpZXcgVGhlIHZpZXcgdG8gZ2V0LlxuICAgICAqL1xuICAgIGFzeW5jIGdldFByZXZpb3VzKHZpZXcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJldmlvdXNTeW5jKHZpZXcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygdmlld3MgaW4gdGhlIHN0YWNrLlxuICAgICAqL1xuICAgIGFzeW5jIGdldExlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnZpZXdzLmxlbmd0aCk7XG4gICAgfVxuICAgIGdldEFjdGl2ZVN5bmMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdzW3RoaXMudmlld3MubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIGNhbkdvQmFja1N5bmModmlldyA9IHRoaXMuZ2V0QWN0aXZlU3luYygpKSB7XG4gICAgICAgIHJldHVybiAhISh2aWV3ICYmIHRoaXMuZ2V0UHJldmlvdXNTeW5jKHZpZXcpKTtcbiAgICB9XG4gICAgZ2V0UHJldmlvdXNTeW5jKHZpZXcgPSB0aGlzLmdldEFjdGl2ZVN5bmMoKSkge1xuICAgICAgICBpZiAoIXZpZXcpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgdmlld3MgPSB0aGlzLnZpZXdzO1xuICAgICAgICBjb25zdCBpbmRleCA9IHZpZXdzLmluZGV4T2Yodmlldyk7XG4gICAgICAgIHJldHVybiBpbmRleCA+IDAgPyB2aWV3c1tpbmRleCAtIDFdIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmF2aWdhdGlvbiBzdGFjayBjaGFuZ2UgdG8gdGhlIHF1ZXVlIGFuZCBzY2hlZHVsZXMgaXQgdG8gcnVuLlxuICAgICAqXG4gICAgICogQHJldHVybnMgV2hldGhlciB0aGUgdHJhbnNpdGlvbiBzdWNjZWVkcy5cbiAgICAgKi9cbiAgICBhc3luYyBxdWV1ZVRybnModGksIGRvbmUpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgaWYgKHRoaXMuaXNUcmFuc2l0aW9uaW5nICYmICgoX2EgPSB0aS5vcHRzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2tpcElmQnVzeSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGkucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICB0aS5yZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgICAgICB0aS5kb25lID0gZG9uZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHVzaW5nIHJvdXRlciwgY2hlY2sgdG8gc2VlIGlmIG5hdmlnYXRpb24gaG9va3NcbiAgICAgICAgICogd2lsbCBhbGxvdyB1cyB0byBwZXJmb3JtIHRoaXMgdHJhbnNpdGlvbi4gVGhpc1xuICAgICAgICAgKiBpcyByZXF1aXJlZCBpbiBvcmRlciBmb3IgaG9va3MgdG8gd29yayB3aXRoXG4gICAgICAgICAqIHRoZSBpb24tYmFjay1idXR0b24gb3Igc3dpcGUgdG8gZ28gYmFjay5cbiAgICAgICAgICovXG4gICAgICAgIGlmICh0aS5vcHRzICYmIHRpLm9wdHMudXBkYXRlVVJMICE9PSBmYWxzZSAmJiB0aGlzLnVzZVJvdXRlcikge1xuICAgICAgICAgICAgY29uc3Qgcm91dGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW9uLXJvdXRlcicpO1xuICAgICAgICAgICAgaWYgKHJvdXRlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhblRyYW5zaXRpb24gPSBhd2FpdCByb3V0ZXIuY2FuVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgICAgIGlmIChjYW5UcmFuc2l0aW9uID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FuVHJhbnNpdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goY2FuVHJhbnNpdGlvbiwgdGkub3B0cy5kaXJlY3Rpb24gfHwgJ2JhY2snKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBOb3JtYWxpemUgZW1wdHlcbiAgICAgICAgaWYgKCgoX2IgPSB0aS5pbnNlcnRWaWV3cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmxlbmd0aCkgPT09IDApIHtcbiAgICAgICAgICAgIHRpLmluc2VydFZpZXdzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVucXVldWUgdHJhbnNpdGlvbiBpbnN0cnVjdGlvblxuICAgICAgICB0aGlzLnRyYW5zSW5zdHIucHVzaCh0aSk7XG4gICAgICAgIC8vIGlmIHRoZXJlIGlzbid0IGEgdHJhbnNpdGlvbiBhbHJlYWR5IGhhcHBlbmluZ1xuICAgICAgICAvLyB0aGVuIHRoaXMgd2lsbCBraWNrIG9mZiB0aGlzIHRyYW5zaXRpb25cbiAgICAgICAgdGhpcy5uZXh0VHJucygpO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgc3VjY2VzcyhyZXN1bHQsIHRpKSB7XG4gICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgdGhpcy5maXJlRXJyb3IoJ25hdiBjb250cm9sbGVyIHdhcyBkZXN0cm95ZWQnLCB0aSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpLmRvbmUpIHtcbiAgICAgICAgICAgIHRpLmRvbmUocmVzdWx0Lmhhc0NvbXBsZXRlZCwgcmVzdWx0LnJlcXVpcmVzVHJhbnNpdGlvbiwgcmVzdWx0LmVudGVyaW5nVmlldywgcmVzdWx0LmxlYXZpbmdWaWV3LCByZXN1bHQuZGlyZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aS5yZXNvbHZlKHJlc3VsdC5oYXNDb21wbGV0ZWQpO1xuICAgICAgICBpZiAodGkub3B0cy51cGRhdGVVUkwgIT09IGZhbHNlICYmIHRoaXMudXNlUm91dGVyKSB7XG4gICAgICAgICAgICBjb25zdCByb3V0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpb24tcm91dGVyJyk7XG4gICAgICAgICAgICBpZiAocm91dGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gcmVzdWx0LmRpcmVjdGlvbiA9PT0gJ2JhY2snID8gJ2JhY2snIDogJ2ZvcndhcmQnO1xuICAgICAgICAgICAgICAgIHJvdXRlci5uYXZDaGFuZ2VkKGRpcmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmFpbGVkKHJlamVjdFJlYXNvbiwgdGkpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICB0aGlzLmZpcmVFcnJvcignbmF2IGNvbnRyb2xsZXIgd2FzIGRlc3Ryb3llZCcsIHRpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYW5zSW5zdHIubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5maXJlRXJyb3IocmVqZWN0UmVhc29uLCB0aSk7XG4gICAgfVxuICAgIGZpcmVFcnJvcihyZWplY3RSZWFzb24sIHRpKSB7XG4gICAgICAgIGlmICh0aS5kb25lKSB7XG4gICAgICAgICAgICB0aS5kb25lKGZhbHNlLCBmYWxzZSwgcmVqZWN0UmVhc29uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGkucmVqZWN0ICYmICF0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgdGkucmVqZWN0KHJlamVjdFJlYXNvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aS5yZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25zdW1lcyB0aGUgbmV4dCB0cmFuc2l0aW9uIGluIHRoZSBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHdoZXRoZXIgdGhlIHRyYW5zaXRpb24gaXMgZXhlY3V0ZWQuXG4gICAgICovXG4gICAgbmV4dFRybnMoKSB7XG4gICAgICAgIC8vIHRoaXMgaXMgdGhlIGZyYW1ld29yaydzIGJyZWFkICduIGJ1dHRhIGZ1bmN0aW9uXG4gICAgICAgIC8vIG9ubHkgb25lIHRyYW5zaXRpb24gaXMgYWxsb3dlZCBhdCBhbnkgZ2l2ZW4gdGltZVxuICAgICAgICBpZiAodGhpcy5pc1RyYW5zaXRpb25pbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGVyZSBpcyBubyB0cmFuc2l0aW9uIGhhcHBlbmluZyByaWdodCBub3csIGV4ZWN1dGVzIHRoZSBuZXh0IGluc3RydWN0aW9ucy5cbiAgICAgICAgY29uc3QgdGkgPSB0aGlzLnRyYW5zSW5zdHIuc2hpZnQoKTtcbiAgICAgICAgaWYgKCF0aSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucnVuVHJhbnNpdGlvbih0aSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKiogRXhlY3V0ZXMgYWxsIHRoZSB0cmFuc2l0aW9uIGluc3RydWN0aW9uIGZyb20gdGhlIHF1ZXVlLiAqL1xuICAgIGFzeW5jIHJ1blRyYW5zaXRpb24odGkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIHNldCB0aGF0IHRoaXMgbmF2IGlzIGFjdGl2ZWx5IHRyYW5zaXRpb25pbmdcbiAgICAgICAgICAgIHRoaXMuaW9uTmF2V2lsbENoYW5nZS5lbWl0KCk7XG4gICAgICAgICAgICB0aGlzLmlzVHJhbnNpdGlvbmluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnByZXBhcmVUSSh0aSk7XG4gICAgICAgICAgICBjb25zdCBsZWF2aW5nVmlldyA9IHRoaXMuZ2V0QWN0aXZlU3luYygpO1xuICAgICAgICAgICAgY29uc3QgZW50ZXJpbmdWaWV3ID0gdGhpcy5nZXRFbnRlcmluZ1ZpZXcodGksIGxlYXZpbmdWaWV3KTtcbiAgICAgICAgICAgIGlmICghbGVhdmluZ1ZpZXcgJiYgIWVudGVyaW5nVmlldykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbm8gdmlld3MgaW4gdGhlIHN0YWNrIHRvIGJlIHJlbW92ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbnRlcmluZ1ZpZXcgJiYgZW50ZXJpbmdWaWV3LnN0YXRlID09PSBWSUVXX1NUQVRFX05FVykge1xuICAgICAgICAgICAgICAgIGF3YWl0IGVudGVyaW5nVmlldy5pbml0KHRoaXMuZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wb3N0Vmlld0luaXQoZW50ZXJpbmdWaWV3LCBsZWF2aW5nVmlldywgdGkpO1xuICAgICAgICAgICAgLy8gTmVlZHMgdHJhbnNpdGlvbj9cbiAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVzVHJhbnNpdGlvbiA9ICh0aS5lbnRlcmluZ1JlcXVpcmVzVHJhbnNpdGlvbiB8fCB0aS5sZWF2aW5nUmVxdWlyZXNUcmFuc2l0aW9uKSAmJiBlbnRlcmluZ1ZpZXcgIT09IGxlYXZpbmdWaWV3O1xuICAgICAgICAgICAgaWYgKHJlcXVpcmVzVHJhbnNpdGlvbiAmJiB0aS5vcHRzICYmIGxlYXZpbmdWaWV3KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNCYWNrRGlyZWN0aW9uID0gdGkub3B0cy5kaXJlY3Rpb24gPT09ICdiYWNrJztcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBJZiBoZWFkaW5nIGJhY2ssIHVzZSB0aGUgZW50ZXJpbmcgcGFnZSdzIGFuaW1hdGlvblxuICAgICAgICAgICAgICAgICAqIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkIGJ5IHRoZSBkZXZlbG9wZXIuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgaWYgKGlzQmFja0RpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aS5vcHRzLmFuaW1hdGlvbkJ1aWxkZXIgPSB0aS5vcHRzLmFuaW1hdGlvbkJ1aWxkZXIgfHwgKGVudGVyaW5nVmlldyA9PT0gbnVsbCB8fCBlbnRlcmluZ1ZpZXcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVudGVyaW5nVmlldy5hbmltYXRpb25CdWlsZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGVhdmluZ1ZpZXcuYW5pbWF0aW9uQnVpbGRlciA9IHRpLm9wdHMuYW5pbWF0aW9uQnVpbGRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICBpZiAocmVxdWlyZXNUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy50cmFuc2l0aW9uKGVudGVyaW5nVmlldywgbGVhdmluZ1ZpZXcsIHRpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHRyYW5zaXRpb24gaXMgbm90IHJlcXVpcmVkLCBzbyB3ZSBhcmUgYWxyZWFkeSBkb25lIVxuICAgICAgICAgICAgICAgIC8vIHRoZXkncmUgaW5zZXJ0aW5nL3JlbW92aW5nIHRoZSB2aWV3cyBzb21ld2hlcmUgaW4gdGhlIG1pZGRsZSBvclxuICAgICAgICAgICAgICAgIC8vIGJlZ2lubmluZywgc28gdmlzdWFsbHkgbm90aGluZyBuZWVkcyB0byBhbmltYXRlL3RyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAvLyByZXNvbHZlIGltbWVkaWF0ZWx5IGJlY2F1c2UgdGhlcmUncyBubyBhbmltYXRpb24gdGhhdCdzIGhhcHBlbmluZ1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgaGFzQ29tcGxldGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlc1RyYW5zaXRpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1Y2Nlc3MocmVzdWx0LCB0aSk7XG4gICAgICAgICAgICB0aGlzLmlvbk5hdkRpZENoYW5nZS5lbWl0KCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHJlamVjdFJlYXNvbikge1xuICAgICAgICAgICAgdGhpcy5mYWlsZWQocmVqZWN0UmVhc29uLCB0aSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5uZXh0VHJucygpO1xuICAgIH1cbiAgICBwcmVwYXJlVEkodGkpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdmFyIF9jO1xuICAgICAgICBjb25zdCB2aWV3c0xlbmd0aCA9IHRoaXMudmlld3MubGVuZ3RoO1xuICAgICAgICAoX2EgPSB0aS5vcHRzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAodGkub3B0cyA9IHt9KTtcbiAgICAgICAgKF9iID0gKF9jID0gdGkub3B0cykuZGVsZWdhdGUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IChfYy5kZWxlZ2F0ZSA9IHRoaXMuZGVsZWdhdGUpO1xuICAgICAgICBpZiAodGkucmVtb3ZlVmlldyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhc3NlcnQodGkucmVtb3ZlU3RhcnQgIT09IHVuZGVmaW5lZCwgJ3JlbW92ZVZpZXcgbmVlZHMgcmVtb3ZlU3RhcnQnKTtcbiAgICAgICAgICAgIGFzc2VydCh0aS5yZW1vdmVDb3VudCAhPT0gdW5kZWZpbmVkLCAncmVtb3ZlVmlldyBuZWVkcyByZW1vdmVDb3VudCcpO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnZpZXdzLmluZGV4T2YodGkucmVtb3ZlVmlldyk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdyZW1vdmVWaWV3IHdhcyBub3QgZm91bmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpLnJlbW92ZVN0YXJ0ICs9IGluZGV4O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aS5yZW1vdmVTdGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAodGkucmVtb3ZlU3RhcnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGkucmVtb3ZlU3RhcnQgPSB2aWV3c0xlbmd0aCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGkucmVtb3ZlQ291bnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGkucmVtb3ZlQ291bnQgPSB2aWV3c0xlbmd0aCAtIHRpLnJlbW92ZVN0YXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGkubGVhdmluZ1JlcXVpcmVzVHJhbnNpdGlvbiA9IHRpLnJlbW92ZUNvdW50ID4gMCAmJiB0aS5yZW1vdmVTdGFydCArIHRpLnJlbW92ZUNvdW50ID09PSB2aWV3c0xlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGkuaW5zZXJ0Vmlld3MpIHtcbiAgICAgICAgICAgIC8vIGFsbG93IC0xIHRvIGJlIHBhc3NlZCBpbiB0byBhdXRvIHB1c2ggaXQgb24gdGhlIGVuZFxuICAgICAgICAgICAgLy8gYW5kIGNsZWFuIHVwIHRoZSBpbmRleCBpZiBpdCdzIGxhcmdlciB0aGVuIHRoZSBzaXplIG9mIHRoZSBzdGFja1xuICAgICAgICAgICAgaWYgKHRpLmluc2VydFN0YXJ0IDwgMCB8fCB0aS5pbnNlcnRTdGFydCA+IHZpZXdzTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGkuaW5zZXJ0U3RhcnQgPSB2aWV3c0xlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpLmVudGVyaW5nUmVxdWlyZXNUcmFuc2l0aW9uID0gdGkuaW5zZXJ0U3RhcnQgPT09IHZpZXdzTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluc2VydFZpZXdzID0gdGkuaW5zZXJ0Vmlld3M7XG4gICAgICAgIGlmICghaW5zZXJ0Vmlld3MpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhc3NlcnQoaW5zZXJ0Vmlld3MubGVuZ3RoID4gMCwgJ2xlbmd0aCBjYW4gbm90IGJlIHplcm8nKTtcbiAgICAgICAgY29uc3Qgdmlld0NvbnRyb2xsZXJzID0gY29udmVydFRvVmlld3MoaW5zZXJ0Vmlld3MpO1xuICAgICAgICBpZiAodmlld0NvbnRyb2xsZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHZpZXdzIHRvIGluc2VydCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGFsbCB0aGUgaW5zZXJ0ZWQgdmlldyBhcmUgY29ycmVjdFxuICAgICAgICBmb3IgKGNvbnN0IHZpZXcgb2Ygdmlld0NvbnRyb2xsZXJzKSB7XG4gICAgICAgICAgICB2aWV3LmRlbGVnYXRlID0gdGkub3B0cy5kZWxlZ2F0ZTtcbiAgICAgICAgICAgIGNvbnN0IG5hdiA9IHZpZXcubmF2O1xuICAgICAgICAgICAgaWYgKG5hdiAmJiBuYXYgIT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2luc2VydGVkIHZpZXcgd2FzIGFscmVhZHkgaW5zZXJ0ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2aWV3LnN0YXRlID09PSBWSUVXX1NUQVRFX0RFU1RST1lFRCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW5zZXJ0ZWQgdmlldyB3YXMgYWxyZWFkeSBkZXN0cm95ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aS5pbnNlcnRWaWV3cyA9IHZpZXdDb250cm9sbGVycztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmlldyB0aGF0IHdpbGwgYmUgZW50ZXJlZCBjb25zaWRlcmluZyB0aGUgdHJhbnNpdGlvbiBpbnN0cnVjdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGkgVGhlIGluc3RydWN0aW9ucy5cbiAgICAgKiBAcGFyYW0gbGVhdmluZ1ZpZXcgVGhlIHZpZXcgYmVpbmcgbGVmdCBvciB1bmRlZmluZWQgaWYgbm9uZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSB2aWV3IHRoYXQgd2lsbCBiZSBlbnRlcmVkLCB1bmRlZmluZWQgaWYgbm9uZS5cbiAgICAgKi9cbiAgICBnZXRFbnRlcmluZ1ZpZXcodGksIGxlYXZpbmdWaWV3KSB7XG4gICAgICAgIC8vIFRoZSBsYXN0IGluc2VydGVkIHZpZXcgd2lsbCBiZSBlbnRlcmVkIHdoZW4gdmlldyBhcmUgaW5zZXJ0ZWQuXG4gICAgICAgIGNvbnN0IGluc2VydFZpZXdzID0gdGkuaW5zZXJ0Vmlld3M7XG4gICAgICAgIGlmIChpbnNlcnRWaWV3cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5zZXJ0Vmlld3NbaW5zZXJ0Vmlld3MubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiB2aWV3cyBhcmUgZGVsZXRlZCwgd2Ugd2lsbCBlbnRlciB0aGUgbGFzdCB2aWV3IHRoYXQgaXMgbm90IHJlbW92ZWQgYW5kIG5vdCB0aGUgdmlldyBiZWluZyBsZWZ0LlxuICAgICAgICBjb25zdCByZW1vdmVTdGFydCA9IHRpLnJlbW92ZVN0YXJ0O1xuICAgICAgICBpZiAocmVtb3ZlU3RhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qgdmlld3MgPSB0aGlzLnZpZXdzO1xuICAgICAgICAgICAgY29uc3QgcmVtb3ZlRW5kID0gcmVtb3ZlU3RhcnQgKyB0aS5yZW1vdmVDb3VudDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB2aWV3cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB2aWV3c1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoKGkgPCByZW1vdmVTdGFydCB8fCBpID49IHJlbW92ZUVuZCkgJiYgdmlldyAhPT0gbGVhdmluZ1ZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpZXc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW5kIFJlbW92ZXMgdGhlIHZpZXdzIGZyb20gdGhlIG5hdmlnYXRpb24gc3RhY2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW50ZXJpbmdWaWV3IFRoZSB2aWV3IGJlaW5nIGVudGVyZWQuXG4gICAgICogQHBhcmFtIGxlYXZpbmdWaWV3IFRoZSB2aWV3IGJlaW5nIGxlZnQuXG4gICAgICogQHBhcmFtIHRpIFRoZSBpbnN0cnVjdGlvbnMuXG4gICAgICovXG4gICAgcG9zdFZpZXdJbml0KGVudGVyaW5nVmlldywgbGVhdmluZ1ZpZXcsIHRpKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBhc3NlcnQobGVhdmluZ1ZpZXcgfHwgZW50ZXJpbmdWaWV3LCAnQm90aCBsZWF2aW5nVmlldyBhbmQgZW50ZXJpbmdWaWV3IGFyZSBudWxsJyk7XG4gICAgICAgIGFzc2VydCh0aS5yZXNvbHZlLCAncmVzb2x2ZSBtdXN0IGJlIHZhbGlkJyk7XG4gICAgICAgIGFzc2VydCh0aS5yZWplY3QsICdyZWplY3QgbXVzdCBiZSB2YWxpZCcpO1xuICAgICAgICAvLyBDb21wdXRlIHRoZSB2aWV3cyB0byByZW1vdmUuXG4gICAgICAgIGNvbnN0IG9wdHMgPSB0aS5vcHRzO1xuICAgICAgICBjb25zdCB7IGluc2VydFZpZXdzLCByZW1vdmVTdGFydCwgcmVtb3ZlQ291bnQgfSA9IHRpO1xuICAgICAgICAvKiogUmVjb3JkcyB0aGUgdmlldyB0byBkZXN0cm95ICovXG4gICAgICAgIGxldCBkZXN0cm95UXVldWU7XG4gICAgICAgIC8vIHRoZXJlIGFyZSB2aWV3cyB0byByZW1vdmVcbiAgICAgICAgaWYgKHJlbW92ZVN0YXJ0ICE9PSB1bmRlZmluZWQgJiYgcmVtb3ZlQ291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYXNzZXJ0KHJlbW92ZVN0YXJ0ID49IDAsICdyZW1vdmVTdGFydCBjYW4gbm90IGJlIG5lZ2F0aXZlJyk7XG4gICAgICAgICAgICBhc3NlcnQocmVtb3ZlQ291bnQgPj0gMCwgJ3JlbW92ZUNvdW50IGNhbiBub3QgYmUgbmVnYXRpdmUnKTtcbiAgICAgICAgICAgIGRlc3Ryb3lRdWV1ZSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHJlbW92ZVN0YXJ0OyBpIDwgcmVtb3ZlU3RhcnQgKyByZW1vdmVDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IHRoaXMudmlld3NbaV07XG4gICAgICAgICAgICAgICAgaWYgKHZpZXcgIT09IHVuZGVmaW5lZCAmJiB2aWV3ICE9PSBlbnRlcmluZ1ZpZXcgJiYgdmlldyAhPT0gbGVhdmluZ1ZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzdHJveVF1ZXVlLnB1c2godmlldyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZGVmYXVsdCB0aGUgZGlyZWN0aW9uIHRvIFwiYmFja1wiXG4gICAgICAgICAgICAoX2EgPSBvcHRzLmRpcmVjdGlvbikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKG9wdHMuZGlyZWN0aW9uID0gJ2JhY2snKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaW5hbE51bVZpZXdzID0gdGhpcy52aWV3cy5sZW5ndGggKyAoKF9iID0gaW5zZXJ0Vmlld3MgPT09IG51bGwgfHwgaW5zZXJ0Vmlld3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGluc2VydFZpZXdzLmxlbmd0aCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMCkgLSAocmVtb3ZlQ291bnQgIT09IG51bGwgJiYgcmVtb3ZlQ291bnQgIT09IHZvaWQgMCA/IHJlbW92ZUNvdW50IDogMCk7XG4gICAgICAgIGFzc2VydChmaW5hbE51bVZpZXdzID49IDAsICdmaW5hbCBiYWxhbmNlIGNhbiBub3QgYmUgbmVnYXRpdmUnKTtcbiAgICAgICAgaWYgKGZpbmFsTnVtVmlld3MgPT09IDApIHtcbiAgICAgICAgICAgIHByaW50SW9uV2FybmluZyhgW2lvbi1uYXZdIC0gWW91IGNhbid0IHJlbW92ZSBhbGwgdGhlIHBhZ2VzIGluIHRoZSBuYXZpZ2F0aW9uIHN0YWNrLiBuYXYucG9wKCkgaXMgcHJvYmFibHkgY2FsbGVkIHRvbyBtYW55IHRpbWVzLmAsIHRoaXMsIHRoaXMuZWwpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCduYXZpZ2F0aW9uIHN0YWNrIG5lZWRzIGF0IGxlYXN0IG9uZSByb290IHBhZ2UnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHRoZSB0cmFuc2l0aW9uIGNhbiBub3QgYmUgcmVqZWN0ZWQsIGFueSB0aHJvdyBzaG91bGQgYmUgYW4gZXJyb3JcbiAgICAgICAgLy8gSW5zZXJ0IHRoZSBuZXcgdmlld3MgaW4gdGhlIHN0YWNrLlxuICAgICAgICBpZiAoaW5zZXJ0Vmlld3MpIHtcbiAgICAgICAgICAgIC8vIGFkZCB0aGUgdmlld3MgdG8gdGhlXG4gICAgICAgICAgICBsZXQgaW5zZXJ0SW5kZXggPSB0aS5pbnNlcnRTdGFydDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdmlldyBvZiBpbnNlcnRWaWV3cykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0Vmlld0F0KHZpZXcsIGluc2VydEluZGV4KTtcbiAgICAgICAgICAgICAgICBpbnNlcnRJbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRpLmVudGVyaW5nUmVxdWlyZXNUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gZGVmYXVsdCB0byBmb3J3YXJkIGlmIG5vdCBhbHJlYWR5IHNldFxuICAgICAgICAgICAgICAgIChfYyA9IG9wdHMuZGlyZWN0aW9uKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAob3B0cy5kaXJlY3Rpb24gPSAnZm9yd2FyZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHRoZSB2aWV3cyB0byBiZSByZW1vdmVkIGFyZSBpbiB0aGUgYmVnaW5uaW5nIG9yIG1pZGRsZVxuICAgICAgICAvLyBhbmQgdGhlcmUgaXMgbm90IGEgdmlldyB0aGF0IG5lZWRzIHRvIHZpc3VhbGx5IHRyYW5zaXRpb24gb3V0XG4gICAgICAgIC8vIHRoZW4ganVzdCBkZXN0cm95IHRoZW0gYW5kIGRvbid0IHRyYW5zaXRpb24gYW55dGhpbmdcbiAgICAgICAgLy8gYmF0Y2ggYWxsIG9mIGxpZmVjeWNsZXMgdG9nZXRoZXJcbiAgICAgICAgLy8gbGV0J3MgbWFrZSBzdXJlLCBjYWxsYmFja3MgYXJlIHpvbmVkXG4gICAgICAgIGlmIChkZXN0cm95UXVldWUgJiYgZGVzdHJveVF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdmlldyBvZiBkZXN0cm95UXVldWUpIHtcbiAgICAgICAgICAgICAgICBsaWZlY3ljbGUodmlldy5lbGVtZW50LCBMSUZFQ1lDTEVfV0lMTF9MRUFWRSk7XG4gICAgICAgICAgICAgICAgbGlmZWN5Y2xlKHZpZXcuZWxlbWVudCwgTElGRUNZQ0xFX0RJRF9MRUFWRSk7XG4gICAgICAgICAgICAgICAgbGlmZWN5Y2xlKHZpZXcuZWxlbWVudCwgTElGRUNZQ0xFX1dJTExfVU5MT0FEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG9uY2UgYWxsIGxpZmVjeWNsZSBldmVudHMgaGFzIGJlZW4gZGVsaXZlcmVkLCB3ZSBjYW4gc2FmZWx5IGRldHJveSB0aGUgdmlld3NcbiAgICAgICAgICAgIGZvciAoY29uc3QgdmlldyBvZiBkZXN0cm95UXVldWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lWaWV3KHZpZXcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHRyYW5zaXRpb24oZW50ZXJpbmdWaWV3LCBsZWF2aW5nVmlldywgdGkpIHtcbiAgICAgICAgLy8gd2Ugc2hvdWxkIGFuaW1hdGUgKGR1cmF0aW9uID4gMCkgaWYgdGhlIHB1c2hlZCBwYWdlIGlzIG5vdCB0aGUgZmlyc3Qgb25lIChzdGFydHVwKVxuICAgICAgICAvLyBvciBpZiBpdCBpcyBhIHBvcnRhbCAobW9kYWwsIGFjdGlvbnNoZWV0LCBldGMuKVxuICAgICAgICBjb25zdCBvcHRzID0gdGkub3B0cztcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NDYWxsYmFjayA9IG9wdHMucHJvZ3Jlc3NBbmltYXRpb25cbiAgICAgICAgICAgID8gKGFuaSkgPT4ge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEJlY2F1c2UgdGhpcyBwcm9ncmVzcyBjYWxsYmFjayBpcyBjYWxsZWQgYXN5bmNocm9ub3VzbHlcbiAgICAgICAgICAgICAgICAgKiBpdCBpcyBwb3NzaWJsZSBmb3IgdGhlIGdlc3R1cmUgdG8gc3RhcnQgYW5kIGVuZCBiZWZvcmVcbiAgICAgICAgICAgICAgICAgKiB0aGUgYW5pbWF0aW9uIGlzIGV2ZXIgc2V0LiBJbiB0aGF0IHNjZW5hcmlvLCB3ZSBzaG91bGRcbiAgICAgICAgICAgICAgICAgKiBpbW1lZGlhdGVseSBjYWxsIHByb2dyZXNzRW5kIHNvIHRoYXQgdGhlIHRyYW5zaXRpb24gcHJvbWlzZVxuICAgICAgICAgICAgICAgICAqIHJlc29sdmVzIGFuZCB0aGUgZ2VzdHVyZSBkb2VzIG5vdCBnZXQgbG9ja2VkIHVwLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGlmIChhbmkgIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5nZXN0dXJlT3JBbmltYXRpb25JblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VzdHVyZU9yQW5pbWF0aW9uSW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGFuaS5vbkZpbmlzaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdlc3R1cmVPckFuaW1hdGlvbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSwgeyBvbmVUaW1lQ2FsbGJhY2s6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBQbGF5aW5nIGFuaW1hdGlvbiB0byBiZWdpbm5pbmdcbiAgICAgICAgICAgICAgICAgICAgICogd2l0aCBhIGR1cmF0aW9uIG9mIDAgcHJldmVudHNcbiAgICAgICAgICAgICAgICAgICAgICogYW55IGZsaWNrZXJpbmcgd2hlbiB0aGUgYW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIGlzIGxhdGVyIGNsZWFuZWQgdXAuXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBhbmkucHJvZ3Jlc3NFbmQoMCwgMCwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNiQW5pID0gYW5pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICAgICAgY29uc3QgZW50ZXJpbmdFbCA9IGVudGVyaW5nVmlldy5lbGVtZW50O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3ByZWZlci1vcHRpb25hbC1jaGFpblxuICAgICAgICBjb25zdCBsZWF2aW5nRWwgPSBsZWF2aW5nVmlldyAmJiBsZWF2aW5nVmlldy5lbGVtZW50O1xuICAgICAgICBjb25zdCBhbmltYXRpb25PcHRzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbW9kZSwgc2hvd0dvQmFjazogdGhpcy5jYW5Hb0JhY2tTeW5jKGVudGVyaW5nVmlldyksIGJhc2VFbDogdGhpcy5lbCwgcHJvZ3Jlc3NDYWxsYmFjaywgYW5pbWF0ZWQ6IHRoaXMuYW5pbWF0ZWQgJiYgY29uZmlnLmdldEJvb2xlYW4oJ2FuaW1hdGVkJywgdHJ1ZSksIGVudGVyaW5nRWwsXG4gICAgICAgICAgICBsZWF2aW5nRWwgfSwgb3B0cyksIHsgYW5pbWF0aW9uQnVpbGRlcjogb3B0cy5hbmltYXRpb25CdWlsZGVyIHx8IHRoaXMuYW5pbWF0aW9uIHx8IGNvbmZpZy5nZXQoJ25hdkFuaW1hdGlvbicpIH0pO1xuICAgICAgICBjb25zdCB7IGhhc0NvbXBsZXRlZCB9ID0gYXdhaXQgdHJhbnNpdGlvbihhbmltYXRpb25PcHRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNpdGlvbkZpbmlzaChoYXNDb21wbGV0ZWQsIGVudGVyaW5nVmlldywgbGVhdmluZ1ZpZXcsIG9wdHMpO1xuICAgIH1cbiAgICB0cmFuc2l0aW9uRmluaXNoKGhhc0NvbXBsZXRlZCwgZW50ZXJpbmdWaWV3LCBsZWF2aW5nVmlldywgb3B0cykge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIHRyYW5zaXRpb24gZGlkIG5vdCBjb21wbGV0ZSwgdGhlIGxlYXZpbmdWaWV3IHdpbGwgc3RpbGwgYmUgdGhlIGFjdGl2ZVxuICAgICAgICAgKiB2aWV3IG9uIHRoZSBzdGFjay4gT3RoZXJ3aXNlIHVubW91bnQgYWxsIHRoZSB2aWV3cyBhZnRlciB0aGUgZW50ZXJpbmdWaWV3LlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IGhhc0NvbXBsZXRlZCA/IGVudGVyaW5nVmlldyA6IGxlYXZpbmdWaWV3O1xuICAgICAgICBpZiAoYWN0aXZlVmlldykge1xuICAgICAgICAgICAgdGhpcy51bm1vdW50SW5hY3RpdmVWaWV3cyhhY3RpdmVWaWV3KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGFzQ29tcGxldGVkLFxuICAgICAgICAgICAgcmVxdWlyZXNUcmFuc2l0aW9uOiB0cnVlLFxuICAgICAgICAgICAgZW50ZXJpbmdWaWV3LFxuICAgICAgICAgICAgbGVhdmluZ1ZpZXcsXG4gICAgICAgICAgICBkaXJlY3Rpb246IG9wdHMuZGlyZWN0aW9uLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIGEgdmlldyBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICAgICAqXG4gICAgICogV2hlbiB0aGUgdmlldyBhbHJlYWR5IGlzIGluIHRoZSBzdGFjayBpdCB3aWxsIGJlIG1vdmVkIHRvIHRoZSBuZXcgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmlldyBUaGUgdmlldyB0byBpbnNlcnQuXG4gICAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCB3aGVyZSB0byBpbnNlcnQgdGhlIHZpZXcuXG4gICAgICovXG4gICAgaW5zZXJ0Vmlld0F0KHZpZXcsIGluZGV4KSB7XG4gICAgICAgIGNvbnN0IHZpZXdzID0gdGhpcy52aWV3cztcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IHZpZXdzLmluZGV4T2Yodmlldyk7XG4gICAgICAgIGlmIChleGlzdGluZ0luZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIGFzc2VydCh2aWV3Lm5hdiA9PT0gdGhpcywgJ3ZpZXcgaXMgbm90IHBhcnQgb2YgdGhlIG5hdicpO1xuICAgICAgICAgICAgLy8gVGhlIHZpZXcgYWxyZWFkeSBpbiB0aGUgc3RhY2ssIHJlbW92ZXMgaXQuXG4gICAgICAgICAgICB2aWV3cy5zcGxpY2UoZXhpc3RpbmdJbmRleCwgMSk7XG4gICAgICAgICAgICAvLyBhbmQgYWRkIGl0IGJhY2sgYXQgdGhlIHJlcXVlc3RlZCBpbmRleC5cbiAgICAgICAgICAgIHZpZXdzLnNwbGljZShpbmRleCwgMCwgdmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQoIXZpZXcubmF2LCAnbmF2IGlzIHVzZWQnKTtcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgYSBuZXcgdmlldyB0byBhZGQgdG8gdGhlIHN0YWNrXG4gICAgICAgICAgICAvLyBjcmVhdGUgdGhlIG5ldyBlbnRlcmluZyB2aWV3XG4gICAgICAgICAgICB2aWV3Lm5hdiA9IHRoaXM7XG4gICAgICAgICAgICB2aWV3cy5zcGxpY2UoaW5kZXgsIDAsIHZpZXcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSB2aWV3IGZyb20gdGhlIHN0YWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZpZXcgVGhlIHZpZXcgdG8gcmVtb3ZlLlxuICAgICAqL1xuICAgIHJlbW92ZVZpZXcodmlldykge1xuICAgICAgICBhc3NlcnQodmlldy5zdGF0ZSA9PT0gVklFV19TVEFURV9BVFRBQ0hFRCB8fCB2aWV3LnN0YXRlID09PSBWSUVXX1NUQVRFX0RFU1RST1lFRCwgJ3ZpZXcgc3RhdGUgc2hvdWxkIGJlIGxvYWRlZCBvciBkZXN0cm95ZWQnKTtcbiAgICAgICAgY29uc3Qgdmlld3MgPSB0aGlzLnZpZXdzO1xuICAgICAgICBjb25zdCBpbmRleCA9IHZpZXdzLmluZGV4T2Yodmlldyk7XG4gICAgICAgIGFzc2VydChpbmRleCA+IC0xLCAndmlldyBtdXN0IGJlIHBhcnQgb2YgdGhlIHN0YWNrJyk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB2aWV3cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3lWaWV3KHZpZXcpIHtcbiAgICAgICAgdmlldy5fZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnJlbW92ZVZpZXcodmlldyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVubW91bnRzIGFsbCBpbmFjdGl2ZSB2aWV3cyBhZnRlciB0aGUgc3BlY2lmaWVkIGFjdGl2ZSB2aWV3LlxuICAgICAqXG4gICAgICogRE9NIFdSSVRFXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWN0aXZlVmlldyBUaGUgdmlldyB0aGF0IGlzIGFjdGl2ZWx5IHZpc2libGUgaW4gdGhlIHN0YWNrLiBVc2VkIHRvIGNhbGN1bGF0ZSB3aGljaCB2aWV3cyB0byB1bm1vdW50LlxuICAgICAqL1xuICAgIHVubW91bnRJbmFjdGl2ZVZpZXdzKGFjdGl2ZVZpZXcpIHtcbiAgICAgICAgLy8gb2ssIGNsZWFudXAgdGltZSEhIERlc3Ryb3kgYWxsIG9mIHRoZSB2aWV3cyB0aGF0IGFyZVxuICAgICAgICAvLyBJTkFDVElWRSBhbmQgY29tZSBhZnRlciB0aGUgYWN0aXZlIHZpZXdcbiAgICAgICAgLy8gb25seSBkbyB0aGlzIGlmIHRoZSB2aWV3cyBleGlzdCwgdGhvdWdoXG4gICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZpZXdzID0gdGhpcy52aWV3cztcbiAgICAgICAgY29uc3QgYWN0aXZlVmlld0luZGV4ID0gdmlld3MuaW5kZXhPZihhY3RpdmVWaWV3KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHZpZXdzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gdmlld3NbaV07XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFdoZW4gaW5zZXJ0aW5nIG11bHRpcGxlIHZpZXdzIHZpYSBpbnNlcnRQYWdlc1xuICAgICAgICAgICAgICogdGhlIGxhc3QgcGFnZSB3aWxsIGJlIHRyYW5zaXRpb25lZCB0bywgYnV0IHRoZVxuICAgICAgICAgICAgICogb3RoZXJzIHdpbGwgbm90IGJlLiBBcyBhIHJlc3VsdCwgYSBET00gZWxlbWVudFxuICAgICAgICAgICAgICogd2lsbCBvbmx5IGJlIGNyZWF0ZWQgZm9yIHRoZSBsYXN0IHBhZ2UgaW5zZXJ0ZWQuXG4gICAgICAgICAgICAgKiBBcyBhIHJlc3VsdCwgaXQgaXMgcG9zc2libGUgdG8gaGF2ZSB2aWV3cyBpbiB0aGVcbiAgICAgICAgICAgICAqIHN0YWNrIHRoYXQgZG8gbm90IGhhdmUgYHZpZXcuZWxlbWVudGAgeWV0LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdmlldy5lbGVtZW50O1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA+IGFjdGl2ZVZpZXdJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHZpZXcgY29tZXMgYWZ0ZXIgdGhlIGFjdGl2ZSB2aWV3XG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCdzIHVubG9hZCBpdFxuICAgICAgICAgICAgICAgICAgICBsaWZlY3ljbGUoZWxlbWVudCwgTElGRUNZQ0xFX1dJTExfVU5MT0FEKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95Vmlldyh2aWV3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA8IGFjdGl2ZVZpZXdJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHZpZXcgY29tZXMgYmVmb3JlIHRoZSBhY3RpdmUgdmlld1xuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaXQgaXMgbm90IGEgcG9ydGFsIHRoZW4gZW5zdXJlIGl0IGlzIGhpZGRlblxuICAgICAgICAgICAgICAgICAgICBzZXRQYWdlSGlkZGVuKGVsZW1lbnQsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYW5TdGFydCgpIHtcbiAgICAgICAgcmV0dXJuICghdGhpcy5nZXN0dXJlT3JBbmltYXRpb25JblByb2dyZXNzICYmXG4gICAgICAgICAgICAhIXRoaXMuc3dpcGVHZXN0dXJlICYmXG4gICAgICAgICAgICAhdGhpcy5pc1RyYW5zaXRpb25pbmcgJiZcbiAgICAgICAgICAgIHRoaXMudHJhbnNJbnN0ci5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAgIHRoaXMuY2FuR29CYWNrU3luYygpKTtcbiAgICB9XG4gICAgb25TdGFydCgpIHtcbiAgICAgICAgdGhpcy5nZXN0dXJlT3JBbmltYXRpb25JblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wb3AoeyBkaXJlY3Rpb246ICdiYWNrJywgcHJvZ3Jlc3NBbmltYXRpb246IHRydWUgfSk7XG4gICAgfVxuICAgIG9uTW92ZShzdGVwVmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuc2JBbmkpIHtcbiAgICAgICAgICAgIHRoaXMuc2JBbmkucHJvZ3Jlc3NTdGVwKHN0ZXBWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25FbmQoc2hvdWxkQ29tcGxldGUsIHN0ZXBWYWx1ZSwgZHVyKSB7XG4gICAgICAgIGlmICh0aGlzLnNiQW5pKSB7XG4gICAgICAgICAgICB0aGlzLnNiQW5pLm9uRmluaXNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmdlc3R1cmVPckFuaW1hdGlvbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sIHsgb25lVGltZUNhbGxiYWNrOiB0cnVlIH0pO1xuICAgICAgICAgICAgLy8gQWNjb3VudCBmb3Igcm91bmRpbmcgZXJyb3JzIGluIEpTXG4gICAgICAgICAgICBsZXQgbmV3U3RlcFZhbHVlID0gc2hvdWxkQ29tcGxldGUgPyAtMWUtMyA6IDAuMDAxO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBBbmltYXRpb24gd2lsbCBiZSByZXZlcnNlZCBoZXJlLCBzbyBuZWVkIHRvXG4gICAgICAgICAgICAgKiByZXZlcnNlIHRoZSBlYXNpbmcgY3VydmUgYXMgd2VsbFxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEFkZGl0aW9uYWxseSwgd2UgbmVlZCB0byBhY2NvdW50IGZvciB0aGUgdGltZSByZWxhdGl2ZVxuICAgICAgICAgICAgICogdG8gdGhlIG5ldyBlYXNpbmcgY3VydmUsIGFzIGBzdGVwVmFsdWVgIGlzIGdvaW5nIHRvIGJlIGdpdmVuXG4gICAgICAgICAgICAgKiBpbiB0ZXJtcyBvZiBhIGxpbmVhciBjdXJ2ZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKCFzaG91bGRDb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2JBbmkuZWFzaW5nKCdjdWJpYy1iZXppZXIoMSwgMCwgMC42OCwgMC4yOCknKTtcbiAgICAgICAgICAgICAgICBuZXdTdGVwVmFsdWUgKz0gZ2V0VGltZUdpdmVuUHJvZ3Jlc3Npb24oWzAsIDBdLCBbMSwgMF0sIFswLjY4LCAwLjI4XSwgWzEsIDFdLCBzdGVwVmFsdWUpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U3RlcFZhbHVlICs9IGdldFRpbWVHaXZlblByb2dyZXNzaW9uKFswLCAwXSwgWzAuMzIsIDAuNzJdLCBbMCwgMV0sIFsxLCAxXSwgc3RlcFZhbHVlKVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2JBbmkucHJvZ3Jlc3NFbmQoc2hvdWxkQ29tcGxldGUgPyAxIDogMCwgbmV3U3RlcFZhbHVlLCBkdXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5nZXN0dXJlT3JBbmltYXRpb25JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gaChcInNsb3RcIiwgeyBrZXk6ICc4MDY3Yzk4MzVkMjU1ZGFlYzYxZjMzZGJhMjAwZmQzYTZmZjgzOWEwJyB9KTtcbiAgICB9XG4gICAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxuICAgIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgICAgIFwic3dpcGVHZXN0dXJlXCI6IFtcInN3aXBlR2VzdHVyZUNoYW5nZWRcIl0sXG4gICAgICAgIFwicm9vdFwiOiBbXCJyb290Q2hhbmdlZFwiXVxuICAgIH07IH1cbn07XG5OYXYuc3R5bGUgPSBuYXZDc3M7XG5cbmNvbnN0IG5hdkxpbmsgPSAoZWwsIHJvdXRlckRpcmVjdGlvbiwgY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgcm91dGVyQW5pbWF0aW9uKSA9PiB7XG4gICAgY29uc3QgbmF2ID0gZWwuY2xvc2VzdCgnaW9uLW5hdicpO1xuICAgIGlmIChuYXYpIHtcbiAgICAgICAgaWYgKHJvdXRlckRpcmVjdGlvbiA9PT0gJ2ZvcndhcmQnKSB7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmF2LnB1c2goY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgeyBza2lwSWZCdXN5OiB0cnVlLCBhbmltYXRpb25CdWlsZGVyOiByb3V0ZXJBbmltYXRpb24gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocm91dGVyRGlyZWN0aW9uID09PSAncm9vdCcpIHtcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuYXYuc2V0Um9vdChjb21wb25lbnQsIGNvbXBvbmVudFByb3BzLCB7IHNraXBJZkJ1c3k6IHRydWUsIGFuaW1hdGlvbkJ1aWxkZXI6IHJvdXRlckFuaW1hdGlvbiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyb3V0ZXJEaXJlY3Rpb24gPT09ICdiYWNrJykge1xuICAgICAgICAgICAgcmV0dXJuIG5hdi5wb3AoeyBza2lwSWZCdXN5OiB0cnVlLCBhbmltYXRpb25CdWlsZGVyOiByb3V0ZXJBbmltYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG59O1xuXG5jb25zdCBOYXZMaW5rID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0cmFuc2l0aW9uIGRpcmVjdGlvbiB3aGVuIG5hdmlnYXRpbmcgdG8gYW5vdGhlciBwYWdlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yb3V0ZXJEaXJlY3Rpb24gPSAnZm9yd2FyZCc7XG4gICAgICAgIHRoaXMub25DbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuYXZMaW5rKHRoaXMuZWwsIHRoaXMucm91dGVyRGlyZWN0aW9uLCB0aGlzLmNvbXBvbmVudCwgdGhpcy5jb21wb25lbnRQcm9wcywgdGhpcy5yb3V0ZXJBbmltYXRpb24pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBoKEhvc3QsIHsga2V5OiAnNmRiYjFhZDRmMzUxZTkyMTUzNzVhYWMxMWFiOWI1Mzc2MmUwN2EwOCcsIG9uQ2xpY2s6IHRoaXMub25DbGljayB9KTtcbiAgICB9XG4gICAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcblxuZXhwb3J0IHsgTmF2IGFzIGlvbl9uYXYsIE5hdkxpbmsgYXMgaW9uX25hdl9saW5rIH07XG4iXSwibmFtZXMiOlsiciIsInJlZ2lzdGVySW5zdGFuY2UiLCJkIiwiY3JlYXRlRXZlbnQiLCJlIiwiZ2V0SW9uTW9kZSIsImwiLCJjb25maWciLCJtIiwicHJpbnRJb25XYXJuaW5nIiwiaCIsImsiLCJnZXRFbGVtZW50IiwiaiIsIkhvc3QiLCJnIiwiZ2V0VGltZUdpdmVuUHJvZ3Jlc3Npb24iLCJzIiwic2hhbGxvd0VxdWFsU3RyaW5nTWFwIiwiYXNzZXJ0IiwibGlmZWN5Y2xlIiwidCIsInRyYW5zaXRpb24iLCJzZXRQYWdlSGlkZGVuIiwiTElGRUNZQ0xFX1dJTExfVU5MT0FEIiwiYiIsIkxJRkVDWUNMRV9XSUxMX0xFQVZFIiwiYyIsIkxJRkVDWUNMRV9ESURfTEVBVkUiLCJhIiwiYXR0YWNoQ29tcG9uZW50IiwiVklFV19TVEFURV9ORVciLCJWSUVXX1NUQVRFX0FUVEFDSEVEIiwiVklFV19TVEFURV9ERVNUUk9ZRUQiLCJWaWV3Q29udHJvbGxlciIsImNvbnN0cnVjdG9yIiwiY29tcG9uZW50IiwicGFyYW1zIiwic3RhdGUiLCJpbml0IiwiY29udGFpbmVyIiwiX3RoaXMiLCJfYXN5bmNUb0dlbmVyYXRvciIsImVsZW1lbnQiLCJkZWxlZ2F0ZSIsIl9kZXN0cm95IiwicmVtb3ZlVmlld0Zyb21Eb20iLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlIiwibmF2IiwidW5kZWZpbmVkIiwibWF0Y2hlcyIsInZpZXciLCJpZCIsImNvbnZlcnRUb1ZpZXciLCJwYWdlIiwiY29udmVydFRvVmlld3MiLCJwYWdlcyIsIm1hcCIsImNvbXBvbmVudFByb3BzIiwiZmlsdGVyIiwidiIsIm5hdkNzcyIsIk5hdiIsImhvc3RSZWYiLCJpb25OYXZXaWxsTG9hZCIsImlvbk5hdldpbGxDaGFuZ2UiLCJpb25OYXZEaWRDaGFuZ2UiLCJ0cmFuc0luc3RyIiwiZ2VzdHVyZU9yQW5pbWF0aW9uSW5Qcm9ncmVzcyIsInVzZVJvdXRlciIsImlzVHJhbnNpdGlvbmluZyIsImRlc3Ryb3llZCIsInZpZXdzIiwiZGlkTG9hZCIsImFuaW1hdGVkIiwic3dpcGVHZXN0dXJlQ2hhbmdlZCIsImdlc3R1cmUiLCJlbmFibGUiLCJzd2lwZUdlc3R1cmUiLCJyb290Q2hhbmdlZCIsInJvb3QiLCJzZXRSb290Iiwicm9vdFBhcmFtcyIsImNvbXBvbmVudFdpbGxMb2FkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWwiLCJjbG9zZXN0IiwibW9kZSIsImdldEJvb2xlYW4iLCJlbWl0IiwiY29tcG9uZW50RGlkTG9hZCIsIl90aGlzMiIsImNyZWF0ZVN3aXBlQmFja0dlc3R1cmUiLCJjYW5TdGFydCIsImJpbmQiLCJvblN0YXJ0Iiwib25Nb3ZlIiwib25FbmQiLCJjb25uZWN0ZWRDYWxsYmFjayIsImRpc2Nvbm5lY3RlZENhbGxiYWNrIiwiZGVzdHJveSIsImxlbmd0aCIsInB1c2giLCJvcHRzIiwiZG9uZSIsImluc2VydCIsImluc2VydEluZGV4IiwiaW5zZXJ0UGFnZXMiLCJpbnNlcnRDb21wb25lbnRzIiwicXVldWVUcm5zIiwiaW5zZXJ0U3RhcnQiLCJpbnNlcnRWaWV3cyIsInBvcCIsInJlbW92ZUluZGV4IiwicG9wVG8iLCJpbmRleE9yVmlld0N0cmwiLCJ0aSIsInJlbW92ZVN0YXJ0IiwicmVtb3ZlQ291bnQiLCJyZW1vdmVWaWV3IiwicG9wVG9Sb290Iiwic3RhcnRJbmRleCIsInNldFBhZ2VzIiwic2V0Um91dGVJZCIsImRpcmVjdGlvbiIsImFuaW1hdGlvbiIsImFjdGl2ZSIsImdldEFjdGl2ZVN5bmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsImNoYW5nZWQiLCJwcm9taXNlIiwiZmluaXNoIiwiY29tbW9uT3B0cyIsInVwZGF0ZVVSTCIsInZpZXdJc1JlYWR5IiwiZW50ZXJpbmdFbCIsIm1hcmsiLCJwIiwibWFya1Zpc2libGUiLCJfcmVmIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJ2aWV3Q29udHJvbGxlciIsImZpbmQiLCJPYmplY3QiLCJhc3NpZ24iLCJhbmltYXRpb25CdWlsZGVyIiwiZ2V0Um91dGVJZCIsIl90aGlzMyIsInRhZ05hbWUiLCJnZXRBY3RpdmUiLCJfdGhpczQiLCJnZXRCeUluZGV4IiwiaW5kZXgiLCJfdGhpczUiLCJjYW5Hb0JhY2siLCJfdGhpczYiLCJjYW5Hb0JhY2tTeW5jIiwiZ2V0UHJldmlvdXMiLCJfdGhpczciLCJnZXRQcmV2aW91c1N5bmMiLCJnZXRMZW5ndGgiLCJfdGhpczgiLCJpbmRleE9mIiwiX3RoaXM5IiwiX2EiLCJfYiIsInNraXBJZkJ1c3kiLCJyZWplY3QiLCJyb3V0ZXIiLCJjYW5UcmFuc2l0aW9uIiwibmV4dFRybnMiLCJzdWNjZXNzIiwicmVzdWx0IiwiZmlyZUVycm9yIiwiaGFzQ29tcGxldGVkIiwicmVxdWlyZXNUcmFuc2l0aW9uIiwiZW50ZXJpbmdWaWV3IiwibGVhdmluZ1ZpZXciLCJuYXZDaGFuZ2VkIiwiZmFpbGVkIiwicmVqZWN0UmVhc29uIiwic2hpZnQiLCJydW5UcmFuc2l0aW9uIiwiX3RoaXMwIiwicHJlcGFyZVRJIiwiZ2V0RW50ZXJpbmdWaWV3IiwiRXJyb3IiLCJwb3N0Vmlld0luaXQiLCJlbnRlcmluZ1JlcXVpcmVzVHJhbnNpdGlvbiIsImxlYXZpbmdSZXF1aXJlc1RyYW5zaXRpb24iLCJpc0JhY2tEaXJlY3Rpb24iLCJfYyIsInZpZXdzTGVuZ3RoIiwidmlld0NvbnRyb2xsZXJzIiwicmVtb3ZlRW5kIiwiaSIsImRlc3Ryb3lRdWV1ZSIsImZpbmFsTnVtVmlld3MiLCJpbnNlcnRWaWV3QXQiLCJkZXN0cm95VmlldyIsIl90aGlzMSIsInByb2dyZXNzQ2FsbGJhY2siLCJwcm9ncmVzc0FuaW1hdGlvbiIsImFuaSIsIm9uRmluaXNoIiwib25lVGltZUNhbGxiYWNrIiwicHJvZ3Jlc3NFbmQiLCJzYkFuaSIsImxlYXZpbmdFbCIsImFuaW1hdGlvbk9wdHMiLCJzaG93R29CYWNrIiwiYmFzZUVsIiwiZ2V0IiwidHJhbnNpdGlvbkZpbmlzaCIsImFjdGl2ZVZpZXciLCJ1bm1vdW50SW5hY3RpdmVWaWV3cyIsImV4aXN0aW5nSW5kZXgiLCJzcGxpY2UiLCJhY3RpdmVWaWV3SW5kZXgiLCJzdGVwVmFsdWUiLCJwcm9ncmVzc1N0ZXAiLCJzaG91bGRDb21wbGV0ZSIsImR1ciIsIm5ld1N0ZXBWYWx1ZSIsImVhc2luZyIsInJlbmRlciIsImtleSIsIndhdGNoZXJzIiwic3R5bGUiLCJuYXZMaW5rIiwicm91dGVyRGlyZWN0aW9uIiwicm91dGVyQW5pbWF0aW9uIiwiTmF2TGluayIsIm9uQ2xpY2siLCJpb25fbmF2IiwiaW9uX25hdl9saW5rIl0sInNvdXJjZVJvb3QiOiJ3ZWJwYWNrOi8vLyIsInhfZ29vZ2xlX2lnbm9yZUxpc3QiOlswXX0=