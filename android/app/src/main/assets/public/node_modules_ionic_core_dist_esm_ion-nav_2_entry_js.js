"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_ion-nav_2_entry_js"],{

/***/ 393:
/*!**************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/ion-nav_2.entry.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ion_nav: () => (/* binding */ Nav),
/* harmony export */   ion_nav_link: () => (/* binding */ NavLink)
/* harmony export */ });
/* harmony import */ var C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 9204);
/* harmony import */ var _index_527b9e34_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-527b9e34.js */ 4514);
/* harmony import */ var _cubic_bezier_fe2083dc_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cubic-bezier-fe2083dc.js */ 2738);
/* harmony import */ var _helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helpers-78efeec3.js */ 9522);
/* harmony import */ var _ionic_global_ca86cf32_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ionic-global-ca86cf32.js */ 1367);
/* harmony import */ var _index_ecb55b8d_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index-ecb55b8d.js */ 4223);
/* harmony import */ var _framework_delegate_2eea1763_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./framework-delegate-2eea1763.js */ 9199);
/* harmony import */ var _index_738d7504_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./index-738d7504.js */ 7243);

/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */







const VIEW_STATE_NEW = 1;
const VIEW_STATE_ATTACHED = 2;
const VIEW_STATE_DESTROYED = 3;
// TODO(FW-2832): types
class ViewController {
  constructor(component, params) {
    this.component = component;
    this.params = params;
    this.state = VIEW_STATE_NEW;
  }
  init(container) {
    var _this = this;
    return (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.state = VIEW_STATE_ATTACHED;
      if (!_this.element) {
        const component = _this.component;
        _this.element = yield (0,_framework_delegate_2eea1763_js__WEBPACK_IMPORTED_MODULE_6__.a)(_this.delegate, container, component, ['ion-page', 'ion-page-invisible'], _this.params);
      }
    })();
  }
  /**
   * DOM WRITE
   */
  _destroy() {
    (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(this.state !== VIEW_STATE_DESTROYED, 'view state must be ATTACHED');
    const element = this.element;
    if (element) {
      if (this.delegate) {
        this.delegate.removeViewFromDom(element.parentElement, element);
      } else {
        element.remove();
      }
    }
    this.nav = undefined;
    this.state = VIEW_STATE_DESTROYED;
  }
}
const matches = (view, id, params) => {
  if (!view) {
    return false;
  }
  if (view.component !== id) {
    return false;
  }
  return (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.s)(view.params, params);
};
const convertToView = (page, params) => {
  if (!page) {
    return null;
  }
  if (page instanceof ViewController) {
    return page;
  }
  return new ViewController(page, params);
};
const convertToViews = pages => {
  return pages.map(page => {
    if (page instanceof ViewController) {
      return page;
    }
    if ('component' in page) {
      return convertToView(page.component, page.componentProps === null ? undefined : page.componentProps);
    }
    return convertToView(page, undefined);
  }).filter(v => v !== null);
};
const navCss = ":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}";
const IonNavStyle0 = navCss;
const Nav = class {
  constructor(hostRef) {
    (0,_index_527b9e34_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.ionNavWillLoad = (0,_index_527b9e34_js__WEBPACK_IMPORTED_MODULE_1__.c)(this, "ionNavWillLoad", 7);
    this.ionNavWillChange = (0,_index_527b9e34_js__WEBPACK_IMPORTED_MODULE_1__.c)(this, "ionNavWillChange", 3);
    this.ionNavDidChange = (0,_index_527b9e34_js__WEBPACK_IMPORTED_MODULE_1__.c)(this, "ionNavDidChange", 3);
    this.transInstr = [];
    this.gestureOrAnimationInProgress = false;
    this.useRouter = false;
    this.isTransitioning = false;
    this.destroyed = false;
    this.views = [];
    this.didLoad = false;
    this.delegate = undefined;
    this.swipeGesture = undefined;
    this.animated = true;
    this.animation = undefined;
    this.rootParams = undefined;
    this.root = undefined;
  }
  swipeGestureChanged() {
    if (this.gesture) {
      this.gesture.enable(this.swipeGesture === true);
    }
  }
  rootChanged() {
    if (this.root === undefined) {
      return;
    }
    if (this.didLoad === false) {
      /**
       * If the component has not loaded yet, we can skip setting up the root component.
       * It will be called when `componentDidLoad` fires.
       */
      return;
    }
    if (!this.useRouter) {
      if (this.root !== undefined) {
        this.setRoot(this.root, this.rootParams);
      }
    }
  }
  componentWillLoad() {
    this.useRouter = document.querySelector('ion-router') !== null && this.el.closest('[no-router]') === null;
    if (this.swipeGesture === undefined) {
      const mode = (0,_ionic_global_ca86cf32_js__WEBPACK_IMPORTED_MODULE_4__.b)(this);
      this.swipeGesture = _ionic_global_ca86cf32_js__WEBPACK_IMPORTED_MODULE_4__.c.getBoolean('swipeBackEnabled', mode === 'ios');
    }
    this.ionNavWillLoad.emit();
  }
  componentDidLoad() {
    var _this2 = this;
    return (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      // We want to set this flag before any watch callbacks are manually called
      _this2.didLoad = true;
      _this2.rootChanged();
      _this2.gesture = (yield __webpack_require__.e(/*! import() */ "common").then(__webpack_require__.bind(__webpack_require__, /*! ./swipe-back-07df2095.js */ 7734))).createSwipeBackGesture(_this2.el, _this2.canStart.bind(_this2), _this2.onStart.bind(_this2), _this2.onMove.bind(_this2), _this2.onEnd.bind(_this2));
      _this2.swipeGestureChanged();
    })();
  }
  connectedCallback() {
    this.destroyed = false;
  }
  disconnectedCallback() {
    for (const view of this.views) {
      (0,_index_ecb55b8d_js__WEBPACK_IMPORTED_MODULE_5__.l)(view.element, _index_ecb55b8d_js__WEBPACK_IMPORTED_MODULE_5__.d);
      view._destroy();
    }
    // Release swipe back gesture and transition.
    if (this.gesture) {
      this.gesture.destroy();
      this.gesture = undefined;
    }
    this.transInstr.length = 0;
    this.views.length = 0;
    this.destroyed = true;
  }
  /**
   * Push a new component onto the current navigation stack. Pass any additional
   * information along as an object. This additional information is accessible
   * through NavParams.
   *
   * @param component The component to push onto the navigation stack.
   * @param componentProps Any properties of the component.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  push(component, componentProps, opts, done) {
    return this.insert(-1, component, componentProps, opts, done);
  }
  /**
   * Inserts a component into the navigation stack at the specified index.
   * This is useful to add a component at any point in the navigation stack.
   *
   * @param insertIndex The index to insert the component at in the stack.
   * @param component The component to insert into the navigation stack.
   * @param componentProps Any properties of the component.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  insert(insertIndex, component, componentProps, opts, done) {
    return this.insertPages(insertIndex, [{
      component,
      componentProps
    }], opts, done);
  }
  /**
   * Inserts an array of components into the navigation stack at the specified index.
   * The last component in the array will become instantiated as a view, and animate
   * in to become the active view.
   *
   * @param insertIndex The index to insert the components at in the stack.
   * @param insertComponents The components to insert into the navigation stack.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  insertPages(insertIndex, insertComponents, opts, done) {
    return this.queueTrns({
      insertStart: insertIndex,
      insertViews: insertComponents,
      opts
    }, done);
  }
  /**
   * Pop a component off of the navigation stack. Navigates back from the current
   * component.
   *
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  pop(opts, done) {
    return this.removeIndex(-1, 1, opts, done);
  }
  /**
   * Pop to a specific index in the navigation stack.
   *
   * @param indexOrViewCtrl The index or view controller to pop to.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  popTo(indexOrViewCtrl, opts, done) {
    const ti = {
      removeStart: -1,
      removeCount: -1,
      opts
    };
    if (typeof indexOrViewCtrl === 'object' && indexOrViewCtrl.component) {
      ti.removeView = indexOrViewCtrl;
      ti.removeStart = 1;
    } else if (typeof indexOrViewCtrl === 'number') {
      ti.removeStart = indexOrViewCtrl + 1;
    }
    return this.queueTrns(ti, done);
  }
  /**
   * Navigate back to the root of the stack, no matter how far back that is.
   *
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  popToRoot(opts, done) {
    return this.removeIndex(1, -1, opts, done);
  }
  /**
   * Removes a component from the navigation stack at the specified index.
   *
   * @param startIndex The number to begin removal at.
   * @param removeCount The number of components to remove.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  removeIndex(startIndex, removeCount = 1, opts, done) {
    return this.queueTrns({
      removeStart: startIndex,
      removeCount,
      opts
    }, done);
  }
  /**
   * Set the root for the current navigation stack to a component.
   *
   * @param component The component to set as the root of the navigation stack.
   * @param componentProps Any properties of the component.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  setRoot(component, componentProps, opts, done) {
    return this.setPages([{
      component,
      componentProps
    }], opts, done);
  }
  /**
   * Set the views of the current navigation stack and navigate to the last view.
   * By default animations are disabled, but they can be enabled by passing options
   * to the navigation controller. Navigation parameters can also be passed to the
   * individual pages in the array.
   *
   * @param views The list of views to set as the navigation stack.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  setPages(views, opts, done) {
    opts !== null && opts !== void 0 ? opts : opts = {};
    // if animation wasn't set to true then default it to NOT animate
    if (opts.animated !== true) {
      opts.animated = false;
    }
    return this.queueTrns({
      insertStart: 0,
      insertViews: views,
      removeStart: 0,
      removeCount: -1,
      opts
    }, done);
  }
  /**
   * Called by the router to update the view.
   *
   * @param id The component tag.
   * @param params The component params.
   * @param direction A direction hint.
   * @param animation an AnimationBuilder.
   *
   * @return the status.
   * @internal
   */
  setRouteId(id, params, direction, animation) {
    const active = this.getActiveSync();
    if (matches(active, id, params)) {
      return Promise.resolve({
        changed: false,
        element: active.element
      });
    }
    let resolve;
    const promise = new Promise(r => resolve = r);
    let finish;
    const commonOpts = {
      updateURL: false,
      viewIsReady: enteringEl => {
        let mark;
        const p = new Promise(r => mark = r);
        resolve({
          changed: true,
          element: enteringEl,
          markVisible: function () {
            var _ref = (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
              mark();
              yield finish;
            });
            return function markVisible() {
              return _ref.apply(this, arguments);
            };
          }()
        });
        return p;
      }
    };
    if (direction === 'root') {
      finish = this.setRoot(id, params, commonOpts);
    } else {
      // Look for a view matching the target in the view stack.
      const viewController = this.views.find(v => matches(v, id, params));
      if (viewController) {
        finish = this.popTo(viewController, Object.assign(Object.assign({}, commonOpts), {
          direction: 'back',
          animationBuilder: animation
        }));
      } else if (direction === 'forward') {
        finish = this.push(id, params, Object.assign(Object.assign({}, commonOpts), {
          animationBuilder: animation
        }));
      } else if (direction === 'back') {
        finish = this.setRoot(id, params, Object.assign(Object.assign({}, commonOpts), {
          direction: 'back',
          animated: true,
          animationBuilder: animation
        }));
      }
    }
    return promise;
  }
  /**
   * Called by <ion-router> to retrieve the current component.
   *
   * @internal
   */
  getRouteId() {
    var _this3 = this;
    return (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const active = _this3.getActiveSync();
      if (active) {
        return {
          id: active.element.tagName,
          params: active.params,
          element: active.element
        };
      }
      return undefined;
    })();
  }
  /**
   * Get the active view.
   */
  getActive() {
    var _this4 = this;
    return (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this4.getActiveSync();
    })();
  }
  /**
   * Get the view at the specified index.
   *
   * @param index The index of the view.
   */
  getByIndex(index) {
    var _this5 = this;
    return (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this5.views[index];
    })();
  }
  /**
   * Returns `true` if the current view can go back.
   *
   * @param view The view to check.
   */
  canGoBack(view) {
    var _this6 = this;
    return (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this6.canGoBackSync(view);
    })();
  }
  /**
   * Get the previous view.
   *
   * @param view The view to get.
   */
  getPrevious(view) {
    var _this7 = this;
    return (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this7.getPreviousSync(view);
    })();
  }
  /**
   * Returns the number of views in the stack.
   */
  getLength() {
    var _this8 = this;
    return (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return Promise.resolve(_this8.views.length);
    })();
  }
  getActiveSync() {
    return this.views[this.views.length - 1];
  }
  canGoBackSync(view = this.getActiveSync()) {
    return !!(view && this.getPreviousSync(view));
  }
  getPreviousSync(view = this.getActiveSync()) {
    if (!view) {
      return undefined;
    }
    const views = this.views;
    const index = views.indexOf(view);
    return index > 0 ? views[index - 1] : undefined;
  }
  /**
   * Adds a navigation stack change to the queue and schedules it to run.
   *
   * @returns Whether the transition succeeds.
   */
  queueTrns(ti, done) {
    var _this9 = this;
    return (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      var _a, _b;
      if (_this9.isTransitioning && ((_a = ti.opts) === null || _a === void 0 ? void 0 : _a.skipIfBusy)) {
        return false;
      }
      const promise = new Promise((resolve, reject) => {
        ti.resolve = resolve;
        ti.reject = reject;
      });
      ti.done = done;
      /**
       * If using router, check to see if navigation hooks
       * will allow us to perform this transition. This
       * is required in order for hooks to work with
       * the ion-back-button or swipe to go back.
       */
      if (ti.opts && ti.opts.updateURL !== false && _this9.useRouter) {
        const router = document.querySelector('ion-router');
        if (router) {
          const canTransition = yield router.canTransition();
          if (canTransition === false) {
            return false;
          }
          if (typeof canTransition === 'string') {
            router.push(canTransition, ti.opts.direction || 'back');
            return false;
          }
        }
      }
      // Normalize empty
      if (((_b = ti.insertViews) === null || _b === void 0 ? void 0 : _b.length) === 0) {
        ti.insertViews = undefined;
      }
      // Enqueue transition instruction
      _this9.transInstr.push(ti);
      // if there isn't a transition already happening
      // then this will kick off this transition
      _this9.nextTrns();
      return promise;
    })();
  }
  success(result, ti) {
    if (this.destroyed) {
      this.fireError('nav controller was destroyed', ti);
      return;
    }
    if (ti.done) {
      ti.done(result.hasCompleted, result.requiresTransition, result.enteringView, result.leavingView, result.direction);
    }
    ti.resolve(result.hasCompleted);
    if (ti.opts.updateURL !== false && this.useRouter) {
      const router = document.querySelector('ion-router');
      if (router) {
        const direction = result.direction === 'back' ? 'back' : 'forward';
        router.navChanged(direction);
      }
    }
  }
  failed(rejectReason, ti) {
    if (this.destroyed) {
      this.fireError('nav controller was destroyed', ti);
      return;
    }
    this.transInstr.length = 0;
    this.fireError(rejectReason, ti);
  }
  fireError(rejectReason, ti) {
    if (ti.done) {
      ti.done(false, false, rejectReason);
    }
    if (ti.reject && !this.destroyed) {
      ti.reject(rejectReason);
    } else {
      ti.resolve(false);
    }
  }
  /**
   * Consumes the next transition in the queue.
   *
   * @returns whether the transition is executed.
   */
  nextTrns() {
    // this is the framework's bread 'n butta function
    // only one transition is allowed at any given time
    if (this.isTransitioning) {
      return false;
    }
    // there is no transition happening right now, executes the next instructions.
    const ti = this.transInstr.shift();
    if (!ti) {
      return false;
    }
    this.runTransition(ti);
    return true;
  }
  /** Executes all the transition instruction from the queue. */
  runTransition(ti) {
    var _this10 = this;
    return (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      try {
        // set that this nav is actively transitioning
        _this10.ionNavWillChange.emit();
        _this10.isTransitioning = true;
        _this10.prepareTI(ti);
        const leavingView = _this10.getActiveSync();
        const enteringView = _this10.getEnteringView(ti, leavingView);
        if (!leavingView && !enteringView) {
          throw new Error('no views in the stack to be removed');
        }
        if (enteringView && enteringView.state === VIEW_STATE_NEW) {
          yield enteringView.init(_this10.el);
        }
        _this10.postViewInit(enteringView, leavingView, ti);
        // Needs transition?
        const requiresTransition = (ti.enteringRequiresTransition || ti.leavingRequiresTransition) && enteringView !== leavingView;
        if (requiresTransition && ti.opts && leavingView) {
          const isBackDirection = ti.opts.direction === 'back';
          /**
           * If heading back, use the entering page's animation
           * unless otherwise specified by the developer.
           */
          if (isBackDirection) {
            ti.opts.animationBuilder = ti.opts.animationBuilder || (enteringView === null || enteringView === void 0 ? void 0 : enteringView.animationBuilder);
          }
          leavingView.animationBuilder = ti.opts.animationBuilder;
        }
        let result;
        if (requiresTransition) {
          result = yield _this10.transition(enteringView, leavingView, ti);
        } else {
          // transition is not required, so we are already done!
          // they're inserting/removing the views somewhere in the middle or
          // beginning, so visually nothing needs to animate/transition
          // resolve immediately because there's no animation that's happening
          result = {
            hasCompleted: true,
            requiresTransition: false
          };
        }
        _this10.success(result, ti);
        _this10.ionNavDidChange.emit();
      } catch (rejectReason) {
        _this10.failed(rejectReason, ti);
      }
      _this10.isTransitioning = false;
      _this10.nextTrns();
    })();
  }
  prepareTI(ti) {
    var _a, _b;
    var _c;
    const viewsLength = this.views.length;
    (_a = ti.opts) !== null && _a !== void 0 ? _a : ti.opts = {};
    (_b = (_c = ti.opts).delegate) !== null && _b !== void 0 ? _b : _c.delegate = this.delegate;
    if (ti.removeView !== undefined) {
      (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(ti.removeStart !== undefined, 'removeView needs removeStart');
      (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(ti.removeCount !== undefined, 'removeView needs removeCount');
      const index = this.views.indexOf(ti.removeView);
      if (index < 0) {
        throw new Error('removeView was not found');
      }
      ti.removeStart += index;
    }
    if (ti.removeStart !== undefined) {
      if (ti.removeStart < 0) {
        ti.removeStart = viewsLength - 1;
      }
      if (ti.removeCount < 0) {
        ti.removeCount = viewsLength - ti.removeStart;
      }
      ti.leavingRequiresTransition = ti.removeCount > 0 && ti.removeStart + ti.removeCount === viewsLength;
    }
    if (ti.insertViews) {
      // allow -1 to be passed in to auto push it on the end
      // and clean up the index if it's larger then the size of the stack
      if (ti.insertStart < 0 || ti.insertStart > viewsLength) {
        ti.insertStart = viewsLength;
      }
      ti.enteringRequiresTransition = ti.insertStart === viewsLength;
    }
    const insertViews = ti.insertViews;
    if (!insertViews) {
      return;
    }
    (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(insertViews.length > 0, 'length can not be zero');
    const viewControllers = convertToViews(insertViews);
    if (viewControllers.length === 0) {
      throw new Error('invalid views to insert');
    }
    // Check all the inserted view are correct
    for (const view of viewControllers) {
      view.delegate = ti.opts.delegate;
      const nav = view.nav;
      if (nav && nav !== this) {
        throw new Error('inserted view was already inserted');
      }
      if (view.state === VIEW_STATE_DESTROYED) {
        throw new Error('inserted view was already destroyed');
      }
    }
    ti.insertViews = viewControllers;
  }
  /**
   * Returns the view that will be entered considering the transition instructions.
   *
   * @param ti The instructions.
   * @param leavingView The view being left or undefined if none.
   *
   * @returns The view that will be entered, undefined if none.
   */
  getEnteringView(ti, leavingView) {
    // The last inserted view will be entered when view are inserted.
    const insertViews = ti.insertViews;
    if (insertViews !== undefined) {
      return insertViews[insertViews.length - 1];
    }
    // When views are deleted, we will enter the last view that is not removed and not the view being left.
    const removeStart = ti.removeStart;
    if (removeStart !== undefined) {
      const views = this.views;
      const removeEnd = removeStart + ti.removeCount;
      for (let i = views.length - 1; i >= 0; i--) {
        const view = views[i];
        if ((i < removeStart || i >= removeEnd) && view !== leavingView) {
          return view;
        }
      }
    }
    return undefined;
  }
  /**
   * Adds and Removes the views from the navigation stack.
   *
   * @param enteringView The view being entered.
   * @param leavingView The view being left.
   * @param ti The instructions.
   */
  postViewInit(enteringView, leavingView, ti) {
    var _a, _b, _c;
    (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(leavingView || enteringView, 'Both leavingView and enteringView are null');
    (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(ti.resolve, 'resolve must be valid');
    (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(ti.reject, 'reject must be valid');
    // Compute the views to remove.
    const opts = ti.opts;
    const {
      insertViews,
      removeStart,
      removeCount
    } = ti;
    /** Records the view to destroy */
    let destroyQueue;
    // there are views to remove
    if (removeStart !== undefined && removeCount !== undefined) {
      (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(removeStart >= 0, 'removeStart can not be negative');
      (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(removeCount >= 0, 'removeCount can not be negative');
      destroyQueue = [];
      for (let i = removeStart; i < removeStart + removeCount; i++) {
        const view = this.views[i];
        if (view !== undefined && view !== enteringView && view !== leavingView) {
          destroyQueue.push(view);
        }
      }
      // default the direction to "back"
      (_a = opts.direction) !== null && _a !== void 0 ? _a : opts.direction = 'back';
    }
    const finalNumViews = this.views.length + ((_b = insertViews === null || insertViews === void 0 ? void 0 : insertViews.length) !== null && _b !== void 0 ? _b : 0) - (removeCount !== null && removeCount !== void 0 ? removeCount : 0);
    (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(finalNumViews >= 0, 'final balance can not be negative');
    if (finalNumViews === 0) {
      console.warn(`You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.`, this, this.el);
      throw new Error('navigation stack needs at least one root page');
    }
    // At this point the transition can not be rejected, any throw should be an error
    // Insert the new views in the stack.
    if (insertViews) {
      // add the views to the
      let insertIndex = ti.insertStart;
      for (const view of insertViews) {
        this.insertViewAt(view, insertIndex);
        insertIndex++;
      }
      if (ti.enteringRequiresTransition) {
        // default to forward if not already set
        (_c = opts.direction) !== null && _c !== void 0 ? _c : opts.direction = 'forward';
      }
    }
    // if the views to be removed are in the beginning or middle
    // and there is not a view that needs to visually transition out
    // then just destroy them and don't transition anything
    // batch all of lifecycles together
    // let's make sure, callbacks are zoned
    if (destroyQueue && destroyQueue.length > 0) {
      for (const view of destroyQueue) {
        (0,_index_ecb55b8d_js__WEBPACK_IMPORTED_MODULE_5__.l)(view.element, _index_ecb55b8d_js__WEBPACK_IMPORTED_MODULE_5__.b);
        (0,_index_ecb55b8d_js__WEBPACK_IMPORTED_MODULE_5__.l)(view.element, _index_ecb55b8d_js__WEBPACK_IMPORTED_MODULE_5__.c);
        (0,_index_ecb55b8d_js__WEBPACK_IMPORTED_MODULE_5__.l)(view.element, _index_ecb55b8d_js__WEBPACK_IMPORTED_MODULE_5__.d);
      }
      // once all lifecycle events has been delivered, we can safely detroy the views
      for (const view of destroyQueue) {
        this.destroyView(view);
      }
    }
  }
  transition(enteringView, leavingView, ti) {
    var _this11 = this;
    return (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      // we should animate (duration > 0) if the pushed page is not the first one (startup)
      // or if it is a portal (modal, actionsheet, etc.)
      const opts = ti.opts;
      const progressCallback = opts.progressAnimation ? ani => {
        /**
         * Because this progress callback is called asynchronously
         * it is possible for the gesture to start and end before
         * the animation is ever set. In that scenario, we should
         * immediately call progressEnd so that the transition promise
         * resolves and the gesture does not get locked up.
         */
        if (ani !== undefined && !_this11.gestureOrAnimationInProgress) {
          _this11.gestureOrAnimationInProgress = true;
          ani.onFinish(() => {
            _this11.gestureOrAnimationInProgress = false;
          }, {
            oneTimeCallback: true
          });
          /**
           * Playing animation to beginning
           * with a duration of 0 prevents
           * any flickering when the animation
           * is later cleaned up.
           */
          ani.progressEnd(0, 0, 0);
        } else {
          _this11.sbAni = ani;
        }
      } : undefined;
      const mode = (0,_ionic_global_ca86cf32_js__WEBPACK_IMPORTED_MODULE_4__.b)(_this11);
      const enteringEl = enteringView.element;
      // eslint-disable-next-line @typescript-eslint/prefer-optional-chain
      const leavingEl = leavingView && leavingView.element;
      const animationOpts = Object.assign(Object.assign({
        mode,
        showGoBack: _this11.canGoBackSync(enteringView),
        baseEl: _this11.el,
        progressCallback,
        animated: _this11.animated && _ionic_global_ca86cf32_js__WEBPACK_IMPORTED_MODULE_4__.c.getBoolean('animated', true),
        enteringEl,
        leavingEl
      }, opts), {
        animationBuilder: opts.animationBuilder || _this11.animation || _ionic_global_ca86cf32_js__WEBPACK_IMPORTED_MODULE_4__.c.get('navAnimation')
      });
      const {
        hasCompleted
      } = yield (0,_index_ecb55b8d_js__WEBPACK_IMPORTED_MODULE_5__.t)(animationOpts);
      return _this11.transitionFinish(hasCompleted, enteringView, leavingView, opts);
    })();
  }
  transitionFinish(hasCompleted, enteringView, leavingView, opts) {
    /**
     * If the transition did not complete, the leavingView will still be the active
     * view on the stack. Otherwise unmount all the views after the enteringView.
     */
    const activeView = hasCompleted ? enteringView : leavingView;
    if (activeView) {
      this.unmountInactiveViews(activeView);
    }
    return {
      hasCompleted,
      requiresTransition: true,
      enteringView,
      leavingView,
      direction: opts.direction
    };
  }
  /**
   * Inserts a view at the specified index.
   *
   * When the view already is in the stack it will be moved to the new position.
   *
   * @param view The view to insert.
   * @param index The index where to insert the view.
   */
  insertViewAt(view, index) {
    const views = this.views;
    const existingIndex = views.indexOf(view);
    if (existingIndex > -1) {
      (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(view.nav === this, 'view is not part of the nav');
      // The view already in the stack, removes it.
      views.splice(existingIndex, 1);
      // and add it back at the requested index.
      views.splice(index, 0, view);
    } else {
      (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(!view.nav, 'nav is used');
      // this is a new view to add to the stack
      // create the new entering view
      view.nav = this;
      views.splice(index, 0, view);
    }
  }
  /**
   * Removes a view from the stack.
   *
   * @param view The view to remove.
   */
  removeView(view) {
    (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(view.state === VIEW_STATE_ATTACHED || view.state === VIEW_STATE_DESTROYED, 'view state should be loaded or destroyed');
    const views = this.views;
    const index = views.indexOf(view);
    (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(index > -1, 'view must be part of the stack');
    if (index >= 0) {
      views.splice(index, 1);
    }
  }
  destroyView(view) {
    view._destroy();
    this.removeView(view);
  }
  /**
   * Unmounts all inactive views after the specified active view.
   *
   * DOM WRITE
   *
   * @param activeView The view that is actively visible in the stack. Used to calculate which views to unmount.
   */
  unmountInactiveViews(activeView) {
    // ok, cleanup time!! Destroy all of the views that are
    // INACTIVE and come after the active view
    // only do this if the views exist, though
    if (this.destroyed) {
      return;
    }
    const views = this.views;
    const activeViewIndex = views.indexOf(activeView);
    for (let i = views.length - 1; i >= 0; i--) {
      const view = views[i];
      /**
       * When inserting multiple views via insertPages
       * the last page will be transitioned to, but the
       * others will not be. As a result, a DOM element
       * will only be created for the last page inserted.
       * As a result, it is possible to have views in the
       * stack that do not have `view.element` yet.
       */
      const element = view.element;
      if (element) {
        if (i > activeViewIndex) {
          // this view comes after the active view
          // let's unload it
          (0,_index_ecb55b8d_js__WEBPACK_IMPORTED_MODULE_5__.l)(element, _index_ecb55b8d_js__WEBPACK_IMPORTED_MODULE_5__.d);
          this.destroyView(view);
        } else if (i < activeViewIndex) {
          // this view comes before the active view
          // and it is not a portal then ensure it is hidden
          (0,_index_ecb55b8d_js__WEBPACK_IMPORTED_MODULE_5__.s)(element, true);
        }
      }
    }
  }
  canStart() {
    return !this.gestureOrAnimationInProgress && !!this.swipeGesture && !this.isTransitioning && this.transInstr.length === 0 && this.canGoBackSync();
  }
  onStart() {
    this.gestureOrAnimationInProgress = true;
    this.pop({
      direction: 'back',
      progressAnimation: true
    });
  }
  onMove(stepValue) {
    if (this.sbAni) {
      this.sbAni.progressStep(stepValue);
    }
  }
  onEnd(shouldComplete, stepValue, dur) {
    if (this.sbAni) {
      this.sbAni.onFinish(() => {
        this.gestureOrAnimationInProgress = false;
      }, {
        oneTimeCallback: true
      });
      // Account for rounding errors in JS
      let newStepValue = shouldComplete ? -0.001 : 0.001;
      /**
       * Animation will be reversed here, so need to
       * reverse the easing curve as well
       *
       * Additionally, we need to account for the time relative
       * to the new easing curve, as `stepValue` is going to be given
       * in terms of a linear curve.
       */
      if (!shouldComplete) {
        this.sbAni.easing('cubic-bezier(1, 0, 0.68, 0.28)');
        newStepValue += (0,_cubic_bezier_fe2083dc_js__WEBPACK_IMPORTED_MODULE_2__.g)([0, 0], [1, 0], [0.68, 0.28], [1, 1], stepValue)[0];
      } else {
        newStepValue += (0,_cubic_bezier_fe2083dc_js__WEBPACK_IMPORTED_MODULE_2__.g)([0, 0], [0.32, 0.72], [0, 1], [1, 1], stepValue)[0];
      }
      this.sbAni.progressEnd(shouldComplete ? 1 : 0, newStepValue, dur);
    } else {
      this.gestureOrAnimationInProgress = false;
    }
  }
  render() {
    return (0,_index_527b9e34_js__WEBPACK_IMPORTED_MODULE_1__.h)("slot", {
      key: '71e9b5d07fc90ca5534197a63a003a4154aabd59'
    });
  }
  get el() {
    return (0,_index_527b9e34_js__WEBPACK_IMPORTED_MODULE_1__.f)(this);
  }
  static get watchers() {
    return {
      "swipeGesture": ["swipeGestureChanged"],
      "root": ["rootChanged"]
    };
  }
};
Nav.style = IonNavStyle0;
const navLink = (el, routerDirection, component, componentProps, routerAnimation) => {
  const nav = el.closest('ion-nav');
  if (nav) {
    if (routerDirection === 'forward') {
      if (component !== undefined) {
        return nav.push(component, componentProps, {
          skipIfBusy: true,
          animationBuilder: routerAnimation
        });
      }
    } else if (routerDirection === 'root') {
      if (component !== undefined) {
        return nav.setRoot(component, componentProps, {
          skipIfBusy: true,
          animationBuilder: routerAnimation
        });
      }
    } else if (routerDirection === 'back') {
      return nav.pop({
        skipIfBusy: true,
        animationBuilder: routerAnimation
      });
    }
  }
  return Promise.resolve(false);
};
const NavLink = class {
  constructor(hostRef) {
    (0,_index_527b9e34_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.onClick = () => {
      return navLink(this.el, this.routerDirection, this.component, this.componentProps, this.routerAnimation);
    };
    this.component = undefined;
    this.componentProps = undefined;
    this.routerDirection = 'forward';
    this.routerAnimation = undefined;
  }
  render() {
    return (0,_index_527b9e34_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_527b9e34_js__WEBPACK_IMPORTED_MODULE_1__.e, {
      key: '9ba170d1b10e08e8a6b5e6a30d363871d455a0a9',
      onClick: this.onClick
    });
  }
  get el() {
    return (0,_index_527b9e34_js__WEBPACK_IMPORTED_MODULE_1__.f)(this);
  }
};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW9uLW5hdl8yX2VudHJ5X2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzZHO0FBQ25DO0FBQ007QUFDTjtBQUNpRztBQUNuRztBQUMzQztBQUU3QixNQUFNNkIsY0FBYyxHQUFHLENBQUM7QUFDeEIsTUFBTUMsbUJBQW1CLEdBQUcsQ0FBQztBQUM3QixNQUFNQyxvQkFBb0IsR0FBRyxDQUFDO0FBQzlCO0FBQ0EsTUFBTUMsY0FBYyxDQUFDO0VBQ2pCQyxXQUFXQSxDQUFDQyxTQUFTLEVBQUVDLE1BQU0sRUFBRTtJQUMzQixJQUFJLENBQUNELFNBQVMsR0FBR0EsU0FBUztJQUMxQixJQUFJLENBQUNDLE1BQU0sR0FBR0EsTUFBTTtJQUNwQixJQUFJLENBQUNDLEtBQUssR0FBR1AsY0FBYztFQUMvQjtFQUNNUSxJQUFJQSxDQUFDQyxTQUFTLEVBQUU7SUFBQSxJQUFBQyxLQUFBO0lBQUEsT0FBQUMsNk1BQUE7TUFDbEJELEtBQUksQ0FBQ0gsS0FBSyxHQUFHTixtQkFBbUI7TUFDaEMsSUFBSSxDQUFDUyxLQUFJLENBQUNFLE9BQU8sRUFBRTtRQUNmLE1BQU1QLFNBQVMsR0FBR0ssS0FBSSxDQUFDTCxTQUFTO1FBQ2hDSyxLQUFJLENBQUNFLE9BQU8sU0FBU2Isa0VBQWUsQ0FBQ1csS0FBSSxDQUFDRyxRQUFRLEVBQUVKLFNBQVMsRUFBRUosU0FBUyxFQUFFLENBQUMsVUFBVSxFQUFFLG9CQUFvQixDQUFDLEVBQUVLLEtBQUksQ0FBQ0osTUFBTSxDQUFDO01BQzlIO0lBQUM7RUFDTDtFQUNBO0FBQ0o7QUFDQTtFQUNJUSxRQUFRQSxDQUFBLEVBQUc7SUFDUC9CLHVEQUFNLENBQUMsSUFBSSxDQUFDd0IsS0FBSyxLQUFLTCxvQkFBb0IsRUFBRSw2QkFBNkIsQ0FBQztJQUMxRSxNQUFNVSxPQUFPLEdBQUcsSUFBSSxDQUFDQSxPQUFPO0lBQzVCLElB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RztJQUNMLE9BQU9sTyxxREFBQyxDQUFDSSxpREFBSSxFQUFFO01BQUUrTixHQUFHLEVBQUUsMENBQTBDO01BQUVPLE9BQU8sRUFBRSxJQUFJLENBQUNBO0lBQVEsQ0FBQyxDQUFDO0VBQzlGO0VBQ0EsSUFBSXZKLEVBQUVBLENBQUEsRUFBRztJQUFFLE9BQU9qRixxREFBVSxDQUFDLElBQUksQ0FBQztFQUFFO0FBQ3hDLENBQUMiLCJzb3VyY2VzIjpbIi4vbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2Rpc3QvZXNtL2lvbi1uYXZfMi5lbnRyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBmIGFzIGdldEVsZW1lbnQsIGUgYXMgSG9zdCB9IGZyb20gJy4vaW5kZXgtNTI3YjllMzQuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRUaW1lR2l2ZW5Qcm9ncmVzc2lvbiB9IGZyb20gJy4vY3ViaWMtYmV6aWVyLWZlMjA4M2RjLmpzJztcbmltcG9ydCB7IG4gYXMgYXNzZXJ0LCBzIGFzIHNoYWxsb3dFcXVhbFN0cmluZ01hcCB9IGZyb20gJy4vaGVscGVycy03OGVmZWVjMy5qcyc7XG5pbXBvcnQgeyBiIGFzIGdldElvbk1vZGUsIGMgYXMgY29uZmlnIH0gZnJvbSAnLi9pb25pYy1nbG9iYWwtY2E4NmNmMzIuanMnO1xuaW1wb3J0IHsgbCBhcyBsaWZlY3ljbGUsIHQgYXMgdHJhbnNpdGlvbiwgcyBhcyBzZXRQYWdlSGlkZGVuLCBkIGFzIExJRkVDWUNMRV9XSUxMX1VOTE9BRCwgYiBhcyBMSUZFQ1lDTEVfV0lMTF9MRUFWRSwgYyBhcyBMSUZFQ1lDTEVfRElEX0xFQVZFIH0gZnJvbSAnLi9pbmRleC1lY2I1NWI4ZC5qcyc7XG5pbXBvcnQgeyBhIGFzIGF0dGFjaENvbXBvbmVudCB9IGZyb20gJy4vZnJhbWV3b3JrLWRlbGVnYXRlLTJlZWExNzYzLmpzJztcbmltcG9ydCAnLi9pbmRleC03MzhkNzUwNC5qcyc7XG5cbmNvbnN0IFZJRVdfU1RBVEVfTkVXID0gMTtcbmNvbnN0IFZJRVdfU1RBVEVfQVRUQUNIRUQgPSAyO1xuY29uc3QgVklFV19TVEFURV9ERVNUUk9ZRUQgPSAzO1xuLy8gVE9ETyhGVy0yODMyKTogdHlwZXNcbmNsYXNzIFZpZXdDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb21wb25lbnQsIHBhcmFtcykge1xuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBWSUVXX1NUQVRFX05FVztcbiAgICB9XG4gICAgYXN5bmMgaW5pdChjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFZJRVdfU1RBVEVfQVRUQUNIRUQ7XG4gICAgICAgIGlmICghdGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLmNvbXBvbmVudDtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGF3YWl0IGF0dGFjaENvbXBvbmVudCh0aGlzLmRlbGVnYXRlLCBjb250YWluZXIsIGNvbXBvbmVudCwgWydpb24tcGFnZScsICdpb24tcGFnZS1pbnZpc2libGUnXSwgdGhpcy5wYXJhbXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERPTSBXUklURVxuICAgICAqL1xuICAgIF9kZXN0cm95KCkge1xuICAgICAgICBhc3NlcnQodGhpcy5zdGF0ZSAhPT0gVklFV19TVEFURV9ERVNUUk9ZRUQsICd2aWV3IHN0YXRlIG11c3QgYmUgQVRUQUNIRUQnKTtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGVnYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZS5yZW1vdmVWaWV3RnJvbURvbShlbGVtZW50LnBhcmVudEVsZW1lbnQsIGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hdiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFZJRVdfU1RBVEVfREVTVFJPWUVEO1xuICAgIH1cbn1cbmNvbnN0IG1hdGNoZXMgPSAodmlldywgaWQsIHBhcmFtcykgPT4ge1xuICAgIGlmICghdmlldykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh2aWV3LmNvbXBvbmVudCAhPT0gaWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc2hhbGxvd0VxdWFsU3RyaW5nTWFwKHZpZXcucGFyYW1zLCBwYXJhbXMpO1xufTtcbmNvbnN0IGNvbnZlcnRUb1ZpZXcgPSAocGFnZSwgcGFyYW1zKSA9PiB7XG4gICAgaWYgKCFwYWdlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAocGFnZSBpbnN0YW5jZW9mIFZpZXdDb250cm9sbGVyKSB7XG4gICAgICAgIHJldHVybiBwYWdlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFZpZXdDb250cm9sbGVyKHBhZ2UsIHBhcmFtcyk7XG59O1xuY29uc3QgY29udmVydFRvVmlld3MgPSAocGFnZXMpID0+IHtcbiAgICByZXR1cm4gcGFnZXNcbiAgICAgICAgLm1hcCgocGFnZSkgPT4ge1xuICAgICAgICBpZiAocGFnZSBpbnN0YW5jZW9mIFZpZXdDb250cm9sbGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFnZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ2NvbXBvbmVudCcgaW4gcGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRUb1ZpZXcocGFnZS5jb21wb25lbnQsIHBhZ2UuY29tcG9uZW50UHJvcHMgPT09IG51bGwgPyB1bmRlZmluZWQgOiBwYWdlLmNvbXBvbmVudFByb3BzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udmVydFRvVmlldyhwYWdlLCB1bmRlZmluZWQpO1xuICAgIH0pXG4gICAgICAgIC5maWx0ZXIoKHYpID0+IHYgIT09IG51bGwpO1xufTtcblxuY29uc3QgbmF2Q3NzID0gXCI6aG9zdHtsZWZ0OjA7cmlnaHQ6MDt0b3A6MDtib3R0b206MDtwb3NpdGlvbjphYnNvbHV0ZTtjb250YWluOmxheW91dCBzaXplIHN0eWxlO3otaW5kZXg6MH1cIjtcbmNvbnN0IElvbk5hdlN0eWxlMCA9IG5hdkNzcztcblxuY29uc3QgTmF2ID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgdGhpcy5pb25OYXZXaWxsTG9hZCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiaW9uTmF2V2lsbExvYWRcIiwgNyk7XG4gICAgICAgIHRoaXMuaW9uTmF2V2lsbENoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiaW9uTmF2V2lsbENoYW5nZVwiLCAzKTtcbiAgICAgICAgdGhpcy5pb25OYXZEaWRDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvbk5hdkRpZENoYW5nZVwiLCAzKTtcbiAgICAgICAgdGhpcy50cmFuc0luc3RyID0gW107XG4gICAgICAgIHRoaXMuZ2VzdHVyZU9yQW5pbWF0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVzZVJvdXRlciA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnZpZXdzID0gW107XG4gICAgICAgIHRoaXMuZGlkTG9hZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlbGVnYXRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnN3aXBlR2VzdHVyZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5hbmltYXRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJvb3RQYXJhbXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucm9vdCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgc3dpcGVHZXN0dXJlQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2VzdHVyZSkge1xuICAgICAgICAgICAgdGhpcy5nZXN0dXJlLmVuYWJsZSh0aGlzLnN3aXBlR2VzdHVyZSA9PT0gdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcm9vdENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnJvb3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpZExvYWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHRoZSBjb21wb25lbnQgaGFzIG5vdCBsb2FkZWQgeWV0LCB3ZSBjYW4gc2tpcCBzZXR0aW5nIHVwIHRoZSByb290IGNvbXBvbmVudC5cbiAgICAgICAgICAgICAqIEl0IHdpbGwgYmUgY2FsbGVkIHdoZW4gYGNvbXBvbmVudERpZExvYWRgIGZpcmVzLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnVzZVJvdXRlcikge1xuICAgICAgICAgICAgaWYgKHRoaXMucm9vdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSb290KHRoaXMucm9vdCwgdGhpcy5yb290UGFyYW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgdGhpcy51c2VSb3V0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpb24tcm91dGVyJykgIT09IG51bGwgJiYgdGhpcy5lbC5jbG9zZXN0KCdbbm8tcm91dGVyXScpID09PSBudWxsO1xuICAgICAgICBpZiAodGhpcy5zd2lwZUdlc3R1cmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgbW9kZSA9IGdldElvbk1vZGUodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnN3aXBlR2VzdHVyZSA9IGNvbmZpZy5nZXRCb29sZWFuKCdzd2lwZUJhY2tFbmFibGVkJywgbW9kZSA9PT0gJ2lvcycpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW9uTmF2V2lsbExvYWQuZW1pdCgpO1xuICAgIH1cbiAgICBhc3luYyBjb21wb25lbnREaWRMb2FkKCkge1xuICAgICAgICAvLyBXZSB3YW50IHRvIHNldCB0aGlzIGZsYWcgYmVmb3JlIGFueSB3YXRjaCBjYWxsYmFja3MgYXJlIG1hbnVhbGx5IGNhbGxlZFxuICAgICAgICB0aGlzLmRpZExvYWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnJvb3RDaGFuZ2VkKCk7XG4gICAgICAgIHRoaXMuZ2VzdHVyZSA9IChhd2FpdCBpbXBvcnQoJy4vc3dpcGUtYmFjay0wN2RmMjA5NS5qcycpKS5jcmVhdGVTd2lwZUJhY2tHZXN0dXJlKHRoaXMuZWwsIHRoaXMuY2FuU3RhcnQuYmluZCh0aGlzKSwgdGhpcy5vblN0YXJ0LmJpbmQodGhpcyksIHRoaXMub25Nb3ZlLmJpbmQodGhpcyksIHRoaXMub25FbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuc3dpcGVHZXN0dXJlQ2hhbmdlZCgpO1xuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIGZvciAoY29uc3QgdmlldyBvZiB0aGlzLnZpZXdzKSB7XG4gICAgICAgICAgICBsaWZlY3ljbGUodmlldy5lbGVtZW50LCBMSUZFQ1lDTEVfV0lMTF9VTkxPQUQpO1xuICAgICAgICAgICAgdmlldy5fZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlbGVhc2Ugc3dpcGUgYmFjayBnZXN0dXJlIGFuZCB0cmFuc2l0aW9uLlxuICAgICAgICBpZiAodGhpcy5nZXN0dXJlKSB7XG4gICAgICAgICAgICB0aGlzLmdlc3R1cmUuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5nZXN0dXJlID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJhbnNJbnN0ci5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLnZpZXdzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVzaCBhIG5ldyBjb21wb25lbnQgb250byB0aGUgY3VycmVudCBuYXZpZ2F0aW9uIHN0YWNrLiBQYXNzIGFueSBhZGRpdGlvbmFsXG4gICAgICogaW5mb3JtYXRpb24gYWxvbmcgYXMgYW4gb2JqZWN0LiBUaGlzIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gaXMgYWNjZXNzaWJsZVxuICAgICAqIHRocm91Z2ggTmF2UGFyYW1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBUaGUgY29tcG9uZW50IHRvIHB1c2ggb250byB0aGUgbmF2aWdhdGlvbiBzdGFjay5cbiAgICAgKiBAcGFyYW0gY29tcG9uZW50UHJvcHMgQW55IHByb3BlcnRpZXMgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0gb3B0cyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBkb25lIFRoZSB0cmFuc2l0aW9uIGNvbXBsZXRlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHB1c2goY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgb3B0cywgZG9uZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnNlcnQoLTEsIGNvbXBvbmVudCwgY29tcG9uZW50UHJvcHMsIG9wdHMsIGRvbmUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIGEgY29tcG9uZW50IGludG8gdGhlIG5hdmlnYXRpb24gc3RhY2sgYXQgdGhlIHNwZWNpZmllZCBpbmRleC5cbiAgICAgKiBUaGlzIGlzIHVzZWZ1bCB0byBhZGQgYSBjb21wb25lbnQgYXQgYW55IHBvaW50IGluIHRoZSBuYXZpZ2F0aW9uIHN0YWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluc2VydEluZGV4IFRoZSBpbmRleCB0byBpbnNlcnQgdGhlIGNvbXBvbmVudCBhdCBpbiB0aGUgc3RhY2suXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBUaGUgY29tcG9uZW50IHRvIGluc2VydCBpbnRvIHRoZSBuYXZpZ2F0aW9uIHN0YWNrLlxuICAgICAqIEBwYXJhbSBjb21wb25lbnRQcm9wcyBBbnkgcHJvcGVydGllcyBvZiB0aGUgY29tcG9uZW50LlxuICAgICAqIEBwYXJhbSBvcHRzIFRoZSBuYXZpZ2F0aW9uIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgaW5zZXJ0KGluc2VydEluZGV4LCBjb21wb25lbnQsIGNvbXBvbmVudFByb3BzLCBvcHRzLCBkb25lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc2VydFBhZ2VzKGluc2VydEluZGV4LCBbeyBjb21wb25lbnQsIGNvbXBvbmVudFByb3BzIH1dLCBvcHRzLCBkb25lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5zZXJ0cyBhbiBhcnJheSBvZiBjb21wb25lbnRzIGludG8gdGhlIG5hdmlnYXRpb24gc3RhY2sgYXQgdGhlIHNwZWNpZmllZCBpbmRleC5cbiAgICAgKiBUaGUgbGFzdCBjb21wb25lbnQgaW4gdGhlIGFycmF5IHdpbGwgYmVjb21lIGluc3RhbnRpYXRlZCBhcyBhIHZpZXcsIGFuZCBhbmltYXRlXG4gICAgICogaW4gdG8gYmVjb21lIHRoZSBhY3RpdmUgdmlldy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnNlcnRJbmRleCBUaGUgaW5kZXggdG8gaW5zZXJ0IHRoZSBjb21wb25lbnRzIGF0IGluIHRoZSBzdGFjay5cbiAgICAgKiBAcGFyYW0gaW5zZXJ0Q29tcG9uZW50cyBUaGUgY29tcG9uZW50cyB0byBpbnNlcnQgaW50byB0aGUgbmF2aWdhdGlvbiBzdGFjay5cbiAgICAgKiBAcGFyYW0gb3B0cyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBkb25lIFRoZSB0cmFuc2l0aW9uIGNvbXBsZXRlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGluc2VydFBhZ2VzKGluc2VydEluZGV4LCBpbnNlcnRDb21wb25lbnRzLCBvcHRzLCBkb25lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlVHJucyh7XG4gICAgICAgICAgICBpbnNlcnRTdGFydDogaW5zZXJ0SW5kZXgsXG4gICAgICAgICAgICBpbnNlcnRWaWV3czogaW5zZXJ0Q29tcG9uZW50cyxcbiAgICAgICAgICAgIG9wdHMsXG4gICAgICAgIH0sIGRvbmUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQb3AgYSBjb21wb25lbnQgb2ZmIG9mIHRoZSBuYXZpZ2F0aW9uIHN0YWNrLiBOYXZpZ2F0ZXMgYmFjayBmcm9tIHRoZSBjdXJyZW50XG4gICAgICogY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9uZSBUaGUgdHJhbnNpdGlvbiBjb21wbGV0ZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBwb3Aob3B0cywgZG9uZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVJbmRleCgtMSwgMSwgb3B0cywgZG9uZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBvcCB0byBhIHNwZWNpZmljIGluZGV4IGluIHRoZSBuYXZpZ2F0aW9uIHN0YWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluZGV4T3JWaWV3Q3RybCBUaGUgaW5kZXggb3IgdmlldyBjb250cm9sbGVyIHRvIHBvcCB0by5cbiAgICAgKiBAcGFyYW0gb3B0cyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBkb25lIFRoZSB0cmFuc2l0aW9uIGNvbXBsZXRlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHBvcFRvKGluZGV4T3JWaWV3Q3RybCwgb3B0cywgZG9uZSkge1xuICAgICAgICBjb25zdCB0aSA9IHtcbiAgICAgICAgICAgIHJlbW92ZVN0YXJ0OiAtMSxcbiAgICAgICAgICAgIHJlbW92ZUNvdW50OiAtMSxcbiAgICAgICAgICAgIG9wdHMsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgaW5kZXhPclZpZXdDdHJsID09PSAnb2JqZWN0JyAmJiBpbmRleE9yVmlld0N0cmwuY29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aS5yZW1vdmVWaWV3ID0gaW5kZXhPclZpZXdDdHJsO1xuICAgICAgICAgICAgdGkucmVtb3ZlU3RhcnQgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpbmRleE9yVmlld0N0cmwgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aS5yZW1vdmVTdGFydCA9IGluZGV4T3JWaWV3Q3RybCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWVUcm5zKHRpLCBkb25lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTmF2aWdhdGUgYmFjayB0byB0aGUgcm9vdCBvZiB0aGUgc3RhY2ssIG5vIG1hdHRlciBob3cgZmFyIGJhY2sgdGhhdCBpcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRzIFRoZSBuYXZpZ2F0aW9uIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgcG9wVG9Sb290KG9wdHMsIGRvbmUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlSW5kZXgoMSwgLTEsIG9wdHMsIGRvbmUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgY29tcG9uZW50IGZyb20gdGhlIG5hdmlnYXRpb24gc3RhY2sgYXQgdGhlIHNwZWNpZmllZCBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGFydEluZGV4IFRoZSBudW1iZXIgdG8gYmVnaW4gcmVtb3ZhbCBhdC5cbiAgICAgKiBAcGFyYW0gcmVtb3ZlQ291bnQgVGhlIG51bWJlciBvZiBjb21wb25lbnRzIHRvIHJlbW92ZS5cbiAgICAgKiBAcGFyYW0gb3B0cyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBkb25lIFRoZSB0cmFuc2l0aW9uIGNvbXBsZXRlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHJlbW92ZUluZGV4KHN0YXJ0SW5kZXgsIHJlbW92ZUNvdW50ID0gMSwgb3B0cywgZG9uZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZVRybnMoe1xuICAgICAgICAgICAgcmVtb3ZlU3RhcnQ6IHN0YXJ0SW5kZXgsXG4gICAgICAgICAgICByZW1vdmVDb3VudCxcbiAgICAgICAgICAgIG9wdHMsXG4gICAgICAgIH0sIGRvbmUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHJvb3QgZm9yIHRoZSBjdXJyZW50IG5hdmlnYXRpb24gc3RhY2sgdG8gYSBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IFRoZSBjb21wb25lbnQgdG8gc2V0IGFzIHRoZSByb290IG9mIHRoZSBuYXZpZ2F0aW9uIHN0YWNrLlxuICAgICAqIEBwYXJhbSBjb21wb25lbnRQcm9wcyBBbnkgcHJvcGVydGllcyBvZiB0aGUgY29tcG9uZW50LlxuICAgICAqIEBwYXJhbSBvcHRzIFRoZSBuYXZpZ2F0aW9uIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgc2V0Um9vdChjb21wb25lbnQsIGNvbXBvbmVudFByb3BzLCBvcHRzLCBkb25lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldFBhZ2VzKFt7IGNvbXBvbmVudCwgY29tcG9uZW50UHJvcHMgfV0sIG9wdHMsIGRvbmUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHZpZXdzIG9mIHRoZSBjdXJyZW50IG5hdmlnYXRpb24gc3RhY2sgYW5kIG5hdmlnYXRlIHRvIHRoZSBsYXN0IHZpZXcuXG4gICAgICogQnkgZGVmYXVsdCBhbmltYXRpb25zIGFyZSBkaXNhYmxlZCwgYnV0IHRoZXkgY2FuIGJlIGVuYWJsZWQgYnkgcGFzc2luZyBvcHRpb25zXG4gICAgICogdG8gdGhlIG5hdmlnYXRpb24gY29udHJvbGxlci4gTmF2aWdhdGlvbiBwYXJhbWV0ZXJzIGNhbiBhbHNvIGJlIHBhc3NlZCB0byB0aGVcbiAgICAgKiBpbmRpdmlkdWFsIHBhZ2VzIGluIHRoZSBhcnJheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2aWV3cyBUaGUgbGlzdCBvZiB2aWV3cyB0byBzZXQgYXMgdGhlIG5hdmlnYXRpb24gc3RhY2suXG4gICAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9uZSBUaGUgdHJhbnNpdGlvbiBjb21wbGV0ZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBzZXRQYWdlcyh2aWV3cywgb3B0cywgZG9uZSkge1xuICAgICAgICBvcHRzICE9PSBudWxsICYmIG9wdHMgIT09IHZvaWQgMCA/IG9wdHMgOiAob3B0cyA9IHt9KTtcbiAgICAgICAgLy8gaWYgYW5pbWF0aW9uIHdhc24ndCBzZXQgdG8gdHJ1ZSB0aGVuIGRlZmF1bHQgaXQgdG8gTk9UIGFuaW1hdGVcbiAgICAgICAgaWYgKG9wdHMuYW5pbWF0ZWQgIT09IHRydWUpIHtcbiAgICAgICAgICAgIG9wdHMuYW5pbWF0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZVRybnMoe1xuICAgICAgICAgICAgaW5zZXJ0U3RhcnQ6IDAsXG4gICAgICAgICAgICBpbnNlcnRWaWV3czogdmlld3MsXG4gICAgICAgICAgICByZW1vdmVTdGFydDogMCxcbiAgICAgICAgICAgIHJlbW92ZUNvdW50OiAtMSxcbiAgICAgICAgICAgIG9wdHMsXG4gICAgICAgIH0sIGRvbmUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgdGhlIHJvdXRlciB0byB1cGRhdGUgdGhlIHZpZXcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaWQgVGhlIGNvbXBvbmVudCB0YWcuXG4gICAgICogQHBhcmFtIHBhcmFtcyBUaGUgY29tcG9uZW50IHBhcmFtcy5cbiAgICAgKiBAcGFyYW0gZGlyZWN0aW9uIEEgZGlyZWN0aW9uIGhpbnQuXG4gICAgICogQHBhcmFtIGFuaW1hdGlvbiBhbiBBbmltYXRpb25CdWlsZGVyLlxuICAgICAqXG4gICAgICogQHJldHVybiB0aGUgc3RhdHVzLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHNldFJvdXRlSWQoaWQsIHBhcmFtcywgZGlyZWN0aW9uLCBhbmltYXRpb24pIHtcbiAgICAgICAgY29uc3QgYWN0aXZlID0gdGhpcy5nZXRBY3RpdmVTeW5jKCk7XG4gICAgICAgIGlmIChtYXRjaGVzKGFjdGl2ZSwgaWQsIHBhcmFtcykpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgIGNoYW5nZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGFjdGl2ZS5lbGVtZW50LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlc29sdmU7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocikgPT4gKHJlc29sdmUgPSByKSk7XG4gICAgICAgIGxldCBmaW5pc2g7XG4gICAgICAgIGNvbnN0IGNvbW1vbk9wdHMgPSB7XG4gICAgICAgICAgICB1cGRhdGVVUkw6IGZhbHNlLFxuICAgICAgICAgICAgdmlld0lzUmVhZHk6IChlbnRlcmluZ0VsKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IG1hcms7XG4gICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBQcm9taXNlKChyKSA9PiAobWFyayA9IHIpKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZW50ZXJpbmdFbCxcbiAgICAgICAgICAgICAgICAgICAgbWFya1Zpc2libGU6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmsoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZpbmlzaDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdyb290Jykge1xuICAgICAgICAgICAgZmluaXNoID0gdGhpcy5zZXRSb290KGlkLCBwYXJhbXMsIGNvbW1vbk9wdHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTG9vayBmb3IgYSB2aWV3IG1hdGNoaW5nIHRoZSB0YXJnZXQgaW4gdGhlIHZpZXcgc3RhY2suXG4gICAgICAgICAgICBjb25zdCB2aWV3Q29udHJvbGxlciA9IHRoaXMudmlld3MuZmluZCgodikgPT4gbWF0Y2hlcyh2LCBpZCwgcGFyYW1zKSk7XG4gICAgICAgICAgICBpZiAodmlld0NvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICBmaW5pc2ggPSB0aGlzLnBvcFRvKHZpZXdDb250cm9sbGVyLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbW1vbk9wdHMpLCB7IGRpcmVjdGlvbjogJ2JhY2snLCBhbmltYXRpb25CdWlsZGVyOiBhbmltYXRpb24gfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnZm9yd2FyZCcpIHtcbiAgICAgICAgICAgICAgICBmaW5pc2ggPSB0aGlzLnB1c2goaWQsIHBhcmFtcywgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb21tb25PcHRzKSwgeyBhbmltYXRpb25CdWlsZGVyOiBhbmltYXRpb24gfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnYmFjaycpIHtcbiAgICAgICAgICAgICAgICBmaW5pc2ggPSB0aGlzLnNldFJvb3QoaWQsIHBhcmFtcywgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb21tb25PcHRzKSwgeyBkaXJlY3Rpb246ICdiYWNrJywgYW5pbWF0ZWQ6IHRydWUsIGFuaW1hdGlvbkJ1aWxkZXI6IGFuaW1hdGlvbiB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCBieSA8aW9uLXJvdXRlcj4gdG8gcmV0cmlldmUgdGhlIGN1cnJlbnQgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgZ2V0Um91dGVJZCgpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlID0gdGhpcy5nZXRBY3RpdmVTeW5jKCk7XG4gICAgICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IGFjdGl2ZS5lbGVtZW50LnRhZ05hbWUsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBhY3RpdmUucGFyYW1zLFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGFjdGl2ZS5lbGVtZW50LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFjdGl2ZSB2aWV3LlxuICAgICAqL1xuICAgIGFzeW5jIGdldEFjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWN0aXZlU3luYygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgYXQgdGhlIHNwZWNpZmllZCBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIHZpZXcuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0QnlJbmRleChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3c1tpbmRleF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBjdXJyZW50IHZpZXcgY2FuIGdvIGJhY2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmlldyBUaGUgdmlldyB0byBjaGVjay5cbiAgICAgKi9cbiAgICBhc3luYyBjYW5Hb0JhY2sodmlldykge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5Hb0JhY2tTeW5jKHZpZXcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHByZXZpb3VzIHZpZXcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmlldyBUaGUgdmlldyB0byBnZXQuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0UHJldmlvdXModmlldykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQcmV2aW91c1N5bmModmlldyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB2aWV3cyBpbiB0aGUgc3RhY2suXG4gICAgICovXG4gICAgYXN5bmMgZ2V0TGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudmlld3MubGVuZ3RoKTtcbiAgICB9XG4gICAgZ2V0QWN0aXZlU3luYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld3NbdGhpcy52aWV3cy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgY2FuR29CYWNrU3luYyh2aWV3ID0gdGhpcy5nZXRBY3RpdmVTeW5jKCkpIHtcbiAgICAgICAgcmV0dXJuICEhKHZpZXcgJiYgdGhpcy5nZXRQcmV2aW91c1N5bmModmlldykpO1xuICAgIH1cbiAgICBnZXRQcmV2aW91c1N5bmModmlldyA9IHRoaXMuZ2V0QWN0aXZlU3luYygpKSB7XG4gICAgICAgIGlmICghdmlldykge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2aWV3cyA9IHRoaXMudmlld3M7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdmlld3MuaW5kZXhPZih2aWV3KTtcbiAgICAgICAgcmV0dXJuIGluZGV4ID4gMCA/IHZpZXdzW2luZGV4IC0gMV0gOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuYXZpZ2F0aW9uIHN0YWNrIGNoYW5nZSB0byB0aGUgcXVldWUgYW5kIHNjaGVkdWxlcyBpdCB0byBydW4uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHRoZSB0cmFuc2l0aW9uIHN1Y2NlZWRzLlxuICAgICAqL1xuICAgIGFzeW5jIHF1ZXVlVHJucyh0aSwgZG9uZSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBpZiAodGhpcy5pc1RyYW5zaXRpb25pbmcgJiYgKChfYSA9IHRpLm9wdHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5za2lwSWZCdXN5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aS5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRpLnJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgfSk7XG4gICAgICAgIHRpLmRvbmUgPSBkb25lO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdXNpbmcgcm91dGVyLCBjaGVjayB0byBzZWUgaWYgbmF2aWdhdGlvbiBob29rc1xuICAgICAgICAgKiB3aWxsIGFsbG93IHVzIHRvIHBlcmZvcm0gdGhpcyB0cmFuc2l0aW9uLiBUaGlzXG4gICAgICAgICAqIGlzIHJlcXVpcmVkIGluIG9yZGVyIGZvciBob29rcyB0byB3b3JrIHdpdGhcbiAgICAgICAgICogdGhlIGlvbi1iYWNrLWJ1dHRvbiBvciBzd2lwZSB0byBnbyBiYWNrLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHRpLm9wdHMgJiYgdGkub3B0cy51cGRhdGVVUkwgIT09IGZhbHNlICYmIHRoaXMudXNlUm91dGVyKSB7XG4gICAgICAgICAgICBjb25zdCByb3V0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpb24tcm91dGVyJyk7XG4gICAgICAgICAgICBpZiAocm91dGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FuVHJhbnNpdGlvbiA9IGF3YWl0IHJvdXRlci5jYW5UcmFuc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhblRyYW5zaXRpb24gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYW5UcmFuc2l0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaChjYW5UcmFuc2l0aW9uLCB0aS5vcHRzLmRpcmVjdGlvbiB8fCAnYmFjaycpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE5vcm1hbGl6ZSBlbXB0eVxuICAgICAgICBpZiAoKChfYiA9IHRpLmluc2VydFZpZXdzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubGVuZ3RoKSA9PT0gMCkge1xuICAgICAgICAgICAgdGkuaW5zZXJ0Vmlld3MgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRW5xdWV1ZSB0cmFuc2l0aW9uIGluc3RydWN0aW9uXG4gICAgICAgIHRoaXMudHJhbnNJbnN0ci5wdXNoKHRpKTtcbiAgICAgICAgLy8gaWYgdGhlcmUgaXNuJ3QgYSB0cmFuc2l0aW9uIGFscmVhZHkgaGFwcGVuaW5nXG4gICAgICAgIC8vIHRoZW4gdGhpcyB3aWxsIGtpY2sgb2ZmIHRoaXMgdHJhbnNpdGlvblxuICAgICAgICB0aGlzLm5leHRUcm5zKCk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICBzdWNjZXNzKHJlc3VsdCwgdGkpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICB0aGlzLmZpcmVFcnJvcignbmF2IGNvbnRyb2xsZXIgd2FzIGRlc3Ryb3llZCcsIHRpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGkuZG9uZSkge1xuICAgICAgICAgICAgdGkuZG9uZShyZXN1bHQuaGFzQ29tcGxldGVkLCByZXN1bHQucmVxdWlyZXNUcmFuc2l0aW9uLCByZXN1bHQuZW50ZXJpbmdWaWV3LCByZXN1bHQubGVhdmluZ1ZpZXcsIHJlc3VsdC5kaXJlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRpLnJlc29sdmUocmVzdWx0Lmhhc0NvbXBsZXRlZCk7XG4gICAgICAgIGlmICh0aS5vcHRzLnVwZGF0ZVVSTCAhPT0gZmFsc2UgJiYgdGhpcy51c2VSb3V0ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvdXRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lvbi1yb3V0ZXInKTtcbiAgICAgICAgICAgIGlmIChyb3V0ZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSByZXN1bHQuZGlyZWN0aW9uID09PSAnYmFjaycgPyAnYmFjaycgOiAnZm9yd2FyZCc7XG4gICAgICAgICAgICAgICAgcm91dGVyLm5hdkNoYW5nZWQoZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmYWlsZWQocmVqZWN0UmVhc29uLCB0aSkge1xuICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZmlyZUVycm9yKCduYXYgY29udHJvbGxlciB3YXMgZGVzdHJveWVkJywgdGkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJhbnNJbnN0ci5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmZpcmVFcnJvcihyZWplY3RSZWFzb24sIHRpKTtcbiAgICB9XG4gICAgZmlyZUVycm9yKHJlamVjdFJlYXNvbiwgdGkpIHtcbiAgICAgICAgaWYgKHRpLmRvbmUpIHtcbiAgICAgICAgICAgIHRpLmRvbmUoZmFsc2UsIGZhbHNlLCByZWplY3RSZWFzb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aS5yZWplY3QgJiYgIXRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICB0aS5yZWplY3QocmVqZWN0UmVhc29uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRpLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnN1bWVzIHRoZSBuZXh0IHRyYW5zaXRpb24gaW4gdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgd2hldGhlciB0aGUgdHJhbnNpdGlvbiBpcyBleGVjdXRlZC5cbiAgICAgKi9cbiAgICBuZXh0VHJucygpIHtcbiAgICAgICAgLy8gdGhpcyBpcyB0aGUgZnJhbWV3b3JrJ3MgYnJlYWQgJ24gYnV0dGEgZnVuY3Rpb25cbiAgICAgICAgLy8gb25seSBvbmUgdHJhbnNpdGlvbiBpcyBhbGxvd2VkIGF0IGFueSBnaXZlbiB0aW1lXG4gICAgICAgIGlmICh0aGlzLmlzVHJhbnNpdGlvbmluZykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoZXJlIGlzIG5vIHRyYW5zaXRpb24gaGFwcGVuaW5nIHJpZ2h0IG5vdywgZXhlY3V0ZXMgdGhlIG5leHQgaW5zdHJ1Y3Rpb25zLlxuICAgICAgICBjb25zdCB0aSA9IHRoaXMudHJhbnNJbnN0ci5zaGlmdCgpO1xuICAgICAgICBpZiAoIXRpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ydW5UcmFuc2l0aW9uKHRpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKiBFeGVjdXRlcyBhbGwgdGhlIHRyYW5zaXRpb24gaW5zdHJ1Y3Rpb24gZnJvbSB0aGUgcXVldWUuICovXG4gICAgYXN5bmMgcnVuVHJhbnNpdGlvbih0aSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gc2V0IHRoYXQgdGhpcyBuYXYgaXMgYWN0aXZlbHkgdHJhbnNpdGlvbmluZ1xuICAgICAgICAgICAgdGhpcy5pb25OYXZXaWxsQ2hhbmdlLmVtaXQoKTtcbiAgICAgICAgICAgIHRoaXMuaXNUcmFuc2l0aW9uaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucHJlcGFyZVRJKHRpKTtcbiAgICAgICAgICAgIGNvbnN0IGxlYXZpbmdWaWV3ID0gdGhpcy5nZXRBY3RpdmVTeW5jKCk7XG4gICAgICAgICAgICBjb25zdCBlbnRlcmluZ1ZpZXcgPSB0aGlzLmdldEVudGVyaW5nVmlldyh0aSwgbGVhdmluZ1ZpZXcpO1xuICAgICAgICAgICAgaWYgKCFsZWF2aW5nVmlldyAmJiAhZW50ZXJpbmdWaWV3KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyB2aWV3cyBpbiB0aGUgc3RhY2sgdG8gYmUgcmVtb3ZlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVudGVyaW5nVmlldyAmJiBlbnRlcmluZ1ZpZXcuc3RhdGUgPT09IFZJRVdfU1RBVEVfTkVXKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZW50ZXJpbmdWaWV3LmluaXQodGhpcy5lbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBvc3RWaWV3SW5pdChlbnRlcmluZ1ZpZXcsIGxlYXZpbmdWaWV3LCB0aSk7XG4gICAgICAgICAgICAvLyBOZWVkcyB0cmFuc2l0aW9uP1xuICAgICAgICAgICAgY29uc3QgcmVxdWlyZXNUcmFuc2l0aW9uID0gKHRpLmVudGVyaW5nUmVxdWlyZXNUcmFuc2l0aW9uIHx8IHRpLmxlYXZpbmdSZXF1aXJlc1RyYW5zaXRpb24pICYmIGVudGVyaW5nVmlldyAhPT0gbGVhdmluZ1ZpZXc7XG4gICAgICAgICAgICBpZiAocmVxdWlyZXNUcmFuc2l0aW9uICYmIHRpLm9wdHMgJiYgbGVhdmluZ1ZpZXcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0JhY2tEaXJlY3Rpb24gPSB0aS5vcHRzLmRpcmVjdGlvbiA9PT0gJ2JhY2snO1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIElmIGhlYWRpbmcgYmFjaywgdXNlIHRoZSBlbnRlcmluZyBwYWdlJ3MgYW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICogdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQgYnkgdGhlIGRldmVsb3Blci5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoaXNCYWNrRGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpLm9wdHMuYW5pbWF0aW9uQnVpbGRlciA9IHRpLm9wdHMuYW5pbWF0aW9uQnVpbGRlciB8fCAoZW50ZXJpbmdWaWV3ID09PSBudWxsIHx8IGVudGVyaW5nVmlldyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZW50ZXJpbmdWaWV3LmFuaW1hdGlvbkJ1aWxkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZWF2aW5nVmlldy5hbmltYXRpb25CdWlsZGVyID0gdGkub3B0cy5hbmltYXRpb25CdWlsZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChyZXF1aXJlc1RyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLnRyYW5zaXRpb24oZW50ZXJpbmdWaWV3LCBsZWF2aW5nVmlldywgdGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gdHJhbnNpdGlvbiBpcyBub3QgcmVxdWlyZWQsIHNvIHdlIGFyZSBhbHJlYWR5IGRvbmUhXG4gICAgICAgICAgICAgICAgLy8gdGhleSdyZSBpbnNlcnRpbmcvcmVtb3ZpbmcgdGhlIHZpZXdzIHNvbWV3aGVyZSBpbiB0aGUgbWlkZGxlIG9yXG4gICAgICAgICAgICAgICAgLy8gYmVnaW5uaW5nLCBzbyB2aXN1YWxseSBub3RoaW5nIG5lZWRzIHRvIGFuaW1hdGUvdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIC8vIHJlc29sdmUgaW1tZWRpYXRlbHkgYmVjYXVzZSB0aGVyZSdzIG5vIGFuaW1hdGlvbiB0aGF0J3MgaGFwcGVuaW5nXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICBoYXNDb21wbGV0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVzVHJhbnNpdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3VjY2VzcyhyZXN1bHQsIHRpKTtcbiAgICAgICAgICAgIHRoaXMuaW9uTmF2RGlkQ2hhbmdlLmVtaXQoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAocmVqZWN0UmVhc29uKSB7XG4gICAgICAgICAgICB0aGlzLmZhaWxlZChyZWplY3RSZWFzb24sIHRpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5leHRUcm5zKCk7XG4gICAgfVxuICAgIHByZXBhcmVUSSh0aSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICB2YXIgX2M7XG4gICAgICAgIGNvbnN0IHZpZXdzTGVuZ3RoID0gdGhpcy52aWV3cy5sZW5ndGg7XG4gICAgICAgIChfYSA9IHRpLm9wdHMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICh0aS5vcHRzID0ge30pO1xuICAgICAgICAoX2IgPSAoX2MgPSB0aS5vcHRzKS5kZWxlZ2F0ZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogKF9jLmRlbGVnYXRlID0gdGhpcy5kZWxlZ2F0ZSk7XG4gICAgICAgIGlmICh0aS5yZW1vdmVWaWV3ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGFzc2VydCh0aS5yZW1vdmVTdGFydCAhPT0gdW5kZWZpbmVkLCAncmVtb3ZlVmlldyBuZWVkcyByZW1vdmVTdGFydCcpO1xuICAgICAgICAgICAgYXNzZXJ0KHRpLnJlbW92ZUNvdW50ICE9PSB1bmRlZmluZWQsICdyZW1vdmVWaWV3IG5lZWRzIHJlbW92ZUNvdW50Jyk7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMudmlld3MuaW5kZXhPZih0aS5yZW1vdmVWaWV3KTtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlbW92ZVZpZXcgd2FzIG5vdCBmb3VuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGkucmVtb3ZlU3RhcnQgKz0gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpLnJlbW92ZVN0YXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICh0aS5yZW1vdmVTdGFydCA8IDApIHtcbiAgICAgICAgICAgICAgICB0aS5yZW1vdmVTdGFydCA9IHZpZXdzTGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aS5yZW1vdmVDb3VudCA8IDApIHtcbiAgICAgICAgICAgICAgICB0aS5yZW1vdmVDb3VudCA9IHZpZXdzTGVuZ3RoIC0gdGkucmVtb3ZlU3RhcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aS5sZWF2aW5nUmVxdWlyZXNUcmFuc2l0aW9uID0gdGkucmVtb3ZlQ291bnQgPiAwICYmIHRpLnJlbW92ZVN0YXJ0ICsgdGkucmVtb3ZlQ291bnQgPT09IHZpZXdzTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aS5pbnNlcnRWaWV3cykge1xuICAgICAgICAgICAgLy8gYWxsb3cgLTEgdG8gYmUgcGFzc2VkIGluIHRvIGF1dG8gcHVzaCBpdCBvbiB0aGUgZW5kXG4gICAgICAgICAgICAvLyBhbmQgY2xlYW4gdXAgdGhlIGluZGV4IGlmIGl0J3MgbGFyZ2VyIHRoZW4gdGhlIHNpemUgb2YgdGhlIHN0YWNrXG4gICAgICAgICAgICBpZiAodGkuaW5zZXJ0U3RhcnQgPCAwIHx8IHRpLmluc2VydFN0YXJ0ID4gdmlld3NMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aS5pbnNlcnRTdGFydCA9IHZpZXdzTGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGkuZW50ZXJpbmdSZXF1aXJlc1RyYW5zaXRpb24gPSB0aS5pbnNlcnRTdGFydCA9PT0gdmlld3NMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5zZXJ0Vmlld3MgPSB0aS5pbnNlcnRWaWV3cztcbiAgICAgICAgaWYgKCFpbnNlcnRWaWV3cykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydChpbnNlcnRWaWV3cy5sZW5ndGggPiAwLCAnbGVuZ3RoIGNhbiBub3QgYmUgemVybycpO1xuICAgICAgICBjb25zdCB2aWV3Q29udHJvbGxlcnMgPSBjb252ZXJ0VG9WaWV3cyhpbnNlcnRWaWV3cyk7XG4gICAgICAgIGlmICh2aWV3Q29udHJvbGxlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgdmlld3MgdG8gaW5zZXJ0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgYWxsIHRoZSBpbnNlcnRlZCB2aWV3IGFyZSBjb3JyZWN0XG4gICAgICAgIGZvciAoY29uc3QgdmlldyBvZiB2aWV3Q29udHJvbGxlcnMpIHtcbiAgICAgICAgICAgIHZpZXcuZGVsZWdhdGUgPSB0aS5vcHRzLmRlbGVnYXRlO1xuICAgICAgICAgICAgY29uc3QgbmF2ID0gdmlldy5uYXY7XG4gICAgICAgICAgICBpZiAobmF2ICYmIG5hdiAhPT0gdGhpcykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW5zZXJ0ZWQgdmlldyB3YXMgYWxyZWFkeSBpbnNlcnRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZpZXcuc3RhdGUgPT09IFZJRVdfU1RBVEVfREVTVFJPWUVEKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnNlcnRlZCB2aWV3IHdhcyBhbHJlYWR5IGRlc3Ryb3llZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRpLmluc2VydFZpZXdzID0gdmlld0NvbnRyb2xsZXJzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2aWV3IHRoYXQgd2lsbCBiZSBlbnRlcmVkIGNvbnNpZGVyaW5nIHRoZSB0cmFuc2l0aW9uIGluc3RydWN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0aSBUaGUgaW5zdHJ1Y3Rpb25zLlxuICAgICAqIEBwYXJhbSBsZWF2aW5nVmlldyBUaGUgdmlldyBiZWluZyBsZWZ0IG9yIHVuZGVmaW5lZCBpZiBub25lLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHZpZXcgdGhhdCB3aWxsIGJlIGVudGVyZWQsIHVuZGVmaW5lZCBpZiBub25lLlxuICAgICAqL1xuICAgIGdldEVudGVyaW5nVmlldyh0aSwgbGVhdmluZ1ZpZXcpIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgaW5zZXJ0ZWQgdmlldyB3aWxsIGJlIGVudGVyZWQgd2hlbiB2aWV3IGFyZSBpbnNlcnRlZC5cbiAgICAgICAgY29uc3QgaW5zZXJ0Vmlld3MgPSB0aS5pbnNlcnRWaWV3cztcbiAgICAgICAgaWYgKGluc2VydFZpZXdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnNlcnRWaWV3c1tpbnNlcnRWaWV3cy5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXaGVuIHZpZXdzIGFyZSBkZWxldGVkLCB3ZSB3aWxsIGVudGVyIHRoZSBsYXN0IHZpZXcgdGhhdCBpcyBub3QgcmVtb3ZlZCBhbmQgbm90IHRoZSB2aWV3IGJlaW5nIGxlZnQuXG4gICAgICAgIGNvbnN0IHJlbW92ZVN0YXJ0ID0gdGkucmVtb3ZlU3RhcnQ7XG4gICAgICAgIGlmIChyZW1vdmVTdGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCB2aWV3cyA9IHRoaXMudmlld3M7XG4gICAgICAgICAgICBjb25zdCByZW1vdmVFbmQgPSByZW1vdmVTdGFydCArIHRpLnJlbW92ZUNvdW50O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHZpZXdzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IHZpZXdzW2ldO1xuICAgICAgICAgICAgICAgIGlmICgoaSA8IHJlbW92ZVN0YXJ0IHx8IGkgPj0gcmVtb3ZlRW5kKSAmJiB2aWV3ICE9PSBsZWF2aW5nVmlldykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlldztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhbmQgUmVtb3ZlcyB0aGUgdmlld3MgZnJvbSB0aGUgbmF2aWdhdGlvbiBzdGFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbnRlcmluZ1ZpZXcgVGhlIHZpZXcgYmVpbmcgZW50ZXJlZC5cbiAgICAgKiBAcGFyYW0gbGVhdmluZ1ZpZXcgVGhlIHZpZXcgYmVpbmcgbGVmdC5cbiAgICAgKiBAcGFyYW0gdGkgVGhlIGluc3RydWN0aW9ucy5cbiAgICAgKi9cbiAgICBwb3N0Vmlld0luaXQoZW50ZXJpbmdWaWV3LCBsZWF2aW5nVmlldywgdGkpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGFzc2VydChsZWF2aW5nVmlldyB8fCBlbnRlcmluZ1ZpZXcsICdCb3RoIGxlYXZpbmdWaWV3IGFuZCBlbnRlcmluZ1ZpZXcgYXJlIG51bGwnKTtcbiAgICAgICAgYXNzZXJ0KHRpLnJlc29sdmUsICdyZXNvbHZlIG11c3QgYmUgdmFsaWQnKTtcbiAgICAgICAgYXNzZXJ0KHRpLnJlamVjdCwgJ3JlamVjdCBtdXN0IGJlIHZhbGlkJyk7XG4gICAgICAgIC8vIENvbXB1dGUgdGhlIHZpZXdzIHRvIHJlbW92ZS5cbiAgICAgICAgY29uc3Qgb3B0cyA9IHRpLm9wdHM7XG4gICAgICAgIGNvbnN0IHsgaW5zZXJ0Vmlld3MsIHJlbW92ZVN0YXJ0LCByZW1vdmVDb3VudCB9ID0gdGk7XG4gICAgICAgIC8qKiBSZWNvcmRzIHRoZSB2aWV3IHRvIGRlc3Ryb3kgKi9cbiAgICAgICAgbGV0IGRlc3Ryb3lRdWV1ZTtcbiAgICAgICAgLy8gdGhlcmUgYXJlIHZpZXdzIHRvIHJlbW92ZVxuICAgICAgICBpZiAocmVtb3ZlU3RhcnQgIT09IHVuZGVmaW5lZCAmJiByZW1vdmVDb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhc3NlcnQocmVtb3ZlU3RhcnQgPj0gMCwgJ3JlbW92ZVN0YXJ0IGNhbiBub3QgYmUgbmVnYXRpdmUnKTtcbiAgICAgICAgICAgIGFzc2VydChyZW1vdmVDb3VudCA+PSAwLCAncmVtb3ZlQ291bnQgY2FuIG5vdCBiZSBuZWdhdGl2ZScpO1xuICAgICAgICAgICAgZGVzdHJveVF1ZXVlID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gcmVtb3ZlU3RhcnQ7IGkgPCByZW1vdmVTdGFydCArIHJlbW92ZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy52aWV3c1tpXTtcbiAgICAgICAgICAgICAgICBpZiAodmlldyAhPT0gdW5kZWZpbmVkICYmIHZpZXcgIT09IGVudGVyaW5nVmlldyAmJiB2aWV3ICE9PSBsZWF2aW5nVmlldykge1xuICAgICAgICAgICAgICAgICAgICBkZXN0cm95UXVldWUucHVzaCh2aWV3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBkZWZhdWx0IHRoZSBkaXJlY3Rpb24gdG8gXCJiYWNrXCJcbiAgICAgICAgICAgIChfYSA9IG9wdHMuZGlyZWN0aW9uKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAob3B0cy5kaXJlY3Rpb24gPSAnYmFjaycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbmFsTnVtVmlld3MgPSB0aGlzLnZpZXdzLmxlbmd0aCArICgoX2IgPSBpbnNlcnRWaWV3cyA9PT0gbnVsbCB8fCBpbnNlcnRWaWV3cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5zZXJ0Vmlld3MubGVuZ3RoKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwKSAtIChyZW1vdmVDb3VudCAhPT0gbnVsbCAmJiByZW1vdmVDb3VudCAhPT0gdm9pZCAwID8gcmVtb3ZlQ291bnQgOiAwKTtcbiAgICAgICAgYXNzZXJ0KGZpbmFsTnVtVmlld3MgPj0gMCwgJ2ZpbmFsIGJhbGFuY2UgY2FuIG5vdCBiZSBuZWdhdGl2ZScpO1xuICAgICAgICBpZiAoZmluYWxOdW1WaWV3cyA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBZb3UgY2FuJ3QgcmVtb3ZlIGFsbCB0aGUgcGFnZXMgaW4gdGhlIG5hdmlnYXRpb24gc3RhY2suIG5hdi5wb3AoKSBpcyBwcm9iYWJseSBjYWxsZWQgdG9vIG1hbnkgdGltZXMuYCwgdGhpcywgdGhpcy5lbCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25hdmlnYXRpb24gc3RhY2sgbmVlZHMgYXQgbGVhc3Qgb25lIHJvb3QgcGFnZScpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgdGhlIHRyYW5zaXRpb24gY2FuIG5vdCBiZSByZWplY3RlZCwgYW55IHRocm93IHNob3VsZCBiZSBhbiBlcnJvclxuICAgICAgICAvLyBJbnNlcnQgdGhlIG5ldyB2aWV3cyBpbiB0aGUgc3RhY2suXG4gICAgICAgIGlmIChpbnNlcnRWaWV3cykge1xuICAgICAgICAgICAgLy8gYWRkIHRoZSB2aWV3cyB0byB0aGVcbiAgICAgICAgICAgIGxldCBpbnNlcnRJbmRleCA9IHRpLmluc2VydFN0YXJ0O1xuICAgICAgICAgICAgZm9yIChjb25zdCB2aWV3IG9mIGluc2VydFZpZXdzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRWaWV3QXQodmlldywgaW5zZXJ0SW5kZXgpO1xuICAgICAgICAgICAgICAgIGluc2VydEluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGkuZW50ZXJpbmdSZXF1aXJlc1RyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IHRvIGZvcndhcmQgaWYgbm90IGFscmVhZHkgc2V0XG4gICAgICAgICAgICAgICAgKF9jID0gb3B0cy5kaXJlY3Rpb24pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IChvcHRzLmRpcmVjdGlvbiA9ICdmb3J3YXJkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgdGhlIHZpZXdzIHRvIGJlIHJlbW92ZWQgYXJlIGluIHRoZSBiZWdpbm5pbmcgb3IgbWlkZGxlXG4gICAgICAgIC8vIGFuZCB0aGVyZSBpcyBub3QgYSB2aWV3IHRoYXQgbmVlZHMgdG8gdmlzdWFsbHkgdHJhbnNpdGlvbiBvdXRcbiAgICAgICAgLy8gdGhlbiBqdXN0IGRlc3Ryb3kgdGhlbSBhbmQgZG9uJ3QgdHJhbnNpdGlvbiBhbnl0aGluZ1xuICAgICAgICAvLyBiYXRjaCBhbGwgb2YgbGlmZWN5Y2xlcyB0b2dldGhlclxuICAgICAgICAvLyBsZXQncyBtYWtlIHN1cmUsIGNhbGxiYWNrcyBhcmUgem9uZWRcbiAgICAgICAgaWYgKGRlc3Ryb3lRdWV1ZSAmJiBkZXN0cm95UXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2aWV3IG9mIGRlc3Ryb3lRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGxpZmVjeWNsZSh2aWV3LmVsZW1lbnQsIExJRkVDWUNMRV9XSUxMX0xFQVZFKTtcbiAgICAgICAgICAgICAgICBsaWZlY3ljbGUodmlldy5lbGVtZW50LCBMSUZFQ1lDTEVfRElEX0xFQVZFKTtcbiAgICAgICAgICAgICAgICBsaWZlY3ljbGUodmlldy5lbGVtZW50LCBMSUZFQ1lDTEVfV0lMTF9VTkxPQUQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gb25jZSBhbGwgbGlmZWN5Y2xlIGV2ZW50cyBoYXMgYmVlbiBkZWxpdmVyZWQsIHdlIGNhbiBzYWZlbHkgZGV0cm95IHRoZSB2aWV3c1xuICAgICAgICAgICAgZm9yIChjb25zdCB2aWV3IG9mIGRlc3Ryb3lRdWV1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveVZpZXcodmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgdHJhbnNpdGlvbihlbnRlcmluZ1ZpZXcsIGxlYXZpbmdWaWV3LCB0aSkge1xuICAgICAgICAvLyB3ZSBzaG91bGQgYW5pbWF0ZSAoZHVyYXRpb24gPiAwKSBpZiB0aGUgcHVzaGVkIHBhZ2UgaXMgbm90IHRoZSBmaXJzdCBvbmUgKHN0YXJ0dXApXG4gICAgICAgIC8vIG9yIGlmIGl0IGlzIGEgcG9ydGFsIChtb2RhbCwgYWN0aW9uc2hlZXQsIGV0Yy4pXG4gICAgICAgIGNvbnN0IG9wdHMgPSB0aS5vcHRzO1xuICAgICAgICBjb25zdCBwcm9ncmVzc0NhbGxiYWNrID0gb3B0cy5wcm9ncmVzc0FuaW1hdGlvblxuICAgICAgICAgICAgPyAoYW5pKSA9PiB7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQmVjYXVzZSB0aGlzIHByb2dyZXNzIGNhbGxiYWNrIGlzIGNhbGxlZCBhc3luY2hyb25vdXNseVxuICAgICAgICAgICAgICAgICAqIGl0IGlzIHBvc3NpYmxlIGZvciB0aGUgZ2VzdHVyZSB0byBzdGFydCBhbmQgZW5kIGJlZm9yZVxuICAgICAgICAgICAgICAgICAqIHRoZSBhbmltYXRpb24gaXMgZXZlciBzZXQuIEluIHRoYXQgc2NlbmFyaW8sIHdlIHNob3VsZFxuICAgICAgICAgICAgICAgICAqIGltbWVkaWF0ZWx5IGNhbGwgcHJvZ3Jlc3NFbmQgc28gdGhhdCB0aGUgdHJhbnNpdGlvbiBwcm9taXNlXG4gICAgICAgICAgICAgICAgICogcmVzb2x2ZXMgYW5kIHRoZSBnZXN0dXJlIGRvZXMgbm90IGdldCBsb2NrZWQgdXAuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgaWYgKGFuaSAhPT0gdW5kZWZpbmVkICYmICF0aGlzLmdlc3R1cmVPckFuaW1hdGlvbkluUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXN0dXJlT3JBbmltYXRpb25JblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYW5pLm9uRmluaXNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VzdHVyZU9yQW5pbWF0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9LCB7IG9uZVRpbWVDYWxsYmFjazogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFBsYXlpbmcgYW5pbWF0aW9uIHRvIGJlZ2lubmluZ1xuICAgICAgICAgICAgICAgICAgICAgKiB3aXRoIGEgZHVyYXRpb24gb2YgMCBwcmV2ZW50c1xuICAgICAgICAgICAgICAgICAgICAgKiBhbnkgZmxpY2tlcmluZyB3aGVuIHRoZSBhbmltYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICogaXMgbGF0ZXIgY2xlYW5lZCB1cC5cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGFuaS5wcm9ncmVzc0VuZCgwLCAwLCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2JBbmkgPSBhbmk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IG1vZGUgPSBnZXRJb25Nb2RlKHRoaXMpO1xuICAgICAgICBjb25zdCBlbnRlcmluZ0VsID0gZW50ZXJpbmdWaWV3LmVsZW1lbnQ7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcHJlZmVyLW9wdGlvbmFsLWNoYWluXG4gICAgICAgIGNvbnN0IGxlYXZpbmdFbCA9IGxlYXZpbmdWaWV3ICYmIGxlYXZpbmdWaWV3LmVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGFuaW1hdGlvbk9wdHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtb2RlLCBzaG93R29CYWNrOiB0aGlzLmNhbkdvQmFja1N5bmMoZW50ZXJpbmdWaWV3KSwgYmFzZUVsOiB0aGlzLmVsLCBwcm9ncmVzc0NhbGxiYWNrLCBhbmltYXRlZDogdGhpcy5hbmltYXRlZCAmJiBjb25maWcuZ2V0Qm9vbGVhbignYW5pbWF0ZWQnLCB0cnVlKSwgZW50ZXJpbmdFbCxcbiAgICAgICAgICAgIGxlYXZpbmdFbCB9LCBvcHRzKSwgeyBhbmltYXRpb25CdWlsZGVyOiBvcHRzLmFuaW1hdGlvbkJ1aWxkZXIgfHwgdGhpcy5hbmltYXRpb24gfHwgY29uZmlnLmdldCgnbmF2QW5pbWF0aW9uJykgfSk7XG4gICAgICAgIGNvbnN0IHsgaGFzQ29tcGxldGVkIH0gPSBhd2FpdCB0cmFuc2l0aW9uKGFuaW1hdGlvbk9wdHMpO1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uRmluaXNoKGhhc0NvbXBsZXRlZCwgZW50ZXJpbmdWaWV3LCBsZWF2aW5nVmlldywgb3B0cyk7XG4gICAgfVxuICAgIHRyYW5zaXRpb25GaW5pc2goaGFzQ29tcGxldGVkLCBlbnRlcmluZ1ZpZXcsIGxlYXZpbmdWaWV3LCBvcHRzKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0aGUgdHJhbnNpdGlvbiBkaWQgbm90IGNvbXBsZXRlLCB0aGUgbGVhdmluZ1ZpZXcgd2lsbCBzdGlsbCBiZSB0aGUgYWN0aXZlXG4gICAgICAgICAqIHZpZXcgb24gdGhlIHN0YWNrLiBPdGhlcndpc2UgdW5tb3VudCBhbGwgdGhlIHZpZXdzIGFmdGVyIHRoZSBlbnRlcmluZ1ZpZXcuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gaGFzQ29tcGxldGVkID8gZW50ZXJpbmdWaWV3IDogbGVhdmluZ1ZpZXc7XG4gICAgICAgIGlmIChhY3RpdmVWaWV3KSB7XG4gICAgICAgICAgICB0aGlzLnVubW91bnRJbmFjdGl2ZVZpZXdzKGFjdGl2ZVZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoYXNDb21wbGV0ZWQsXG4gICAgICAgICAgICByZXF1aXJlc1RyYW5zaXRpb246IHRydWUsXG4gICAgICAgICAgICBlbnRlcmluZ1ZpZXcsXG4gICAgICAgICAgICBsZWF2aW5nVmlldyxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogb3B0cy5kaXJlY3Rpb24sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluc2VydHMgYSB2aWV3IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAgICpcbiAgICAgKiBXaGVuIHRoZSB2aWV3IGFscmVhZHkgaXMgaW4gdGhlIHN0YWNrIGl0IHdpbGwgYmUgbW92ZWQgdG8gdGhlIG5ldyBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2aWV3IFRoZSB2aWV3IHRvIGluc2VydC5cbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHdoZXJlIHRvIGluc2VydCB0aGUgdmlldy5cbiAgICAgKi9cbiAgICBpbnNlcnRWaWV3QXQodmlldywgaW5kZXgpIHtcbiAgICAgICAgY29uc3Qgdmlld3MgPSB0aGlzLnZpZXdzO1xuICAgICAgICBjb25zdCBleGlzdGluZ0luZGV4ID0gdmlld3MuaW5kZXhPZih2aWV3KTtcbiAgICAgICAgaWYgKGV4aXN0aW5nSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgYXNzZXJ0KHZpZXcubmF2ID09PSB0aGlzLCAndmlldyBpcyBub3QgcGFydCBvZiB0aGUgbmF2Jyk7XG4gICAgICAgICAgICAvLyBUaGUgdmlldyBhbHJlYWR5IGluIHRoZSBzdGFjaywgcmVtb3ZlcyBpdC5cbiAgICAgICAgICAgIHZpZXdzLnNwbGljZShleGlzdGluZ0luZGV4LCAxKTtcbiAgICAgICAgICAgIC8vIGFuZCBhZGQgaXQgYmFjayBhdCB0aGUgcmVxdWVzdGVkIGluZGV4LlxuICAgICAgICAgICAgdmlld3Muc3BsaWNlKGluZGV4LCAwLCB2aWV3KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCghdmlldy5uYXYsICduYXYgaXMgdXNlZCcpO1xuICAgICAgICAgICAgLy8gdGhpcyBpcyBhIG5ldyB2aWV3IHRvIGFkZCB0byB0aGUgc3RhY2tcbiAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgbmV3IGVudGVyaW5nIHZpZXdcbiAgICAgICAgICAgIHZpZXcubmF2ID0gdGhpcztcbiAgICAgICAgICAgIHZpZXdzLnNwbGljZShpbmRleCwgMCwgdmlldyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHZpZXcgZnJvbSB0aGUgc3RhY2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmlldyBUaGUgdmlldyB0byByZW1vdmUuXG4gICAgICovXG4gICAgcmVtb3ZlVmlldyh2aWV3KSB7XG4gICAgICAgIGFzc2VydCh2aWV3LnN0YXRlID09PSBWSUVXX1NUQVRFX0FUVEFDSEVEIHx8IHZpZXcuc3RhdGUgPT09IFZJRVdfU1RBVEVfREVTVFJPWUVELCAndmlldyBzdGF0ZSBzaG91bGQgYmUgbG9hZGVkIG9yIGRlc3Ryb3llZCcpO1xuICAgICAgICBjb25zdCB2aWV3cyA9IHRoaXMudmlld3M7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdmlld3MuaW5kZXhPZih2aWV3KTtcbiAgICAgICAgYXNzZXJ0KGluZGV4ID4gLTEsICd2aWV3IG11c3QgYmUgcGFydCBvZiB0aGUgc3RhY2snKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHZpZXdzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveVZpZXcodmlldykge1xuICAgICAgICB2aWV3Ll9kZXN0cm95KCk7XG4gICAgICAgIHRoaXMucmVtb3ZlVmlldyh2aWV3KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5tb3VudHMgYWxsIGluYWN0aXZlIHZpZXdzIGFmdGVyIHRoZSBzcGVjaWZpZWQgYWN0aXZlIHZpZXcuXG4gICAgICpcbiAgICAgKiBET00gV1JJVEVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBhY3RpdmVWaWV3IFRoZSB2aWV3IHRoYXQgaXMgYWN0aXZlbHkgdmlzaWJsZSBpbiB0aGUgc3RhY2suIFVzZWQgdG8gY2FsY3VsYXRlIHdoaWNoIHZpZXdzIHRvIHVubW91bnQuXG4gICAgICovXG4gICAgdW5tb3VudEluYWN0aXZlVmlld3MoYWN0aXZlVmlldykge1xuICAgICAgICAvLyBvaywgY2xlYW51cCB0aW1lISEgRGVzdHJveSBhbGwgb2YgdGhlIHZpZXdzIHRoYXQgYXJlXG4gICAgICAgIC8vIElOQUNUSVZFIGFuZCBjb21lIGFmdGVyIHRoZSBhY3RpdmUgdmlld1xuICAgICAgICAvLyBvbmx5IGRvIHRoaXMgaWYgdGhlIHZpZXdzIGV4aXN0LCB0aG91Z2hcbiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgdmlld3MgPSB0aGlzLnZpZXdzO1xuICAgICAgICBjb25zdCBhY3RpdmVWaWV3SW5kZXggPSB2aWV3cy5pbmRleE9mKGFjdGl2ZVZpZXcpO1xuICAgICAgICBmb3IgKGxldCBpID0gdmlld3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB2aWV3c1tpXTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogV2hlbiBpbnNlcnRpbmcgbXVsdGlwbGUgdmlld3MgdmlhIGluc2VydFBhZ2VzXG4gICAgICAgICAgICAgKiB0aGUgbGFzdCBwYWdlIHdpbGwgYmUgdHJhbnNpdGlvbmVkIHRvLCBidXQgdGhlXG4gICAgICAgICAgICAgKiBvdGhlcnMgd2lsbCBub3QgYmUuIEFzIGEgcmVzdWx0LCBhIERPTSBlbGVtZW50XG4gICAgICAgICAgICAgKiB3aWxsIG9ubHkgYmUgY3JlYXRlZCBmb3IgdGhlIGxhc3QgcGFnZSBpbnNlcnRlZC5cbiAgICAgICAgICAgICAqIEFzIGEgcmVzdWx0LCBpdCBpcyBwb3NzaWJsZSB0byBoYXZlIHZpZXdzIGluIHRoZVxuICAgICAgICAgICAgICogc3RhY2sgdGhhdCBkbyBub3QgaGF2ZSBgdmlldy5lbGVtZW50YCB5ZXQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB2aWV3LmVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGlmIChpID4gYWN0aXZlVmlld0luZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgdmlldyBjb21lcyBhZnRlciB0aGUgYWN0aXZlIHZpZXdcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0J3MgdW5sb2FkIGl0XG4gICAgICAgICAgICAgICAgICAgIGxpZmVjeWNsZShlbGVtZW50LCBMSUZFQ1lDTEVfV0lMTF9VTkxPQUQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lWaWV3KHZpZXcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpIDwgYWN0aXZlVmlld0luZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgdmlldyBjb21lcyBiZWZvcmUgdGhlIGFjdGl2ZSB2aWV3XG4gICAgICAgICAgICAgICAgICAgIC8vIGFuZCBpdCBpcyBub3QgYSBwb3J0YWwgdGhlbiBlbnN1cmUgaXQgaXMgaGlkZGVuXG4gICAgICAgICAgICAgICAgICAgIHNldFBhZ2VIaWRkZW4oZWxlbWVudCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhblN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gKCF0aGlzLmdlc3R1cmVPckFuaW1hdGlvbkluUHJvZ3Jlc3MgJiZcbiAgICAgICAgICAgICEhdGhpcy5zd2lwZUdlc3R1cmUgJiZcbiAgICAgICAgICAgICF0aGlzLmlzVHJhbnNpdGlvbmluZyAmJlxuICAgICAgICAgICAgdGhpcy50cmFuc0luc3RyLmxlbmd0aCA9PT0gMCAmJlxuICAgICAgICAgICAgdGhpcy5jYW5Hb0JhY2tTeW5jKCkpO1xuICAgIH1cbiAgICBvblN0YXJ0KCkge1xuICAgICAgICB0aGlzLmdlc3R1cmVPckFuaW1hdGlvbkluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICB0aGlzLnBvcCh7IGRpcmVjdGlvbjogJ2JhY2snLCBwcm9ncmVzc0FuaW1hdGlvbjogdHJ1ZSB9KTtcbiAgICB9XG4gICAgb25Nb3ZlKHN0ZXBWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5zYkFuaSkge1xuICAgICAgICAgICAgdGhpcy5zYkFuaS5wcm9ncmVzc1N0ZXAoc3RlcFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkVuZChzaG91bGRDb21wbGV0ZSwgc3RlcFZhbHVlLCBkdXIpIHtcbiAgICAgICAgaWYgKHRoaXMuc2JBbmkpIHtcbiAgICAgICAgICAgIHRoaXMuc2JBbmkub25GaW5pc2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2VzdHVyZU9yQW5pbWF0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgfSwgeyBvbmVUaW1lQ2FsbGJhY2s6IHRydWUgfSk7XG4gICAgICAgICAgICAvLyBBY2NvdW50IGZvciByb3VuZGluZyBlcnJvcnMgaW4gSlNcbiAgICAgICAgICAgIGxldCBuZXdTdGVwVmFsdWUgPSBzaG91bGRDb21wbGV0ZSA/IC0wLjAwMSA6IDAuMDAxO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBBbmltYXRpb24gd2lsbCBiZSByZXZlcnNlZCBoZXJlLCBzbyBuZWVkIHRvXG4gICAgICAgICAgICAgKiByZXZlcnNlIHRoZSBlYXNpbmcgY3VydmUgYXMgd2VsbFxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEFkZGl0aW9uYWxseSwgd2UgbmVlZCB0byBhY2NvdW50IGZvciB0aGUgdGltZSByZWxhdGl2ZVxuICAgICAgICAgICAgICogdG8gdGhlIG5ldyBlYXNpbmcgY3VydmUsIGFzIGBzdGVwVmFsdWVgIGlzIGdvaW5nIHRvIGJlIGdpdmVuXG4gICAgICAgICAgICAgKiBpbiB0ZXJtcyBvZiBhIGxpbmVhciBjdXJ2ZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKCFzaG91bGRDb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2JBbmkuZWFzaW5nKCdjdWJpYy1iZXppZXIoMSwgMCwgMC42OCwgMC4yOCknKTtcbiAgICAgICAgICAgICAgICBuZXdTdGVwVmFsdWUgKz0gZ2V0VGltZUdpdmVuUHJvZ3Jlc3Npb24oWzAsIDBdLCBbMSwgMF0sIFswLjY4LCAwLjI4XSwgWzEsIDFdLCBzdGVwVmFsdWUpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U3RlcFZhbHVlICs9IGdldFRpbWVHaXZlblByb2dyZXNzaW9uKFswLCAwXSwgWzAuMzIsIDAuNzJdLCBbMCwgMV0sIFsxLCAxXSwgc3RlcFZhbHVlKVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2JBbmkucHJvZ3Jlc3NFbmQoc2hvdWxkQ29tcGxldGUgPyAxIDogMCwgbmV3U3RlcFZhbHVlLCBkdXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5nZXN0dXJlT3JBbmltYXRpb25JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gaChcInNsb3RcIiwgeyBrZXk6ICc3MWU5YjVkMDdmYzkwY2E1NTM0MTk3YTYzYTAwM2E0MTU0YWFiZDU5JyB9KTtcbiAgICB9XG4gICAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxuICAgIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgICAgIFwic3dpcGVHZXN0dXJlXCI6IFtcInN3aXBlR2VzdHVyZUNoYW5nZWRcIl0sXG4gICAgICAgIFwicm9vdFwiOiBbXCJyb290Q2hhbmdlZFwiXVxuICAgIH07IH1cbn07XG5OYXYuc3R5bGUgPSBJb25OYXZTdHlsZTA7XG5cbmNvbnN0IG5hdkxpbmsgPSAoZWwsIHJvdXRlckRpcmVjdGlvbiwgY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgcm91dGVyQW5pbWF0aW9uKSA9PiB7XG4gICAgY29uc3QgbmF2ID0gZWwuY2xvc2VzdCgnaW9uLW5hdicpO1xuICAgIGlmIChuYXYpIHtcbiAgICAgICAgaWYgKHJvdXRlckRpcmVjdGlvbiA9PT0gJ2ZvcndhcmQnKSB7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmF2LnB1c2goY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgeyBza2lwSWZCdXN5OiB0cnVlLCBhbmltYXRpb25CdWlsZGVyOiByb3V0ZXJBbmltYXRpb24gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocm91dGVyRGlyZWN0aW9uID09PSAncm9vdCcpIHtcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuYXYuc2V0Um9vdChjb21wb25lbnQsIGNvbXBvbmVudFByb3BzLCB7IHNraXBJZkJ1c3k6IHRydWUsIGFuaW1hdGlvbkJ1aWxkZXI6IHJvdXRlckFuaW1hdGlvbiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyb3V0ZXJEaXJlY3Rpb24gPT09ICdiYWNrJykge1xuICAgICAgICAgICAgcmV0dXJuIG5hdi5wb3AoeyBza2lwSWZCdXN5OiB0cnVlLCBhbmltYXRpb25CdWlsZGVyOiByb3V0ZXJBbmltYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG59O1xuXG5jb25zdCBOYXZMaW5rID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgdGhpcy5vbkNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5hdkxpbmsodGhpcy5lbCwgdGhpcy5yb3V0ZXJEaXJlY3Rpb24sIHRoaXMuY29tcG9uZW50LCB0aGlzLmNvbXBvbmVudFByb3BzLCB0aGlzLnJvdXRlckFuaW1hdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNvbXBvbmVudFByb3BzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJvdXRlckRpcmVjdGlvbiA9ICdmb3J3YXJkJztcbiAgICAgICAgdGhpcy5yb3V0ZXJBbmltYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIGgoSG9zdCwgeyBrZXk6ICc5YmExNzBkMWIxMGUwOGU4YTZiNWU2YTMwZDM2Mzg3MWQ0NTVhMGE5Jywgb25DbGljazogdGhpcy5vbkNsaWNrIH0pO1xuICAgIH1cbiAgICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuXG5leHBvcnQgeyBOYXYgYXMgaW9uX25hdiwgTmF2TGluayBhcyBpb25fbmF2X2xpbmsgfTtcbiJdLCJuYW1lcyI6WyJyIiwicmVnaXN0ZXJJbnN0YW5jZSIsImMiLCJjcmVhdGVFdmVudCIsImgiLCJmIiwiZ2V0RWxlbWVudCIsImUiLCJIb3N0IiwiZyIsImdldFRpbWVHaXZlblByb2dyZXNzaW9uIiwibiIsImFzc2VydCIsInMiLCJzaGFsbG93RXF1YWxTdHJpbmdNYXAiLCJiIiwiZ2V0SW9uTW9kZSIsImNvbmZpZyIsImwiLCJsaWZlY3ljbGUiLCJ0IiwidHJhbnNpdGlvbiIsInNldFBhZ2VIaWRkZW4iLCJkIiwiTElGRUNZQ0xFX1dJTExfVU5MT0FEIiwiTElGRUNZQ0xFX1dJTExfTEVBVkUiLCJMSUZFQ1lDTEVfRElEX0xFQVZFIiwiYSIsImF0dGFjaENvbXBvbmVudCIsIlZJRVdfU1RBVEVfTkVXIiwiVklFV19TVEFURV9BVFRBQ0hFRCIsIlZJRVdfU1RBVEVfREVTVFJPWUVEIiwiVmlld0NvbnRyb2xsZXIiLCJjb25zdHJ1Y3RvciIsImNvbXBvbmVudCIsInBhcmFtcyIsInN0YXRlIiwiaW5pdCIsImNvbnRhaW5lciIsIl90aGlzIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJlbGVtZW50IiwiZGVsZWdhdGUiLCJfZGVzdHJveSIsInJlbW92ZVZpZXdGcm9tRG9tIiwicGFyZW50RWxlbWVudCIsInJlbW92ZSIsIm5hdiIsInVuZGVmaW5lZCIsIm1hdGNoZXMiLCJ2aWV3IiwiaWQiLCJjb252ZXJ0VG9WaWV3IiwicGFnZSIsImNvbnZlcnRUb1ZpZXdzIiwicGFnZXMiLCJtYXAiLCJjb21wb25lbnRQcm9wcyIsImZpbHRlciIsInYiLCJuYXZDc3MiLCJJb25OYXZTdHlsZTAiLCJOYXYiLCJob3N0UmVmIiwiaW9uTmF2V2lsbExvYWQiLCJpb25OYXZXaWxsQ2hhbmdlIiwiaW9uTmF2RGlkQ2hhbmdlIiwidHJhbnNJbnN0ciIsImdlc3R1cmVPckFuaW1hdGlvbkluUHJvZ3Jlc3MiLCJ1c2VSb3V0ZXIiLCJpc1RyYW5zaXRpb25pbmciLCJkZXN0cm95ZWQiLCJ2aWV3cyIsImRpZExvYWQiLCJzd2lwZUdlc3R1cmUiLCJhbmltYXRlZCIsImFuaW1hdGlvbiIsInJvb3RQYXJhbXMiLCJyb290Iiwic3dpcGVHZXN0dXJlQ2hhbmdlZCIsImdlc3R1cmUiLCJlbmFibGUiLCJyb290Q2hhbmdlZCIsInNldFJvb3QiLCJjb21wb25lbnRXaWxsTG9hZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImVsIiwiY2xvc2VzdCIsIm1vZGUiLCJnZXRCb29sZWFuIiwiZW1pdCIsImNvbXBvbmVudERpZExvYWQiLCJfdGhpczIiLCJjcmVhdGVTd2lwZUJhY2tHZXN0dXJlIiwiY2FuU3RhcnQiLCJiaW5kIiwib25TdGFydCIsIm9uTW92ZSIsIm9uRW5kIiwiY29ubmVjdGVkQ2FsbGJhY2siLCJkaXNjb25uZWN0ZWRDYWxsYmFjayIsImRlc3Ryb3kiLCJsZW5ndGgiLCJwdXNoIiwib3B0cyIsImRvbmUiLCJpbnNlcnQiLCJpbnNlcnRJbmRleCIsImluc2VydFBhZ2VzIiwiaW5zZXJ0Q29tcG9uZW50cyIsInF1ZXVlVHJucyIsImluc2VydFN0YXJ0IiwiaW5zZXJ0Vmlld3MiLCJwb3AiLCJyZW1vdmVJbmRleCIsInBvcFRvIiwiaW5kZXhPclZpZXdDdHJsIiwidGkiLCJyZW1vdmVTdGFydCIsInJlbW92ZUNvdW50IiwicmVtb3ZlVmlldyIsInBvcFRvUm9vdCIsInN0YXJ0SW5kZXgiLCJzZXRQYWdlcyIsInNldFJvdXRlSWQiLCJkaXJlY3Rpb24iLCJhY3RpdmUiLCJnZXRBY3RpdmVTeW5jIiwiUHJvbWlzZSIsInJlc29sdmUiLCJjaGFuZ2VkIiwicHJvbWlzZSIsImZpbmlzaCIsImNvbW1vbk9wdHMiLCJ1cGRhdGVVUkwiLCJ2aWV3SXNSZWFkeSIsImVudGVyaW5nRWwiLCJtYXJrIiwicCIsIm1hcmtWaXNpYmxlIiwiX3JlZiIsImFwcGx5IiwiYXJndW1lbnRzIiwidmlld0NvbnRyb2xsZXIiLCJmaW5kIiwiT2JqZWN0IiwiYXNzaWduIiwiYW5pbWF0aW9uQnVpbGRlciIsImdldFJvdXRlSWQiLCJfdGhpczMiLCJ0YWdOYW1lIiwiZ2V0QWN0aXZlIiwiX3RoaXM0IiwiZ2V0QnlJbmRleCIsImluZGV4IiwiX3RoaXM1IiwiY2FuR29CYWNrIiwiX3RoaXM2IiwiY2FuR29CYWNrU3luYyIsImdldFByZXZpb3VzIiwiX3RoaXM3IiwiZ2V0UHJldmlvdXNTeW5jIiwiZ2V0TGVuZ3RoIiwiX3RoaXM4IiwiaW5kZXhPZiIsIl90aGlzOSIsIl9hIiwiX2IiLCJza2lwSWZCdXN5IiwicmVqZWN0Iiwicm91dGVyIiwiY2FuVHJhbnNpdGlvbiIsIm5leHRUcm5zIiwic3VjY2VzcyIsInJlc3VsdCIsImZpcmVFcnJvciIsImhhc0NvbXBsZXRlZCIsInJlcXVpcmVzVHJhbnNpdGlvbiIsImVudGVyaW5nVmlldyIsImxlYXZpbmdWaWV3IiwibmF2Q2hhbmdlZCIsImZhaWxlZCIsInJlamVjdFJlYXNvbiIsInNoaWZ0IiwicnVuVHJhbnNpdGlvbiIsIl90aGlzMTAiLCJwcmVwYXJlVEkiLCJnZXRFbnRlcmluZ1ZpZXciLCJFcnJvciIsInBvc3RWaWV3SW5pdCIsImVudGVyaW5nUmVxdWlyZXNUcmFuc2l0aW9uIiwibGVhdmluZ1JlcXVpcmVzVHJhbnNpdGlvbiIsImlzQmFja0RpcmVjdGlvbiIsIl9jIiwidmlld3NMZW5ndGgiLCJ2aWV3Q29udHJvbGxlcnMiLCJyZW1vdmVFbmQiLCJpIiwiZGVzdHJveVF1ZXVlIiwiZmluYWxOdW1WaWV3cyIsImNvbnNvbGUiLCJ3YXJuIiwiaW5zZXJ0Vmlld0F0IiwiZGVzdHJveVZpZXciLCJfdGhpczExIiwicHJvZ3Jlc3NDYWxsYmFjayIsInByb2dyZXNzQW5pbWF0aW9uIiwiYW5pIiwib25GaW5pc2giLCJvbmVUaW1lQ2FsbGJhY2siLCJwcm9ncmVzc0VuZCIsInNiQW5pIiwibGVhdmluZ0VsIiwiYW5pbWF0aW9uT3B0cyIsInNob3dHb0JhY2siLCJiYXNlRWwiLCJnZXQiLCJ0cmFuc2l0aW9uRmluaXNoIiwiYWN0aXZlVmlldyIsInVubW91bnRJbmFjdGl2ZVZpZXdzIiwiZXhpc3RpbmdJbmRleCIsInNwbGljZSIsImFjdGl2ZVZpZXdJbmRleCIsInN0ZXBWYWx1ZSIsInByb2dyZXNzU3RlcCIsInNob3VsZENvbXBsZXRlIiwiZHVyIiwibmV3U3RlcFZhbHVlIiwiZWFzaW5nIiwicmVuZGVyIiwia2V5Iiwid2F0Y2hlcnMiLCJzdHlsZSIsIm5hdkxpbmsiLCJyb3V0ZXJEaXJlY3Rpb24iLCJyb3V0ZXJBbmltYXRpb24iLCJOYXZMaW5rIiwib25DbGljayIsImlvbl9uYXYiLCJpb25fbmF2X2xpbmsiXSwic291cmNlUm9vdCI6IndlYnBhY2s6Ly8vIiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzBdfQ==