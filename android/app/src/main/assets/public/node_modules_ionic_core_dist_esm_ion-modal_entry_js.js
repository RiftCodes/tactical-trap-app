"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_ion-modal_entry_js"],{

/***/ 9160:
/*!**************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/ion-modal.entry.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ion_modal: () => (/* binding */ Modal)
/* harmony export */ });
/* harmony import */ var C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 9204);
/* harmony import */ var _index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-B_U9CtaY.js */ 4917);
/* harmony import */ var _index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-BlJTBdxG.js */ 4898);
/* harmony import */ var _framework_delegate_DxcnWic_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./framework-delegate-DxcnWic_.js */ 8104);
/* harmony import */ var _helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helpers-1O4D2b7y.js */ 450);
/* harmony import */ var _lock_controller_B_hirT0v_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lock-controller-B-hirT0v.js */ 2377);
/* harmony import */ var _capacitor_CFERIeaU_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./capacitor-CFERIeaU.js */ 5051);
/* harmony import */ var _overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./overlays-8Y2rA-ps.js */ 548);
/* harmony import */ var _theme_DiVJyqlX_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./theme-DiVJyqlX.js */ 247);
/* harmony import */ var _index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./index-DfBA5ztX.js */ 6153);
/* harmony import */ var _keyboard_ywgs5efA_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./keyboard-ywgs5efA.js */ 4753);
/* harmony import */ var _animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./animation-BWcUKtbn.js */ 879);
/* harmony import */ var _cubic_bezier_hHmYLOfE_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./cubic-bezier-hHmYLOfE.js */ 239);
/* harmony import */ var _index_CfgBF1SE_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./index-CfgBF1SE.js */ 5860);
/* harmony import */ var _index_ZjP4CjeZ_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./index-ZjP4CjeZ.js */ 575);
/* harmony import */ var _hardware_back_button_DcH0BbDp_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./hardware-back-button-DcH0BbDp.js */ 3819);
/* harmony import */ var _gesture_controller_BTEOs1at_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./gesture-controller-BTEOs1at.js */ 566);
/* harmony import */ var _keyboard_CUw4ekVy_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./keyboard-CUw4ekVy.js */ 2954);

/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */

















var Style;
(function (Style) {
  Style["Dark"] = "DARK";
  Style["Light"] = "LIGHT";
  Style["Default"] = "DEFAULT";
})(Style || (Style = {}));
const StatusBar = {
  getEngine() {
    const capacitor = (0,_capacitor_CFERIeaU_js__WEBPACK_IMPORTED_MODULE_6__.g)();
    if (capacitor === null || capacitor === void 0 ? void 0 : capacitor.isPluginAvailable('StatusBar')) {
      return capacitor.Plugins.StatusBar;
    }
    return undefined;
  },
  setStyle(options) {
    const engine = this.getEngine();
    if (!engine) {
      return;
    }
    engine.setStyle(options);
  },
  getStyle: function () {
    var _ref = (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const engine = this.getEngine();
      if (!engine) {
        return Style.Default;
      }
      const {
        style
      } = yield engine.getInfo();
      return style;
    });
    return function getStyle() {
      return _ref.apply(this, arguments);
    };
  }()
};

/**
 * Use y = mx + b to
 * figure out the backdrop value
 * at a particular x coordinate. This
 * is useful when the backdrop does
 * not begin to fade in until after
 * the 0 breakpoint.
 */
const getBackdropValueForSheet = (x, backdropBreakpoint) => {
  /**
   * We will use these points:
   * (backdropBreakpoint, 0)
   * (maxBreakpoint, 1)
   * We know that at the beginning breakpoint,
   * the backdrop will be hidden. We also
   * know that at the maxBreakpoint, the backdrop
   * must be fully visible. maxBreakpoint should
   * always be 1 even if the maximum value
   * of the breakpoints array is not 1 since
   * the animation runs from a progress of 0
   * to a progress of 1.
   * m = (y2 - y1) / (x2 - x1)
   *
   * This is simplified from:
   * m = (1 - 0) / (maxBreakpoint - backdropBreakpoint)
   *
   * If the backdropBreakpoint is 1, we return 0 as the
   * backdrop is completely hidden.
   *
   */
  if (backdropBreakpoint === 1) {
    return 0;
  }
  const slope = 1 / (1 - backdropBreakpoint);
  /**
   * From here, compute b which is
   * the backdrop opacity if the offset
   * is 0. If the backdrop does not
   * begin to fade in until after the
   * 0 breakpoint, this b value will be
   * negative. This is fine as we never pass
   * b directly into the animation keyframes.
   * b = y - mx
   * Use a known point: (backdropBreakpoint, 0)
   * This is simplified from:
   * b = 0 - (backdropBreakpoint * slope)
   */
  const b = -(backdropBreakpoint * slope);
  /**
   * Finally, we can now determine the
   * backdrop offset given an arbitrary
   * gesture offset.
   */
  return x * slope + b;
};
/**
 * The tablet/desktop card modal activates
 * when the window width is >= 768.
 * At that point, the presenting element
 * is not transformed, so we do not need to
 * adjust the status bar color.
 *
 */
const setCardStatusBarDark = () => {
  if (!_index_ZjP4CjeZ_js__WEBPACK_IMPORTED_MODULE_14__.w || _index_ZjP4CjeZ_js__WEBPACK_IMPORTED_MODULE_14__.w.innerWidth >= 768) {
    return;
  }
  StatusBar.setStyle({
    style: Style.Dark
  });
};
const setCardStatusBarDefault = (defaultStyle = Style.Default) => {
  if (!_index_ZjP4CjeZ_js__WEBPACK_IMPORTED_MODULE_14__.w || _index_ZjP4CjeZ_js__WEBPACK_IMPORTED_MODULE_14__.w.innerWidth >= 768) {
    return;
  }
  StatusBar.setStyle({
    style: defaultStyle
  });
};
const handleCanDismiss = /*#__PURE__*/function () {
  var _ref2 = (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (el, animation) {
    /**
     * If canDismiss is not a function
     * then we can return early. If canDismiss is `true`,
     * then canDismissBlocksGesture is `false` as canDismiss
     * will never interrupt the gesture. As a result,
     * this code block is never reached. If canDismiss is `false`,
     * then we never dismiss.
     */
    if (typeof el.canDismiss !== 'function') {
      return;
    }
    /**
     * Run the canDismiss callback.
     * If the function returns `true`,
     * then we can proceed with dismiss.
     */
    const shouldDismiss = yield el.canDismiss(undefined, _overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.G);
    if (!shouldDismiss) {
      return;
    }
    /**
     * If canDismiss resolved after the snap
     * back animation finished, we can
     * dismiss immediately.
     *
     * If canDismiss resolved before the snap
     * back animation finished, we need to
     * wait until the snap back animation is
     * done before dismissing.
     */
    if (animation.isRunning()) {
      animation.onFinish(() => {
        el.dismiss(undefined, 'handler');
      }, {
        oneTimeCallback: true
      });
    } else {
      el.dismiss(undefined, 'handler');
    }
  });
  return function handleCanDismiss(_x, _x2) {
    return _ref2.apply(this, arguments);
  };
}();
/**
 * This function lets us simulate a realistic spring-like animation
 * when swiping down on the modal.
 * There are two forces that we need to use to compute the spring physics:
 *
 * 1. Stiffness, k: This is a measure of resistance applied a spring.
 * 2. Dampening, c: This value has the effect of reducing or preventing oscillation.
 *
 * Using these two values, we can calculate the Spring Force and the Dampening Force
 * to compute the total force applied to a spring.
 *
 * Spring Force: This force pulls a spring back into its equilibrium position.
 * Hooke's Law tells us that that spring force (FS) = kX.
 * k is the stiffness of a spring, and X is the displacement of the spring from its
 * equilibrium position. In this case, it is the amount by which the free end
 * of a spring was displaced (stretched/pushed) from its "relaxed" position.
 *
 * Dampening Force: This force slows down motion. Without it, a spring would oscillate forever.
 * The dampening force, FD, can be found via this formula: FD = -cv
 * where c the dampening value and v is velocity.
 *
 * Therefore, the resulting force that is exerted on the block is:
 * F = FS + FD = -kX - cv
 *
 * Newton's 2nd Law tells us that F = ma:
 * ma = -kX - cv.
 *
 * For Ionic's purposes, we can assume that m = 1:
 * a = -kX - cv
 *
 * Imagine a block attached to the end of a spring. At equilibrium
 * the block is at position x = 1.
 * Pressing on the block moves it to position x = 0;
 * So, to calculate the displacement, we need to take the
 * current position and subtract the previous position from it.
 * X = x - x0 = 0 - 1 = -1.
 *
 * For Ionic's purposes, we are only pushing on the spring modal
 * so we have a max position of 1.
 * As a result, we can expand displacement to this formula:
 * X = x - 1
 *
 * a = -k(x - 1) - cv
 *
 * We can represent the motion of something as a function of time: f(t) = x.
 * The derivative of position gives us the velocity: f'(t)
 * The derivative of the velocity gives us the acceleration: f''(t)
 *
 * We can substitute the formula above with these values:
 *
 * f"(t) = -k * (f(t) - 1) - c * f'(t)
 *
 * This is called a differential equation.
 *
 * We know that at t = 0, we are at x = 0 because the modal does not move: f(0) = 0
 * This means our velocity is also zero: f'(0) = 0.
 *
 * We can cheat a bit and plug the formula into Wolfram Alpha.
 * However, we need to pick stiffness and dampening values:
 * k = 0.57
 * c = 15
 *
 * I picked these as they are fairly close to native iOS's spring effect
 * with the modal.
 *
 * What we plug in is this: f(0) = 0; f'(0) = 0; f''(t) = -0.57(f(t) - 1) - 15f'(t)
 *
 * The result is a formula that lets us calculate the acceleration
 * for a given time t.
 * Note: This is the approximate form of the solution. Wolfram Alpha will
 * give you a complex differential equation too.
 */
const calculateSpringStep = t => {
  return 0.00255275 * 2.71828 ** (-14.9619 * t) - 1.00255 * 2.71828 ** (-0.0380968 * t) + 1;
};

// Defaults for the card swipe animation
const SwipeToCloseDefaults = {
  MIN_PRESENTING_SCALE: 0.915
};
const createSwipeToCloseGesture = (el, animation, statusBarStyle, onDismiss) => {
  /**
   * The step value at which a card modal
   * is eligible for dismissing via gesture.
   */
  const DISMISS_THRESHOLD = 0.5;
  const height = el.offsetHeight;
  let isOpen = false;
  let canDismissBlocksGesture = false;
  let contentEl = null;
  let scrollEl = null;
  const canDismissMaxStep = 0.2;
  let initialScrollY = true;
  let lastStep = 0;
  const getScrollY = () => {
    if (contentEl && (0,_index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__.i)(contentEl)) {
      return contentEl.scrollY;
      /**
       * Custom scroll containers are intended to be
       * used with virtual scrolling, so we assume
       * there is scrolling in this case.
       */
    } else {
      return true;
    }
  };
  const canStart = detail => {
    const target = detail.event.target;
    if (target === null || !target.closest) {
      return true;
    }
    /**
     * If we are swiping on the content,
     * swiping should only be possible if
     * the content is scrolled all the way
     * to the top so that we do not interfere
     * with scrolling.
     *
     * We cannot assume that the `ion-content`
     * target will remain consistent between
     * swipes. For example, when using
     * ion-nav within a card modal it is
     * possible to swipe, push a view, and then
     * swipe again. The target content will not
     * be the same between swipes.
     */
    contentEl = (0,_index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__.f)(target);
    if (contentEl) {
      /**
       * The card should never swipe to close
       * on the content with a refresher.
       * Note: We cannot solve this by making the
       * swipeToClose gesture have a higher priority
       * than the refresher gesture as the iOS native
       * refresh gesture uses a scroll listener in
       * addition to a gesture.
       *
       * Note: Do not use getScrollElement here
       * because we need this to be a synchronous
       * operation, and getScrollElement is
       * asynchronous.
       */
      if ((0,_index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__.i)(contentEl)) {
        const root = (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.g)(contentEl);
        scrollEl = root.querySelector('.inner-scroll');
      } else {
        scrollEl = contentEl;
      }
      const hasRefresherInContent = !!contentEl.querySelector('ion-refresher');
      return !hasRefresherInContent && scrollEl.scrollTop === 0;
    }
    /**
     * Card should be swipeable on all
     * parts of the modal except for the footer.
     */
    const footer = target.closest('ion-footer');
    if (footer === null) {
      return true;
    }
    return false;
  };
  const onStart = detail => {
    const {
      deltaY
    } = detail;
    /**
     * Get the initial scrollY value so
     * that we can correctly reset the scrollY
     * prop when the gesture ends.
     */
    initialScrollY = getScrollY();
    /**
     * If canDismiss is anything other than `true`
     * then users should be able to swipe down
     * until a threshold is hit. At that point,
     * the card modal should not proceed any further.
     * TODO (FW-937)
     * Remove undefined check
     */
    canDismissBlocksGesture = el.canDismiss !== undefined && el.canDismiss !== true;
    /**
     * If we are pulling down, then
     * it is possible we are pulling on the
     * content. We do not want scrolling to
     * happen at the same time as the gesture.
     */
    if (deltaY > 0 && contentEl) {
      (0,_index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__.d)(contentEl);
    }
    animation.progressStart(true, isOpen ? 1 : 0);
  };
  const onMove = detail => {
    const {
      deltaY
    } = detail;
    /**
     * If we are pulling down, then
     * it is possible we are pulling on the
     * content. We do not want scrolling to
     * happen at the same time as the gesture.
     */
    if (deltaY > 0 && contentEl) {
      (0,_index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__.d)(contentEl);
    }
    /**
     * If we are swiping on the content
     * then the swipe gesture should only
     * happen if we are pulling down.
     *
     * However, if we pull up and
     * then down such that the scroll position
     * returns to 0, we should be able to swipe
     * the card.
     */
    const step = detail.deltaY / height;
    /**
     * Check if user is swiping down and
     * if we have a canDismiss value that
     * should block the gesture from
     * proceeding,
     */
    const isAttemptingDismissWithCanDismiss = step >= 0 && canDismissBlocksGesture;
    /**
     * If we are blocking the gesture from dismissing,
     * set the max step value so that the sheet cannot be
     * completely hidden.
     */
    const maxStep = isAttemptingDismissWithCanDismiss ? canDismissMaxStep : 0.9999;
    /**
     * If we are blocking the gesture from
     * dismissing, calculate the spring modifier value
     * this will be added to the starting breakpoint
     * value to give the gesture a spring-like feeling.
     * Note that the starting breakpoint is always 0,
     * so we omit adding 0 to the result.
     */
    const processedStep = isAttemptingDismissWithCanDismiss ? calculateSpringStep(step / maxStep) : step;
    const clampedStep = (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.e)(0.0001, processedStep, maxStep);
    animation.progressStep(clampedStep);
    /**
     * When swiping down half way, the status bar style
     * should be reset to its default value.
     *
     * We track lastStep so that we do not fire these
     * functions on every onMove, only when the user has
     * crossed a certain threshold.
     */
    if (clampedStep >= DISMISS_THRESHOLD && lastStep < DISMISS_THRESHOLD) {
      setCardStatusBarDefault(statusBarStyle);
      /**
       * However, if we swipe back up, then the
       * status bar style should be set to have light
       * text on a dark background.
       */
    } else if (clampedStep < DISMISS_THRESHOLD && lastStep >= DISMISS_THRESHOLD) {
      setCardStatusBarDark();
    }
    lastStep = clampedStep;
  };
  const onEnd = detail => {
    const velocity = detail.velocityY;
    const step = detail.deltaY / height;
    const isAttemptingDismissWithCanDismiss = step >= 0 && canDismissBlocksGesture;
    const maxStep = isAttemptingDismissWithCanDismiss ? canDismissMaxStep : 0.9999;
    const processedStep = isAttemptingDismissWithCanDismiss ? calculateSpringStep(step / maxStep) : step;
    const clampedStep = (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.e)(0.0001, processedStep, maxStep);
    const threshold = (detail.deltaY + velocity * 1000) / height;
    /**
     * If canDismiss blocks
     * the swipe gesture, then the
     * animation can never complete until
     * canDismiss is checked.
     */
    const shouldComplete = !isAttemptingDismissWithCanDismiss && threshold >= DISMISS_THRESHOLD;
    let newStepValue = shouldComplete ? -1e-3 : 0.001;
    if (!shouldComplete) {
      animation.easing('cubic-bezier(1, 0, 0.68, 0.28)');
      newStepValue += (0,_cubic_bezier_hHmYLOfE_js__WEBPACK_IMPORTED_MODULE_12__.g)([0, 0], [1, 0], [0.68, 0.28], [1, 1], clampedStep)[0];
    } else {
      animation.easing('cubic-bezier(0.32, 0.72, 0, 1)');
      newStepValue += (0,_cubic_bezier_hHmYLOfE_js__WEBPACK_IMPORTED_MODULE_12__.g)([0, 0], [0.32, 0.72], [0, 1], [1, 1], clampedStep)[0];
    }
    const duration = shouldComplete ? computeDuration(step * height, velocity) : computeDuration((1 - clampedStep) * height, velocity);
    isOpen = shouldComplete;
    gesture.enable(false);
    if (contentEl) {
      (0,_index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__.r)(contentEl, initialScrollY);
    }
    animation.onFinish(() => {
      if (!shouldComplete) {
        gesture.enable(true);
      }
    }).progressEnd(shouldComplete ? 1 : 0, newStepValue, duration);
    /**
     * If the canDismiss value blocked the gesture
     * from proceeding, then we should ignore whatever
     * shouldComplete is. Whether or not the modal
     * animation should complete is now determined by
     * canDismiss.
     *
     * If the user swiped >25% of the way
     * to the max step, then we should
     * check canDismiss. 25% was chosen
     * to avoid accidental swipes.
     */
    if (isAttemptingDismissWithCanDismiss && clampedStep > maxStep / 4) {
      handleCanDismiss(el, animation);
    } else if (shouldComplete) {
      onDismiss();
    }
  };
  const gesture = (0,_index_CfgBF1SE_js__WEBPACK_IMPORTED_MODULE_13__.createGesture)({
    el,
    gestureName: 'modalSwipeToClose',
    gesturePriority: _overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.O,
    direction: 'y',
    threshold: 10,
    canStart,
    onStart,
    onMove,
    onEnd
  });
  return gesture;
};
const computeDuration = (remaining, velocity) => {
  return (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.e)(400, remaining / Math.abs(velocity * 1.1), 500);
};
const createSheetEnterAnimation = opts => {
  const {
    currentBreakpoint,
    backdropBreakpoint,
    expandToScroll
  } = opts;
  /**
   * If the backdropBreakpoint is undefined, then the backdrop
   * should always fade in. If the backdropBreakpoint came before the
   * current breakpoint, then the backdrop should be fading in.
   */
  const shouldShowBackdrop = backdropBreakpoint === undefined || backdropBreakpoint < currentBreakpoint;
  const initialBackdrop = shouldShowBackdrop ? `calc(var(--backdrop-opacity) * ${currentBreakpoint})` : '0';
  const backdropAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)('backdropAnimation').fromTo('opacity', 0, initialBackdrop);
  if (shouldShowBackdrop) {
    backdropAnimation.beforeStyles({
      'pointer-events': 'none'
    }).afterClearStyles(['pointer-events']);
  }
  const wrapperAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)('wrapperAnimation').keyframes([{
    offset: 0,
    opacity: 1,
    transform: 'translateY(100%)'
  }, {
    offset: 1,
    opacity: 1,
    transform: `translateY(${100 - currentBreakpoint * 100}%)`
  }]);
  /**
   * This allows the content to be scrollable at any breakpoint.
   */
  const contentAnimation = !expandToScroll ? (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)('contentAnimation').keyframes([{
    offset: 0,
    opacity: 1,
    maxHeight: `${(1 - currentBreakpoint) * 100}%`
  }, {
    offset: 1,
    opacity: 1,
    maxHeight: `${currentBreakpoint * 100}%`
  }]) : undefined;
  return {
    wrapperAnimation,
    backdropAnimation,
    contentAnimation
  };
};
const createSheetLeaveAnimation = opts => {
  const {
    currentBreakpoint,
    backdropBreakpoint
  } = opts;
  /**
   * Backdrop does not always fade in from 0 to 1 if backdropBreakpoint
   * is defined, so we need to account for that offset by figuring out
   * what the current backdrop value should be.
   */
  const backdropValue = `calc(var(--backdrop-opacity) * ${getBackdropValueForSheet(currentBreakpoint, backdropBreakpoint)})`;
  const defaultBackdrop = [{
    offset: 0,
    opacity: backdropValue
  }, {
    offset: 1,
    opacity: 0
  }];
  const customBackdrop = [{
    offset: 0,
    opacity: backdropValue
  }, {
    offset: backdropBreakpoint,
    opacity: 0
  }, {
    offset: 1,
    opacity: 0
  }];
  const backdropAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)('backdropAnimation').keyframes(backdropBreakpoint !== 0 ? customBackdrop : defaultBackdrop);
  const wrapperAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)('wrapperAnimation').keyframes([{
    offset: 0,
    opacity: 1,
    transform: `translateY(${100 - currentBreakpoint * 100}%)`
  }, {
    offset: 1,
    opacity: 1,
    transform: `translateY(100%)`
  }]);
  return {
    wrapperAnimation,
    backdropAnimation
  };
};
const createEnterAnimation$1 = () => {
  const backdropAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().fromTo('opacity', 0.01, 'var(--backdrop-opacity)').beforeStyles({
    'pointer-events': 'none'
  }).afterClearStyles(['pointer-events']);
  const wrapperAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().fromTo('transform', 'translateY(100vh)', 'translateY(0vh)');
  return {
    backdropAnimation,
    wrapperAnimation,
    contentAnimation: undefined
  };
};
/**
 * iOS Modal Enter Animation for the Card presentation style
 */
const iosEnterAnimation = (baseEl, opts) => {
  const {
    presentingEl,
    currentBreakpoint,
    expandToScroll
  } = opts;
  const root = (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.g)(baseEl);
  const {
    wrapperAnimation,
    backdropAnimation,
    contentAnimation
  } = currentBreakpoint !== undefined ? createSheetEnterAnimation(opts) : createEnterAnimation$1();
  backdropAnimation.addElement(root.querySelector('ion-backdrop'));
  wrapperAnimation.addElement(root.querySelectorAll('.modal-wrapper, .modal-shadow')).beforeStyles({
    opacity: 1
  });
  // The content animation is only added if scrolling is enabled for
  // all the breakpoints.
  !expandToScroll && (contentAnimation === null || contentAnimation === void 0 ? void 0 : contentAnimation.addElement(baseEl.querySelector('.ion-page')));
  const baseAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)('entering-base').addElement(baseEl).easing('cubic-bezier(0.32,0.72,0,1)').duration(500).addAnimation([wrapperAnimation]);
  if (contentAnimation) {
    baseAnimation.addAnimation(contentAnimation);
  }
  if (presentingEl) {
    const isMobile = window.innerWidth < 768;
    const hasCardModal = presentingEl.tagName === 'ION-MODAL' && presentingEl.presentingElement !== undefined;
    const presentingElRoot = (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.g)(presentingEl);
    const presentingAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().beforeStyles({
      transform: 'translateY(0)',
      'transform-origin': 'top center',
      overflow: 'hidden'
    });
    const bodyEl = document.body;
    if (isMobile) {
      /**
       * Fallback for browsers that does not support `max()` (ex: Firefox)
       * No need to worry about statusbar padding since engines like Gecko
       * are not used as the engine for standalone Cordova/Capacitor apps
       */
      const transformOffset = !CSS.supports('width', 'max(0px, 1px)') ? '30px' : 'max(30px, var(--ion-safe-area-top))';
      const modalTransform = hasCardModal ? '-10px' : transformOffset;
      const toPresentingScale = SwipeToCloseDefaults.MIN_PRESENTING_SCALE;
      const finalTransform = `translateY(${modalTransform}) scale(${toPresentingScale})`;
      presentingAnimation.afterStyles({
        transform: finalTransform
      }).beforeAddWrite(() => bodyEl.style.setProperty('background-color', 'black')).addElement(presentingEl).keyframes([{
        offset: 0,
        filter: 'contrast(1)',
        transform: 'translateY(0px) scale(1)',
        borderRadius: '0px'
      }, {
        offset: 1,
        filter: 'contrast(0.85)',
        transform: finalTransform,
        borderRadius: '10px 10px 0 0'
      }]);
      baseAnimation.addAnimation(presentingAnimation);
    } else {
      baseAnimation.addAnimation(backdropAnimation);
      if (!hasCardModal) {
        wrapperAnimation.fromTo('opacity', '0', '1');
      } else {
        const toPresentingScale = hasCardModal ? SwipeToCloseDefaults.MIN_PRESENTING_SCALE : 1;
        const finalTransform = `translateY(-10px) scale(${toPresentingScale})`;
        presentingAnimation.afterStyles({
          transform: finalTransform
        }).addElement(presentingElRoot.querySelector('.modal-wrapper')).keyframes([{
          offset: 0,
          filter: 'contrast(1)',
          transform: 'translateY(0) scale(1)'
        }, {
          offset: 1,
          filter: 'contrast(0.85)',
          transform: finalTransform
        }]);
        const shadowAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().afterStyles({
          transform: finalTransform
        }).addElement(presentingElRoot.querySelector('.modal-shadow')).keyframes([{
          offset: 0,
          opacity: '1',
          transform: 'translateY(0) scale(1)'
        }, {
          offset: 1,
          opacity: '0',
          transform: finalTransform
        }]);
        baseAnimation.addAnimation([presentingAnimation, shadowAnimation]);
      }
    }
  } else {
    baseAnimation.addAnimation(backdropAnimation);
  }
  return baseAnimation;
};
const createLeaveAnimation$1 = () => {
  const backdropAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().fromTo('opacity', 'var(--backdrop-opacity)', 0);
  const wrapperAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().fromTo('transform', 'translateY(0vh)', 'translateY(100vh)');
  return {
    backdropAnimation,
    wrapperAnimation
  };
};
/**
 * iOS Modal Leave Animation
 */
const iosLeaveAnimation = (baseEl, opts, duration = 500) => {
  const {
    presentingEl,
    currentBreakpoint
  } = opts;
  const root = (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.g)(baseEl);
  const {
    wrapperAnimation,
    backdropAnimation
  } = currentBreakpoint !== undefined ? createSheetLeaveAnimation(opts) : createLeaveAnimation$1();
  backdropAnimation.addElement(root.querySelector('ion-backdrop'));
  wrapperAnimation.addElement(root.querySelectorAll('.modal-wrapper, .modal-shadow')).beforeStyles({
    opacity: 1
  });
  const baseAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)('leaving-base').addElement(baseEl).easing('cubic-bezier(0.32,0.72,0,1)').duration(duration).addAnimation(wrapperAnimation);
  if (presentingEl) {
    const isMobile = window.innerWidth < 768;
    const hasCardModal = presentingEl.tagName === 'ION-MODAL' && presentingEl.presentingElement !== undefined;
    const presentingElRoot = (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.g)(presentingEl);
    const presentingAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().beforeClearStyles(['transform']).afterClearStyles(['transform']).onFinish(currentStep => {
      // only reset background color if this is the last card-style modal
      if (currentStep !== 1) {
        return;
      }
      presentingEl.style.setProperty('overflow', '');
      const numModals = Array.from(bodyEl.querySelectorAll('ion-modal:not(.overlay-hidden)')).filter(m => m.presentingElement !== undefined).length;
      if (numModals <= 1) {
        bodyEl.style.setProperty('background-color', '');
      }
    });
    const bodyEl = document.body;
    if (isMobile) {
      const transformOffset = !CSS.supports('width', 'max(0px, 1px)') ? '30px' : 'max(30px, var(--ion-safe-area-top))';
      const modalTransform = hasCardModal ? '-10px' : transformOffset;
      const toPresentingScale = SwipeToCloseDefaults.MIN_PRESENTING_SCALE;
      const finalTransform = `translateY(${modalTransform}) scale(${toPresentingScale})`;
      presentingAnimation.addElement(presentingEl).keyframes([{
        offset: 0,
        filter: 'contrast(0.85)',
        transform: finalTransform,
        borderRadius: '10px 10px 0 0'
      }, {
        offset: 1,
        filter: 'contrast(1)',
        transform: 'translateY(0px) scale(1)',
        borderRadius: '0px'
      }]);
      baseAnimation.addAnimation(presentingAnimation);
    } else {
      baseAnimation.addAnimation(backdropAnimation);
      if (!hasCardModal) {
        wrapperAnimation.fromTo('opacity', '1', '0');
      } else {
        const toPresentingScale = hasCardModal ? SwipeToCloseDefaults.MIN_PRESENTING_SCALE : 1;
        const finalTransform = `translateY(-10px) scale(${toPresentingScale})`;
        presentingAnimation.addElement(presentingElRoot.querySelector('.modal-wrapper')).afterStyles({
          transform: 'translate3d(0, 0, 0)'
        }).keyframes([{
          offset: 0,
          filter: 'contrast(0.85)',
          transform: finalTransform
        }, {
          offset: 1,
          filter: 'contrast(1)',
          transform: 'translateY(0) scale(1)'
        }]);
        const shadowAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().addElement(presentingElRoot.querySelector('.modal-shadow')).afterStyles({
          transform: 'translateY(0) scale(1)'
        }).keyframes([{
          offset: 0,
          opacity: '0',
          transform: finalTransform
        }, {
          offset: 1,
          opacity: '1',
          transform: 'translateY(0) scale(1)'
        }]);
        baseAnimation.addAnimation([presentingAnimation, shadowAnimation]);
      }
    }
  } else {
    baseAnimation.addAnimation(backdropAnimation);
  }
  return baseAnimation;
};
const createEnterAnimation = () => {
  const backdropAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().fromTo('opacity', 0.01, 'var(--backdrop-opacity)').beforeStyles({
    'pointer-events': 'none'
  }).afterClearStyles(['pointer-events']);
  const wrapperAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().keyframes([{
    offset: 0,
    opacity: 0.01,
    transform: 'translateY(40px)'
  }, {
    offset: 1,
    opacity: 1,
    transform: `translateY(0px)`
  }]);
  return {
    backdropAnimation,
    wrapperAnimation,
    contentAnimation: undefined
  };
};
/**
 * Md Modal Enter Animation
 */
const mdEnterAnimation = (baseEl, opts) => {
  const {
    currentBreakpoint,
    expandToScroll
  } = opts;
  const root = (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.g)(baseEl);
  const {
    wrapperAnimation,
    backdropAnimation,
    contentAnimation
  } = currentBreakpoint !== undefined ? createSheetEnterAnimation(opts) : createEnterAnimation();
  backdropAnimation.addElement(root.querySelector('ion-backdrop'));
  wrapperAnimation.addElement(root.querySelector('.modal-wrapper'));
  // The content animation is only added if scrolling is enabled for
  // all the breakpoints.
  !expandToScroll && (contentAnimation === null || contentAnimation === void 0 ? void 0 : contentAnimation.addElement(baseEl.querySelector('.ion-page')));
  const baseAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().addElement(baseEl).easing('cubic-bezier(0.36,0.66,0.04,1)').duration(280).addAnimation([backdropAnimation, wrapperAnimation]);
  if (contentAnimation) {
    baseAnimation.addAnimation(contentAnimation);
  }
  return baseAnimation;
};
const createLeaveAnimation = () => {
  const backdropAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().fromTo('opacity', 'var(--backdrop-opacity)', 0);
  const wrapperAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().keyframes([{
    offset: 0,
    opacity: 0.99,
    transform: `translateY(0px)`
  }, {
    offset: 1,
    opacity: 0,
    transform: 'translateY(40px)'
  }]);
  return {
    backdropAnimation,
    wrapperAnimation
  };
};
/**
 * Md Modal Leave Animation
 */
const mdLeaveAnimation = (baseEl, opts) => {
  const {
    currentBreakpoint
  } = opts;
  const root = (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.g)(baseEl);
  const {
    wrapperAnimation,
    backdropAnimation
  } = currentBreakpoint !== undefined ? createSheetLeaveAnimation(opts) : createLeaveAnimation();
  backdropAnimation.addElement(root.querySelector('ion-backdrop'));
  wrapperAnimation.addElement(root.querySelector('.modal-wrapper'));
  const baseAnimation = (0,_animation_BWcUKtbn_js__WEBPACK_IMPORTED_MODULE_11__.c)().easing('cubic-bezier(0.47,0,0.745,0.715)').duration(200).addAnimation([backdropAnimation, wrapperAnimation]);
  return baseAnimation;
};
const createSheetGesture = (baseEl, backdropEl, wrapperEl, initialBreakpoint, backdropBreakpoint, animation, breakpoints = [], expandToScroll, getCurrentBreakpoint, onDismiss, onBreakpointChange) => {
  // Defaults for the sheet swipe animation
  const defaultBackdrop = [{
    offset: 0,
    opacity: 'var(--backdrop-opacity)'
  }, {
    offset: 1,
    opacity: 0.01
  }];
  const customBackdrop = [{
    offset: 0,
    opacity: 'var(--backdrop-opacity)'
  }, {
    offset: 1 - backdropBreakpoint,
    opacity: 0
  }, {
    offset: 1,
    opacity: 0
  }];
  const SheetDefaults = {
    WRAPPER_KEYFRAMES: [{
      offset: 0,
      transform: 'translateY(0%)'
    }, {
      offset: 1,
      transform: 'translateY(100%)'
    }],
    BACKDROP_KEYFRAMES: backdropBreakpoint !== 0 ? customBackdrop : defaultBackdrop,
    CONTENT_KEYFRAMES: [{
      offset: 0,
      maxHeight: '100%'
    }, {
      offset: 1,
      maxHeight: '0%'
    }]
  };
  const contentEl = baseEl.querySelector('ion-content');
  const height = wrapperEl.clientHeight;
  let currentBreakpoint = initialBreakpoint;
  let offset = 0;
  let canDismissBlocksGesture = false;
  let cachedScrollEl = null;
  let cachedFooterEls = null;
  let cachedFooterYPosition = null;
  let currentFooterState = null;
  const canDismissMaxStep = 0.95;
  const maxBreakpoint = breakpoints[breakpoints.length - 1];
  const minBreakpoint = breakpoints[0];
  const wrapperAnimation = animation.childAnimations.find(ani => ani.id === 'wrapperAnimation');
  const backdropAnimation = animation.childAnimations.find(ani => ani.id === 'backdropAnimation');
  const contentAnimation = animation.childAnimations.find(ani => ani.id === 'contentAnimation');
  const enableBackdrop = () => {
    baseEl.style.setProperty('pointer-events', 'auto');
    backdropEl.style.setProperty('pointer-events', 'auto');
    /**
     * When the backdrop is enabled, elements such
     * as inputs should not be focusable outside
     * the sheet.
     */
    baseEl.classList.remove(_overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.F);
  };
  const disableBackdrop = () => {
    baseEl.style.setProperty('pointer-events', 'none');
    backdropEl.style.setProperty('pointer-events', 'none');
    /**
     * When the backdrop is enabled, elements such
     * as inputs should not be focusable outside
     * the sheet.
     * Adding this class disables focus trapping
     * for the sheet temporarily.
     */
    baseEl.classList.add(_overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.F);
  };
  /**
   * Toggles the footer to an absolute position while moving to prevent
   * it from shaking while the sheet is being dragged.
   * @param newPosition Whether the footer is in a moving or stationary position.
   */
  const swapFooterPosition = newPosition => {
    if (!cachedFooterEls) {
      cachedFooterEls = Array.from(baseEl.querySelectorAll('ion-footer'));
      if (!cachedFooterEls.length) {
        return;
      }
    }
    const page = baseEl.querySelector('.ion-page');
    currentFooterState = newPosition;
    if (newPosition === 'stationary') {
      cachedFooterEls.forEach(cachedFooterEl => {
        // Reset positioning styles to allow normal document flow
        cachedFooterEl.classList.remove('modal-footer-moving');
        cachedFooterEl.style.removeProperty('position');
        cachedFooterEl.style.removeProperty('width');
        cachedFooterEl.style.removeProperty('height');
        cachedFooterEl.style.removeProperty('top');
        cachedFooterEl.style.removeProperty('left');
        page === null || page === void 0 ? void 0 : page.style.removeProperty('padding-bottom');
        // Move to page
        page === null || page === void 0 ? void 0 : page.appendChild(cachedFooterEl);
      });
    } else {
      let footerHeights = 0;
      cachedFooterEls.forEach((cachedFooterEl, index) => {
        // Get both the footer and document body positions
        const cachedFooterElRect = cachedFooterEl.getBoundingClientRect();
        const bodyRect = document.body.getBoundingClientRect();
        // Calculate the total height of all footers
        // so we can add padding to the page element
        footerHeights += cachedFooterEl.clientHeight;
        // Calculate absolute position relative to body
        // We need to subtract the body's offsetTop to get true position within document.body
        const absoluteTop = cachedFooterElRect.top - bodyRect.top;
        const absoluteLeft = cachedFooterElRect.left - bodyRect.left;
        // Capture the footer's current dimensions and store them in CSS variables for
        // later use when applying absolute positioning.
        cachedFooterEl.style.setProperty('--pinned-width', `${cachedFooterEl.clientWidth}px`);
        cachedFooterEl.style.setProperty('--pinned-height', `${cachedFooterEl.clientHeight}px`);
        cachedFooterEl.style.setProperty('--pinned-top', `${absoluteTop}px`);
        cachedFooterEl.style.setProperty('--pinned-left', `${absoluteLeft}px`);
        // Only cache the first footer's Y position
        // This is used to determine if the sheet has been moved below the footer
        // and needs to be swapped back to stationary so it collapses correctly.
        if (index === 0) {
          cachedFooterYPosition = absoluteTop;
          // If there's a header, we need to combine the header height with the footer position
          // because the header moves with the drag handle, so when it starts overlapping the footer,
          // we need to account for that.
          const header = baseEl.querySelector('ion-header');
          if (header) {
            cachedFooterYPosition -= header.clientHeight;
          }
        }
      });
      // Apply the pinning of styles after we've calculated everything
      // so that we don't cause layouts to shift while calculating the footer positions.
      // Otherwise, with multiple footers we'll end up capturing the wrong positions.
      cachedFooterEls.forEach(cachedFooterEl => {
        // Add padding to the parent element to prevent content from being hidden
        // when the footer is positioned absolutely. This has to be done before we
        // make the footer absolutely positioned or we may accidentally cause the
        // sheet to scroll.
        page === null || page === void 0 ? void 0 : page.style.setProperty('padding-bottom', `${footerHeights}px`);
        // Apply positioning styles to keep footer at bottom
        cachedFooterEl.classList.add('modal-footer-moving');
        // Apply our preserved styles to pin the footer
        cachedFooterEl.style.setProperty('position', 'absolute');
        cachedFooterEl.style.setProperty('width', 'var(--pinned-width)');
        cachedFooterEl.style.setProperty('height', 'var(--pinned-height)');
        cachedFooterEl.style.setProperty('top', 'var(--pinned-top)');
        cachedFooterEl.style.setProperty('left', 'var(--pinned-left)');
        // Move the element to the body when everything else is done
        document.body.appendChild(cachedFooterEl);
      });
    }
  };
  /**
   * After the entering animation completes,
   * we need to set the animation to go from
   * offset 0 to offset 1 so that users can
   * swipe in any direction. We then set the
   * animation offset to the current breakpoint
   * so there is no flickering.
   */
  if (wrapperAnimation && backdropAnimation) {
    wrapperAnimation.keyframes([...SheetDefaults.WRAPPER_KEYFRAMES]);
    backdropAnimation.keyframes([...SheetDefaults.BACKDROP_KEYFRAMES]);
    contentAnimation === null || contentAnimation === void 0 ? void 0 : contentAnimation.keyframes([...SheetDefaults.CONTENT_KEYFRAMES]);
    animation.progressStart(true, 1 - currentBreakpoint);
    /**
     * If backdrop is not enabled, then content
     * behind modal should be clickable. To do this, we need
     * to remove pointer-events from ion-modal as a whole.
     * ion-backdrop and .modal-wrapper always have pointer-events: auto
     * applied, so the modal content can still be interacted with.
     */
    const shouldEnableBackdrop = currentBreakpoint > backdropBreakpoint;
    if (shouldEnableBackdrop) {
      enableBackdrop();
    } else {
      disableBackdrop();
    }
  }
  if (contentEl && currentBreakpoint !== maxBreakpoint && expandToScroll) {
    contentEl.scrollY = false;
  }
  const canStart = detail => {
    /**
     * If we are swiping on the content, swiping should only be possible if the content
     * is scrolled all the way to the top so that we do not interfere with scrolling.
     *
     * We cannot assume that the `ion-content` target will remain consistent between swipes.
     * For example, when using ion-nav within a modal it is possible to swipe, push a view,
     * and then swipe again. The target content will not be the same between swipes.
     */
    const contentEl = (0,_index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__.f)(detail.event.target);
    currentBreakpoint = getCurrentBreakpoint();
    /**
     * If `expandToScroll` is disabled, we should not allow the swipe gesture
     * to start if the content is not scrolled to the top.
     */
    if (!expandToScroll && contentEl) {
      const scrollEl = (0,_index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__.i)(contentEl) ? (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.g)(contentEl).querySelector('.inner-scroll') : contentEl;
      return scrollEl.scrollTop === 0;
    }
    if (currentBreakpoint === 1 && contentEl) {
      /**
       * The modal should never swipe to close on the content with a refresher.
       * Note 1: We cannot solve this by making this gesture have a higher priority than
       * the refresher gesture as the iOS native refresh gesture uses a scroll listener in
       * addition to a gesture.
       *
       * Note 2: Do not use getScrollElement here because we need this to be a synchronous
       * operation, and getScrollElement is asynchronous.
       */
      const scrollEl = (0,_index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__.i)(contentEl) ? (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.g)(contentEl).querySelector('.inner-scroll') : contentEl;
      const hasRefresherInContent = !!contentEl.querySelector('ion-refresher');
      return !hasRefresherInContent && scrollEl.scrollTop === 0;
    }
    return true;
  };
  const onStart = detail => {
    /**
     * If canDismiss is anything other than `true`
     * then users should be able to swipe down
     * until a threshold is hit. At that point,
     * the card modal should not proceed any further.
     *
     * canDismiss is never fired via gesture if there is
     * no 0 breakpoint. However, it can be fired if the user
     * presses Esc or the hardware back button.
     * TODO (FW-937)
     * Remove undefined check
     */
    canDismissBlocksGesture = baseEl.canDismiss !== undefined && baseEl.canDismiss !== true && minBreakpoint === 0;
    /**
     * Cache the scroll element reference when the gesture starts,
     * this allows us to avoid querying the DOM for the target in onMove,
     * which would impact performance significantly.
     */
    if (!expandToScroll) {
      const targetEl = (0,_index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__.f)(detail.event.target);
      cachedScrollEl = targetEl && (0,_index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__.i)(targetEl) ? (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.g)(targetEl).querySelector('.inner-scroll') : targetEl;
    }
    /**
     * If expandToScroll is disabled, we need to swap
     * the footer position to moving so that it doesn't shake
     * while the sheet is being dragged.
     */
    if (!expandToScroll) {
      swapFooterPosition('moving');
    }
    /**
     * If we are pulling down, then it is possible we are pulling on the content.
     * We do not want scrolling to happen at the same time as the gesture.
     */
    if (detail.deltaY > 0 && contentEl) {
      contentEl.scrollY = false;
    }
    (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.r)(() => {
      /**
       * Dismisses the open keyboard when the sheet drag gesture is started.
       * Sets the focus onto the modal element.
       */
      baseEl.focus();
    });
    animation.progressStart(true, 1 - currentBreakpoint);
  };
  const onMove = detail => {
    /**
     * If `expandToScroll` is disabled, we need to see if we're currently below
     * the footer element and the footer is in a stationary position. If so,
     * we need to make the stationary the original position so that the footer
     * collapses with the sheet.
     */
    if (!expandToScroll && cachedFooterYPosition !== null && currentFooterState !== null) {
      // Check if we need to swap the footer position
      if (detail.currentY >= cachedFooterYPosition && currentFooterState === 'moving') {
        swapFooterPosition('stationary');
      } else if (detail.currentY < cachedFooterYPosition && currentFooterState === 'stationary') {
        swapFooterPosition('moving');
      }
    }
    /**
     * If `expandToScroll` is disabled, and an upwards swipe gesture is done within
     * the scrollable content, we should not allow the swipe gesture to continue.
     */
    if (!expandToScroll && detail.deltaY <= 0 && cachedScrollEl) {
      return;
    }
    /**
     * If we are pulling down, then it is possible we are pulling on the content.
     * We do not want scrolling to happen at the same time as the gesture.
     * This accounts for when the user scrolls down, scrolls all the way up, and then
     * pulls down again such that the modal should start to move.
     */
    if (detail.deltaY > 0 && contentEl) {
      contentEl.scrollY = false;
    }
    /**
     * Given the change in gesture position on the Y axis,
     * compute where the offset of the animation should be
     * relative to where the user dragged.
     */
    const initialStep = 1 - currentBreakpoint;
    const secondToLastBreakpoint = breakpoints.length > 1 ? 1 - breakpoints[1] : undefined;
    const step = initialStep + detail.deltaY / height;
    const isAttemptingDismissWithCanDismiss = secondToLastBreakpoint !== undefined && step >= secondToLastBreakpoint && canDismissBlocksGesture;
    /**
     * If we are blocking the gesture from dismissing,
     * set the max step value so that the sheet cannot be
     * completely hidden.
     */
    const maxStep = isAttemptingDismissWithCanDismiss ? canDismissMaxStep : 0.9999;
    /**
     * If we are blocking the gesture from
     * dismissing, calculate the spring modifier value
     * this will be added to the starting breakpoint
     * value to give the gesture a spring-like feeling.
     * Note that when isAttemptingDismissWithCanDismiss is true,
     * the modifier is always added to the breakpoint that
     * appears right after the 0 breakpoint.
     *
     * Note that this modifier is essentially the progression
     * between secondToLastBreakpoint and maxStep which is
     * why we subtract secondToLastBreakpoint. This lets us get
     * the result as a value from 0 to 1.
     */
    const processedStep = isAttemptingDismissWithCanDismiss && secondToLastBreakpoint !== undefined ? secondToLastBreakpoint + calculateSpringStep((step - secondToLastBreakpoint) / (maxStep - secondToLastBreakpoint)) : step;
    offset = (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.e)(0.0001, processedStep, maxStep);
    animation.progressStep(offset);
  };
  const onEnd = detail => {
    /**
     * If expandToScroll is disabled, we should not allow the moveSheetToBreakpoint
     * function to be called if the user is trying to swipe content upwards and the content
     * is not scrolled to the top.
     */
    if (!expandToScroll && detail.deltaY <= 0 && cachedScrollEl && cachedScrollEl.scrollTop > 0) {
      /**
       * If expand to scroll is disabled, we need to make sure we swap the footer position
       * back to stationary so that it will collapse correctly if the modal is dismissed without
       * dragging (e.g. through a dismiss button).
       * This can cause issues if the user has a modal with content that can be dragged, as we'll
       * swap to moving on drag and if we don't swap back here then the footer will get stuck.
       */
      swapFooterPosition('stationary');
      return;
    }
    /**
     * When the gesture releases, we need to determine
     * the closest breakpoint to snap to.
     */
    const velocity = detail.velocityY;
    const threshold = (detail.deltaY + velocity * 350) / height;
    const diff = currentBreakpoint - threshold;
    const closest = breakpoints.reduce((a, b) => {
      return Math.abs(b - diff) < Math.abs(a - diff) ? b : a;
    });
    moveSheetToBreakpoint({
      breakpoint: closest,
      breakpointOffset: offset,
      canDismiss: canDismissBlocksGesture,
      /**
       * The swipe is user-driven, so we should
       * always animate when the gesture ends.
       */
      animated: true
    });
  };
  const moveSheetToBreakpoint = options => {
    const {
      breakpoint,
      canDismiss,
      breakpointOffset,
      animated
    } = options;
    /**
     * canDismiss should only prevent snapping
     * when users are trying to dismiss. If canDismiss
     * is present but the user is trying to swipe upwards,
     * we should allow that to happen,
     */
    const shouldPreventDismiss = canDismiss && breakpoint === 0;
    const snapToBreakpoint = shouldPreventDismiss ? currentBreakpoint : breakpoint;
    const shouldRemainOpen = snapToBreakpoint !== 0;
    currentBreakpoint = 0;
    /**
     * Update the animation so that it plays from
     * the last offset to the closest snap point.
     */
    if (wrapperAnimation && backdropAnimation) {
      wrapperAnimation.keyframes([{
        offset: 0,
        transform: `translateY(${breakpointOffset * 100}%)`
      }, {
        offset: 1,
        transform: `translateY(${(1 - snapToBreakpoint) * 100}%)`
      }]);
      backdropAnimation.keyframes([{
        offset: 0,
        opacity: `calc(var(--backdrop-opacity) * ${getBackdropValueForSheet(1 - breakpointOffset, backdropBreakpoint)})`
      }, {
        offset: 1,
        opacity: `calc(var(--backdrop-opacity) * ${getBackdropValueForSheet(snapToBreakpoint, backdropBreakpoint)})`
      }]);
      if (contentAnimation) {
        /**
         * The modal content should scroll at any breakpoint when expandToScroll
         * is disabled. In order to do this, the content needs to be completely
         * viewable so scrolling can access everything. Otherwise, the default
         * behavior would show the content off the screen and only allow
         * scrolling when the sheet is fully expanded.
         */
        contentAnimation.keyframes([{
          offset: 0,
          maxHeight: `${(1 - breakpointOffset) * 100}%`
        }, {
          offset: 1,
          maxHeight: `${snapToBreakpoint * 100}%`
        }]);
      }
      animation.progressStep(0);
    }
    /**
     * Gesture should remain disabled until the
     * snapping animation completes.
     */
    gesture.enable(false);
    if (shouldPreventDismiss) {
      handleCanDismiss(baseEl, animation);
    } else if (!shouldRemainOpen) {
      onDismiss();
    }
    /**
     * Enables scrolling immediately if the sheet is about to fully expand
     * or if it allows scrolling at any breakpoint. Without this, there would
     * be a ~500ms delay while the modal animation completes, causing a
     * noticeable lag. Native iOS allows scrolling as soon as the gesture is
     * released, so we align with that behavior.
     */
    if (contentEl && (snapToBreakpoint === breakpoints[breakpoints.length - 1] || !expandToScroll)) {
      contentEl.scrollY = true;
    }
    /**
     * If expandToScroll is disabled and we're animating
     * to close the sheet, we need to swap
     * the footer position to stationary so that it
     * will collapse correctly. We cannot just always swap
     * here or it'll be jittery while animating movement.
     */
    if (!expandToScroll && snapToBreakpoint === 0) {
      swapFooterPosition('stationary');
    }
    return new Promise(resolve => {
      animation.onFinish(() => {
        if (shouldRemainOpen) {
          /**
           * If expandToScroll is disabled, we need to swap
           * the footer position to stationary so that it
           * will act as it would by default.
           */
          if (!expandToScroll) {
            swapFooterPosition('stationary');
          }
          /**
           * Once the snapping animation completes,
           * we need to reset the animation to go
           * from 0 to 1 so users can swipe in any direction.
           * We then set the animation offset to the current
           * breakpoint so that it starts at the snapped position.
           */
          if (wrapperAnimation && backdropAnimation) {
            (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.r)(() => {
              wrapperAnimation.keyframes([...SheetDefaults.WRAPPER_KEYFRAMES]);
              backdropAnimation.keyframes([...SheetDefaults.BACKDROP_KEYFRAMES]);
              contentAnimation === null || contentAnimation === void 0 ? void 0 : contentAnimation.keyframes([...SheetDefaults.CONTENT_KEYFRAMES]);
              animation.progressStart(true, 1 - snapToBreakpoint);
              currentBreakpoint = snapToBreakpoint;
              onBreakpointChange(currentBreakpoint);
              /**
               * Backdrop should become enabled
               * after the backdropBreakpoint value
               */
              const shouldEnableBackdrop = currentBreakpoint > backdropBreakpoint;
              if (shouldEnableBackdrop) {
                enableBackdrop();
              } else {
                disableBackdrop();
              }
              gesture.enable(true);
              resolve();
            });
          } else {
            gesture.enable(true);
            resolve();
          }
        } else {
          resolve();
        }
        /**
         * This must be a one time callback
         * otherwise a new callback will
         * be added every time onEnd runs.
         */
      }, {
        oneTimeCallback: true
      }).progressEnd(1, 0, animated ? 500 : 0);
    });
  };
  const gesture = (0,_index_CfgBF1SE_js__WEBPACK_IMPORTED_MODULE_13__.createGesture)({
    el: wrapperEl,
    gestureName: 'modalSheet',
    gesturePriority: 40,
    direction: 'y',
    threshold: 10,
    canStart,
    onStart,
    onMove,
    onEnd
  });
  return {
    gesture,
    moveSheetToBreakpoint
  };
};
const modalIosCss = ":host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, var(--ion-background-color-step-350, #c0c0be));cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:\"\"}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host(.modal-sheet.modal-no-expand-scroll) ion-footer{position:absolute;bottom:0;width:var(--width)}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.4)}:host(.modal-card),:host(.modal-sheet){--border-radius:10px}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:10px}}.modal-wrapper{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0)}@media screen and (max-width: 767px){@supports (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}@supports not (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - 40px)}}:host(.modal-card) .modal-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0;border-end-start-radius:0}:host(.modal-card){--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}:host(.modal-card) .modal-shadow{display:none}:host(.modal-card) ion-backdrop{pointer-events:none}}@media screen and (min-width: 768px){:host(.modal-card){--width:calc(100% - 120px);--height:calc(100% - (120px + var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));--max-width:720px;--max-height:1000px;--backdrop-opacity:0;--box-shadow:0px 0px 30px 10px rgba(0, 0, 0, 0.1);-webkit-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out}:host(.modal-card) .modal-wrapper{-webkit-box-shadow:none;box-shadow:none}:host(.modal-card) .modal-shadow{-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}}:host(.modal-sheet) .modal-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0;border-end-start-radius:0}";
const modalMdCss = ":host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, var(--ion-background-color-step-350, #c0c0be));cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:\"\"}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host(.modal-sheet.modal-no-expand-scroll) ion-footer{position:absolute;bottom:0;width:var(--width)}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:2px;--box-shadow:0 28px 48px rgba(0, 0, 0, 0.4)}}.modal-wrapper{-webkit-transform:translate3d(0,  40px,  0);transform:translate3d(0,  40px,  0);opacity:0.01}";
const Modal = class {
  constructor(hostRef) {
    (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.didPresent = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "ionModalDidPresent", 7);
    this.willPresent = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "ionModalWillPresent", 7);
    this.willDismiss = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "ionModalWillDismiss", 7);
    this.didDismiss = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "ionModalDidDismiss", 7);
    this.ionBreakpointDidChange = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "ionBreakpointDidChange", 7);
    this.didPresentShorthand = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "didPresent", 7);
    this.willPresentShorthand = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "willPresent", 7);
    this.willDismissShorthand = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "willDismiss", 7);
    this.didDismissShorthand = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "didDismiss", 7);
    this.ionMount = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "ionMount", 7);
    this.lockController = (0,_lock_controller_B_hirT0v_js__WEBPACK_IMPORTED_MODULE_5__.c)();
    this.triggerController = (0,_overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.e)();
    this.coreDelegate = (0,_framework_delegate_DxcnWic_js__WEBPACK_IMPORTED_MODULE_3__.C)();
    this.isSheetModal = false;
    this.inheritedAttributes = {};
    this.inline = false;
    // Whether or not modal is being dismissed via gesture
    this.gestureAnimationDismissing = false;
    this.presented = false;
    /** @internal */
    this.hasController = false;
    /**
     * If `true`, the keyboard will be automatically dismissed when the overlay is presented.
     */
    this.keyboardClose = true;
    /**
     * Controls whether scrolling or dragging within the sheet modal expands
     * it to a larger breakpoint. This only takes effect when `breakpoints`
     * and `initialBreakpoint` are set.
     *
     * If `true`, scrolling or dragging anywhere in the modal will first expand
     * it to the next breakpoint. Once fully expanded, scrolling will affect the
     * content.
     * If `false`, scrolling will always affect the content. The modal will
     * only expand when dragging the header or handle. The modal will close when
     * dragging the header or handle. It can also be closed when dragging the
     * content, but only if the content is scrolled to the top.
     */
    this.expandToScroll = true;
    /**
     * A decimal value between 0 and 1 that indicates the
     * point after which the backdrop will begin to fade in
     * when using a sheet modal. Prior to this point, the
     * backdrop will be hidden and the content underneath
     * the sheet can be interacted with. This value is exclusive
     * meaning the backdrop will become active after the value
     * specified.
     */
    this.backdropBreakpoint = 0;
    /**
     * The interaction behavior for the sheet modal when the handle is pressed.
     *
     * Defaults to `"none"`, which  means the modal will not change size or position when the handle is pressed.
     * Set to `"cycle"` to let the modal cycle between available breakpoints when pressed.
     *
     * Handle behavior is unavailable when the `handle` property is set to `false` or
     * when the `breakpoints` property is not set (using a fullscreen or card modal).
     */
    this.handleBehavior = 'none';
    /**
     * If `true`, the modal will be dismissed when the backdrop is clicked.
     */
    this.backdropDismiss = true;
    /**
     * If `true`, a backdrop will be displayed behind the modal.
     * This property controls whether or not the backdrop
     * darkens the screen when the modal is presented.
     * It does not control whether or not the backdrop
     * is active or present in the DOM.
     */
    this.showBackdrop = true;
    /**
     * If `true`, the modal will animate.
     */
    this.animated = true;
    /**
     * If `true`, the modal will open. If `false`, the modal will close.
     * Use this if you need finer grained control over presentation, otherwise
     * just use the modalController or the `trigger` property.
     * Note: `isOpen` will not automatically be set back to `false` when
     * the modal dismisses. You will need to do that in your code.
     */
    this.isOpen = false;
    /**
     * If `true`, the component passed into `ion-modal` will
     * automatically be mounted when the modal is created. The
     * component will remain mounted even when the modal is dismissed.
     * However, the component will be destroyed when the modal is
     * destroyed. This property is not reactive and should only be
     * used when initially creating a modal.
     *
     * Note: This feature only applies to inline modals in JavaScript
     * frameworks such as Angular, React, and Vue.
     */
    this.keepContentsMounted = false;
    /**
     * If `true`, focus will not be allowed to move outside of this overlay.
     * If `false`, focus will be allowed to move outside of the overlay.
     *
     * In most scenarios this property should remain set to `true`. Setting
     * this property to `false` can cause severe accessibility issues as users
     * relying on assistive technologies may be able to move focus into
     * a confusing state. We recommend only setting this to `false` when
     * absolutely necessary.
     *
     * Developers may want to consider disabling focus trapping if this
     * overlay presents a non-Ionic overlay from a 3rd party library.
     * Developers would disable focus trapping on the Ionic overlay
     * when presenting the 3rd party overlay and then re-enable
     * focus trapping when dismissing the 3rd party overlay and moving
     * focus back to the Ionic overlay.
     */
    this.focusTrap = true;
    /**
     * Determines whether or not a modal can dismiss
     * when calling the `dismiss` method.
     *
     * If the value is `true` or the value's function returns `true`, the modal will close when trying to dismiss.
     * If the value is `false` or the value's function returns `false`, the modal will not close when trying to dismiss.
     *
     * See https://ionicframework.com/docs/troubleshooting/runtime#accessing-this
     * if you need to access `this` from within the callback.
     */
    this.canDismiss = true;
    this.onHandleClick = () => {
      const {
        sheetTransition,
        handleBehavior
      } = this;
      if (handleBehavior !== 'cycle' || sheetTransition !== undefined) {
        /**
         * The sheet modal should not advance to the next breakpoint
         * if the handle behavior is not `cycle` or if the handle
         * is clicked while the sheet is moving to a breakpoint.
         */
        return;
      }
      this.moveToNextBreakpoint();
    };
    this.onBackdropTap = () => {
      const {
        sheetTransition
      } = this;
      if (sheetTransition !== undefined) {
        /**
         * When the handle is double clicked at the largest breakpoint,
         * it will start to move to the first breakpoint. While transitioning,
         * the backdrop will often receive the second click. We prevent the
         * backdrop from dismissing the modal while moving between breakpoints.
         */
        return;
      }
      this.dismiss(undefined, _overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.B);
    };
    this.onLifecycle = modalEvent => {
      const el = this.usersElement;
      const name = LIFECYCLE_MAP[modalEvent.type];
      if (el && name) {
        const ev = new CustomEvent(name, {
          bubbles: false,
          cancelable: false,
          detail: modalEvent.detail
        });
        el.dispatchEvent(ev);
      }
    };
  }
  onIsOpenChange(newValue, oldValue) {
    if (newValue === true && oldValue === false) {
      this.present();
    } else if (newValue === false && oldValue === true) {
      this.dismiss();
    }
  }
  triggerChanged() {
    const {
      trigger,
      el,
      triggerController
    } = this;
    if (trigger) {
      triggerController.addClickListener(el, trigger);
    }
  }
  breakpointsChanged(breakpoints) {
    if (breakpoints !== undefined) {
      this.sortedBreakpoints = breakpoints.sort((a, b) => a - b);
    }
  }
  connectedCallback() {
    const {
      el
    } = this;
    (0,_overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.j)(el);
    this.triggerChanged();
  }
  disconnectedCallback() {
    this.triggerController.removeClickListener();
  }
  componentWillLoad() {
    var _a;
    const {
      breakpoints,
      initialBreakpoint,
      el,
      htmlAttributes
    } = this;
    const isSheetModal = this.isSheetModal = breakpoints !== undefined && initialBreakpoint !== undefined;
    const attributesToInherit = ['aria-label', 'role'];
    this.inheritedAttributes = (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.b)(el, attributesToInherit);
    /**
     * When using a controller modal you can set attributes
     * using the htmlAttributes property. Since the above attributes
     * need to be inherited inside of the modal, we need to look
     * and see if these attributes are being set via htmlAttributes.
     *
     * We could alternatively move this to componentDidLoad to simplify the work
     * here, but we'd then need to make inheritedAttributes a State variable,
     * thus causing another render to always happen after the first render.
     */
    if (htmlAttributes !== undefined) {
      attributesToInherit.forEach(attribute => {
        const attributeValue = htmlAttributes[attribute];
        if (attributeValue) {
          /**
           * If an attribute we need to inherit was
           * set using htmlAttributes then add it to
           * inheritedAttributes and remove it from htmlAttributes.
           * This ensures the attribute is inherited and not
           * set on the host.
           *
           * In this case, if an inherited attribute is set
           * on the host element and using htmlAttributes then
           * htmlAttributes wins, but that's not a pattern that we recommend.
           * The only time you'd need htmlAttributes is when using modalController.
           */
          this.inheritedAttributes = Object.assign(Object.assign({}, this.inheritedAttributes), {
            [attribute]: htmlAttributes[attribute]
          });
          delete htmlAttributes[attribute];
        }
      });
    }
    if (isSheetModal) {
      this.currentBreakpoint = this.initialBreakpoint;
    }
    if (breakpoints !== undefined && initialBreakpoint !== undefined && !breakpoints.includes(initialBreakpoint)) {
      (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.m)('[ion-modal] - Your breakpoints array must include the initialBreakpoint value.');
    }
    if (!((_a = this.htmlAttributes) === null || _a === void 0 ? void 0 : _a.id)) {
      (0,_overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.k)(this.el);
    }
  }
  componentDidLoad() {
    /**
     * If modal was rendered with isOpen="true"
     * then we should open modal immediately.
     */
    if (this.isOpen === true) {
      (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.r)(() => this.present());
    }
    this.breakpointsChanged(this.breakpoints);
    /**
     * When binding values in frameworks such as Angular
     * it is possible for the value to be set after the Web Component
     * initializes but before the value watcher is set up in Stencil.
     * As a result, the watcher callback may not be fired.
     * We work around this by manually calling the watcher
     * callback when the component has loaded and the watcher
     * is configured.
     */
    this.triggerChanged();
  }
  /**
   * Determines whether or not an overlay
   * is being used inline or via a controller/JS
   * and returns the correct delegate.
   * By default, subsequent calls to getDelegate
   * will use a cached version of the delegate.
   * This is useful for calling dismiss after
   * present so that the correct delegate is given.
   */
  getDelegate(force = false) {
    if (this.workingDelegate && !force) {
      return {
        delegate: this.workingDelegate,
        inline: this.inline
      };
    }
    /**
     * If using overlay inline
     * we potentially need to use the coreDelegate
     * so that this works in vanilla JS apps.
     * If a developer has presented this component
     * via a controller, then we can assume
     * the component is already in the
     * correct place.
     */
    const parentEl = this.el.parentNode;
    const inline = this.inline = parentEl !== null && !this.hasController;
    const delegate = this.workingDelegate = inline ? this.delegate || this.coreDelegate : this.delegate;
    return {
      inline,
      delegate
    };
  }
  /**
   * Determines whether or not the
   * modal is allowed to dismiss based
   * on the state of the canDismiss prop.
   */
  checkCanDismiss(data, role) {
    var _this = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const {
        canDismiss
      } = _this;
      if (typeof canDismiss === 'function') {
        return canDismiss(data, role);
      }
      return canDismiss;
    })();
  }
  /**
   * Present the modal overlay after it has been created.
   */
  present() {
    var _this2 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const unlock = yield _this2.lockController.lock();
      if (_this2.presented) {
        unlock();
        return;
      }
      const {
        presentingElement,
        el
      } = _this2;
      /**
       * If the modal is presented multiple times (inline modals), we
       * need to reset the current breakpoint to the initial breakpoint.
       */
      _this2.currentBreakpoint = _this2.initialBreakpoint;
      const {
        inline,
        delegate
      } = _this2.getDelegate(true);
      /**
       * Emit ionMount so JS Frameworks have an opportunity
       * to add the child component to the DOM. The child
       * component will be assigned to this.usersElement below.
       */
      _this2.ionMount.emit();
      _this2.usersElement = yield (0,_framework_delegate_DxcnWic_js__WEBPACK_IMPORTED_MODULE_3__.a)(delegate, el, _this2.component, ['ion-page'], _this2.componentProps, inline);
      /**
       * When using the lazy loaded build of Stencil, we need to wait
       * for every Stencil component instance to be ready before presenting
       * otherwise there can be a flash of unstyled content. With the
       * custom elements bundle we need to wait for the JS framework
       * mount the inner contents of the overlay otherwise WebKit may
       * get the transition incorrect.
       */
      if ((0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.h)(el)) {
        yield (0,_index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_9__.e)(_this2.usersElement);
        /**
         * If keepContentsMounted="true" then the
         * JS Framework has already mounted the inner
         * contents so there is no need to wait.
         * Otherwise, we need to wait for the JS
         * Framework to mount the inner contents
         * of this component.
         */
      } else if (!_this2.keepContentsMounted) {
        yield (0,_index_DfBA5ztX_js__WEBPACK_IMPORTED_MODULE_9__.w)();
      }
      (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.w)(() => _this2.el.classList.add('show-modal'));
      const hasCardModal = presentingElement !== undefined;
      /**
       * We need to change the status bar at the
       * start of the animation so that it completes
       * by the time the card animation is done.
       */
      if (hasCardModal && (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.e)(_this2) === 'ios') {
        // Cache the original status bar color before the modal is presented
        _this2.statusBarStyle = yield StatusBar.getStyle();
        setCardStatusBarDark();
      }
      yield (0,_overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.f)(_this2, 'modalEnter', iosEnterAnimation, mdEnterAnimation, {
        presentingEl: presentingElement,
        currentBreakpoint: _this2.initialBreakpoint,
        backdropBreakpoint: _this2.backdropBreakpoint,
        expandToScroll: _this2.expandToScroll
      });
      /* tslint:disable-next-line */
      if (typeof window !== 'undefined') {
        /**
         * This needs to be setup before any
         * non-transition async work so it can be dereferenced
         * in the dismiss method. The dismiss method
         * only waits for the entering transition
         * to finish. It does not wait for all of the `present`
         * method to resolve.
         */
        _this2.keyboardOpenCallback = () => {
          if (_this2.gesture) {
            /**
             * When the native keyboard is opened and the webview
             * is resized, the gesture implementation will become unresponsive
             * and enter a free-scroll mode.
             *
             * When the keyboard is opened, we disable the gesture for
             * a single frame and re-enable once the contents have repositioned
             * from the keyboard placement.
             */
            _this2.gesture.enable(false);
            (0,_helpers_1O4D2b7y_js__WEBPACK_IMPORTED_MODULE_4__.r)(() => {
              if (_this2.gesture) {
                _this2.gesture.enable(true);
              }
            });
          }
        };
        window.addEventListener(_keyboard_ywgs5efA_js__WEBPACK_IMPORTED_MODULE_10__.KEYBOARD_DID_OPEN, _this2.keyboardOpenCallback);
      }
      if (_this2.isSheetModal) {
        _this2.initSheetGesture();
      } else if (hasCardModal) {
        _this2.initSwipeToClose();
      }
      unlock();
    })();
  }
  initSwipeToClose() {
    var _this3 = this;
    var _a;
    if ((0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.e)(this) !== 'ios') {
      return;
    }
    const {
      el
    } = this;
    // All of the elements needed for the swipe gesture
    // should be in the DOM and referenced by now, except
    // for the presenting el
    const animationBuilder = this.leaveAnimation || _index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.l.get('modalLeave', iosLeaveAnimation);
    const ani = this.animation = animationBuilder(el, {
      presentingEl: this.presentingElement,
      expandToScroll: this.expandToScroll
    });
    const contentEl = (0,_index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__.a)(el);
    if (!contentEl) {
      (0,_index_BlJTBdxG_js__WEBPACK_IMPORTED_MODULE_2__.p)(el);
      return;
    }
    const statusBarStyle = (_a = this.statusBarStyle) !== null && _a !== void 0 ? _a : Style.Default;
    this.gesture = createSwipeToCloseGesture(el, ani, statusBarStyle, () => {
      /**
       * While the gesture animation is finishing
       * it is possible for a user to tap the backdrop.
       * This would result in the dismiss animation
       * being played again. Typically this is avoided
       * by setting `presented = false` on the overlay
       * component; however, we cannot do that here as
       * that would prevent the element from being
       * removed from the DOM.
       */
      this.gestureAnimationDismissing = true;
      /**
       * Reset the status bar style as the dismiss animation
       * starts otherwise the status bar will be the wrong
       * color for the duration of the dismiss animation.
       * The dismiss method does this as well, but
       * in this case it's only called once the animation
       * has finished.
       */
      setCardStatusBarDefault(this.statusBarStyle);
      this.animation.onFinish(/*#__PURE__*/(0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
        yield _this3.dismiss(undefined, _overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.G);
        _this3.gestureAnimationDismissing = false;
      }));
    });
    this.gesture.enable(true);
  }
  initSheetGesture() {
    const {
      wrapperEl,
      initialBreakpoint,
      backdropBreakpoint
    } = this;
    if (!wrapperEl || initialBreakpoint === undefined) {
      return;
    }
    const animationBuilder = this.enterAnimation || _index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.l.get('modalEnter', iosEnterAnimation);
    const ani = this.animation = animationBuilder(this.el, {
      presentingEl: this.presentingElement,
      currentBreakpoint: initialBreakpoint,
      backdropBreakpoint,
      expandToScroll: this.expandToScroll
    });
    ani.progressStart(true, 1);
    const {
      gesture,
      moveSheetToBreakpoint
    } = createSheetGesture(this.el, this.backdropEl, wrapperEl, initialBreakpoint, backdropBreakpoint, ani, this.sortedBreakpoints, this.expandToScroll, () => {
      var _a;
      return (_a = this.currentBreakpoint) !== null && _a !== void 0 ? _a : 0;
    }, () => this.sheetOnDismiss(), breakpoint => {
      if (this.currentBreakpoint !== breakpoint) {
        this.currentBreakpoint = breakpoint;
        this.ionBreakpointDidChange.emit({
          breakpoint
        });
      }
    });
    this.gesture = gesture;
    this.moveSheetToBreakpoint = moveSheetToBreakpoint;
    this.gesture.enable(true);
  }
  sheetOnDismiss() {
    var _this4 = this;
    /**
     * While the gesture animation is finishing
     * it is possible for a user to tap the backdrop.
     * This would result in the dismiss animation
     * being played again. Typically this is avoided
     * by setting `presented = false` on the overlay
     * component; however, we cannot do that here as
     * that would prevent the element from being
     * removed from the DOM.
     */
    this.gestureAnimationDismissing = true;
    this.animation.onFinish(/*#__PURE__*/(0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this4.currentBreakpoint = 0;
      _this4.ionBreakpointDidChange.emit({
        breakpoint: _this4.currentBreakpoint
      });
      yield _this4.dismiss(undefined, _overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.G);
      _this4.gestureAnimationDismissing = false;
    }));
  }
  /**
   * Dismiss the modal overlay after it has been presented.
   *
   * @param data Any data to emit in the dismiss events.
   * @param role The role of the element that is dismissing the modal. For example, 'cancel' or 'backdrop'.
   *
   * This is a no-op if the overlay has not been presented yet. If you want
   * to remove an overlay from the DOM that was never presented, use the
   * [remove](https://developer.mozilla.org/en-US/docs/Web/API/Element/remove) method.
   */
  dismiss(data, role) {
    var _this5 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      var _a;
      if (_this5.gestureAnimationDismissing && role !== _overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.G) {
        return false;
      }
      /**
       * Because the canDismiss check below is async,
       * we need to claim a lock before the check happens,
       * in case the dismiss transition does run.
       */
      const unlock = yield _this5.lockController.lock();
      /**
       * If a canDismiss handler is responsible
       * for calling the dismiss method, we should
       * not run the canDismiss check again.
       */
      if (role !== 'handler' && !(yield _this5.checkCanDismiss(data, role))) {
        unlock();
        return false;
      }
      const {
        presentingElement
      } = _this5;
      /**
       * We need to start the status bar change
       * before the animation so that the change
       * finishes when the dismiss animation does.
       */
      const hasCardModal = presentingElement !== undefined;
      if (hasCardModal && (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.e)(_this5) === 'ios') {
        setCardStatusBarDefault(_this5.statusBarStyle);
      }
      /* tslint:disable-next-line */
      if (typeof window !== 'undefined' && _this5.keyboardOpenCallback) {
        window.removeEventListener(_keyboard_ywgs5efA_js__WEBPACK_IMPORTED_MODULE_10__.KEYBOARD_DID_OPEN, _this5.keyboardOpenCallback);
        _this5.keyboardOpenCallback = undefined;
      }
      const dismissed = yield (0,_overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.g)(_this5, data, role, 'modalLeave', iosLeaveAnimation, mdLeaveAnimation, {
        presentingEl: presentingElement,
        currentBreakpoint: (_a = _this5.currentBreakpoint) !== null && _a !== void 0 ? _a : _this5.initialBreakpoint,
        backdropBreakpoint: _this5.backdropBreakpoint,
        expandToScroll: _this5.expandToScroll
      });
      if (dismissed) {
        const {
          delegate
        } = _this5.getDelegate();
        yield (0,_framework_delegate_DxcnWic_js__WEBPACK_IMPORTED_MODULE_3__.d)(delegate, _this5.usersElement);
        (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.w)(() => _this5.el.classList.remove('show-modal'));
        if (_this5.animation) {
          _this5.animation.destroy();
        }
        if (_this5.gesture) {
          _this5.gesture.destroy();
        }
      }
      _this5.currentBreakpoint = undefined;
      _this5.animation = undefined;
      unlock();
      return dismissed;
    })();
  }
  /**
   * Returns a promise that resolves when the modal did dismiss.
   */
  onDidDismiss() {
    return (0,_overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.h)(this.el, 'ionModalDidDismiss');
  }
  /**
   * Returns a promise that resolves when the modal will dismiss.
   */
  onWillDismiss() {
    return (0,_overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.h)(this.el, 'ionModalWillDismiss');
  }
  /**
   * Move a sheet style modal to a specific breakpoint. The breakpoint value must
   * be a value defined in your `breakpoints` array.
   */
  setCurrentBreakpoint(breakpoint) {
    var _this6 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!_this6.isSheetModal) {
        (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.m)('[ion-modal] - setCurrentBreakpoint is only supported on sheet modals.');
        return;
      }
      if (!_this6.breakpoints.includes(breakpoint)) {
        (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.m)(`[ion-modal] - Attempted to set invalid breakpoint value ${breakpoint}. Please double check that the breakpoint value is part of your defined breakpoints.`);
        return;
      }
      const {
        currentBreakpoint,
        moveSheetToBreakpoint,
        canDismiss,
        breakpoints,
        animated
      } = _this6;
      if (currentBreakpoint === breakpoint) {
        return;
      }
      if (moveSheetToBreakpoint) {
        _this6.sheetTransition = moveSheetToBreakpoint({
          breakpoint,
          breakpointOffset: 1 - currentBreakpoint,
          canDismiss: canDismiss !== undefined && canDismiss !== true && breakpoints[0] === 0,
          animated
        });
        yield _this6.sheetTransition;
        _this6.sheetTransition = undefined;
      }
    })();
  }
  /**
   * Returns the current breakpoint of a sheet style modal
   */
  getCurrentBreakpoint() {
    var _this7 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this7.currentBreakpoint;
    })();
  }
  moveToNextBreakpoint() {
    var _this8 = this;
    return (0,C_Users_Faizan_Desktop_Desktop_Projects_tactical_trap_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const {
        breakpoints,
        currentBreakpoint
      } = _this8;
      if (!breakpoints || currentBreakpoint == null) {
        /**
         * If the modal does not have breakpoints and/or the current
         * breakpoint is not set, we can't move to the next breakpoint.
         */
        return false;
      }
      const allowedBreakpoints = breakpoints.filter(b => b !== 0);
      const currentBreakpointIndex = allowedBreakpoints.indexOf(currentBreakpoint);
      const nextBreakpointIndex = (currentBreakpointIndex + 1) % allowedBreakpoints.length;
      const nextBreakpoint = allowedBreakpoints[nextBreakpointIndex];
      /**
       * Sets the current breakpoint to the next available breakpoint.
       * If the current breakpoint is the last breakpoint, we set the current
       * breakpoint to the first non-zero breakpoint to avoid dismissing the sheet.
       */
      yield _this8.setCurrentBreakpoint(nextBreakpoint);
      return true;
    })();
  }
  render() {
    const {
      handle,
      isSheetModal,
      presentingElement,
      htmlAttributes,
      handleBehavior,
      inheritedAttributes,
      focusTrap,
      expandToScroll
    } = this;
    const showHandle = handle !== false && isSheetModal;
    const mode = (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.e)(this);
    const isCardModal = presentingElement !== undefined && mode === 'ios';
    const isHandleCycle = handleBehavior === 'cycle';
    return (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.j, Object.assign({
      key: '0bcbdcfcd7d890eb599da3f97f21c317d34f8e0e',
      "no-router": true,
      tabindex: "-1"
    }, htmlAttributes, {
      style: {
        zIndex: `${20000 + this.overlayIndex}`
      },
      class: Object.assign({
        [mode]: true,
        ['modal-default']: !isCardModal && !isSheetModal,
        [`modal-card`]: isCardModal,
        [`modal-sheet`]: isSheetModal,
        [`modal-no-expand-scroll`]: isSheetModal && !expandToScroll,
        'overlay-hidden': true,
        [_overlays_8Y2rA_ps_js__WEBPACK_IMPORTED_MODULE_7__.F]: focusTrap === false
      }, (0,_theme_DiVJyqlX_js__WEBPACK_IMPORTED_MODULE_8__.g)(this.cssClass)),
      onIonBackdropTap: this.onBackdropTap,
      onIonModalDidPresent: this.onLifecycle,
      onIonModalWillPresent: this.onLifecycle,
      onIonModalWillDismiss: this.onLifecycle,
      onIonModalDidDismiss: this.onLifecycle
    }), (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.h)("ion-backdrop", {
      key: 'd72159e73daa5af7349aa9e8f695aa435eb43069',
      ref: el => this.backdropEl = el,
      visible: this.showBackdrop,
      tappable: this.backdropDismiss,
      part: "backdrop"
    }), mode === 'ios' && (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", {
      key: 'fd2d9b13676ae72473881649a397b6eacde03a03',
      class: "modal-shadow"
    }), (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", Object.assign({
      key: '908eccb1ad982dcde2dbcff0cbb18b6e60f8ba74',
      /*
        role and aria-modal must be used on the
        same element. They must also be set inside the
        shadow DOM otherwise ion-button will not be highlighted
        when using VoiceOver: https://bugs.webkit.org/show_bug.cgi?id=247134
      */
      role: "dialog"
    }, inheritedAttributes, {
      "aria-modal": "true",
      class: "modal-wrapper ion-overlay-wrapper",
      part: "content",
      ref: el => this.wrapperEl = el
    }), showHandle && (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.h)("button", {
      key: '332dc0b40363a77c7be62331d9f26def91c790e9',
      class: "modal-handle",
      // Prevents the handle from receiving keyboard focus when it does not cycle
      tabIndex: !isHandleCycle ? -1 : 0,
      "aria-label": "Activate to adjust the size of the dialog overlaying the screen",
      onClick: isHandleCycle ? this.onHandleClick : undefined,
      part: "handle"
    }), (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.h)("slot", {
      key: 'c32698350193c450327e97049daf8b8d1fda0d0e'
    })));
  }
  get el() {
    return (0,_index_B_U9CtaY_js__WEBPACK_IMPORTED_MODULE_1__.k)(this);
  }
  static get watchers() {
    return {
      "isOpen": ["onIsOpenChange"],
      "trigger": ["triggerChanged"]
    };
  }
};
const LIFECYCLE_MAP = {
  ionModalDidPresent: 'ionViewDidEnter',
  ionModalWillPresent: 'ionViewWillEnter',
  ionModalWillDismiss: 'ionViewWillLeave',
  ionModalDidDismiss: 'ionViewDidLeave'
};
Modal.style = {
  ios: modalIosCss,
  md: modalMdCss
};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW9uLW1vZGFsX2VudHJ5X2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ2lMO0FBQ1k7QUFDNUU7QUFDWTtBQUNuRDtBQUNkO0FBQzJMO0FBQ2hNO0FBQ2lCO0FBQ2I7QUFDSTtBQUNXO0FBQ3RCO0FBQ0w7QUFDSDtBQUNGO0FBQ1Y7QUFFaEMsSUFBSStELEtBQUs7QUFDVCxDQUFDLFVBQVVBLEtBQUssRUFBRTtFQUNkQSxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsTUFBTTtFQUN0QkEsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLE9BQU87RUFDeEJBLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxTQUFTO0FBQ2hDLENBQUMsRUFBRUEsS0FBSyxLQUFLQSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN6QixNQUFNQyxTQUFTLEdBQUc7RUFDZEMsU0FBU0EsQ0FBQSxFQUFHO0lBQ1IsTUFBTUMsU0FBUyxHQUFHMUIseURBQVksQ0FBQyxDQUFDO0lBQ2hDLElBQUkwQixTQUFTLEtBQUssSUFBSSxJQUFJQSxTQUFTLEtBQUssS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUdBLFNBQVMsQ0FBQ0MsaUJBQWlCLENBQUMsV0FBVyxDQUFDLEVBQUU7TUFDaEcsT0FBT0QsU0FBUyxDQUFDRSxPQUFPLENBQUNKLFNBQVM7SUFDdEM7SUFDQSxPQUFPSyxTQUFTO0VBQ3BCLENBQUM7RUFDREMsUUFBUUEsQ0FBQ0MsT0FBTyxFQUFFO0lBQ2QsTUFBTUMsTUFBTSxHQUFHLElBQUksQ0FBQ1AsU0FBUyxDQUFDLENBQUM7SUFDL0IsSUFBSSxDQUFDTyxNQUFNLEVBQUU7TUFDVDtJQUNKO0lBQ0FBLE1BQU0sQ0FBQ0YsUUFBUSxDQUFDQyxPQUFPLENBQUM7RUFDNUIsQ0FBQztFQUNERSxRQUFRO0lBQUEsSUFBQUMsSUFBQSxHQUFB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QUFXO0VBQ2hCMEksRUFBRSxFQUFFekk7QUFDUixDQUFDIiwic291cmNlcyI6WyIuL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9kaXN0L2VzbS9pb24tbW9kYWwuZW50cnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgZCBhcyBjcmVhdGVFdmVudCwgbSBhcyBwcmludElvbldhcm5pbmcsIHcgYXMgd3JpdGVUYXNrLCBlIGFzIGdldElvbk1vZGUsIGwgYXMgY29uZmlnLCBoLCBqIGFzIEhvc3QsIGsgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtQl9VOUN0YVkuanMnO1xuaW1wb3J0IHsgZiBhcyBmaW5kQ2xvc2VzdElvbkNvbnRlbnQsIGkgYXMgaXNJb25Db250ZW50LCBkIGFzIGRpc2FibGVDb250ZW50U2Nyb2xsWSwgciBhcyByZXNldENvbnRlbnRTY3JvbGxZLCBhIGFzIGZpbmRJb25Db250ZW50LCBwIGFzIHByaW50SW9uQ29udGVudEVycm9yTXNnIH0gZnJvbSAnLi9pbmRleC1CbEpUQmR4Ry5qcyc7XG5pbXBvcnQgeyBDIGFzIENvcmVEZWxlZ2F0ZSwgYSBhcyBhdHRhY2hDb21wb25lbnQsIGQgYXMgZGV0YWNoQ29tcG9uZW50IH0gZnJvbSAnLi9mcmFtZXdvcmstZGVsZWdhdGUtRHhjbldpY18uanMnO1xuaW1wb3J0IHsgZSBhcyBjbGFtcCwgZyBhcyBnZXRFbGVtZW50Um9vdCwgciBhcyByYWYsIGIgYXMgaW5oZXJpdEF0dHJpYnV0ZXMsIGggYXMgaGFzTGF6eUJ1aWxkIH0gZnJvbSAnLi9oZWxwZXJzLTFPNEQyYjd5LmpzJztcbmltcG9ydCB7IGMgYXMgY3JlYXRlTG9ja0NvbnRyb2xsZXIgfSBmcm9tICcuL2xvY2stY29udHJvbGxlci1CLWhpclQwdi5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldENhcGFjaXRvciB9IGZyb20gJy4vY2FwYWNpdG9yLUNGRVJJZWFVLmpzJztcbmltcG9ydCB7IEcgYXMgR0VTVFVSRSwgTyBhcyBPVkVSTEFZX0dFU1RVUkVfUFJJT1JJVFksIEYgYXMgRk9DVVNfVFJBUF9ESVNBQkxFX0NMQVNTLCBlIGFzIGNyZWF0ZVRyaWdnZXJDb250cm9sbGVyLCBCIGFzIEJBQ0tEUk9QLCBqIGFzIHByZXBhcmVPdmVybGF5LCBrIGFzIHNldE92ZXJsYXlJZCwgZiBhcyBwcmVzZW50LCBnIGFzIGRpc21pc3MsIGggYXMgZXZlbnRNZXRob2QgfSBmcm9tICcuL292ZXJsYXlzLThZMnJBLXBzLmpzJztcbmltcG9ydCB7IGcgYXMgZ2V0Q2xhc3NNYXAgfSBmcm9tICcuL3RoZW1lLURpVkp5cWxYLmpzJztcbmltcG9ydCB7IGUgYXMgZGVlcFJlYWR5LCB3IGFzIHdhaXRGb3JNb3VudCB9IGZyb20gJy4vaW5kZXgtRGZCQTV6dFguanMnO1xuaW1wb3J0IHsgS0VZQk9BUkRfRElEX09QRU4gfSBmcm9tICcuL2tleWJvYXJkLXl3Z3M1ZWZBLmpzJztcbmltcG9ydCB7IGMgYXMgY3JlYXRlQW5pbWF0aW9uIH0gZnJvbSAnLi9hbmltYXRpb24tQldjVUt0Ym4uanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRUaW1lR2l2ZW5Qcm9ncmVzc2lvbiB9IGZyb20gJy4vY3ViaWMtYmV6aWVyLWhIbVlMT2ZFLmpzJztcbmltcG9ydCB7IGNyZWF0ZUdlc3R1cmUgfSBmcm9tICcuL2luZGV4LUNmZ0JGMVNFLmpzJztcbmltcG9ydCB7IHcgYXMgd2luIH0gZnJvbSAnLi9pbmRleC1aalA0Q2plWi5qcyc7XG5pbXBvcnQgJy4vaGFyZHdhcmUtYmFjay1idXR0b24tRGNIMEJiRHAuanMnO1xuaW1wb3J0ICcuL2dlc3R1cmUtY29udHJvbGxlci1CVEVPczFhdC5qcyc7XG5pbXBvcnQgJy4va2V5Ym9hcmQtQ1V3NGVrVnkuanMnO1xuXG52YXIgU3R5bGU7XG4oZnVuY3Rpb24gKFN0eWxlKSB7XG4gICAgU3R5bGVbXCJEYXJrXCJdID0gXCJEQVJLXCI7XG4gICAgU3R5bGVbXCJMaWdodFwiXSA9IFwiTElHSFRcIjtcbiAgICBTdHlsZVtcIkRlZmF1bHRcIl0gPSBcIkRFRkFVTFRcIjtcbn0pKFN0eWxlIHx8IChTdHlsZSA9IHt9KSk7XG5jb25zdCBTdGF0dXNCYXIgPSB7XG4gICAgZ2V0RW5naW5lKCkge1xuICAgICAgICBjb25zdCBjYXBhY2l0b3IgPSBnZXRDYXBhY2l0b3IoKTtcbiAgICAgICAgaWYgKGNhcGFjaXRvciA9PT0gbnVsbCB8fCBjYXBhY2l0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNhcGFjaXRvci5pc1BsdWdpbkF2YWlsYWJsZSgnU3RhdHVzQmFyJykpIHtcbiAgICAgICAgICAgIHJldHVybiBjYXBhY2l0b3IuUGx1Z2lucy5TdGF0dXNCYXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9LFxuICAgIHNldFN0eWxlKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZW5naW5lID0gdGhpcy5nZXRFbmdpbmUoKTtcbiAgICAgICAgaWYgKCFlbmdpbmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbmdpbmUuc2V0U3R5bGUob3B0aW9ucyk7XG4gICAgfSxcbiAgICBnZXRTdHlsZTogYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBlbmdpbmUgPSB0aGlzLmdldEVuZ2luZSgpO1xuICAgICAgICBpZiAoIWVuZ2luZSkge1xuICAgICAgICAgICAgcmV0dXJuIFN0eWxlLkRlZmF1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBzdHlsZSB9ID0gYXdhaXQgZW5naW5lLmdldEluZm8oKTtcbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgIH0sXG59O1xuXG4vKipcbiAqIFVzZSB5ID0gbXggKyBiIHRvXG4gKiBmaWd1cmUgb3V0IHRoZSBiYWNrZHJvcCB2YWx1ZVxuICogYXQgYSBwYXJ0aWN1bGFyIHggY29vcmRpbmF0ZS4gVGhpc1xuICogaXMgdXNlZnVsIHdoZW4gdGhlIGJhY2tkcm9wIGRvZXNcbiAqIG5vdCBiZWdpbiB0byBmYWRlIGluIHVudGlsIGFmdGVyXG4gKiB0aGUgMCBicmVha3BvaW50LlxuICovXG5jb25zdCBnZXRCYWNrZHJvcFZhbHVlRm9yU2hlZXQgPSAoeCwgYmFja2Ryb3BCcmVha3BvaW50KSA9PiB7XG4gICAgLyoqXG4gICAgICogV2Ugd2lsbCB1c2UgdGhlc2UgcG9pbnRzOlxuICAgICAqIChiYWNrZHJvcEJyZWFrcG9pbnQsIDApXG4gICAgICogKG1heEJyZWFrcG9pbnQsIDEpXG4gICAgICogV2Uga25vdyB0aGF0IGF0IHRoZSBiZWdpbm5pbmcgYnJlYWtwb2ludCxcbiAgICAgKiB0aGUgYmFja2Ryb3Agd2lsbCBiZSBoaWRkZW4uIFdlIGFsc29cbiAgICAgKiBrbm93IHRoYXQgYXQgdGhlIG1heEJyZWFrcG9pbnQsIHRoZSBiYWNrZHJvcFxuICAgICAqIG11c3QgYmUgZnVsbHkgdmlzaWJsZS4gbWF4QnJlYWtwb2ludCBzaG91bGRcbiAgICAgKiBhbHdheXMgYmUgMSBldmVuIGlmIHRoZSBtYXhpbXVtIHZhbHVlXG4gICAgICogb2YgdGhlIGJyZWFrcG9pbnRzIGFycmF5IGlzIG5vdCAxIHNpbmNlXG4gICAgICogdGhlIGFuaW1hdGlvbiBydW5zIGZyb20gYSBwcm9ncmVzcyBvZiAwXG4gICAgICogdG8gYSBwcm9ncmVzcyBvZiAxLlxuICAgICAqIG0gPSAoeTIgLSB5MSkgLyAoeDIgLSB4MSlcbiAgICAgKlxuICAgICAqIFRoaXMgaXMgc2ltcGxpZmllZCBmcm9tOlxuICAgICAqIG0gPSAoMSAtIDApIC8gKG1heEJyZWFrcG9pbnQgLSBiYWNrZHJvcEJyZWFrcG9pbnQpXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYmFja2Ryb3BCcmVha3BvaW50IGlzIDEsIHdlIHJldHVybiAwIGFzIHRoZVxuICAgICAqIGJhY2tkcm9wIGlzIGNvbXBsZXRlbHkgaGlkZGVuLlxuICAgICAqXG4gICAgICovXG4gICAgaWYgKGJhY2tkcm9wQnJlYWtwb2ludCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgY29uc3Qgc2xvcGUgPSAxIC8gKDEgLSBiYWNrZHJvcEJyZWFrcG9pbnQpO1xuICAgIC8qKlxuICAgICAqIEZyb20gaGVyZSwgY29tcHV0ZSBiIHdoaWNoIGlzXG4gICAgICogdGhlIGJhY2tkcm9wIG9wYWNpdHkgaWYgdGhlIG9mZnNldFxuICAgICAqIGlzIDAuIElmIHRoZSBiYWNrZHJvcCBkb2VzIG5vdFxuICAgICAqIGJlZ2luIHRvIGZhZGUgaW4gdW50aWwgYWZ0ZXIgdGhlXG4gICAgICogMCBicmVha3BvaW50LCB0aGlzIGIgdmFsdWUgd2lsbCBiZVxuICAgICAqIG5lZ2F0aXZlLiBUaGlzIGlzIGZpbmUgYXMgd2UgbmV2ZXIgcGFzc1xuICAgICAqIGIgZGlyZWN0bHkgaW50byB0aGUgYW5pbWF0aW9uIGtleWZyYW1lcy5cbiAgICAgKiBiID0geSAtIG14XG4gICAgICogVXNlIGEga25vd24gcG9pbnQ6IChiYWNrZHJvcEJyZWFrcG9pbnQsIDApXG4gICAgICogVGhpcyBpcyBzaW1wbGlmaWVkIGZyb206XG4gICAgICogYiA9IDAgLSAoYmFja2Ryb3BCcmVha3BvaW50ICogc2xvcGUpXG4gICAgICovXG4gICAgY29uc3QgYiA9IC0oYmFja2Ryb3BCcmVha3BvaW50ICogc2xvcGUpO1xuICAgIC8qKlxuICAgICAqIEZpbmFsbHksIHdlIGNhbiBub3cgZGV0ZXJtaW5lIHRoZVxuICAgICAqIGJhY2tkcm9wIG9mZnNldCBnaXZlbiBhbiBhcmJpdHJhcnlcbiAgICAgKiBnZXN0dXJlIG9mZnNldC5cbiAgICAgKi9cbiAgICByZXR1cm4geCAqIHNsb3BlICsgYjtcbn07XG4vKipcbiAqIFRoZSB0YWJsZXQvZGVza3RvcCBjYXJkIG1vZGFsIGFjdGl2YXRlc1xuICogd2hlbiB0aGUgd2luZG93IHdpZHRoIGlzID49IDc2OC5cbiAqIEF0IHRoYXQgcG9pbnQsIHRoZSBwcmVzZW50aW5nIGVsZW1lbnRcbiAqIGlzIG5vdCB0cmFuc2Zvcm1lZCwgc28gd2UgZG8gbm90IG5lZWQgdG9cbiAqIGFkanVzdCB0aGUgc3RhdHVzIGJhciBjb2xvci5cbiAqXG4gKi9cbmNvbnN0IHNldENhcmRTdGF0dXNCYXJEYXJrID0gKCkgPT4ge1xuICAgIGlmICghd2luIHx8IHdpbi5pbm5lcldpZHRoID49IDc2OCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFN0YXR1c0Jhci5zZXRTdHlsZSh7IHN0eWxlOiBTdHlsZS5EYXJrIH0pO1xufTtcbmNvbnN0IHNldENhcmRTdGF0dXNCYXJEZWZhdWx0ID0gKGRlZmF1bHRTdHlsZSA9IFN0eWxlLkRlZmF1bHQpID0+IHtcbiAgICBpZiAoIXdpbiB8fCB3aW4uaW5uZXJXaWR0aCA+PSA3NjgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBTdGF0dXNCYXIuc2V0U3R5bGUoeyBzdHlsZTogZGVmYXVsdFN0eWxlIH0pO1xufTtcblxuY29uc3QgaGFuZGxlQ2FuRGlzbWlzcyA9IGFzeW5jIChlbCwgYW5pbWF0aW9uKSA9PiB7XG4gICAgLyoqXG4gICAgICogSWYgY2FuRGlzbWlzcyBpcyBub3QgYSBmdW5jdGlvblxuICAgICAqIHRoZW4gd2UgY2FuIHJldHVybiBlYXJseS4gSWYgY2FuRGlzbWlzcyBpcyBgdHJ1ZWAsXG4gICAgICogdGhlbiBjYW5EaXNtaXNzQmxvY2tzR2VzdHVyZSBpcyBgZmFsc2VgIGFzIGNhbkRpc21pc3NcbiAgICAgKiB3aWxsIG5ldmVyIGludGVycnVwdCB0aGUgZ2VzdHVyZS4gQXMgYSByZXN1bHQsXG4gICAgICogdGhpcyBjb2RlIGJsb2NrIGlzIG5ldmVyIHJlYWNoZWQuIElmIGNhbkRpc21pc3MgaXMgYGZhbHNlYCxcbiAgICAgKiB0aGVuIHdlIG5ldmVyIGRpc21pc3MuXG4gICAgICovXG4gICAgaWYgKHR5cGVvZiBlbC5jYW5EaXNtaXNzICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVuIHRoZSBjYW5EaXNtaXNzIGNhbGxiYWNrLlxuICAgICAqIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYCxcbiAgICAgKiB0aGVuIHdlIGNhbiBwcm9jZWVkIHdpdGggZGlzbWlzcy5cbiAgICAgKi9cbiAgICBjb25zdCBzaG91bGREaXNtaXNzID0gYXdhaXQgZWwuY2FuRGlzbWlzcyh1bmRlZmluZWQsIEdFU1RVUkUpO1xuICAgIGlmICghc2hvdWxkRGlzbWlzcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIGNhbkRpc21pc3MgcmVzb2x2ZWQgYWZ0ZXIgdGhlIHNuYXBcbiAgICAgKiBiYWNrIGFuaW1hdGlvbiBmaW5pc2hlZCwgd2UgY2FuXG4gICAgICogZGlzbWlzcyBpbW1lZGlhdGVseS5cbiAgICAgKlxuICAgICAqIElmIGNhbkRpc21pc3MgcmVzb2x2ZWQgYmVmb3JlIHRoZSBzbmFwXG4gICAgICogYmFjayBhbmltYXRpb24gZmluaXNoZWQsIHdlIG5lZWQgdG9cbiAgICAgKiB3YWl0IHVudGlsIHRoZSBzbmFwIGJhY2sgYW5pbWF0aW9uIGlzXG4gICAgICogZG9uZSBiZWZvcmUgZGlzbWlzc2luZy5cbiAgICAgKi9cbiAgICBpZiAoYW5pbWF0aW9uLmlzUnVubmluZygpKSB7XG4gICAgICAgIGFuaW1hdGlvbi5vbkZpbmlzaCgoKSA9PiB7XG4gICAgICAgICAgICBlbC5kaXNtaXNzKHVuZGVmaW5lZCwgJ2hhbmRsZXInKTtcbiAgICAgICAgfSwgeyBvbmVUaW1lQ2FsbGJhY2s6IHRydWUgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBlbC5kaXNtaXNzKHVuZGVmaW5lZCwgJ2hhbmRsZXInKTtcbiAgICB9XG59O1xuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGxldHMgdXMgc2ltdWxhdGUgYSByZWFsaXN0aWMgc3ByaW5nLWxpa2UgYW5pbWF0aW9uXG4gKiB3aGVuIHN3aXBpbmcgZG93biBvbiB0aGUgbW9kYWwuXG4gKiBUaGVyZSBhcmUgdHdvIGZvcmNlcyB0aGF0IHdlIG5lZWQgdG8gdXNlIHRvIGNvbXB1dGUgdGhlIHNwcmluZyBwaHlzaWNzOlxuICpcbiAqIDEuIFN0aWZmbmVzcywgazogVGhpcyBpcyBhIG1lYXN1cmUgb2YgcmVzaXN0YW5jZSBhcHBsaWVkIGEgc3ByaW5nLlxuICogMi4gRGFtcGVuaW5nLCBjOiBUaGlzIHZhbHVlIGhhcyB0aGUgZWZmZWN0IG9mIHJlZHVjaW5nIG9yIHByZXZlbnRpbmcgb3NjaWxsYXRpb24uXG4gKlxuICogVXNpbmcgdGhlc2UgdHdvIHZhbHVlcywgd2UgY2FuIGNhbGN1bGF0ZSB0aGUgU3ByaW5nIEZvcmNlIGFuZCB0aGUgRGFtcGVuaW5nIEZvcmNlXG4gKiB0byBjb21wdXRlIHRoZSB0b3RhbCBmb3JjZSBhcHBsaWVkIHRvIGEgc3ByaW5nLlxuICpcbiAqIFNwcmluZyBGb3JjZTogVGhpcyBmb3JjZSBwdWxscyBhIHNwcmluZyBiYWNrIGludG8gaXRzIGVxdWlsaWJyaXVtIHBvc2l0aW9uLlxuICogSG9va2UncyBMYXcgdGVsbHMgdXMgdGhhdCB0aGF0IHNwcmluZyBmb3JjZSAoRlMpID0ga1guXG4gKiBrIGlzIHRoZSBzdGlmZm5lc3Mgb2YgYSBzcHJpbmcsIGFuZCBYIGlzIHRoZSBkaXNwbGFjZW1lbnQgb2YgdGhlIHNwcmluZyBmcm9tIGl0c1xuICogZXF1aWxpYnJpdW0gcG9zaXRpb24uIEluIHRoaXMgY2FzZSwgaXQgaXMgdGhlIGFtb3VudCBieSB3aGljaCB0aGUgZnJlZSBlbmRcbiAqIG9mIGEgc3ByaW5nIHdhcyBkaXNwbGFjZWQgKHN0cmV0Y2hlZC9wdXNoZWQpIGZyb20gaXRzIFwicmVsYXhlZFwiIHBvc2l0aW9uLlxuICpcbiAqIERhbXBlbmluZyBGb3JjZTogVGhpcyBmb3JjZSBzbG93cyBkb3duIG1vdGlvbi4gV2l0aG91dCBpdCwgYSBzcHJpbmcgd291bGQgb3NjaWxsYXRlIGZvcmV2ZXIuXG4gKiBUaGUgZGFtcGVuaW5nIGZvcmNlLCBGRCwgY2FuIGJlIGZvdW5kIHZpYSB0aGlzIGZvcm11bGE6IEZEID0gLWN2XG4gKiB3aGVyZSBjIHRoZSBkYW1wZW5pbmcgdmFsdWUgYW5kIHYgaXMgdmVsb2NpdHkuXG4gKlxuICogVGhlcmVmb3JlLCB0aGUgcmVzdWx0aW5nIGZvcmNlIHRoYXQgaXMgZXhlcnRlZCBvbiB0aGUgYmxvY2sgaXM6XG4gKiBGID0gRlMgKyBGRCA9IC1rWCAtIGN2XG4gKlxuICogTmV3dG9uJ3MgMm5kIExhdyB0ZWxscyB1cyB0aGF0IEYgPSBtYTpcbiAqIG1hID0gLWtYIC0gY3YuXG4gKlxuICogRm9yIElvbmljJ3MgcHVycG9zZXMsIHdlIGNhbiBhc3N1bWUgdGhhdCBtID0gMTpcbiAqIGEgPSAta1ggLSBjdlxuICpcbiAqIEltYWdpbmUgYSBibG9jayBhdHRhY2hlZCB0byB0aGUgZW5kIG9mIGEgc3ByaW5nLiBBdCBlcXVpbGlicml1bVxuICogdGhlIGJsb2NrIGlzIGF0IHBvc2l0aW9uIHggPSAxLlxuICogUHJlc3Npbmcgb24gdGhlIGJsb2NrIG1vdmVzIGl0IHRvIHBvc2l0aW9uIHggPSAwO1xuICogU28sIHRvIGNhbGN1bGF0ZSB0aGUgZGlzcGxhY2VtZW50LCB3ZSBuZWVkIHRvIHRha2UgdGhlXG4gKiBjdXJyZW50IHBvc2l0aW9uIGFuZCBzdWJ0cmFjdCB0aGUgcHJldmlvdXMgcG9zaXRpb24gZnJvbSBpdC5cbiAqIFggPSB4IC0geDAgPSAwIC0gMSA9IC0xLlxuICpcbiAqIEZvciBJb25pYydzIHB1cnBvc2VzLCB3ZSBhcmUgb25seSBwdXNoaW5nIG9uIHRoZSBzcHJpbmcgbW9kYWxcbiAqIHNvIHdlIGhhdmUgYSBtYXggcG9zaXRpb24gb2YgMS5cbiAqIEFzIGEgcmVzdWx0LCB3ZSBjYW4gZXhwYW5kIGRpc3BsYWNlbWVudCB0byB0aGlzIGZvcm11bGE6XG4gKiBYID0geCAtIDFcbiAqXG4gKiBhID0gLWsoeCAtIDEpIC0gY3ZcbiAqXG4gKiBXZSBjYW4gcmVwcmVzZW50IHRoZSBtb3Rpb24gb2Ygc29tZXRoaW5nIGFzIGEgZnVuY3Rpb24gb2YgdGltZTogZih0KSA9IHguXG4gKiBUaGUgZGVyaXZhdGl2ZSBvZiBwb3NpdGlvbiBnaXZlcyB1cyB0aGUgdmVsb2NpdHk6IGYnKHQpXG4gKiBUaGUgZGVyaXZhdGl2ZSBvZiB0aGUgdmVsb2NpdHkgZ2l2ZXMgdXMgdGhlIGFjY2VsZXJhdGlvbjogZicnKHQpXG4gKlxuICogV2UgY2FuIHN1YnN0aXR1dGUgdGhlIGZvcm11bGEgYWJvdmUgd2l0aCB0aGVzZSB2YWx1ZXM6XG4gKlxuICogZlwiKHQpID0gLWsgKiAoZih0KSAtIDEpIC0gYyAqIGYnKHQpXG4gKlxuICogVGhpcyBpcyBjYWxsZWQgYSBkaWZmZXJlbnRpYWwgZXF1YXRpb24uXG4gKlxuICogV2Uga25vdyB0aGF0IGF0IHQgPSAwLCB3ZSBhcmUgYXQgeCA9IDAgYmVjYXVzZSB0aGUgbW9kYWwgZG9lcyBub3QgbW92ZTogZigwKSA9IDBcbiAqIFRoaXMgbWVhbnMgb3VyIHZlbG9jaXR5IGlzIGFsc28gemVybzogZicoMCkgPSAwLlxuICpcbiAqIFdlIGNhbiBjaGVhdCBhIGJpdCBhbmQgcGx1ZyB0aGUgZm9ybXVsYSBpbnRvIFdvbGZyYW0gQWxwaGEuXG4gKiBIb3dldmVyLCB3ZSBuZWVkIHRvIHBpY2sgc3RpZmZuZXNzIGFuZCBkYW1wZW5pbmcgdmFsdWVzOlxuICogayA9IDAuNTdcbiAqIGMgPSAxNVxuICpcbiAqIEkgcGlja2VkIHRoZXNlIGFzIHRoZXkgYXJlIGZhaXJseSBjbG9zZSB0byBuYXRpdmUgaU9TJ3Mgc3ByaW5nIGVmZmVjdFxuICogd2l0aCB0aGUgbW9kYWwuXG4gKlxuICogV2hhdCB3ZSBwbHVnIGluIGlzIHRoaXM6IGYoMCkgPSAwOyBmJygwKSA9IDA7IGYnJyh0KSA9IC0wLjU3KGYodCkgLSAxKSAtIDE1ZicodClcbiAqXG4gKiBUaGUgcmVzdWx0IGlzIGEgZm9ybXVsYSB0aGF0IGxldHMgdXMgY2FsY3VsYXRlIHRoZSBhY2NlbGVyYXRpb25cbiAqIGZvciBhIGdpdmVuIHRpbWUgdC5cbiAqIE5vdGU6IFRoaXMgaXMgdGhlIGFwcHJveGltYXRlIGZvcm0gb2YgdGhlIHNvbHV0aW9uLiBXb2xmcmFtIEFscGhhIHdpbGxcbiAqIGdpdmUgeW91IGEgY29tcGxleCBkaWZmZXJlbnRpYWwgZXF1YXRpb24gdG9vLlxuICovXG5jb25zdCBjYWxjdWxhdGVTcHJpbmdTdGVwID0gKHQpID0+IHtcbiAgICByZXR1cm4gMC4wMDI1NTI3NSAqIDIuNzE4MjggKiogKC0xNC45NjE5ICogdCkgLSAxLjAwMjU1ICogMi43MTgyOCAqKiAoLTAuMDM4MDk2OCAqIHQpICsgMTtcbn07XG5cbi8vIERlZmF1bHRzIGZvciB0aGUgY2FyZCBzd2lwZSBhbmltYXRpb25cbmNvbnN0IFN3aXBlVG9DbG9zZURlZmF1bHRzID0ge1xuICAgIE1JTl9QUkVTRU5USU5HX1NDQUxFOiAwLjkxNSxcbn07XG5jb25zdCBjcmVhdGVTd2lwZVRvQ2xvc2VHZXN0dXJlID0gKGVsLCBhbmltYXRpb24sIHN0YXR1c0JhclN0eWxlLCBvbkRpc21pc3MpID0+IHtcbiAgICAvKipcbiAgICAgKiBUaGUgc3RlcCB2YWx1ZSBhdCB3aGljaCBhIGNhcmQgbW9kYWxcbiAgICAgKiBpcyBlbGlnaWJsZSBmb3IgZGlzbWlzc2luZyB2aWEgZ2VzdHVyZS5cbiAgICAgKi9cbiAgICBjb25zdCBESVNNSVNTX1RIUkVTSE9MRCA9IDAuNTtcbiAgICBjb25zdCBoZWlnaHQgPSBlbC5vZmZzZXRIZWlnaHQ7XG4gICAgbGV0IGlzT3BlbiA9IGZhbHNlO1xuICAgIGxldCBjYW5EaXNtaXNzQmxvY2tzR2VzdHVyZSA9IGZhbHNlO1xuICAgIGxldCBjb250ZW50RWwgPSBudWxsO1xuICAgIGxldCBzY3JvbGxFbCA9IG51bGw7XG4gICAgY29uc3QgY2FuRGlzbWlzc01heFN0ZXAgPSAwLjI7XG4gICAgbGV0IGluaXRpYWxTY3JvbGxZID0gdHJ1ZTtcbiAgICBsZXQgbGFzdFN0ZXAgPSAwO1xuICAgIGNvbnN0IGdldFNjcm9sbFkgPSAoKSA9PiB7XG4gICAgICAgIGlmIChjb250ZW50RWwgJiYgaXNJb25Db250ZW50KGNvbnRlbnRFbCkpIHtcbiAgICAgICAgICAgIHJldHVybiBjb250ZW50RWwuc2Nyb2xsWTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3VzdG9tIHNjcm9sbCBjb250YWluZXJzIGFyZSBpbnRlbmRlZCB0byBiZVxuICAgICAgICAgICAgICogdXNlZCB3aXRoIHZpcnR1YWwgc2Nyb2xsaW5nLCBzbyB3ZSBhc3N1bWVcbiAgICAgICAgICAgICAqIHRoZXJlIGlzIHNjcm9sbGluZyBpbiB0aGlzIGNhc2UuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjYW5TdGFydCA9IChkZXRhaWwpID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZGV0YWlsLmV2ZW50LnRhcmdldDtcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gbnVsbCB8fCAhdGFyZ2V0LmNsb3Nlc3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB3ZSBhcmUgc3dpcGluZyBvbiB0aGUgY29udGVudCxcbiAgICAgICAgICogc3dpcGluZyBzaG91bGQgb25seSBiZSBwb3NzaWJsZSBpZlxuICAgICAgICAgKiB0aGUgY29udGVudCBpcyBzY3JvbGxlZCBhbGwgdGhlIHdheVxuICAgICAgICAgKiB0byB0aGUgdG9wIHNvIHRoYXQgd2UgZG8gbm90IGludGVyZmVyZVxuICAgICAgICAgKiB3aXRoIHNjcm9sbGluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogV2UgY2Fubm90IGFzc3VtZSB0aGF0IHRoZSBgaW9uLWNvbnRlbnRgXG4gICAgICAgICAqIHRhcmdldCB3aWxsIHJlbWFpbiBjb25zaXN0ZW50IGJldHdlZW5cbiAgICAgICAgICogc3dpcGVzLiBGb3IgZXhhbXBsZSwgd2hlbiB1c2luZ1xuICAgICAgICAgKiBpb24tbmF2IHdpdGhpbiBhIGNhcmQgbW9kYWwgaXQgaXNcbiAgICAgICAgICogcG9zc2libGUgdG8gc3dpcGUsIHB1c2ggYSB2aWV3LCBhbmQgdGhlblxuICAgICAgICAgKiBzd2lwZSBhZ2Fpbi4gVGhlIHRhcmdldCBjb250ZW50IHdpbGwgbm90XG4gICAgICAgICAqIGJlIHRoZSBzYW1lIGJldHdlZW4gc3dpcGVzLlxuICAgICAgICAgKi9cbiAgICAgICAgY29udGVudEVsID0gZmluZENsb3Nlc3RJb25Db250ZW50KHRhcmdldCk7XG4gICAgICAgIGlmIChjb250ZW50RWwpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGNhcmQgc2hvdWxkIG5ldmVyIHN3aXBlIHRvIGNsb3NlXG4gICAgICAgICAgICAgKiBvbiB0aGUgY29udGVudCB3aXRoIGEgcmVmcmVzaGVyLlxuICAgICAgICAgICAgICogTm90ZTogV2UgY2Fubm90IHNvbHZlIHRoaXMgYnkgbWFraW5nIHRoZVxuICAgICAgICAgICAgICogc3dpcGVUb0Nsb3NlIGdlc3R1cmUgaGF2ZSBhIGhpZ2hlciBwcmlvcml0eVxuICAgICAgICAgICAgICogdGhhbiB0aGUgcmVmcmVzaGVyIGdlc3R1cmUgYXMgdGhlIGlPUyBuYXRpdmVcbiAgICAgICAgICAgICAqIHJlZnJlc2ggZ2VzdHVyZSB1c2VzIGEgc2Nyb2xsIGxpc3RlbmVyIGluXG4gICAgICAgICAgICAgKiBhZGRpdGlvbiB0byBhIGdlc3R1cmUuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogTm90ZTogRG8gbm90IHVzZSBnZXRTY3JvbGxFbGVtZW50IGhlcmVcbiAgICAgICAgICAgICAqIGJlY2F1c2Ugd2UgbmVlZCB0aGlzIHRvIGJlIGEgc3luY2hyb25vdXNcbiAgICAgICAgICAgICAqIG9wZXJhdGlvbiwgYW5kIGdldFNjcm9sbEVsZW1lbnQgaXNcbiAgICAgICAgICAgICAqIGFzeW5jaHJvbm91cy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKGlzSW9uQ29udGVudChjb250ZW50RWwpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdCA9IGdldEVsZW1lbnRSb290KGNvbnRlbnRFbCk7XG4gICAgICAgICAgICAgICAgc2Nyb2xsRWwgPSByb290LnF1ZXJ5U2VsZWN0b3IoJy5pbm5lci1zY3JvbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNjcm9sbEVsID0gY29udGVudEVsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGFzUmVmcmVzaGVySW5Db250ZW50ID0gISFjb250ZW50RWwucXVlcnlTZWxlY3RvcignaW9uLXJlZnJlc2hlcicpO1xuICAgICAgICAgICAgcmV0dXJuICFoYXNSZWZyZXNoZXJJbkNvbnRlbnQgJiYgc2Nyb2xsRWwuc2Nyb2xsVG9wID09PSAwO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYXJkIHNob3VsZCBiZSBzd2lwZWFibGUgb24gYWxsXG4gICAgICAgICAqIHBhcnRzIG9mIHRoZSBtb2RhbCBleGNlcHQgZm9yIHRoZSBmb290ZXIuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBmb290ZXIgPSB0YXJnZXQuY2xvc2VzdCgnaW9uLWZvb3RlcicpO1xuICAgICAgICBpZiAoZm9vdGVyID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBjb25zdCBvblN0YXJ0ID0gKGRldGFpbCkgPT4ge1xuICAgICAgICBjb25zdCB7IGRlbHRhWSB9ID0gZGV0YWlsO1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IHRoZSBpbml0aWFsIHNjcm9sbFkgdmFsdWUgc29cbiAgICAgICAgICogdGhhdCB3ZSBjYW4gY29ycmVjdGx5IHJlc2V0IHRoZSBzY3JvbGxZXG4gICAgICAgICAqIHByb3Agd2hlbiB0aGUgZ2VzdHVyZSBlbmRzLlxuICAgICAgICAgKi9cbiAgICAgICAgaW5pdGlhbFNjcm9sbFkgPSBnZXRTY3JvbGxZKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBjYW5EaXNtaXNzIGlzIGFueXRoaW5nIG90aGVyIHRoYW4gYHRydWVgXG4gICAgICAgICAqIHRoZW4gdXNlcnMgc2hvdWxkIGJlIGFibGUgdG8gc3dpcGUgZG93blxuICAgICAgICAgKiB1bnRpbCBhIHRocmVzaG9sZCBpcyBoaXQuIEF0IHRoYXQgcG9pbnQsXG4gICAgICAgICAqIHRoZSBjYXJkIG1vZGFsIHNob3VsZCBub3QgcHJvY2VlZCBhbnkgZnVydGhlci5cbiAgICAgICAgICogVE9ETyAoRlctOTM3KVxuICAgICAgICAgKiBSZW1vdmUgdW5kZWZpbmVkIGNoZWNrXG4gICAgICAgICAqL1xuICAgICAgICBjYW5EaXNtaXNzQmxvY2tzR2VzdHVyZSA9IGVsLmNhbkRpc21pc3MgIT09IHVuZGVmaW5lZCAmJiBlbC5jYW5EaXNtaXNzICE9PSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgd2UgYXJlIHB1bGxpbmcgZG93biwgdGhlblxuICAgICAgICAgKiBpdCBpcyBwb3NzaWJsZSB3ZSBhcmUgcHVsbGluZyBvbiB0aGVcbiAgICAgICAgICogY29udGVudC4gV2UgZG8gbm90IHdhbnQgc2Nyb2xsaW5nIHRvXG4gICAgICAgICAqIGhhcHBlbiBhdCB0aGUgc2FtZSB0aW1lIGFzIHRoZSBnZXN0dXJlLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGRlbHRhWSA+IDAgJiYgY29udGVudEVsKSB7XG4gICAgICAgICAgICBkaXNhYmxlQ29udGVudFNjcm9sbFkoY29udGVudEVsKTtcbiAgICAgICAgfVxuICAgICAgICBhbmltYXRpb24ucHJvZ3Jlc3NTdGFydCh0cnVlLCBpc09wZW4gPyAxIDogMCk7XG4gICAgfTtcbiAgICBjb25zdCBvbk1vdmUgPSAoZGV0YWlsKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgZGVsdGFZIH0gPSBkZXRhaWw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB3ZSBhcmUgcHVsbGluZyBkb3duLCB0aGVuXG4gICAgICAgICAqIGl0IGlzIHBvc3NpYmxlIHdlIGFyZSBwdWxsaW5nIG9uIHRoZVxuICAgICAgICAgKiBjb250ZW50LiBXZSBkbyBub3Qgd2FudCBzY3JvbGxpbmcgdG9cbiAgICAgICAgICogaGFwcGVuIGF0IHRoZSBzYW1lIHRpbWUgYXMgdGhlIGdlc3R1cmUuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoZGVsdGFZID4gMCAmJiBjb250ZW50RWwpIHtcbiAgICAgICAgICAgIGRpc2FibGVDb250ZW50U2Nyb2xsWShjb250ZW50RWwpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB3ZSBhcmUgc3dpcGluZyBvbiB0aGUgY29udGVudFxuICAgICAgICAgKiB0aGVuIHRoZSBzd2lwZSBnZXN0dXJlIHNob3VsZCBvbmx5XG4gICAgICAgICAqIGhhcHBlbiBpZiB3ZSBhcmUgcHVsbGluZyBkb3duLlxuICAgICAgICAgKlxuICAgICAgICAgKiBIb3dldmVyLCBpZiB3ZSBwdWxsIHVwIGFuZFxuICAgICAgICAgKiB0aGVuIGRvd24gc3VjaCB0aGF0IHRoZSBzY3JvbGwgcG9zaXRpb25cbiAgICAgICAgICogcmV0dXJucyB0byAwLCB3ZSBzaG91bGQgYmUgYWJsZSB0byBzd2lwZVxuICAgICAgICAgKiB0aGUgY2FyZC5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IHN0ZXAgPSBkZXRhaWwuZGVsdGFZIC8gaGVpZ2h0O1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2sgaWYgdXNlciBpcyBzd2lwaW5nIGRvd24gYW5kXG4gICAgICAgICAqIGlmIHdlIGhhdmUgYSBjYW5EaXNtaXNzIHZhbHVlIHRoYXRcbiAgICAgICAgICogc2hvdWxkIGJsb2NrIHRoZSBnZXN0dXJlIGZyb21cbiAgICAgICAgICogcHJvY2VlZGluZyxcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGlzQXR0ZW1wdGluZ0Rpc21pc3NXaXRoQ2FuRGlzbWlzcyA9IHN0ZXAgPj0gMCAmJiBjYW5EaXNtaXNzQmxvY2tzR2VzdHVyZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHdlIGFyZSBibG9ja2luZyB0aGUgZ2VzdHVyZSBmcm9tIGRpc21pc3NpbmcsXG4gICAgICAgICAqIHNldCB0aGUgbWF4IHN0ZXAgdmFsdWUgc28gdGhhdCB0aGUgc2hlZXQgY2Fubm90IGJlXG4gICAgICAgICAqIGNvbXBsZXRlbHkgaGlkZGVuLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgbWF4U3RlcCA9IGlzQXR0ZW1wdGluZ0Rpc21pc3NXaXRoQ2FuRGlzbWlzcyA/IGNhbkRpc21pc3NNYXhTdGVwIDogMC45OTk5O1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgd2UgYXJlIGJsb2NraW5nIHRoZSBnZXN0dXJlIGZyb21cbiAgICAgICAgICogZGlzbWlzc2luZywgY2FsY3VsYXRlIHRoZSBzcHJpbmcgbW9kaWZpZXIgdmFsdWVcbiAgICAgICAgICogdGhpcyB3aWxsIGJlIGFkZGVkIHRvIHRoZSBzdGFydGluZyBicmVha3BvaW50XG4gICAgICAgICAqIHZhbHVlIHRvIGdpdmUgdGhlIGdlc3R1cmUgYSBzcHJpbmctbGlrZSBmZWVsaW5nLlxuICAgICAgICAgKiBOb3RlIHRoYXQgdGhlIHN0YXJ0aW5nIGJyZWFrcG9pbnQgaXMgYWx3YXlzIDAsXG4gICAgICAgICAqIHNvIHdlIG9taXQgYWRkaW5nIDAgdG8gdGhlIHJlc3VsdC5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZFN0ZXAgPSBpc0F0dGVtcHRpbmdEaXNtaXNzV2l0aENhbkRpc21pc3MgPyBjYWxjdWxhdGVTcHJpbmdTdGVwKHN0ZXAgLyBtYXhTdGVwKSA6IHN0ZXA7XG4gICAgICAgIGNvbnN0IGNsYW1wZWRTdGVwID0gY2xhbXAoMC4wMDAxLCBwcm9jZXNzZWRTdGVwLCBtYXhTdGVwKTtcbiAgICAgICAgYW5pbWF0aW9uLnByb2dyZXNzU3RlcChjbGFtcGVkU3RlcCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIHN3aXBpbmcgZG93biBoYWxmIHdheSwgdGhlIHN0YXR1cyBiYXIgc3R5bGVcbiAgICAgICAgICogc2hvdWxkIGJlIHJlc2V0IHRvIGl0cyBkZWZhdWx0IHZhbHVlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXZSB0cmFjayBsYXN0U3RlcCBzbyB0aGF0IHdlIGRvIG5vdCBmaXJlIHRoZXNlXG4gICAgICAgICAqIGZ1bmN0aW9ucyBvbiBldmVyeSBvbk1vdmUsIG9ubHkgd2hlbiB0aGUgdXNlciBoYXNcbiAgICAgICAgICogY3Jvc3NlZCBhIGNlcnRhaW4gdGhyZXNob2xkLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGNsYW1wZWRTdGVwID49IERJU01JU1NfVEhSRVNIT0xEICYmIGxhc3RTdGVwIDwgRElTTUlTU19USFJFU0hPTEQpIHtcbiAgICAgICAgICAgIHNldENhcmRTdGF0dXNCYXJEZWZhdWx0KHN0YXR1c0JhclN0eWxlKTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSG93ZXZlciwgaWYgd2Ugc3dpcGUgYmFjayB1cCwgdGhlbiB0aGVcbiAgICAgICAgICAgICAqIHN0YXR1cyBiYXIgc3R5bGUgc2hvdWxkIGJlIHNldCB0byBoYXZlIGxpZ2h0XG4gICAgICAgICAgICAgKiB0ZXh0IG9uIGEgZGFyayBiYWNrZ3JvdW5kLlxuICAgICAgICAgICAgICovXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2xhbXBlZFN0ZXAgPCBESVNNSVNTX1RIUkVTSE9MRCAmJiBsYXN0U3RlcCA+PSBESVNNSVNTX1RIUkVTSE9MRCkge1xuICAgICAgICAgICAgc2V0Q2FyZFN0YXR1c0JhckRhcmsoKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0U3RlcCA9IGNsYW1wZWRTdGVwO1xuICAgIH07XG4gICAgY29uc3Qgb25FbmQgPSAoZGV0YWlsKSA9PiB7XG4gICAgICAgIGNvbnN0IHZlbG9jaXR5ID0gZGV0YWlsLnZlbG9jaXR5WTtcbiAgICAgICAgY29uc3Qgc3RlcCA9IGRldGFpbC5kZWx0YVkgLyBoZWlnaHQ7XG4gICAgICAgIGNvbnN0IGlzQXR0ZW1wdGluZ0Rpc21pc3NXaXRoQ2FuRGlzbWlzcyA9IHN0ZXAgPj0gMCAmJiBjYW5EaXNtaXNzQmxvY2tzR2VzdHVyZTtcbiAgICAgICAgY29uc3QgbWF4U3RlcCA9IGlzQXR0ZW1wdGluZ0Rpc21pc3NXaXRoQ2FuRGlzbWlzcyA/IGNhbkRpc21pc3NNYXhTdGVwIDogMC45OTk5O1xuICAgICAgICBjb25zdCBwcm9jZXNzZWRTdGVwID0gaXNBdHRlbXB0aW5nRGlzbWlzc1dpdGhDYW5EaXNtaXNzID8gY2FsY3VsYXRlU3ByaW5nU3RlcChzdGVwIC8gbWF4U3RlcCkgOiBzdGVwO1xuICAgICAgICBjb25zdCBjbGFtcGVkU3RlcCA9IGNsYW1wKDAuMDAwMSwgcHJvY2Vzc2VkU3RlcCwgbWF4U3RlcCk7XG4gICAgICAgIGNvbnN0IHRocmVzaG9sZCA9IChkZXRhaWwuZGVsdGFZICsgdmVsb2NpdHkgKiAxMDAwKSAvIGhlaWdodDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGNhbkRpc21pc3MgYmxvY2tzXG4gICAgICAgICAqIHRoZSBzd2lwZSBnZXN0dXJlLCB0aGVuIHRoZVxuICAgICAgICAgKiBhbmltYXRpb24gY2FuIG5ldmVyIGNvbXBsZXRlIHVudGlsXG4gICAgICAgICAqIGNhbkRpc21pc3MgaXMgY2hlY2tlZC5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IHNob3VsZENvbXBsZXRlID0gIWlzQXR0ZW1wdGluZ0Rpc21pc3NXaXRoQ2FuRGlzbWlzcyAmJiB0aHJlc2hvbGQgPj0gRElTTUlTU19USFJFU0hPTEQ7XG4gICAgICAgIGxldCBuZXdTdGVwVmFsdWUgPSBzaG91bGRDb21wbGV0ZSA/IC0xZS0zIDogMC4wMDE7XG4gICAgICAgIGlmICghc2hvdWxkQ29tcGxldGUpIHtcbiAgICAgICAgICAgIGFuaW1hdGlvbi5lYXNpbmcoJ2N1YmljLWJlemllcigxLCAwLCAwLjY4LCAwLjI4KScpO1xuICAgICAgICAgICAgbmV3U3RlcFZhbHVlICs9IGdldFRpbWVHaXZlblByb2dyZXNzaW9uKFswLCAwXSwgWzEsIDBdLCBbMC42OCwgMC4yOF0sIFsxLCAxXSwgY2xhbXBlZFN0ZXApWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYW5pbWF0aW9uLmVhc2luZygnY3ViaWMtYmV6aWVyKDAuMzIsIDAuNzIsIDAsIDEpJyk7XG4gICAgICAgICAgICBuZXdTdGVwVmFsdWUgKz0gZ2V0VGltZUdpdmVuUHJvZ3Jlc3Npb24oWzAsIDBdLCBbMC4zMiwgMC43Ml0sIFswLCAxXSwgWzEsIDFdLCBjbGFtcGVkU3RlcClbMF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBzaG91bGRDb21wbGV0ZVxuICAgICAgICAgICAgPyBjb21wdXRlRHVyYXRpb24oc3RlcCAqIGhlaWdodCwgdmVsb2NpdHkpXG4gICAgICAgICAgICA6IGNvbXB1dGVEdXJhdGlvbigoMSAtIGNsYW1wZWRTdGVwKSAqIGhlaWdodCwgdmVsb2NpdHkpO1xuICAgICAgICBpc09wZW4gPSBzaG91bGRDb21wbGV0ZTtcbiAgICAgICAgZ2VzdHVyZS5lbmFibGUoZmFsc2UpO1xuICAgICAgICBpZiAoY29udGVudEVsKSB7XG4gICAgICAgICAgICByZXNldENvbnRlbnRTY3JvbGxZKGNvbnRlbnRFbCwgaW5pdGlhbFNjcm9sbFkpO1xuICAgICAgICB9XG4gICAgICAgIGFuaW1hdGlvblxuICAgICAgICAgICAgLm9uRmluaXNoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghc2hvdWxkQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICBnZXN0dXJlLmVuYWJsZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5wcm9ncmVzc0VuZChzaG91bGRDb21wbGV0ZSA/IDEgOiAwLCBuZXdTdGVwVmFsdWUsIGR1cmF0aW9uKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRoZSBjYW5EaXNtaXNzIHZhbHVlIGJsb2NrZWQgdGhlIGdlc3R1cmVcbiAgICAgICAgICogZnJvbSBwcm9jZWVkaW5nLCB0aGVuIHdlIHNob3VsZCBpZ25vcmUgd2hhdGV2ZXJcbiAgICAgICAgICogc2hvdWxkQ29tcGxldGUgaXMuIFdoZXRoZXIgb3Igbm90IHRoZSBtb2RhbFxuICAgICAgICAgKiBhbmltYXRpb24gc2hvdWxkIGNvbXBsZXRlIGlzIG5vdyBkZXRlcm1pbmVkIGJ5XG4gICAgICAgICAqIGNhbkRpc21pc3MuXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIHRoZSB1c2VyIHN3aXBlZCA+MjUlIG9mIHRoZSB3YXlcbiAgICAgICAgICogdG8gdGhlIG1heCBzdGVwLCB0aGVuIHdlIHNob3VsZFxuICAgICAgICAgKiBjaGVjayBjYW5EaXNtaXNzLiAyNSUgd2FzIGNob3NlblxuICAgICAgICAgKiB0byBhdm9pZCBhY2NpZGVudGFsIHN3aXBlcy5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChpc0F0dGVtcHRpbmdEaXNtaXNzV2l0aENhbkRpc21pc3MgJiYgY2xhbXBlZFN0ZXAgPiBtYXhTdGVwIC8gNCkge1xuICAgICAgICAgICAgaGFuZGxlQ2FuRGlzbWlzcyhlbCwgYW5pbWF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaG91bGRDb21wbGV0ZSkge1xuICAgICAgICAgICAgb25EaXNtaXNzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGdlc3R1cmUgPSBjcmVhdGVHZXN0dXJlKHtcbiAgICAgICAgZWwsXG4gICAgICAgIGdlc3R1cmVOYW1lOiAnbW9kYWxTd2lwZVRvQ2xvc2UnLFxuICAgICAgICBnZXN0dXJlUHJpb3JpdHk6IE9WRVJMQVlfR0VTVFVSRV9QUklPUklUWSxcbiAgICAgICAgZGlyZWN0aW9uOiAneScsXG4gICAgICAgIHRocmVzaG9sZDogMTAsXG4gICAgICAgIGNhblN0YXJ0LFxuICAgICAgICBvblN0YXJ0LFxuICAgICAgICBvbk1vdmUsXG4gICAgICAgIG9uRW5kLFxuICAgIH0pO1xuICAgIHJldHVybiBnZXN0dXJlO1xufTtcbmNvbnN0IGNvbXB1dGVEdXJhdGlvbiA9IChyZW1haW5pbmcsIHZlbG9jaXR5KSA9PiB7XG4gICAgcmV0dXJuIGNsYW1wKDQwMCwgcmVtYWluaW5nIC8gTWF0aC5hYnModmVsb2NpdHkgKiAxLjEpLCA1MDApO1xufTtcblxuY29uc3QgY3JlYXRlU2hlZXRFbnRlckFuaW1hdGlvbiA9IChvcHRzKSA9PiB7XG4gICAgY29uc3QgeyBjdXJyZW50QnJlYWtwb2ludCwgYmFja2Ryb3BCcmVha3BvaW50LCBleHBhbmRUb1Njcm9sbCB9ID0gb3B0cztcbiAgICAvKipcbiAgICAgKiBJZiB0aGUgYmFja2Ryb3BCcmVha3BvaW50IGlzIHVuZGVmaW5lZCwgdGhlbiB0aGUgYmFja2Ryb3BcbiAgICAgKiBzaG91bGQgYWx3YXlzIGZhZGUgaW4uIElmIHRoZSBiYWNrZHJvcEJyZWFrcG9pbnQgY2FtZSBiZWZvcmUgdGhlXG4gICAgICogY3VycmVudCBicmVha3BvaW50LCB0aGVuIHRoZSBiYWNrZHJvcCBzaG91bGQgYmUgZmFkaW5nIGluLlxuICAgICAqL1xuICAgIGNvbnN0IHNob3VsZFNob3dCYWNrZHJvcCA9IGJhY2tkcm9wQnJlYWtwb2ludCA9PT0gdW5kZWZpbmVkIHx8IGJhY2tkcm9wQnJlYWtwb2ludCA8IGN1cnJlbnRCcmVha3BvaW50O1xuICAgIGNvbnN0IGluaXRpYWxCYWNrZHJvcCA9IHNob3VsZFNob3dCYWNrZHJvcCA/IGBjYWxjKHZhcigtLWJhY2tkcm9wLW9wYWNpdHkpICogJHtjdXJyZW50QnJlYWtwb2ludH0pYCA6ICcwJztcbiAgICBjb25zdCBiYWNrZHJvcEFuaW1hdGlvbiA9IGNyZWF0ZUFuaW1hdGlvbignYmFja2Ryb3BBbmltYXRpb24nKS5mcm9tVG8oJ29wYWNpdHknLCAwLCBpbml0aWFsQmFja2Ryb3ApO1xuICAgIGlmIChzaG91bGRTaG93QmFja2Ryb3ApIHtcbiAgICAgICAgYmFja2Ryb3BBbmltYXRpb25cbiAgICAgICAgICAgIC5iZWZvcmVTdHlsZXMoe1xuICAgICAgICAgICAgJ3BvaW50ZXItZXZlbnRzJzogJ25vbmUnLFxuICAgICAgICB9KVxuICAgICAgICAgICAgLmFmdGVyQ2xlYXJTdHlsZXMoWydwb2ludGVyLWV2ZW50cyddKTtcbiAgICB9XG4gICAgY29uc3Qgd3JhcHBlckFuaW1hdGlvbiA9IGNyZWF0ZUFuaW1hdGlvbignd3JhcHBlckFuaW1hdGlvbicpLmtleWZyYW1lcyhbXG4gICAgICAgIHsgb2Zmc2V0OiAwLCBvcGFjaXR5OiAxLCB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKDEwMCUpJyB9LFxuICAgICAgICB7IG9mZnNldDogMSwgb3BhY2l0eTogMSwgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgkezEwMCAtIGN1cnJlbnRCcmVha3BvaW50ICogMTAwfSUpYCB9LFxuICAgIF0pO1xuICAgIC8qKlxuICAgICAqIFRoaXMgYWxsb3dzIHRoZSBjb250ZW50IHRvIGJlIHNjcm9sbGFibGUgYXQgYW55IGJyZWFrcG9pbnQuXG4gICAgICovXG4gICAgY29uc3QgY29udGVudEFuaW1hdGlvbiA9ICFleHBhbmRUb1Njcm9sbFxuICAgICAgICA/IGNyZWF0ZUFuaW1hdGlvbignY29udGVudEFuaW1hdGlvbicpLmtleWZyYW1lcyhbXG4gICAgICAgICAgICB7IG9mZnNldDogMCwgb3BhY2l0eTogMSwgbWF4SGVpZ2h0OiBgJHsoMSAtIGN1cnJlbnRCcmVha3BvaW50KSAqIDEwMH0lYCB9LFxuICAgICAgICAgICAgeyBvZmZzZXQ6IDEsIG9wYWNpdHk6IDEsIG1heEhlaWdodDogYCR7Y3VycmVudEJyZWFrcG9pbnQgKiAxMDB9JWAgfSxcbiAgICAgICAgXSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHsgd3JhcHBlckFuaW1hdGlvbiwgYmFja2Ryb3BBbmltYXRpb24sIGNvbnRlbnRBbmltYXRpb24gfTtcbn07XG5jb25zdCBjcmVhdGVTaGVldExlYXZlQW5pbWF0aW9uID0gKG9wdHMpID0+IHtcbiAgICBjb25zdCB7IGN1cnJlbnRCcmVha3BvaW50LCBiYWNrZHJvcEJyZWFrcG9pbnQgfSA9IG9wdHM7XG4gICAgLyoqXG4gICAgICogQmFja2Ryb3AgZG9lcyBub3QgYWx3YXlzIGZhZGUgaW4gZnJvbSAwIHRvIDEgaWYgYmFja2Ryb3BCcmVha3BvaW50XG4gICAgICogaXMgZGVmaW5lZCwgc28gd2UgbmVlZCB0byBhY2NvdW50IGZvciB0aGF0IG9mZnNldCBieSBmaWd1cmluZyBvdXRcbiAgICAgKiB3aGF0IHRoZSBjdXJyZW50IGJhY2tkcm9wIHZhbHVlIHNob3VsZCBiZS5cbiAgICAgKi9cbiAgICBjb25zdCBiYWNrZHJvcFZhbHVlID0gYGNhbGModmFyKC0tYmFja2Ryb3Atb3BhY2l0eSkgKiAke2dldEJhY2tkcm9wVmFsdWVGb3JTaGVldChjdXJyZW50QnJlYWtwb2ludCwgYmFja2Ryb3BCcmVha3BvaW50KX0pYDtcbiAgICBjb25zdCBkZWZhdWx0QmFja2Ryb3AgPSBbXG4gICAgICAgIHsgb2Zmc2V0OiAwLCBvcGFjaXR5OiBiYWNrZHJvcFZhbHVlIH0sXG4gICAgICAgIHsgb2Zmc2V0OiAxLCBvcGFjaXR5OiAwIH0sXG4gICAgXTtcbiAgICBjb25zdCBjdXN0b21CYWNrZHJvcCA9IFtcbiAgICAgICAgeyBvZmZzZXQ6IDAsIG9wYWNpdHk6IGJhY2tkcm9wVmFsdWUgfSxcbiAgICAgICAgeyBvZmZzZXQ6IGJhY2tkcm9wQnJlYWtwb2ludCwgb3BhY2l0eTogMCB9LFxuICAgICAgICB7IG9mZnNldDogMSwgb3BhY2l0eTogMCB9LFxuICAgIF07XG4gICAgY29uc3QgYmFja2Ryb3BBbmltYXRpb24gPSBjcmVhdGVBbmltYXRpb24oJ2JhY2tkcm9wQW5pbWF0aW9uJykua2V5ZnJhbWVzKGJhY2tkcm9wQnJlYWtwb2ludCAhPT0gMCA/IGN1c3RvbUJhY2tkcm9wIDogZGVmYXVsdEJhY2tkcm9wKTtcbiAgICBjb25zdCB3cmFwcGVyQW5pbWF0aW9uID0gY3JlYXRlQW5pbWF0aW9uKCd3cmFwcGVyQW5pbWF0aW9uJykua2V5ZnJhbWVzKFtcbiAgICAgICAgeyBvZmZzZXQ6IDAsIG9wYWNpdHk6IDEsIHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoJHsxMDAgLSBjdXJyZW50QnJlYWtwb2ludCAqIDEwMH0lKWAgfSxcbiAgICAgICAgeyBvZmZzZXQ6IDEsIG9wYWNpdHk6IDEsIHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoMTAwJSlgIH0sXG4gICAgXSk7XG4gICAgcmV0dXJuIHsgd3JhcHBlckFuaW1hdGlvbiwgYmFja2Ryb3BBbmltYXRpb24gfTtcbn07XG5cbmNvbnN0IGNyZWF0ZUVudGVyQW5pbWF0aW9uJDEgPSAoKSA9PiB7XG4gICAgY29uc3QgYmFja2Ryb3BBbmltYXRpb24gPSBjcmVhdGVBbmltYXRpb24oKVxuICAgICAgICAuZnJvbVRvKCdvcGFjaXR5JywgMC4wMSwgJ3ZhcigtLWJhY2tkcm9wLW9wYWNpdHkpJylcbiAgICAgICAgLmJlZm9yZVN0eWxlcyh7XG4gICAgICAgICdwb2ludGVyLWV2ZW50cyc6ICdub25lJyxcbiAgICB9KVxuICAgICAgICAuYWZ0ZXJDbGVhclN0eWxlcyhbJ3BvaW50ZXItZXZlbnRzJ10pO1xuICAgIGNvbnN0IHdyYXBwZXJBbmltYXRpb24gPSBjcmVhdGVBbmltYXRpb24oKS5mcm9tVG8oJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVZKDEwMHZoKScsICd0cmFuc2xhdGVZKDB2aCknKTtcbiAgICByZXR1cm4geyBiYWNrZHJvcEFuaW1hdGlvbiwgd3JhcHBlckFuaW1hdGlvbiwgY29udGVudEFuaW1hdGlvbjogdW5kZWZpbmVkIH07XG59O1xuLyoqXG4gKiBpT1MgTW9kYWwgRW50ZXIgQW5pbWF0aW9uIGZvciB0aGUgQ2FyZCBwcmVzZW50YXRpb24gc3R5bGVcbiAqL1xuY29uc3QgaW9zRW50ZXJBbmltYXRpb24gPSAoYmFzZUVsLCBvcHRzKSA9PiB7XG4gICAgY29uc3QgeyBwcmVzZW50aW5nRWwsIGN1cnJlbnRCcmVha3BvaW50LCBleHBhbmRUb1Njcm9sbCB9ID0gb3B0cztcbiAgICBjb25zdCByb290ID0gZ2V0RWxlbWVudFJvb3QoYmFzZUVsKTtcbiAgICBjb25zdCB7IHdyYXBwZXJBbmltYXRpb24sIGJhY2tkcm9wQW5pbWF0aW9uLCBjb250ZW50QW5pbWF0aW9uIH0gPSBjdXJyZW50QnJlYWtwb2ludCAhPT0gdW5kZWZpbmVkID8gY3JlYXRlU2hlZXRFbnRlckFuaW1hdGlvbihvcHRzKSA6IGNyZWF0ZUVudGVyQW5pbWF0aW9uJDEoKTtcbiAgICBiYWNrZHJvcEFuaW1hdGlvbi5hZGRFbGVtZW50KHJvb3QucXVlcnlTZWxlY3RvcignaW9uLWJhY2tkcm9wJykpO1xuICAgIHdyYXBwZXJBbmltYXRpb24uYWRkRWxlbWVudChyb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbC13cmFwcGVyLCAubW9kYWwtc2hhZG93JykpLmJlZm9yZVN0eWxlcyh7IG9wYWNpdHk6IDEgfSk7XG4gICAgLy8gVGhlIGNvbnRlbnQgYW5pbWF0aW9uIGlzIG9ubHkgYWRkZWQgaWYgc2Nyb2xsaW5nIGlzIGVuYWJsZWQgZm9yXG4gICAgLy8gYWxsIHRoZSBicmVha3BvaW50cy5cbiAgICAhZXhwYW5kVG9TY3JvbGwgJiYgKGNvbnRlbnRBbmltYXRpb24gPT09IG51bGwgfHwgY29udGVudEFuaW1hdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGVudEFuaW1hdGlvbi5hZGRFbGVtZW50KGJhc2VFbC5xdWVyeVNlbGVjdG9yKCcuaW9uLXBhZ2UnKSkpO1xuICAgIGNvbnN0IGJhc2VBbmltYXRpb24gPSBjcmVhdGVBbmltYXRpb24oJ2VudGVyaW5nLWJhc2UnKVxuICAgICAgICAuYWRkRWxlbWVudChiYXNlRWwpXG4gICAgICAgIC5lYXNpbmcoJ2N1YmljLWJlemllcigwLjMyLDAuNzIsMCwxKScpXG4gICAgICAgIC5kdXJhdGlvbig1MDApXG4gICAgICAgIC5hZGRBbmltYXRpb24oW3dyYXBwZXJBbmltYXRpb25dKTtcbiAgICBpZiAoY29udGVudEFuaW1hdGlvbikge1xuICAgICAgICBiYXNlQW5pbWF0aW9uLmFkZEFuaW1hdGlvbihjb250ZW50QW5pbWF0aW9uKTtcbiAgICB9XG4gICAgaWYgKHByZXNlbnRpbmdFbCkge1xuICAgICAgICBjb25zdCBpc01vYmlsZSA9IHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4O1xuICAgICAgICBjb25zdCBoYXNDYXJkTW9kYWwgPSBwcmVzZW50aW5nRWwudGFnTmFtZSA9PT0gJ0lPTi1NT0RBTCcgJiYgcHJlc2VudGluZ0VsLnByZXNlbnRpbmdFbGVtZW50ICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHByZXNlbnRpbmdFbFJvb3QgPSBnZXRFbGVtZW50Um9vdChwcmVzZW50aW5nRWwpO1xuICAgICAgICBjb25zdCBwcmVzZW50aW5nQW5pbWF0aW9uID0gY3JlYXRlQW5pbWF0aW9uKCkuYmVmb3JlU3R5bGVzKHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMCknLFxuICAgICAgICAgICAgJ3RyYW5zZm9ybS1vcmlnaW4nOiAndG9wIGNlbnRlcicsXG4gICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBib2R5RWwgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgICBpZiAoaXNNb2JpbGUpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRmFsbGJhY2sgZm9yIGJyb3dzZXJzIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCBgbWF4KClgIChleDogRmlyZWZveClcbiAgICAgICAgICAgICAqIE5vIG5lZWQgdG8gd29ycnkgYWJvdXQgc3RhdHVzYmFyIHBhZGRpbmcgc2luY2UgZW5naW5lcyBsaWtlIEdlY2tvXG4gICAgICAgICAgICAgKiBhcmUgbm90IHVzZWQgYXMgdGhlIGVuZ2luZSBmb3Igc3RhbmRhbG9uZSBDb3Jkb3ZhL0NhcGFjaXRvciBhcHBzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybU9mZnNldCA9ICFDU1Muc3VwcG9ydHMoJ3dpZHRoJywgJ21heCgwcHgsIDFweCknKSA/ICczMHB4JyA6ICdtYXgoMzBweCwgdmFyKC0taW9uLXNhZmUtYXJlYS10b3ApKSc7XG4gICAgICAgICAgICBjb25zdCBtb2RhbFRyYW5zZm9ybSA9IGhhc0NhcmRNb2RhbCA/ICctMTBweCcgOiB0cmFuc2Zvcm1PZmZzZXQ7XG4gICAgICAgICAgICBjb25zdCB0b1ByZXNlbnRpbmdTY2FsZSA9IFN3aXBlVG9DbG9zZURlZmF1bHRzLk1JTl9QUkVTRU5USU5HX1NDQUxFO1xuICAgICAgICAgICAgY29uc3QgZmluYWxUcmFuc2Zvcm0gPSBgdHJhbnNsYXRlWSgke21vZGFsVHJhbnNmb3JtfSkgc2NhbGUoJHt0b1ByZXNlbnRpbmdTY2FsZX0pYDtcbiAgICAgICAgICAgIHByZXNlbnRpbmdBbmltYXRpb25cbiAgICAgICAgICAgICAgICAuYWZ0ZXJTdHlsZXMoe1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogZmluYWxUcmFuc2Zvcm0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5iZWZvcmVBZGRXcml0ZSgoKSA9PiBib2R5RWwuc3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtY29sb3InLCAnYmxhY2snKSlcbiAgICAgICAgICAgICAgICAuYWRkRWxlbWVudChwcmVzZW50aW5nRWwpXG4gICAgICAgICAgICAgICAgLmtleWZyYW1lcyhbXG4gICAgICAgICAgICAgICAgeyBvZmZzZXQ6IDAsIGZpbHRlcjogJ2NvbnRyYXN0KDEpJywgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgwcHgpIHNjYWxlKDEpJywgYm9yZGVyUmFkaXVzOiAnMHB4JyB9LFxuICAgICAgICAgICAgICAgIHsgb2Zmc2V0OiAxLCBmaWx0ZXI6ICdjb250cmFzdCgwLjg1KScsIHRyYW5zZm9ybTogZmluYWxUcmFuc2Zvcm0sIGJvcmRlclJhZGl1czogJzEwcHggMTBweCAwIDAnIH0sXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGJhc2VBbmltYXRpb24uYWRkQW5pbWF0aW9uKHByZXNlbnRpbmdBbmltYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYmFzZUFuaW1hdGlvbi5hZGRBbmltYXRpb24oYmFja2Ryb3BBbmltYXRpb24pO1xuICAgICAgICAgICAgaWYgKCFoYXNDYXJkTW9kYWwpIHtcbiAgICAgICAgICAgICAgICB3cmFwcGVyQW5pbWF0aW9uLmZyb21Ubygnb3BhY2l0eScsICcwJywgJzEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvUHJlc2VudGluZ1NjYWxlID0gaGFzQ2FyZE1vZGFsID8gU3dpcGVUb0Nsb3NlRGVmYXVsdHMuTUlOX1BSRVNFTlRJTkdfU0NBTEUgOiAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsVHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoLTEwcHgpIHNjYWxlKCR7dG9QcmVzZW50aW5nU2NhbGV9KWA7XG4gICAgICAgICAgICAgICAgcHJlc2VudGluZ0FuaW1hdGlvblxuICAgICAgICAgICAgICAgICAgICAuYWZ0ZXJTdHlsZXMoe1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IGZpbmFsVHJhbnNmb3JtLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5hZGRFbGVtZW50KHByZXNlbnRpbmdFbFJvb3QucXVlcnlTZWxlY3RvcignLm1vZGFsLXdyYXBwZXInKSlcbiAgICAgICAgICAgICAgICAgICAgLmtleWZyYW1lcyhbXG4gICAgICAgICAgICAgICAgICAgIHsgb2Zmc2V0OiAwLCBmaWx0ZXI6ICdjb250cmFzdCgxKScsIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMCkgc2NhbGUoMSknIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgb2Zmc2V0OiAxLCBmaWx0ZXI6ICdjb250cmFzdCgwLjg1KScsIHRyYW5zZm9ybTogZmluYWxUcmFuc2Zvcm0gfSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGFkb3dBbmltYXRpb24gPSBjcmVhdGVBbmltYXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuYWZ0ZXJTdHlsZXMoe1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IGZpbmFsVHJhbnNmb3JtLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5hZGRFbGVtZW50KHByZXNlbnRpbmdFbFJvb3QucXVlcnlTZWxlY3RvcignLm1vZGFsLXNoYWRvdycpKVxuICAgICAgICAgICAgICAgICAgICAua2V5ZnJhbWVzKFtcbiAgICAgICAgICAgICAgICAgICAgeyBvZmZzZXQ6IDAsIG9wYWNpdHk6ICcxJywgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgwKSBzY2FsZSgxKScgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBvZmZzZXQ6IDEsIG9wYWNpdHk6ICcwJywgdHJhbnNmb3JtOiBmaW5hbFRyYW5zZm9ybSB9LFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIGJhc2VBbmltYXRpb24uYWRkQW5pbWF0aW9uKFtwcmVzZW50aW5nQW5pbWF0aW9uLCBzaGFkb3dBbmltYXRpb25dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYmFzZUFuaW1hdGlvbi5hZGRBbmltYXRpb24oYmFja2Ryb3BBbmltYXRpb24pO1xuICAgIH1cbiAgICByZXR1cm4gYmFzZUFuaW1hdGlvbjtcbn07XG5cbmNvbnN0IGNyZWF0ZUxlYXZlQW5pbWF0aW9uJDEgPSAoKSA9PiB7XG4gICAgY29uc3QgYmFja2Ryb3BBbmltYXRpb24gPSBjcmVhdGVBbmltYXRpb24oKS5mcm9tVG8oJ29wYWNpdHknLCAndmFyKC0tYmFja2Ryb3Atb3BhY2l0eSknLCAwKTtcbiAgICBjb25zdCB3cmFwcGVyQW5pbWF0aW9uID0gY3JlYXRlQW5pbWF0aW9uKCkuZnJvbVRvKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlWSgwdmgpJywgJ3RyYW5zbGF0ZVkoMTAwdmgpJyk7XG4gICAgcmV0dXJuIHsgYmFja2Ryb3BBbmltYXRpb24sIHdyYXBwZXJBbmltYXRpb24gfTtcbn07XG4vKipcbiAqIGlPUyBNb2RhbCBMZWF2ZSBBbmltYXRpb25cbiAqL1xuY29uc3QgaW9zTGVhdmVBbmltYXRpb24gPSAoYmFzZUVsLCBvcHRzLCBkdXJhdGlvbiA9IDUwMCkgPT4ge1xuICAgIGNvbnN0IHsgcHJlc2VudGluZ0VsLCBjdXJyZW50QnJlYWtwb2ludCB9ID0gb3B0cztcbiAgICBjb25zdCByb290ID0gZ2V0RWxlbWVudFJvb3QoYmFzZUVsKTtcbiAgICBjb25zdCB7IHdyYXBwZXJBbmltYXRpb24sIGJhY2tkcm9wQW5pbWF0aW9uIH0gPSBjdXJyZW50QnJlYWtwb2ludCAhPT0gdW5kZWZpbmVkID8gY3JlYXRlU2hlZXRMZWF2ZUFuaW1hdGlvbihvcHRzKSA6IGNyZWF0ZUxlYXZlQW5pbWF0aW9uJDEoKTtcbiAgICBiYWNrZHJvcEFuaW1hdGlvbi5hZGRFbGVtZW50KHJvb3QucXVlcnlTZWxlY3RvcignaW9uLWJhY2tkcm9wJykpO1xuICAgIHdyYXBwZXJBbmltYXRpb24uYWRkRWxlbWVudChyb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbC13cmFwcGVyLCAubW9kYWwtc2hhZG93JykpLmJlZm9yZVN0eWxlcyh7IG9wYWNpdHk6IDEgfSk7XG4gICAgY29uc3QgYmFzZUFuaW1hdGlvbiA9IGNyZWF0ZUFuaW1hdGlvbignbGVhdmluZy1iYXNlJylcbiAgICAgICAgLmFkZEVsZW1lbnQoYmFzZUVsKVxuICAgICAgICAuZWFzaW5nKCdjdWJpYy1iZXppZXIoMC4zMiwwLjcyLDAsMSknKVxuICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgIC5hZGRBbmltYXRpb24od3JhcHBlckFuaW1hdGlvbik7XG4gICAgaWYgKHByZXNlbnRpbmdFbCkge1xuICAgICAgICBjb25zdCBpc01vYmlsZSA9IHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4O1xuICAgICAgICBjb25zdCBoYXNDYXJkTW9kYWwgPSBwcmVzZW50aW5nRWwudGFnTmFtZSA9PT0gJ0lPTi1NT0RBTCcgJiYgcHJlc2VudGluZ0VsLnByZXNlbnRpbmdFbGVtZW50ICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHByZXNlbnRpbmdFbFJvb3QgPSBnZXRFbGVtZW50Um9vdChwcmVzZW50aW5nRWwpO1xuICAgICAgICBjb25zdCBwcmVzZW50aW5nQW5pbWF0aW9uID0gY3JlYXRlQW5pbWF0aW9uKClcbiAgICAgICAgICAgIC5iZWZvcmVDbGVhclN0eWxlcyhbJ3RyYW5zZm9ybSddKVxuICAgICAgICAgICAgLmFmdGVyQ2xlYXJTdHlsZXMoWyd0cmFuc2Zvcm0nXSlcbiAgICAgICAgICAgIC5vbkZpbmlzaCgoY3VycmVudFN0ZXApID0+IHtcbiAgICAgICAgICAgIC8vIG9ubHkgcmVzZXQgYmFja2dyb3VuZCBjb2xvciBpZiB0aGlzIGlzIHRoZSBsYXN0IGNhcmQtc3R5bGUgbW9kYWxcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3RlcCAhPT0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXNlbnRpbmdFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnb3ZlcmZsb3cnLCAnJyk7XG4gICAgICAgICAgICBjb25zdCBudW1Nb2RhbHMgPSBBcnJheS5mcm9tKGJvZHlFbC5xdWVyeVNlbGVjdG9yQWxsKCdpb24tbW9kYWw6bm90KC5vdmVybGF5LWhpZGRlbiknKSkuZmlsdGVyKChtKSA9PiBtLnByZXNlbnRpbmdFbGVtZW50ICE9PSB1bmRlZmluZWQpLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChudW1Nb2RhbHMgPD0gMSkge1xuICAgICAgICAgICAgICAgIGJvZHlFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1jb2xvcicsICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJvZHlFbCA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIGlmIChpc01vYmlsZSkge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtT2Zmc2V0ID0gIUNTUy5zdXBwb3J0cygnd2lkdGgnLCAnbWF4KDBweCwgMXB4KScpID8gJzMwcHgnIDogJ21heCgzMHB4LCB2YXIoLS1pb24tc2FmZS1hcmVhLXRvcCkpJztcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsVHJhbnNmb3JtID0gaGFzQ2FyZE1vZGFsID8gJy0xMHB4JyA6IHRyYW5zZm9ybU9mZnNldDtcbiAgICAgICAgICAgIGNvbnN0IHRvUHJlc2VudGluZ1NjYWxlID0gU3dpcGVUb0Nsb3NlRGVmYXVsdHMuTUlOX1BSRVNFTlRJTkdfU0NBTEU7XG4gICAgICAgICAgICBjb25zdCBmaW5hbFRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKCR7bW9kYWxUcmFuc2Zvcm19KSBzY2FsZSgke3RvUHJlc2VudGluZ1NjYWxlfSlgO1xuICAgICAgICAgICAgcHJlc2VudGluZ0FuaW1hdGlvbi5hZGRFbGVtZW50KHByZXNlbnRpbmdFbCkua2V5ZnJhbWVzKFtcbiAgICAgICAgICAgICAgICB7IG9mZnNldDogMCwgZmlsdGVyOiAnY29udHJhc3QoMC44NSknLCB0cmFuc2Zvcm06IGZpbmFsVHJhbnNmb3JtLCBib3JkZXJSYWRpdXM6ICcxMHB4IDEwcHggMCAwJyB9LFxuICAgICAgICAgICAgICAgIHsgb2Zmc2V0OiAxLCBmaWx0ZXI6ICdjb250cmFzdCgxKScsIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMHB4KSBzY2FsZSgxKScsIGJvcmRlclJhZGl1czogJzBweCcgfSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgYmFzZUFuaW1hdGlvbi5hZGRBbmltYXRpb24ocHJlc2VudGluZ0FuaW1hdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBiYXNlQW5pbWF0aW9uLmFkZEFuaW1hdGlvbihiYWNrZHJvcEFuaW1hdGlvbik7XG4gICAgICAgICAgICBpZiAoIWhhc0NhcmRNb2RhbCkge1xuICAgICAgICAgICAgICAgIHdyYXBwZXJBbmltYXRpb24uZnJvbVRvKCdvcGFjaXR5JywgJzEnLCAnMCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9QcmVzZW50aW5nU2NhbGUgPSBoYXNDYXJkTW9kYWwgPyBTd2lwZVRvQ2xvc2VEZWZhdWx0cy5NSU5fUFJFU0VOVElOR19TQ0FMRSA6IDE7XG4gICAgICAgICAgICAgICAgY29uc3QgZmluYWxUcmFuc2Zvcm0gPSBgdHJhbnNsYXRlWSgtMTBweCkgc2NhbGUoJHt0b1ByZXNlbnRpbmdTY2FsZX0pYDtcbiAgICAgICAgICAgICAgICBwcmVzZW50aW5nQW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICAgIC5hZGRFbGVtZW50KHByZXNlbnRpbmdFbFJvb3QucXVlcnlTZWxlY3RvcignLm1vZGFsLXdyYXBwZXInKSlcbiAgICAgICAgICAgICAgICAgICAgLmFmdGVyU3R5bGVzKHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMCwgMCwgMCknLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5rZXlmcmFtZXMoW1xuICAgICAgICAgICAgICAgICAgICB7IG9mZnNldDogMCwgZmlsdGVyOiAnY29udHJhc3QoMC44NSknLCB0cmFuc2Zvcm06IGZpbmFsVHJhbnNmb3JtIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgb2Zmc2V0OiAxLCBmaWx0ZXI6ICdjb250cmFzdCgxKScsIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMCkgc2NhbGUoMSknIH0sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hhZG93QW5pbWF0aW9uID0gY3JlYXRlQW5pbWF0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgLmFkZEVsZW1lbnQocHJlc2VudGluZ0VsUm9vdC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtc2hhZG93JykpXG4gICAgICAgICAgICAgICAgICAgIC5hZnRlclN0eWxlcyh7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMCkgc2NhbGUoMSknLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5rZXlmcmFtZXMoW1xuICAgICAgICAgICAgICAgICAgICB7IG9mZnNldDogMCwgb3BhY2l0eTogJzAnLCB0cmFuc2Zvcm06IGZpbmFsVHJhbnNmb3JtIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgb2Zmc2V0OiAxLCBvcGFjaXR5OiAnMScsIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMCkgc2NhbGUoMSknIH0sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgYmFzZUFuaW1hdGlvbi5hZGRBbmltYXRpb24oW3ByZXNlbnRpbmdBbmltYXRpb24sIHNoYWRvd0FuaW1hdGlvbl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBiYXNlQW5pbWF0aW9uLmFkZEFuaW1hdGlvbihiYWNrZHJvcEFuaW1hdGlvbik7XG4gICAgfVxuICAgIHJldHVybiBiYXNlQW5pbWF0aW9uO1xufTtcblxuY29uc3QgY3JlYXRlRW50ZXJBbmltYXRpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgYmFja2Ryb3BBbmltYXRpb24gPSBjcmVhdGVBbmltYXRpb24oKVxuICAgICAgICAuZnJvbVRvKCdvcGFjaXR5JywgMC4wMSwgJ3ZhcigtLWJhY2tkcm9wLW9wYWNpdHkpJylcbiAgICAgICAgLmJlZm9yZVN0eWxlcyh7XG4gICAgICAgICdwb2ludGVyLWV2ZW50cyc6ICdub25lJyxcbiAgICB9KVxuICAgICAgICAuYWZ0ZXJDbGVhclN0eWxlcyhbJ3BvaW50ZXItZXZlbnRzJ10pO1xuICAgIGNvbnN0IHdyYXBwZXJBbmltYXRpb24gPSBjcmVhdGVBbmltYXRpb24oKS5rZXlmcmFtZXMoW1xuICAgICAgICB7IG9mZnNldDogMCwgb3BhY2l0eTogMC4wMSwgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSg0MHB4KScgfSxcbiAgICAgICAgeyBvZmZzZXQ6IDEsIG9wYWNpdHk6IDEsIHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoMHB4KWAgfSxcbiAgICBdKTtcbiAgICByZXR1cm4geyBiYWNrZHJvcEFuaW1hdGlvbiwgd3JhcHBlckFuaW1hdGlvbiwgY29udGVudEFuaW1hdGlvbjogdW5kZWZpbmVkIH07XG59O1xuLyoqXG4gKiBNZCBNb2RhbCBFbnRlciBBbmltYXRpb25cbiAqL1xuY29uc3QgbWRFbnRlckFuaW1hdGlvbiA9IChiYXNlRWwsIG9wdHMpID0+IHtcbiAgICBjb25zdCB7IGN1cnJlbnRCcmVha3BvaW50LCBleHBhbmRUb1Njcm9sbCB9ID0gb3B0cztcbiAgICBjb25zdCByb290ID0gZ2V0RWxlbWVudFJvb3QoYmFzZUVsKTtcbiAgICBjb25zdCB7IHdyYXBwZXJBbmltYXRpb24sIGJhY2tkcm9wQW5pbWF0aW9uLCBjb250ZW50QW5pbWF0aW9uIH0gPSBjdXJyZW50QnJlYWtwb2ludCAhPT0gdW5kZWZpbmVkID8gY3JlYXRlU2hlZXRFbnRlckFuaW1hdGlvbihvcHRzKSA6IGNyZWF0ZUVudGVyQW5pbWF0aW9uKCk7XG4gICAgYmFja2Ryb3BBbmltYXRpb24uYWRkRWxlbWVudChyb290LnF1ZXJ5U2VsZWN0b3IoJ2lvbi1iYWNrZHJvcCcpKTtcbiAgICB3cmFwcGVyQW5pbWF0aW9uLmFkZEVsZW1lbnQocm9vdC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtd3JhcHBlcicpKTtcbiAgICAvLyBUaGUgY29udGVudCBhbmltYXRpb24gaXMgb25seSBhZGRlZCBpZiBzY3JvbGxpbmcgaXMgZW5hYmxlZCBmb3JcbiAgICAvLyBhbGwgdGhlIGJyZWFrcG9pbnRzLlxuICAgICFleHBhbmRUb1Njcm9sbCAmJiAoY29udGVudEFuaW1hdGlvbiA9PT0gbnVsbCB8fCBjb250ZW50QW5pbWF0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb250ZW50QW5pbWF0aW9uLmFkZEVsZW1lbnQoYmFzZUVsLnF1ZXJ5U2VsZWN0b3IoJy5pb24tcGFnZScpKSk7XG4gICAgY29uc3QgYmFzZUFuaW1hdGlvbiA9IGNyZWF0ZUFuaW1hdGlvbigpXG4gICAgICAgIC5hZGRFbGVtZW50KGJhc2VFbClcbiAgICAgICAgLmVhc2luZygnY3ViaWMtYmV6aWVyKDAuMzYsMC42NiwwLjA0LDEpJylcbiAgICAgICAgLmR1cmF0aW9uKDI4MClcbiAgICAgICAgLmFkZEFuaW1hdGlvbihbYmFja2Ryb3BBbmltYXRpb24sIHdyYXBwZXJBbmltYXRpb25dKTtcbiAgICBpZiAoY29udGVudEFuaW1hdGlvbikge1xuICAgICAgICBiYXNlQW5pbWF0aW9uLmFkZEFuaW1hdGlvbihjb250ZW50QW5pbWF0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIGJhc2VBbmltYXRpb247XG59O1xuXG5jb25zdCBjcmVhdGVMZWF2ZUFuaW1hdGlvbiA9ICgpID0+IHtcbiAgICBjb25zdCBiYWNrZHJvcEFuaW1hdGlvbiA9IGNyZWF0ZUFuaW1hdGlvbigpLmZyb21Ubygnb3BhY2l0eScsICd2YXIoLS1iYWNrZHJvcC1vcGFjaXR5KScsIDApO1xuICAgIGNvbnN0IHdyYXBwZXJBbmltYXRpb24gPSBjcmVhdGVBbmltYXRpb24oKS5rZXlmcmFtZXMoW1xuICAgICAgICB7IG9mZnNldDogMCwgb3BhY2l0eTogMC45OSwgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgwcHgpYCB9LFxuICAgICAgICB7IG9mZnNldDogMSwgb3BhY2l0eTogMCwgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSg0MHB4KScgfSxcbiAgICBdKTtcbiAgICByZXR1cm4geyBiYWNrZHJvcEFuaW1hdGlvbiwgd3JhcHBlckFuaW1hdGlvbiB9O1xufTtcbi8qKlxuICogTWQgTW9kYWwgTGVhdmUgQW5pbWF0aW9uXG4gKi9cbmNvbnN0IG1kTGVhdmVBbmltYXRpb24gPSAoYmFzZUVsLCBvcHRzKSA9PiB7XG4gICAgY29uc3QgeyBjdXJyZW50QnJlYWtwb2ludCB9ID0gb3B0cztcbiAgICBjb25zdCByb290ID0gZ2V0RWxlbWVudFJvb3QoYmFzZUVsKTtcbiAgICBjb25zdCB7IHdyYXBwZXJBbmltYXRpb24sIGJhY2tkcm9wQW5pbWF0aW9uIH0gPSBjdXJyZW50QnJlYWtwb2ludCAhPT0gdW5kZWZpbmVkID8gY3JlYXRlU2hlZXRMZWF2ZUFuaW1hdGlvbihvcHRzKSA6IGNyZWF0ZUxlYXZlQW5pbWF0aW9uKCk7XG4gICAgYmFja2Ryb3BBbmltYXRpb24uYWRkRWxlbWVudChyb290LnF1ZXJ5U2VsZWN0b3IoJ2lvbi1iYWNrZHJvcCcpKTtcbiAgICB3cmFwcGVyQW5pbWF0aW9uLmFkZEVsZW1lbnQocm9vdC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtd3JhcHBlcicpKTtcbiAgICBjb25zdCBiYXNlQW5pbWF0aW9uID0gY3JlYXRlQW5pbWF0aW9uKClcbiAgICAgICAgLmVhc2luZygnY3ViaWMtYmV6aWVyKDAuNDcsMCwwLjc0NSwwLjcxNSknKVxuICAgICAgICAuZHVyYXRpb24oMjAwKVxuICAgICAgICAuYWRkQW5pbWF0aW9uKFtiYWNrZHJvcEFuaW1hdGlvbiwgd3JhcHBlckFuaW1hdGlvbl0pO1xuICAgIHJldHVybiBiYXNlQW5pbWF0aW9uO1xufTtcblxuY29uc3QgY3JlYXRlU2hlZXRHZXN0dXJlID0gKGJhc2VFbCwgYmFja2Ryb3BFbCwgd3JhcHBlckVsLCBpbml0aWFsQnJlYWtwb2ludCwgYmFja2Ryb3BCcmVha3BvaW50LCBhbmltYXRpb24sIGJyZWFrcG9pbnRzID0gW10sIGV4cGFuZFRvU2Nyb2xsLCBnZXRDdXJyZW50QnJlYWtwb2ludCwgb25EaXNtaXNzLCBvbkJyZWFrcG9pbnRDaGFuZ2UpID0+IHtcbiAgICAvLyBEZWZhdWx0cyBmb3IgdGhlIHNoZWV0IHN3aXBlIGFuaW1hdGlvblxuICAgIGNvbnN0IGRlZmF1bHRCYWNrZHJvcCA9IFtcbiAgICAgICAgeyBvZmZzZXQ6IDAsIG9wYWNpdHk6ICd2YXIoLS1iYWNrZHJvcC1vcGFjaXR5KScgfSxcbiAgICAgICAgeyBvZmZzZXQ6IDEsIG9wYWNpdHk6IDAuMDEgfSxcbiAgICBdO1xuICAgIGNvbnN0IGN1c3RvbUJhY2tkcm9wID0gW1xuICAgICAgICB7IG9mZnNldDogMCwgb3BhY2l0eTogJ3ZhcigtLWJhY2tkcm9wLW9wYWNpdHkpJyB9LFxuICAgICAgICB7IG9mZnNldDogMSAtIGJhY2tkcm9wQnJlYWtwb2ludCwgb3BhY2l0eTogMCB9LFxuICAgICAgICB7IG9mZnNldDogMSwgb3BhY2l0eTogMCB9LFxuICAgIF07XG4gICAgY29uc3QgU2hlZXREZWZhdWx0cyA9IHtcbiAgICAgICAgV1JBUFBFUl9LRVlGUkFNRVM6IFtcbiAgICAgICAgICAgIHsgb2Zmc2V0OiAwLCB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKDAlKScgfSxcbiAgICAgICAgICAgIHsgb2Zmc2V0OiAxLCB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKDEwMCUpJyB9LFxuICAgICAgICBdLFxuICAgICAgICBCQUNLRFJPUF9LRVlGUkFNRVM6IGJhY2tkcm9wQnJlYWtwb2ludCAhPT0gMCA/IGN1c3RvbUJhY2tkcm9wIDogZGVmYXVsdEJhY2tkcm9wLFxuICAgICAgICBDT05URU5UX0tFWUZSQU1FUzogW1xuICAgICAgICAgICAgeyBvZmZzZXQ6IDAsIG1heEhlaWdodDogJzEwMCUnIH0sXG4gICAgICAgICAgICB7IG9mZnNldDogMSwgbWF4SGVpZ2h0OiAnMCUnIH0sXG4gICAgICAgIF0sXG4gICAgfTtcbiAgICBjb25zdCBjb250ZW50RWwgPSBiYXNlRWwucXVlcnlTZWxlY3RvcignaW9uLWNvbnRlbnQnKTtcbiAgICBjb25zdCBoZWlnaHQgPSB3cmFwcGVyRWwuY2xpZW50SGVpZ2h0O1xuICAgIGxldCBjdXJyZW50QnJlYWtwb2ludCA9IGluaXRpYWxCcmVha3BvaW50O1xuICAgIGxldCBvZmZzZXQgPSAwO1xuICAgIGxldCBjYW5EaXNtaXNzQmxvY2tzR2VzdHVyZSA9IGZhbHNlO1xuICAgIGxldCBjYWNoZWRTY3JvbGxFbCA9IG51bGw7XG4gICAgbGV0IGNhY2hlZEZvb3RlckVscyA9IG51bGw7XG4gICAgbGV0IGNhY2hlZEZvb3RlcllQb3NpdGlvbiA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRGb290ZXJTdGF0ZSA9IG51bGw7XG4gICAgY29uc3QgY2FuRGlzbWlzc01heFN0ZXAgPSAwLjk1O1xuICAgIGNvbnN0IG1heEJyZWFrcG9pbnQgPSBicmVha3BvaW50c1ticmVha3BvaW50cy5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBtaW5CcmVha3BvaW50ID0gYnJlYWtwb2ludHNbMF07XG4gICAgY29uc3Qgd3JhcHBlckFuaW1hdGlvbiA9IGFuaW1hdGlvbi5jaGlsZEFuaW1hdGlvbnMuZmluZCgoYW5pKSA9PiBhbmkuaWQgPT09ICd3cmFwcGVyQW5pbWF0aW9uJyk7XG4gICAgY29uc3QgYmFja2Ryb3BBbmltYXRpb24gPSBhbmltYXRpb24uY2hpbGRBbmltYXRpb25zLmZpbmQoKGFuaSkgPT4gYW5pLmlkID09PSAnYmFja2Ryb3BBbmltYXRpb24nKTtcbiAgICBjb25zdCBjb250ZW50QW5pbWF0aW9uID0gYW5pbWF0aW9uLmNoaWxkQW5pbWF0aW9ucy5maW5kKChhbmkpID0+IGFuaS5pZCA9PT0gJ2NvbnRlbnRBbmltYXRpb24nKTtcbiAgICBjb25zdCBlbmFibGVCYWNrZHJvcCA9ICgpID0+IHtcbiAgICAgICAgYmFzZUVsLnN0eWxlLnNldFByb3BlcnR5KCdwb2ludGVyLWV2ZW50cycsICdhdXRvJyk7XG4gICAgICAgIGJhY2tkcm9wRWwuc3R5bGUuc2V0UHJvcGVydHkoJ3BvaW50ZXItZXZlbnRzJywgJ2F1dG8nKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gdGhlIGJhY2tkcm9wIGlzIGVuYWJsZWQsIGVsZW1lbnRzIHN1Y2hcbiAgICAgICAgICogYXMgaW5wdXRzIHNob3VsZCBub3QgYmUgZm9jdXNhYmxlIG91dHNpZGVcbiAgICAgICAgICogdGhlIHNoZWV0LlxuICAgICAgICAgKi9cbiAgICAgICAgYmFzZUVsLmNsYXNzTGlzdC5yZW1vdmUoRk9DVVNfVFJBUF9ESVNBQkxFX0NMQVNTKTtcbiAgICB9O1xuICAgIGNvbnN0IGRpc2FibGVCYWNrZHJvcCA9ICgpID0+IHtcbiAgICAgICAgYmFzZUVsLnN0eWxlLnNldFByb3BlcnR5KCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG4gICAgICAgIGJhY2tkcm9wRWwuc3R5bGUuc2V0UHJvcGVydHkoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gdGhlIGJhY2tkcm9wIGlzIGVuYWJsZWQsIGVsZW1lbnRzIHN1Y2hcbiAgICAgICAgICogYXMgaW5wdXRzIHNob3VsZCBub3QgYmUgZm9jdXNhYmxlIG91dHNpZGVcbiAgICAgICAgICogdGhlIHNoZWV0LlxuICAgICAgICAgKiBBZGRpbmcgdGhpcyBjbGFzcyBkaXNhYmxlcyBmb2N1cyB0cmFwcGluZ1xuICAgICAgICAgKiBmb3IgdGhlIHNoZWV0IHRlbXBvcmFyaWx5LlxuICAgICAgICAgKi9cbiAgICAgICAgYmFzZUVsLmNsYXNzTGlzdC5hZGQoRk9DVVNfVFJBUF9ESVNBQkxFX0NMQVNTKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIGZvb3RlciB0byBhbiBhYnNvbHV0ZSBwb3NpdGlvbiB3aGlsZSBtb3ZpbmcgdG8gcHJldmVudFxuICAgICAqIGl0IGZyb20gc2hha2luZyB3aGlsZSB0aGUgc2hlZXQgaXMgYmVpbmcgZHJhZ2dlZC5cbiAgICAgKiBAcGFyYW0gbmV3UG9zaXRpb24gV2hldGhlciB0aGUgZm9vdGVyIGlzIGluIGEgbW92aW5nIG9yIHN0YXRpb25hcnkgcG9zaXRpb24uXG4gICAgICovXG4gICAgY29uc3Qgc3dhcEZvb3RlclBvc2l0aW9uID0gKG5ld1Bvc2l0aW9uKSA9PiB7XG4gICAgICAgIGlmICghY2FjaGVkRm9vdGVyRWxzKSB7XG4gICAgICAgICAgICBjYWNoZWRGb290ZXJFbHMgPSBBcnJheS5mcm9tKGJhc2VFbC5xdWVyeVNlbGVjdG9yQWxsKCdpb24tZm9vdGVyJykpO1xuICAgICAgICAgICAgaWYgKCFjYWNoZWRGb290ZXJFbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBiYXNlRWwucXVlcnlTZWxlY3RvcignLmlvbi1wYWdlJyk7XG4gICAgICAgIGN1cnJlbnRGb290ZXJTdGF0ZSA9IG5ld1Bvc2l0aW9uO1xuICAgICAgICBpZiAobmV3UG9zaXRpb24gPT09ICdzdGF0aW9uYXJ5Jykge1xuICAgICAgICAgICAgY2FjaGVkRm9vdGVyRWxzLmZvckVhY2goKGNhY2hlZEZvb3RlckVsKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgcG9zaXRpb25pbmcgc3R5bGVzIHRvIGFsbG93IG5vcm1hbCBkb2N1bWVudCBmbG93XG4gICAgICAgICAgICAgICAgY2FjaGVkRm9vdGVyRWwuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtZm9vdGVyLW1vdmluZycpO1xuICAgICAgICAgICAgICAgIGNhY2hlZEZvb3RlckVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwb3NpdGlvbicpO1xuICAgICAgICAgICAgICAgIGNhY2hlZEZvb3RlckVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCd3aWR0aCcpO1xuICAgICAgICAgICAgICAgIGNhY2hlZEZvb3RlckVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdoZWlnaHQnKTtcbiAgICAgICAgICAgICAgICBjYWNoZWRGb290ZXJFbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndG9wJyk7XG4gICAgICAgICAgICAgICAgY2FjaGVkRm9vdGVyRWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2xlZnQnKTtcbiAgICAgICAgICAgICAgICBwYWdlID09PSBudWxsIHx8IHBhZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhZ2Uuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctYm90dG9tJyk7XG4gICAgICAgICAgICAgICAgLy8gTW92ZSB0byBwYWdlXG4gICAgICAgICAgICAgICAgcGFnZSA9PT0gbnVsbCB8fCBwYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYWdlLmFwcGVuZENoaWxkKGNhY2hlZEZvb3RlckVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGZvb3RlckhlaWdodHMgPSAwO1xuICAgICAgICAgICAgY2FjaGVkRm9vdGVyRWxzLmZvckVhY2goKGNhY2hlZEZvb3RlckVsLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEdldCBib3RoIHRoZSBmb290ZXIgYW5kIGRvY3VtZW50IGJvZHkgcG9zaXRpb25zXG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGVkRm9vdGVyRWxSZWN0ID0gY2FjaGVkRm9vdGVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9keVJlY3QgPSBkb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgdG90YWwgaGVpZ2h0IG9mIGFsbCBmb290ZXJzXG4gICAgICAgICAgICAgICAgLy8gc28gd2UgY2FuIGFkZCBwYWRkaW5nIHRvIHRoZSBwYWdlIGVsZW1lbnRcbiAgICAgICAgICAgICAgICBmb290ZXJIZWlnaHRzICs9IGNhY2hlZEZvb3RlckVsLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgYWJzb2x1dGUgcG9zaXRpb24gcmVsYXRpdmUgdG8gYm9keVxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gc3VidHJhY3QgdGhlIGJvZHkncyBvZmZzZXRUb3AgdG8gZ2V0IHRydWUgcG9zaXRpb24gd2l0aGluIGRvY3VtZW50LmJvZHlcbiAgICAgICAgICAgICAgICBjb25zdCBhYnNvbHV0ZVRvcCA9IGNhY2hlZEZvb3RlckVsUmVjdC50b3AgLSBib2R5UmVjdC50b3A7XG4gICAgICAgICAgICAgICAgY29uc3QgYWJzb2x1dGVMZWZ0ID0gY2FjaGVkRm9vdGVyRWxSZWN0LmxlZnQgLSBib2R5UmVjdC5sZWZ0O1xuICAgICAgICAgICAgICAgIC8vIENhcHR1cmUgdGhlIGZvb3RlcidzIGN1cnJlbnQgZGltZW5zaW9ucyBhbmQgc3RvcmUgdGhlbSBpbiBDU1MgdmFyaWFibGVzIGZvclxuICAgICAgICAgICAgICAgIC8vIGxhdGVyIHVzZSB3aGVuIGFwcGx5aW5nIGFic29sdXRlIHBvc2l0aW9uaW5nLlxuICAgICAgICAgICAgICAgIGNhY2hlZEZvb3RlckVsLnN0eWxlLnNldFByb3BlcnR5KCctLXBpbm5lZC13aWR0aCcsIGAke2NhY2hlZEZvb3RlckVsLmNsaWVudFdpZHRofXB4YCk7XG4gICAgICAgICAgICAgICAgY2FjaGVkRm9vdGVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tcGlubmVkLWhlaWdodCcsIGAke2NhY2hlZEZvb3RlckVsLmNsaWVudEhlaWdodH1weGApO1xuICAgICAgICAgICAgICAgIGNhY2hlZEZvb3RlckVsLnN0eWxlLnNldFByb3BlcnR5KCctLXBpbm5lZC10b3AnLCBgJHthYnNvbHV0ZVRvcH1weGApO1xuICAgICAgICAgICAgICAgIGNhY2hlZEZvb3RlckVsLnN0eWxlLnNldFByb3BlcnR5KCctLXBpbm5lZC1sZWZ0JywgYCR7YWJzb2x1dGVMZWZ0fXB4YCk7XG4gICAgICAgICAgICAgICAgLy8gT25seSBjYWNoZSB0aGUgZmlyc3QgZm9vdGVyJ3MgWSBwb3NpdGlvblxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgdGhlIHNoZWV0IGhhcyBiZWVuIG1vdmVkIGJlbG93IHRoZSBmb290ZXJcbiAgICAgICAgICAgICAgICAvLyBhbmQgbmVlZHMgdG8gYmUgc3dhcHBlZCBiYWNrIHRvIHN0YXRpb25hcnkgc28gaXQgY29sbGFwc2VzIGNvcnJlY3RseS5cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVkRm9vdGVyWVBvc2l0aW9uID0gYWJzb2x1dGVUb3A7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBoZWFkZXIsIHdlIG5lZWQgdG8gY29tYmluZSB0aGUgaGVhZGVyIGhlaWdodCB3aXRoIHRoZSBmb290ZXIgcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGUgaGVhZGVyIG1vdmVzIHdpdGggdGhlIGRyYWcgaGFuZGxlLCBzbyB3aGVuIGl0IHN0YXJ0cyBvdmVybGFwcGluZyB0aGUgZm9vdGVyLFxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGFjY291bnQgZm9yIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGJhc2VFbC5xdWVyeVNlbGVjdG9yKCdpb24taGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlZEZvb3RlcllQb3NpdGlvbiAtPSBoZWFkZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBBcHBseSB0aGUgcGlubmluZyBvZiBzdHlsZXMgYWZ0ZXIgd2UndmUgY2FsY3VsYXRlZCBldmVyeXRoaW5nXG4gICAgICAgICAgICAvLyBzbyB0aGF0IHdlIGRvbid0IGNhdXNlIGxheW91dHMgdG8gc2hpZnQgd2hpbGUgY2FsY3VsYXRpbmcgdGhlIGZvb3RlciBwb3NpdGlvbnMuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UsIHdpdGggbXVsdGlwbGUgZm9vdGVycyB3ZSdsbCBlbmQgdXAgY2FwdHVyaW5nIHRoZSB3cm9uZyBwb3NpdGlvbnMuXG4gICAgICAgICAgICBjYWNoZWRGb290ZXJFbHMuZm9yRWFjaCgoY2FjaGVkRm9vdGVyRWwpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgcGFkZGluZyB0byB0aGUgcGFyZW50IGVsZW1lbnQgdG8gcHJldmVudCBjb250ZW50IGZyb20gYmVpbmcgaGlkZGVuXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgZm9vdGVyIGlzIHBvc2l0aW9uZWQgYWJzb2x1dGVseS4gVGhpcyBoYXMgdG8gYmUgZG9uZSBiZWZvcmUgd2VcbiAgICAgICAgICAgICAgICAvLyBtYWtlIHRoZSBmb290ZXIgYWJzb2x1dGVseSBwb3NpdGlvbmVkIG9yIHdlIG1heSBhY2NpZGVudGFsbHkgY2F1c2UgdGhlXG4gICAgICAgICAgICAgICAgLy8gc2hlZXQgdG8gc2Nyb2xsLlxuICAgICAgICAgICAgICAgIHBhZ2UgPT09IG51bGwgfHwgcGFnZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFnZS5zdHlsZS5zZXRQcm9wZXJ0eSgncGFkZGluZy1ib3R0b20nLCBgJHtmb290ZXJIZWlnaHRzfXB4YCk7XG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgcG9zaXRpb25pbmcgc3R5bGVzIHRvIGtlZXAgZm9vdGVyIGF0IGJvdHRvbVxuICAgICAgICAgICAgICAgIGNhY2hlZEZvb3RlckVsLmNsYXNzTGlzdC5hZGQoJ21vZGFsLWZvb3Rlci1tb3ZpbmcnKTtcbiAgICAgICAgICAgICAgICAvLyBBcHBseSBvdXIgcHJlc2VydmVkIHN0eWxlcyB0byBwaW4gdGhlIGZvb3RlclxuICAgICAgICAgICAgICAgIGNhY2hlZEZvb3RlckVsLnN0eWxlLnNldFByb3BlcnR5KCdwb3NpdGlvbicsICdhYnNvbHV0ZScpO1xuICAgICAgICAgICAgICAgIGNhY2hlZEZvb3RlckVsLnN0eWxlLnNldFByb3BlcnR5KCd3aWR0aCcsICd2YXIoLS1waW5uZWQtd2lkdGgpJyk7XG4gICAgICAgICAgICAgICAgY2FjaGVkRm9vdGVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJ2hlaWdodCcsICd2YXIoLS1waW5uZWQtaGVpZ2h0KScpO1xuICAgICAgICAgICAgICAgIGNhY2hlZEZvb3RlckVsLnN0eWxlLnNldFByb3BlcnR5KCd0b3AnLCAndmFyKC0tcGlubmVkLXRvcCknKTtcbiAgICAgICAgICAgICAgICBjYWNoZWRGb290ZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnbGVmdCcsICd2YXIoLS1waW5uZWQtbGVmdCknKTtcbiAgICAgICAgICAgICAgICAvLyBNb3ZlIHRoZSBlbGVtZW50IHRvIHRoZSBib2R5IHdoZW4gZXZlcnl0aGluZyBlbHNlIGlzIGRvbmVcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhY2hlZEZvb3RlckVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZnRlciB0aGUgZW50ZXJpbmcgYW5pbWF0aW9uIGNvbXBsZXRlcyxcbiAgICAgKiB3ZSBuZWVkIHRvIHNldCB0aGUgYW5pbWF0aW9uIHRvIGdvIGZyb21cbiAgICAgKiBvZmZzZXQgMCB0byBvZmZzZXQgMSBzbyB0aGF0IHVzZXJzIGNhblxuICAgICAqIHN3aXBlIGluIGFueSBkaXJlY3Rpb24uIFdlIHRoZW4gc2V0IHRoZVxuICAgICAqIGFuaW1hdGlvbiBvZmZzZXQgdG8gdGhlIGN1cnJlbnQgYnJlYWtwb2ludFxuICAgICAqIHNvIHRoZXJlIGlzIG5vIGZsaWNrZXJpbmcuXG4gICAgICovXG4gICAgaWYgKHdyYXBwZXJBbmltYXRpb24gJiYgYmFja2Ryb3BBbmltYXRpb24pIHtcbiAgICAgICAgd3JhcHBlckFuaW1hdGlvbi5rZXlmcmFtZXMoWy4uLlNoZWV0RGVmYXVsdHMuV1JBUFBFUl9LRVlGUkFNRVNdKTtcbiAgICAgICAgYmFja2Ryb3BBbmltYXRpb24ua2V5ZnJhbWVzKFsuLi5TaGVldERlZmF1bHRzLkJBQ0tEUk9QX0tFWUZSQU1FU10pO1xuICAgICAgICBjb250ZW50QW5pbWF0aW9uID09PSBudWxsIHx8IGNvbnRlbnRBbmltYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbnRlbnRBbmltYXRpb24ua2V5ZnJhbWVzKFsuLi5TaGVldERlZmF1bHRzLkNPTlRFTlRfS0VZRlJBTUVTXSk7XG4gICAgICAgIGFuaW1hdGlvbi5wcm9ncmVzc1N0YXJ0KHRydWUsIDEgLSBjdXJyZW50QnJlYWtwb2ludCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBiYWNrZHJvcCBpcyBub3QgZW5hYmxlZCwgdGhlbiBjb250ZW50XG4gICAgICAgICAqIGJlaGluZCBtb2RhbCBzaG91bGQgYmUgY2xpY2thYmxlLiBUbyBkbyB0aGlzLCB3ZSBuZWVkXG4gICAgICAgICAqIHRvIHJlbW92ZSBwb2ludGVyLWV2ZW50cyBmcm9tIGlvbi1tb2RhbCBhcyBhIHdob2xlLlxuICAgICAgICAgKiBpb24tYmFja2Ryb3AgYW5kIC5tb2RhbC13cmFwcGVyIGFsd2F5cyBoYXZlIHBvaW50ZXItZXZlbnRzOiBhdXRvXG4gICAgICAgICAqIGFwcGxpZWQsIHNvIHRoZSBtb2RhbCBjb250ZW50IGNhbiBzdGlsbCBiZSBpbnRlcmFjdGVkIHdpdGguXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBzaG91bGRFbmFibGVCYWNrZHJvcCA9IGN1cnJlbnRCcmVha3BvaW50ID4gYmFja2Ryb3BCcmVha3BvaW50O1xuICAgICAgICBpZiAoc2hvdWxkRW5hYmxlQmFja2Ryb3ApIHtcbiAgICAgICAgICAgIGVuYWJsZUJhY2tkcm9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkaXNhYmxlQmFja2Ryb3AoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoY29udGVudEVsICYmIGN1cnJlbnRCcmVha3BvaW50ICE9PSBtYXhCcmVha3BvaW50ICYmIGV4cGFuZFRvU2Nyb2xsKSB7XG4gICAgICAgIGNvbnRlbnRFbC5zY3JvbGxZID0gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGNhblN0YXJ0ID0gKGRldGFpbCkgPT4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgd2UgYXJlIHN3aXBpbmcgb24gdGhlIGNvbnRlbnQsIHN3aXBpbmcgc2hvdWxkIG9ubHkgYmUgcG9zc2libGUgaWYgdGhlIGNvbnRlbnRcbiAgICAgICAgICogaXMgc2Nyb2xsZWQgYWxsIHRoZSB3YXkgdG8gdGhlIHRvcCBzbyB0aGF0IHdlIGRvIG5vdCBpbnRlcmZlcmUgd2l0aCBzY3JvbGxpbmcuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdlIGNhbm5vdCBhc3N1bWUgdGhhdCB0aGUgYGlvbi1jb250ZW50YCB0YXJnZXQgd2lsbCByZW1haW4gY29uc2lzdGVudCBiZXR3ZWVuIHN3aXBlcy5cbiAgICAgICAgICogRm9yIGV4YW1wbGUsIHdoZW4gdXNpbmcgaW9uLW5hdiB3aXRoaW4gYSBtb2RhbCBpdCBpcyBwb3NzaWJsZSB0byBzd2lwZSwgcHVzaCBhIHZpZXcsXG4gICAgICAgICAqIGFuZCB0aGVuIHN3aXBlIGFnYWluLiBUaGUgdGFyZ2V0IGNvbnRlbnQgd2lsbCBub3QgYmUgdGhlIHNhbWUgYmV0d2VlbiBzd2lwZXMuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBjb250ZW50RWwgPSBmaW5kQ2xvc2VzdElvbkNvbnRlbnQoZGV0YWlsLmV2ZW50LnRhcmdldCk7XG4gICAgICAgIGN1cnJlbnRCcmVha3BvaW50ID0gZ2V0Q3VycmVudEJyZWFrcG9pbnQoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGBleHBhbmRUb1Njcm9sbGAgaXMgZGlzYWJsZWQsIHdlIHNob3VsZCBub3QgYWxsb3cgdGhlIHN3aXBlIGdlc3R1cmVcbiAgICAgICAgICogdG8gc3RhcnQgaWYgdGhlIGNvbnRlbnQgaXMgbm90IHNjcm9sbGVkIHRvIHRoZSB0b3AuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoIWV4cGFuZFRvU2Nyb2xsICYmIGNvbnRlbnRFbCkge1xuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsRWwgPSBpc0lvbkNvbnRlbnQoY29udGVudEVsKSA/IGdldEVsZW1lbnRSb290KGNvbnRlbnRFbCkucXVlcnlTZWxlY3RvcignLmlubmVyLXNjcm9sbCcpIDogY29udGVudEVsO1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbEVsLnNjcm9sbFRvcCA9PT0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudEJyZWFrcG9pbnQgPT09IDEgJiYgY29udGVudEVsKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBtb2RhbCBzaG91bGQgbmV2ZXIgc3dpcGUgdG8gY2xvc2Ugb24gdGhlIGNvbnRlbnQgd2l0aCBhIHJlZnJlc2hlci5cbiAgICAgICAgICAgICAqIE5vdGUgMTogV2UgY2Fubm90IHNvbHZlIHRoaXMgYnkgbWFraW5nIHRoaXMgZ2VzdHVyZSBoYXZlIGEgaGlnaGVyIHByaW9yaXR5IHRoYW5cbiAgICAgICAgICAgICAqIHRoZSByZWZyZXNoZXIgZ2VzdHVyZSBhcyB0aGUgaU9TIG5hdGl2ZSByZWZyZXNoIGdlc3R1cmUgdXNlcyBhIHNjcm9sbCBsaXN0ZW5lciBpblxuICAgICAgICAgICAgICogYWRkaXRpb24gdG8gYSBnZXN0dXJlLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIE5vdGUgMjogRG8gbm90IHVzZSBnZXRTY3JvbGxFbGVtZW50IGhlcmUgYmVjYXVzZSB3ZSBuZWVkIHRoaXMgdG8gYmUgYSBzeW5jaHJvbm91c1xuICAgICAgICAgICAgICogb3BlcmF0aW9uLCBhbmQgZ2V0U2Nyb2xsRWxlbWVudCBpcyBhc3luY2hyb25vdXMuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbEVsID0gaXNJb25Db250ZW50KGNvbnRlbnRFbCkgPyBnZXRFbGVtZW50Um9vdChjb250ZW50RWwpLnF1ZXJ5U2VsZWN0b3IoJy5pbm5lci1zY3JvbGwnKSA6IGNvbnRlbnRFbDtcbiAgICAgICAgICAgIGNvbnN0IGhhc1JlZnJlc2hlckluQ29udGVudCA9ICEhY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJ2lvbi1yZWZyZXNoZXInKTtcbiAgICAgICAgICAgIHJldHVybiAhaGFzUmVmcmVzaGVySW5Db250ZW50ICYmIHNjcm9sbEVsLnNjcm9sbFRvcCA9PT0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIGNvbnN0IG9uU3RhcnQgPSAoZGV0YWlsKSA9PiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBjYW5EaXNtaXNzIGlzIGFueXRoaW5nIG90aGVyIHRoYW4gYHRydWVgXG4gICAgICAgICAqIHRoZW4gdXNlcnMgc2hvdWxkIGJlIGFibGUgdG8gc3dpcGUgZG93blxuICAgICAgICAgKiB1bnRpbCBhIHRocmVzaG9sZCBpcyBoaXQuIEF0IHRoYXQgcG9pbnQsXG4gICAgICAgICAqIHRoZSBjYXJkIG1vZGFsIHNob3VsZCBub3QgcHJvY2VlZCBhbnkgZnVydGhlci5cbiAgICAgICAgICpcbiAgICAgICAgICogY2FuRGlzbWlzcyBpcyBuZXZlciBmaXJlZCB2aWEgZ2VzdHVyZSBpZiB0aGVyZSBpc1xuICAgICAgICAgKiBubyAwIGJyZWFrcG9pbnQuIEhvd2V2ZXIsIGl0IGNhbiBiZSBmaXJlZCBpZiB0aGUgdXNlclxuICAgICAgICAgKiBwcmVzc2VzIEVzYyBvciB0aGUgaGFyZHdhcmUgYmFjayBidXR0b24uXG4gICAgICAgICAqIFRPRE8gKEZXLTkzNylcbiAgICAgICAgICogUmVtb3ZlIHVuZGVmaW5lZCBjaGVja1xuICAgICAgICAgKi9cbiAgICAgICAgY2FuRGlzbWlzc0Jsb2Nrc0dlc3R1cmUgPSBiYXNlRWwuY2FuRGlzbWlzcyAhPT0gdW5kZWZpbmVkICYmIGJhc2VFbC5jYW5EaXNtaXNzICE9PSB0cnVlICYmIG1pbkJyZWFrcG9pbnQgPT09IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWNoZSB0aGUgc2Nyb2xsIGVsZW1lbnQgcmVmZXJlbmNlIHdoZW4gdGhlIGdlc3R1cmUgc3RhcnRzLFxuICAgICAgICAgKiB0aGlzIGFsbG93cyB1cyB0byBhdm9pZCBxdWVyeWluZyB0aGUgRE9NIGZvciB0aGUgdGFyZ2V0IGluIG9uTW92ZSxcbiAgICAgICAgICogd2hpY2ggd291bGQgaW1wYWN0IHBlcmZvcm1hbmNlIHNpZ25pZmljYW50bHkuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoIWV4cGFuZFRvU2Nyb2xsKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRFbCA9IGZpbmRDbG9zZXN0SW9uQ29udGVudChkZXRhaWwuZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgICAgIGNhY2hlZFNjcm9sbEVsID1cbiAgICAgICAgICAgICAgICB0YXJnZXRFbCAmJiBpc0lvbkNvbnRlbnQodGFyZ2V0RWwpID8gZ2V0RWxlbWVudFJvb3QodGFyZ2V0RWwpLnF1ZXJ5U2VsZWN0b3IoJy5pbm5lci1zY3JvbGwnKSA6IHRhcmdldEVsO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBleHBhbmRUb1Njcm9sbCBpcyBkaXNhYmxlZCwgd2UgbmVlZCB0byBzd2FwXG4gICAgICAgICAqIHRoZSBmb290ZXIgcG9zaXRpb24gdG8gbW92aW5nIHNvIHRoYXQgaXQgZG9lc24ndCBzaGFrZVxuICAgICAgICAgKiB3aGlsZSB0aGUgc2hlZXQgaXMgYmVpbmcgZHJhZ2dlZC5cbiAgICAgICAgICovXG4gICAgICAgIGlmICghZXhwYW5kVG9TY3JvbGwpIHtcbiAgICAgICAgICAgIHN3YXBGb290ZXJQb3NpdGlvbignbW92aW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHdlIGFyZSBwdWxsaW5nIGRvd24sIHRoZW4gaXQgaXMgcG9zc2libGUgd2UgYXJlIHB1bGxpbmcgb24gdGhlIGNvbnRlbnQuXG4gICAgICAgICAqIFdlIGRvIG5vdCB3YW50IHNjcm9sbGluZyB0byBoYXBwZW4gYXQgdGhlIHNhbWUgdGltZSBhcyB0aGUgZ2VzdHVyZS5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChkZXRhaWwuZGVsdGFZID4gMCAmJiBjb250ZW50RWwpIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5zY3JvbGxZID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmFmKCgpID0+IHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGlzbWlzc2VzIHRoZSBvcGVuIGtleWJvYXJkIHdoZW4gdGhlIHNoZWV0IGRyYWcgZ2VzdHVyZSBpcyBzdGFydGVkLlxuICAgICAgICAgICAgICogU2V0cyB0aGUgZm9jdXMgb250byB0aGUgbW9kYWwgZWxlbWVudC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgYmFzZUVsLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBhbmltYXRpb24ucHJvZ3Jlc3NTdGFydCh0cnVlLCAxIC0gY3VycmVudEJyZWFrcG9pbnQpO1xuICAgIH07XG4gICAgY29uc3Qgb25Nb3ZlID0gKGRldGFpbCkgPT4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgYGV4cGFuZFRvU2Nyb2xsYCBpcyBkaXNhYmxlZCwgd2UgbmVlZCB0byBzZWUgaWYgd2UncmUgY3VycmVudGx5IGJlbG93XG4gICAgICAgICAqIHRoZSBmb290ZXIgZWxlbWVudCBhbmQgdGhlIGZvb3RlciBpcyBpbiBhIHN0YXRpb25hcnkgcG9zaXRpb24uIElmIHNvLFxuICAgICAgICAgKiB3ZSBuZWVkIHRvIG1ha2UgdGhlIHN0YXRpb25hcnkgdGhlIG9yaWdpbmFsIHBvc2l0aW9uIHNvIHRoYXQgdGhlIGZvb3RlclxuICAgICAgICAgKiBjb2xsYXBzZXMgd2l0aCB0aGUgc2hlZXQuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoIWV4cGFuZFRvU2Nyb2xsICYmIGNhY2hlZEZvb3RlcllQb3NpdGlvbiAhPT0gbnVsbCAmJiBjdXJyZW50Rm9vdGVyU3RhdGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gc3dhcCB0aGUgZm9vdGVyIHBvc2l0aW9uXG4gICAgICAgICAgICBpZiAoZGV0YWlsLmN1cnJlbnRZID49IGNhY2hlZEZvb3RlcllQb3NpdGlvbiAmJiBjdXJyZW50Rm9vdGVyU3RhdGUgPT09ICdtb3ZpbmcnKSB7XG4gICAgICAgICAgICAgICAgc3dhcEZvb3RlclBvc2l0aW9uKCdzdGF0aW9uYXJ5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkZXRhaWwuY3VycmVudFkgPCBjYWNoZWRGb290ZXJZUG9zaXRpb24gJiYgY3VycmVudEZvb3RlclN0YXRlID09PSAnc3RhdGlvbmFyeScpIHtcbiAgICAgICAgICAgICAgICBzd2FwRm9vdGVyUG9zaXRpb24oJ21vdmluZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBgZXhwYW5kVG9TY3JvbGxgIGlzIGRpc2FibGVkLCBhbmQgYW4gdXB3YXJkcyBzd2lwZSBnZXN0dXJlIGlzIGRvbmUgd2l0aGluXG4gICAgICAgICAqIHRoZSBzY3JvbGxhYmxlIGNvbnRlbnQsIHdlIHNob3VsZCBub3QgYWxsb3cgdGhlIHN3aXBlIGdlc3R1cmUgdG8gY29udGludWUuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoIWV4cGFuZFRvU2Nyb2xsICYmIGRldGFpbC5kZWx0YVkgPD0gMCAmJiBjYWNoZWRTY3JvbGxFbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB3ZSBhcmUgcHVsbGluZyBkb3duLCB0aGVuIGl0IGlzIHBvc3NpYmxlIHdlIGFyZSBwdWxsaW5nIG9uIHRoZSBjb250ZW50LlxuICAgICAgICAgKiBXZSBkbyBub3Qgd2FudCBzY3JvbGxpbmcgdG8gaGFwcGVuIGF0IHRoZSBzYW1lIHRpbWUgYXMgdGhlIGdlc3R1cmUuXG4gICAgICAgICAqIFRoaXMgYWNjb3VudHMgZm9yIHdoZW4gdGhlIHVzZXIgc2Nyb2xscyBkb3duLCBzY3JvbGxzIGFsbCB0aGUgd2F5IHVwLCBhbmQgdGhlblxuICAgICAgICAgKiBwdWxscyBkb3duIGFnYWluIHN1Y2ggdGhhdCB0aGUgbW9kYWwgc2hvdWxkIHN0YXJ0IHRvIG1vdmUuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoZGV0YWlsLmRlbHRhWSA+IDAgJiYgY29udGVudEVsKSB7XG4gICAgICAgICAgICBjb250ZW50RWwuc2Nyb2xsWSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHaXZlbiB0aGUgY2hhbmdlIGluIGdlc3R1cmUgcG9zaXRpb24gb24gdGhlIFkgYXhpcyxcbiAgICAgICAgICogY29tcHV0ZSB3aGVyZSB0aGUgb2Zmc2V0IG9mIHRoZSBhbmltYXRpb24gc2hvdWxkIGJlXG4gICAgICAgICAqIHJlbGF0aXZlIHRvIHdoZXJlIHRoZSB1c2VyIGRyYWdnZWQuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBpbml0aWFsU3RlcCA9IDEgLSBjdXJyZW50QnJlYWtwb2ludDtcbiAgICAgICAgY29uc3Qgc2Vjb25kVG9MYXN0QnJlYWtwb2ludCA9IGJyZWFrcG9pbnRzLmxlbmd0aCA+IDEgPyAxIC0gYnJlYWtwb2ludHNbMV0gOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHN0ZXAgPSBpbml0aWFsU3RlcCArIGRldGFpbC5kZWx0YVkgLyBoZWlnaHQ7XG4gICAgICAgIGNvbnN0IGlzQXR0ZW1wdGluZ0Rpc21pc3NXaXRoQ2FuRGlzbWlzcyA9IHNlY29uZFRvTGFzdEJyZWFrcG9pbnQgIT09IHVuZGVmaW5lZCAmJiBzdGVwID49IHNlY29uZFRvTGFzdEJyZWFrcG9pbnQgJiYgY2FuRGlzbWlzc0Jsb2Nrc0dlc3R1cmU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB3ZSBhcmUgYmxvY2tpbmcgdGhlIGdlc3R1cmUgZnJvbSBkaXNtaXNzaW5nLFxuICAgICAgICAgKiBzZXQgdGhlIG1heCBzdGVwIHZhbHVlIHNvIHRoYXQgdGhlIHNoZWV0IGNhbm5vdCBiZVxuICAgICAgICAgKiBjb21wbGV0ZWx5IGhpZGRlbi5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IG1heFN0ZXAgPSBpc0F0dGVtcHRpbmdEaXNtaXNzV2l0aENhbkRpc21pc3MgPyBjYW5EaXNtaXNzTWF4U3RlcCA6IDAuOTk5OTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHdlIGFyZSBibG9ja2luZyB0aGUgZ2VzdHVyZSBmcm9tXG4gICAgICAgICAqIGRpc21pc3NpbmcsIGNhbGN1bGF0ZSB0aGUgc3ByaW5nIG1vZGlmaWVyIHZhbHVlXG4gICAgICAgICAqIHRoaXMgd2lsbCBiZSBhZGRlZCB0byB0aGUgc3RhcnRpbmcgYnJlYWtwb2ludFxuICAgICAgICAgKiB2YWx1ZSB0byBnaXZlIHRoZSBnZXN0dXJlIGEgc3ByaW5nLWxpa2UgZmVlbGluZy5cbiAgICAgICAgICogTm90ZSB0aGF0IHdoZW4gaXNBdHRlbXB0aW5nRGlzbWlzc1dpdGhDYW5EaXNtaXNzIGlzIHRydWUsXG4gICAgICAgICAqIHRoZSBtb2RpZmllciBpcyBhbHdheXMgYWRkZWQgdG8gdGhlIGJyZWFrcG9pbnQgdGhhdFxuICAgICAgICAgKiBhcHBlYXJzIHJpZ2h0IGFmdGVyIHRoZSAwIGJyZWFrcG9pbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIE5vdGUgdGhhdCB0aGlzIG1vZGlmaWVyIGlzIGVzc2VudGlhbGx5IHRoZSBwcm9ncmVzc2lvblxuICAgICAgICAgKiBiZXR3ZWVuIHNlY29uZFRvTGFzdEJyZWFrcG9pbnQgYW5kIG1heFN0ZXAgd2hpY2ggaXNcbiAgICAgICAgICogd2h5IHdlIHN1YnRyYWN0IHNlY29uZFRvTGFzdEJyZWFrcG9pbnQuIFRoaXMgbGV0cyB1cyBnZXRcbiAgICAgICAgICogdGhlIHJlc3VsdCBhcyBhIHZhbHVlIGZyb20gMCB0byAxLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgcHJvY2Vzc2VkU3RlcCA9IGlzQXR0ZW1wdGluZ0Rpc21pc3NXaXRoQ2FuRGlzbWlzcyAmJiBzZWNvbmRUb0xhc3RCcmVha3BvaW50ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gc2Vjb25kVG9MYXN0QnJlYWtwb2ludCArXG4gICAgICAgICAgICAgICAgY2FsY3VsYXRlU3ByaW5nU3RlcCgoc3RlcCAtIHNlY29uZFRvTGFzdEJyZWFrcG9pbnQpIC8gKG1heFN0ZXAgLSBzZWNvbmRUb0xhc3RCcmVha3BvaW50KSlcbiAgICAgICAgICAgIDogc3RlcDtcbiAgICAgICAgb2Zmc2V0ID0gY2xhbXAoMC4wMDAxLCBwcm9jZXNzZWRTdGVwLCBtYXhTdGVwKTtcbiAgICAgICAgYW5pbWF0aW9uLnByb2dyZXNzU3RlcChvZmZzZXQpO1xuICAgIH07XG4gICAgY29uc3Qgb25FbmQgPSAoZGV0YWlsKSA9PiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBleHBhbmRUb1Njcm9sbCBpcyBkaXNhYmxlZCwgd2Ugc2hvdWxkIG5vdCBhbGxvdyB0aGUgbW92ZVNoZWV0VG9CcmVha3BvaW50XG4gICAgICAgICAqIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBpZiB0aGUgdXNlciBpcyB0cnlpbmcgdG8gc3dpcGUgY29udGVudCB1cHdhcmRzIGFuZCB0aGUgY29udGVudFxuICAgICAgICAgKiBpcyBub3Qgc2Nyb2xsZWQgdG8gdGhlIHRvcC5cbiAgICAgICAgICovXG4gICAgICAgIGlmICghZXhwYW5kVG9TY3JvbGwgJiYgZGV0YWlsLmRlbHRhWSA8PSAwICYmIGNhY2hlZFNjcm9sbEVsICYmIGNhY2hlZFNjcm9sbEVsLnNjcm9sbFRvcCA+IDApIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSWYgZXhwYW5kIHRvIHNjcm9sbCBpcyBkaXNhYmxlZCwgd2UgbmVlZCB0byBtYWtlIHN1cmUgd2Ugc3dhcCB0aGUgZm9vdGVyIHBvc2l0aW9uXG4gICAgICAgICAgICAgKiBiYWNrIHRvIHN0YXRpb25hcnkgc28gdGhhdCBpdCB3aWxsIGNvbGxhcHNlIGNvcnJlY3RseSBpZiB0aGUgbW9kYWwgaXMgZGlzbWlzc2VkIHdpdGhvdXRcbiAgICAgICAgICAgICAqIGRyYWdnaW5nIChlLmcuIHRocm91Z2ggYSBkaXNtaXNzIGJ1dHRvbikuXG4gICAgICAgICAgICAgKiBUaGlzIGNhbiBjYXVzZSBpc3N1ZXMgaWYgdGhlIHVzZXIgaGFzIGEgbW9kYWwgd2l0aCBjb250ZW50IHRoYXQgY2FuIGJlIGRyYWdnZWQsIGFzIHdlJ2xsXG4gICAgICAgICAgICAgKiBzd2FwIHRvIG1vdmluZyBvbiBkcmFnIGFuZCBpZiB3ZSBkb24ndCBzd2FwIGJhY2sgaGVyZSB0aGVuIHRoZSBmb290ZXIgd2lsbCBnZXQgc3R1Y2suXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHN3YXBGb290ZXJQb3NpdGlvbignc3RhdGlvbmFyeScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIHRoZSBnZXN0dXJlIHJlbGVhc2VzLCB3ZSBuZWVkIHRvIGRldGVybWluZVxuICAgICAgICAgKiB0aGUgY2xvc2VzdCBicmVha3BvaW50IHRvIHNuYXAgdG8uXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCB2ZWxvY2l0eSA9IGRldGFpbC52ZWxvY2l0eVk7XG4gICAgICAgIGNvbnN0IHRocmVzaG9sZCA9IChkZXRhaWwuZGVsdGFZICsgdmVsb2NpdHkgKiAzNTApIC8gaGVpZ2h0O1xuICAgICAgICBjb25zdCBkaWZmID0gY3VycmVudEJyZWFrcG9pbnQgLSB0aHJlc2hvbGQ7XG4gICAgICAgIGNvbnN0IGNsb3Nlc3QgPSBicmVha3BvaW50cy5yZWR1Y2UoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyhiIC0gZGlmZikgPCBNYXRoLmFicyhhIC0gZGlmZikgPyBiIDogYTtcbiAgICAgICAgfSk7XG4gICAgICAgIG1vdmVTaGVldFRvQnJlYWtwb2ludCh7XG4gICAgICAgICAgICBicmVha3BvaW50OiBjbG9zZXN0LFxuICAgICAgICAgICAgYnJlYWtwb2ludE9mZnNldDogb2Zmc2V0LFxuICAgICAgICAgICAgY2FuRGlzbWlzczogY2FuRGlzbWlzc0Jsb2Nrc0dlc3R1cmUsXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBzd2lwZSBpcyB1c2VyLWRyaXZlbiwgc28gd2Ugc2hvdWxkXG4gICAgICAgICAgICAgKiBhbHdheXMgYW5pbWF0ZSB3aGVuIHRoZSBnZXN0dXJlIGVuZHMuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGFuaW1hdGVkOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IG1vdmVTaGVldFRvQnJlYWtwb2ludCA9IChvcHRpb25zKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgYnJlYWtwb2ludCwgY2FuRGlzbWlzcywgYnJlYWtwb2ludE9mZnNldCwgYW5pbWF0ZWQgfSA9IG9wdGlvbnM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYW5EaXNtaXNzIHNob3VsZCBvbmx5IHByZXZlbnQgc25hcHBpbmdcbiAgICAgICAgICogd2hlbiB1c2VycyBhcmUgdHJ5aW5nIHRvIGRpc21pc3MuIElmIGNhbkRpc21pc3NcbiAgICAgICAgICogaXMgcHJlc2VudCBidXQgdGhlIHVzZXIgaXMgdHJ5aW5nIHRvIHN3aXBlIHVwd2FyZHMsXG4gICAgICAgICAqIHdlIHNob3VsZCBhbGxvdyB0aGF0IHRvIGhhcHBlbixcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IHNob3VsZFByZXZlbnREaXNtaXNzID0gY2FuRGlzbWlzcyAmJiBicmVha3BvaW50ID09PSAwO1xuICAgICAgICBjb25zdCBzbmFwVG9CcmVha3BvaW50ID0gc2hvdWxkUHJldmVudERpc21pc3MgPyBjdXJyZW50QnJlYWtwb2ludCA6IGJyZWFrcG9pbnQ7XG4gICAgICAgIGNvbnN0IHNob3VsZFJlbWFpbk9wZW4gPSBzbmFwVG9CcmVha3BvaW50ICE9PSAwO1xuICAgICAgICBjdXJyZW50QnJlYWtwb2ludCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGUgdGhlIGFuaW1hdGlvbiBzbyB0aGF0IGl0IHBsYXlzIGZyb21cbiAgICAgICAgICogdGhlIGxhc3Qgb2Zmc2V0IHRvIHRoZSBjbG9zZXN0IHNuYXAgcG9pbnQuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAod3JhcHBlckFuaW1hdGlvbiAmJiBiYWNrZHJvcEFuaW1hdGlvbikge1xuICAgICAgICAgICAgd3JhcHBlckFuaW1hdGlvbi5rZXlmcmFtZXMoW1xuICAgICAgICAgICAgICAgIHsgb2Zmc2V0OiAwLCB0cmFuc2Zvcm06IGB0cmFuc2xhdGVZKCR7YnJlYWtwb2ludE9mZnNldCAqIDEwMH0lKWAgfSxcbiAgICAgICAgICAgICAgICB7IG9mZnNldDogMSwgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgkeygxIC0gc25hcFRvQnJlYWtwb2ludCkgKiAxMDB9JSlgIH0sXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGJhY2tkcm9wQW5pbWF0aW9uLmtleWZyYW1lcyhbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IGBjYWxjKHZhcigtLWJhY2tkcm9wLW9wYWNpdHkpICogJHtnZXRCYWNrZHJvcFZhbHVlRm9yU2hlZXQoMSAtIGJyZWFrcG9pbnRPZmZzZXQsIGJhY2tkcm9wQnJlYWtwb2ludCl9KWAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDogMSxcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogYGNhbGModmFyKC0tYmFja2Ryb3Atb3BhY2l0eSkgKiAke2dldEJhY2tkcm9wVmFsdWVGb3JTaGVldChzbmFwVG9CcmVha3BvaW50LCBiYWNrZHJvcEJyZWFrcG9pbnQpfSlgLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGlmIChjb250ZW50QW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVGhlIG1vZGFsIGNvbnRlbnQgc2hvdWxkIHNjcm9sbCBhdCBhbnkgYnJlYWtwb2ludCB3aGVuIGV4cGFuZFRvU2Nyb2xsXG4gICAgICAgICAgICAgICAgICogaXMgZGlzYWJsZWQuIEluIG9yZGVyIHRvIGRvIHRoaXMsIHRoZSBjb250ZW50IG5lZWRzIHRvIGJlIGNvbXBsZXRlbHlcbiAgICAgICAgICAgICAgICAgKiB2aWV3YWJsZSBzbyBzY3JvbGxpbmcgY2FuIGFjY2VzcyBldmVyeXRoaW5nLiBPdGhlcndpc2UsIHRoZSBkZWZhdWx0XG4gICAgICAgICAgICAgICAgICogYmVoYXZpb3Igd291bGQgc2hvdyB0aGUgY29udGVudCBvZmYgdGhlIHNjcmVlbiBhbmQgb25seSBhbGxvd1xuICAgICAgICAgICAgICAgICAqIHNjcm9sbGluZyB3aGVuIHRoZSBzaGVldCBpcyBmdWxseSBleHBhbmRlZC5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBjb250ZW50QW5pbWF0aW9uLmtleWZyYW1lcyhbXG4gICAgICAgICAgICAgICAgICAgIHsgb2Zmc2V0OiAwLCBtYXhIZWlnaHQ6IGAkeygxIC0gYnJlYWtwb2ludE9mZnNldCkgKiAxMDB9JWAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBvZmZzZXQ6IDEsIG1heEhlaWdodDogYCR7c25hcFRvQnJlYWtwb2ludCAqIDEwMH0lYCB9LFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYW5pbWF0aW9uLnByb2dyZXNzU3RlcCgwKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogR2VzdHVyZSBzaG91bGQgcmVtYWluIGRpc2FibGVkIHVudGlsIHRoZVxuICAgICAgICAgKiBzbmFwcGluZyBhbmltYXRpb24gY29tcGxldGVzLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2VzdHVyZS5lbmFibGUoZmFsc2UpO1xuICAgICAgICBpZiAoc2hvdWxkUHJldmVudERpc21pc3MpIHtcbiAgICAgICAgICAgIGhhbmRsZUNhbkRpc21pc3MoYmFzZUVsLCBhbmltYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFzaG91bGRSZW1haW5PcGVuKSB7XG4gICAgICAgICAgICBvbkRpc21pc3MoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRW5hYmxlcyBzY3JvbGxpbmcgaW1tZWRpYXRlbHkgaWYgdGhlIHNoZWV0IGlzIGFib3V0IHRvIGZ1bGx5IGV4cGFuZFxuICAgICAgICAgKiBvciBpZiBpdCBhbGxvd3Mgc2Nyb2xsaW5nIGF0IGFueSBicmVha3BvaW50LiBXaXRob3V0IHRoaXMsIHRoZXJlIHdvdWxkXG4gICAgICAgICAqIGJlIGEgfjUwMG1zIGRlbGF5IHdoaWxlIHRoZSBtb2RhbCBhbmltYXRpb24gY29tcGxldGVzLCBjYXVzaW5nIGFcbiAgICAgICAgICogbm90aWNlYWJsZSBsYWcuIE5hdGl2ZSBpT1MgYWxsb3dzIHNjcm9sbGluZyBhcyBzb29uIGFzIHRoZSBnZXN0dXJlIGlzXG4gICAgICAgICAqIHJlbGVhc2VkLCBzbyB3ZSBhbGlnbiB3aXRoIHRoYXQgYmVoYXZpb3IuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoY29udGVudEVsICYmIChzbmFwVG9CcmVha3BvaW50ID09PSBicmVha3BvaW50c1ticmVha3BvaW50cy5sZW5ndGggLSAxXSB8fCAhZXhwYW5kVG9TY3JvbGwpKSB7XG4gICAgICAgICAgICBjb250ZW50RWwuc2Nyb2xsWSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGV4cGFuZFRvU2Nyb2xsIGlzIGRpc2FibGVkIGFuZCB3ZSdyZSBhbmltYXRpbmdcbiAgICAgICAgICogdG8gY2xvc2UgdGhlIHNoZWV0LCB3ZSBuZWVkIHRvIHN3YXBcbiAgICAgICAgICogdGhlIGZvb3RlciBwb3NpdGlvbiB0byBzdGF0aW9uYXJ5IHNvIHRoYXQgaXRcbiAgICAgICAgICogd2lsbCBjb2xsYXBzZSBjb3JyZWN0bHkuIFdlIGNhbm5vdCBqdXN0IGFsd2F5cyBzd2FwXG4gICAgICAgICAqIGhlcmUgb3IgaXQnbGwgYmUgaml0dGVyeSB3aGlsZSBhbmltYXRpbmcgbW92ZW1lbnQuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoIWV4cGFuZFRvU2Nyb2xsICYmIHNuYXBUb0JyZWFrcG9pbnQgPT09IDApIHtcbiAgICAgICAgICAgIHN3YXBGb290ZXJQb3NpdGlvbignc3RhdGlvbmFyeScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgYW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgLm9uRmluaXNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkUmVtYWluT3Blbikge1xuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogSWYgZXhwYW5kVG9TY3JvbGwgaXMgZGlzYWJsZWQsIHdlIG5lZWQgdG8gc3dhcFxuICAgICAgICAgICAgICAgICAgICAgKiB0aGUgZm9vdGVyIHBvc2l0aW9uIHRvIHN0YXRpb25hcnkgc28gdGhhdCBpdFxuICAgICAgICAgICAgICAgICAgICAgKiB3aWxsIGFjdCBhcyBpdCB3b3VsZCBieSBkZWZhdWx0LlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFleHBhbmRUb1Njcm9sbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dhcEZvb3RlclBvc2l0aW9uKCdzdGF0aW9uYXJ5Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIE9uY2UgdGhlIHNuYXBwaW5nIGFuaW1hdGlvbiBjb21wbGV0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAqIHdlIG5lZWQgdG8gcmVzZXQgdGhlIGFuaW1hdGlvbiB0byBnb1xuICAgICAgICAgICAgICAgICAgICAgKiBmcm9tIDAgdG8gMSBzbyB1c2VycyBjYW4gc3dpcGUgaW4gYW55IGRpcmVjdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICogV2UgdGhlbiBzZXQgdGhlIGFuaW1hdGlvbiBvZmZzZXQgdG8gdGhlIGN1cnJlbnRcbiAgICAgICAgICAgICAgICAgICAgICogYnJlYWtwb2ludCBzbyB0aGF0IGl0IHN0YXJ0cyBhdCB0aGUgc25hcHBlZCBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGlmICh3cmFwcGVyQW5pbWF0aW9uICYmIGJhY2tkcm9wQW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYWYoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXJBbmltYXRpb24ua2V5ZnJhbWVzKFsuLi5TaGVldERlZmF1bHRzLldSQVBQRVJfS0VZRlJBTUVTXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2Ryb3BBbmltYXRpb24ua2V5ZnJhbWVzKFsuLi5TaGVldERlZmF1bHRzLkJBQ0tEUk9QX0tFWUZSQU1FU10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBbmltYXRpb24gPT09IG51bGwgfHwgY29udGVudEFuaW1hdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGVudEFuaW1hdGlvbi5rZXlmcmFtZXMoWy4uLlNoZWV0RGVmYXVsdHMuQ09OVEVOVF9LRVlGUkFNRVNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24ucHJvZ3Jlc3NTdGFydCh0cnVlLCAxIC0gc25hcFRvQnJlYWtwb2ludCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJyZWFrcG9pbnQgPSBzbmFwVG9CcmVha3BvaW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQnJlYWtwb2ludENoYW5nZShjdXJyZW50QnJlYWtwb2ludCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQmFja2Ryb3Agc2hvdWxkIGJlY29tZSBlbmFibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogYWZ0ZXIgdGhlIGJhY2tkcm9wQnJlYWtwb2ludCB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZEVuYWJsZUJhY2tkcm9wID0gY3VycmVudEJyZWFrcG9pbnQgPiBiYWNrZHJvcEJyZWFrcG9pbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEVuYWJsZUJhY2tkcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUJhY2tkcm9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlQmFja2Ryb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VzdHVyZS5lbmFibGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXN0dXJlLmVuYWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUaGlzIG11c3QgYmUgYSBvbmUgdGltZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAqIG90aGVyd2lzZSBhIG5ldyBjYWxsYmFjayB3aWxsXG4gICAgICAgICAgICAgICAgICogYmUgYWRkZWQgZXZlcnkgdGltZSBvbkVuZCBydW5zLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgfSwgeyBvbmVUaW1lQ2FsbGJhY2s6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAucHJvZ3Jlc3NFbmQoMSwgMCwgYW5pbWF0ZWQgPyA1MDAgOiAwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBnZXN0dXJlID0gY3JlYXRlR2VzdHVyZSh7XG4gICAgICAgIGVsOiB3cmFwcGVyRWwsXG4gICAgICAgIGdlc3R1cmVOYW1lOiAnbW9kYWxTaGVldCcsXG4gICAgICAgIGdlc3R1cmVQcmlvcml0eTogNDAsXG4gICAgICAgIGRpcmVjdGlvbjogJ3knLFxuICAgICAgICB0aHJlc2hvbGQ6IDEwLFxuICAgICAgICBjYW5TdGFydCxcbiAgICAgICAgb25TdGFydCxcbiAgICAgICAgb25Nb3ZlLFxuICAgICAgICBvbkVuZCxcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXN0dXJlLFxuICAgICAgICBtb3ZlU2hlZXRUb0JyZWFrcG9pbnQsXG4gICAgfTtcbn07XG5cbmNvbnN0IG1vZGFsSW9zQ3NzID0gXCI6aG9zdHstLXdpZHRoOjEwMCU7LS1taW4td2lkdGg6YXV0bzstLW1heC13aWR0aDphdXRvOy0taGVpZ2h0OjEwMCU7LS1taW4taGVpZ2h0OmF1dG87LS1tYXgtaGVpZ2h0OmF1dG87LS1vdmVyZmxvdzpoaWRkZW47LS1ib3JkZXItcmFkaXVzOjA7LS1ib3JkZXItd2lkdGg6MDstLWJvcmRlci1zdHlsZTpub25lOy0tYm9yZGVyLWNvbG9yOnRyYW5zcGFyZW50Oy0tYmFja2dyb3VuZDp2YXIoLS1pb24tYmFja2dyb3VuZC1jb2xvciwgI2ZmZik7LS1ib3gtc2hhZG93Om5vbmU7LS1iYWNrZHJvcC1vcGFjaXR5OjA7bGVmdDowO3JpZ2h0OjA7dG9wOjA7Ym90dG9tOjA7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7cG9zaXRpb246YWJzb2x1dGU7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjstbXMtZmxleC1wYWNrOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO291dGxpbmU6bm9uZTtjb2xvcjp2YXIoLS1pb24tdGV4dC1jb2xvciwgIzAwMCk7Y29udGFpbjpzdHJpY3R9Lm1vZGFsLXdyYXBwZXIsaW9uLWJhY2tkcm9we3BvaW50ZXItZXZlbnRzOmF1dG99Omhvc3QoLm92ZXJsYXktaGlkZGVuKXtkaXNwbGF5Om5vbmV9Lm1vZGFsLXdyYXBwZXIsLm1vZGFsLXNoYWRvd3tib3JkZXItcmFkaXVzOnZhcigtLWJvcmRlci1yYWRpdXMpO3dpZHRoOnZhcigtLXdpZHRoKTttaW4td2lkdGg6dmFyKC0tbWluLXdpZHRoKTttYXgtd2lkdGg6dmFyKC0tbWF4LXdpZHRoKTtoZWlnaHQ6dmFyKC0taGVpZ2h0KTttaW4taGVpZ2h0OnZhcigtLW1pbi1oZWlnaHQpO21heC1oZWlnaHQ6dmFyKC0tbWF4LWhlaWdodCk7Ym9yZGVyLXdpZHRoOnZhcigtLWJvcmRlci13aWR0aCk7Ym9yZGVyLXN0eWxlOnZhcigtLWJvcmRlci1zdHlsZSk7Ym9yZGVyLWNvbG9yOnZhcigtLWJvcmRlci1jb2xvcik7YmFja2dyb3VuZDp2YXIoLS1iYWNrZ3JvdW5kKTstd2Via2l0LWJveC1zaGFkb3c6dmFyKC0tYm94LXNoYWRvdyk7Ym94LXNoYWRvdzp2YXIoLS1ib3gtc2hhZG93KTtvdmVyZmxvdzp2YXIoLS1vdmVyZmxvdyk7ei1pbmRleDoxMH0ubW9kYWwtc2hhZG93e3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQ6dHJhbnNwYXJlbnR9QG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA3NjhweCkgYW5kIChtaW4taGVpZ2h0OiA2MDBweCl7Omhvc3R7LS13aWR0aDo2MDBweDstLWhlaWdodDo1MDBweDstLWlvbi1zYWZlLWFyZWEtdG9wOjBweDstLWlvbi1zYWZlLWFyZWEtYm90dG9tOjBweDstLWlvbi1zYWZlLWFyZWEtcmlnaHQ6MHB4Oy0taW9uLXNhZmUtYXJlYS1sZWZ0OjBweH19QG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA3NjhweCkgYW5kIChtaW4taGVpZ2h0OiA3NjhweCl7Omhvc3R7LS13aWR0aDo2MDBweDstLWhlaWdodDo2MDBweH19Lm1vZGFsLWhhbmRsZXtsZWZ0OjBweDtyaWdodDowcHg7dG9wOjVweDtib3JkZXItcmFkaXVzOjhweDstd2Via2l0LW1hcmdpbi1zdGFydDphdXRvO21hcmdpbi1pbmxpbmUtc3RhcnQ6YXV0bzstd2Via2l0LW1hcmdpbi1lbmQ6YXV0bzttYXJnaW4taW5saW5lLWVuZDphdXRvO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjM2cHg7aGVpZ2h0OjVweDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVaKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVaKDApO2JvcmRlcjowO2JhY2tncm91bmQ6dmFyKC0taW9uLWNvbG9yLXN0ZXAtMzUwLCB2YXIoLS1pb24tYmFja2dyb3VuZC1jb2xvci1zdGVwLTM1MCwgI2MwYzBiZSkpO2N1cnNvcjpwb2ludGVyO3otaW5kZXg6MTF9Lm1vZGFsLWhhbmRsZTo6YmVmb3Jley13ZWJraXQtcGFkZGluZy1zdGFydDo0cHg7cGFkZGluZy1pbmxpbmUtc3RhcnQ6NHB4Oy13ZWJraXQtcGFkZGluZy1lbmQ6NHB4O3BhZGRpbmctaW5saW5lLWVuZDo0cHg7cGFkZGluZy10b3A6NHB4O3BhZGRpbmctYm90dG9tOjRweDtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDozNnB4O2hlaWdodDo1cHg7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsIC01MCUpO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwgLTUwJSk7Y29udGVudDpcXFwiXFxcIn06aG9zdCgubW9kYWwtc2hlZXQpey0taGVpZ2h0OmNhbGMoMTAwJSAtICh2YXIoLS1pb24tc2FmZS1hcmVhLXRvcCkgKyAxMHB4KSl9Omhvc3QoLm1vZGFsLXNoZWV0KSAubW9kYWwtd3JhcHBlciw6aG9zdCgubW9kYWwtc2hlZXQpIC5tb2RhbC1zaGFkb3d7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjB9Omhvc3QoLm1vZGFsLXNoZWV0Lm1vZGFsLW5vLWV4cGFuZC1zY3JvbGwpIGlvbi1mb290ZXJ7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjA7d2lkdGg6dmFyKC0td2lkdGgpfTpob3N0ey0tYmFja2Ryb3Atb3BhY2l0eTp2YXIoLS1pb24tYmFja2Ryb3Atb3BhY2l0eSwgMC40KX06aG9zdCgubW9kYWwtY2FyZCksOmhvc3QoLm1vZGFsLXNoZWV0KXstLWJvcmRlci1yYWRpdXM6MTBweH1AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDc2OHB4KSBhbmQgKG1pbi1oZWlnaHQ6IDYwMHB4KXs6aG9zdHstLWJvcmRlci1yYWRpdXM6MTBweH19Lm1vZGFsLXdyYXBwZXJ7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwgIDEwMCUsICAwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwgIDEwMCUsICAwKX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjdweCl7QHN1cHBvcnRzICh3aWR0aDogbWF4KDBweCwgMXB4KSl7Omhvc3QoLm1vZGFsLWNhcmQpey0taGVpZ2h0OmNhbGMoMTAwJSAtIG1heCgzMHB4LCB2YXIoLS1pb24tc2FmZS1hcmVhLXRvcCkpIC0gMTBweCl9fUBzdXBwb3J0cyBub3QgKHdpZHRoOiBtYXgoMHB4LCAxcHgpKXs6aG9zdCgubW9kYWwtY2FyZCl7LS1oZWlnaHQ6Y2FsYygxMDAlIC0gNDBweCl9fTpob3N0KC5tb2RhbC1jYXJkKSAubW9kYWwtd3JhcHBlcntib3JkZXItc3RhcnQtc3RhcnQtcmFkaXVzOnZhcigtLWJvcmRlci1yYWRpdXMpO2JvcmRlci1zdGFydC1lbmQtcmFkaXVzOnZhcigtLWJvcmRlci1yYWRpdXMpO2JvcmRlci1lbmQtZW5kLXJhZGl1czowO2JvcmRlci1lbmQtc3RhcnQtcmFkaXVzOjB9Omhvc3QoLm1vZGFsLWNhcmQpey0tYmFja2Ryb3Atb3BhY2l0eTowOy0td2lkdGg6MTAwJTstbXMtZmxleC1hbGlnbjplbmQ7YWxpZ24taXRlbXM6ZmxleC1lbmR9Omhvc3QoLm1vZGFsLWNhcmQpIC5tb2RhbC1zaGFkb3d7ZGlzcGxheTpub25lfTpob3N0KC5tb2RhbC1jYXJkKSBpb24tYmFja2Ryb3B7cG9pbnRlci1ldmVudHM6bm9uZX19QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNzY4cHgpezpob3N0KC5tb2RhbC1jYXJkKXstLXdpZHRoOmNhbGMoMTAwJSAtIDEyMHB4KTstLWhlaWdodDpjYWxjKDEwMCUgLSAoMTIwcHggKyB2YXIoLS1pb24tc2FmZS1hcmVhLXRvcCkgKyB2YXIoLS1pb24tc2FmZS1hcmVhLWJvdHRvbSkpKTstLW1heC13aWR0aDo3MjBweDstLW1heC1oZWlnaHQ6MTAwMHB4Oy0tYmFja2Ryb3Atb3BhY2l0eTowOy0tYm94LXNoYWRvdzowcHggMHB4IDMwcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAwLjVzIGVhc2UtaW4tb3V0O3RyYW5zaXRpb246YWxsIDAuNXMgZWFzZS1pbi1vdXR9Omhvc3QoLm1vZGFsLWNhcmQpIC5tb2RhbC13cmFwcGVyey13ZWJraXQtYm94LXNoYWRvdzpub25lO2JveC1zaGFkb3c6bm9uZX06aG9zdCgubW9kYWwtY2FyZCkgLm1vZGFsLXNoYWRvd3std2Via2l0LWJveC1zaGFkb3c6dmFyKC0tYm94LXNoYWRvdyk7Ym94LXNoYWRvdzp2YXIoLS1ib3gtc2hhZG93KX19Omhvc3QoLm1vZGFsLXNoZWV0KSAubW9kYWwtd3JhcHBlcntib3JkZXItc3RhcnQtc3RhcnQtcmFkaXVzOnZhcigtLWJvcmRlci1yYWRpdXMpO2JvcmRlci1zdGFydC1lbmQtcmFkaXVzOnZhcigtLWJvcmRlci1yYWRpdXMpO2JvcmRlci1lbmQtZW5kLXJhZGl1czowO2JvcmRlci1lbmQtc3RhcnQtcmFkaXVzOjB9XCI7XG5cbmNvbnN0IG1vZGFsTWRDc3MgPSBcIjpob3N0ey0td2lkdGg6MTAwJTstLW1pbi13aWR0aDphdXRvOy0tbWF4LXdpZHRoOmF1dG87LS1oZWlnaHQ6MTAwJTstLW1pbi1oZWlnaHQ6YXV0bzstLW1heC1oZWlnaHQ6YXV0bzstLW92ZXJmbG93OmhpZGRlbjstLWJvcmRlci1yYWRpdXM6MDstLWJvcmRlci13aWR0aDowOy0tYm9yZGVyLXN0eWxlOm5vbmU7LS1ib3JkZXItY29sb3I6dHJhbnNwYXJlbnQ7LS1iYWNrZ3JvdW5kOnZhcigtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yLCAjZmZmKTstLWJveC1zaGFkb3c6bm9uZTstLWJhY2tkcm9wLW9wYWNpdHk6MDtsZWZ0OjA7cmlnaHQ6MDt0b3A6MDtib3R0b206MDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDtwb3NpdGlvbjphYnNvbHV0ZTstbXMtZmxleC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyOy1tcy1mbGV4LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7b3V0bGluZTpub25lO2NvbG9yOnZhcigtLWlvbi10ZXh0LWNvbG9yLCAjMDAwKTtjb250YWluOnN0cmljdH0ubW9kYWwtd3JhcHBlcixpb24tYmFja2Ryb3B7cG9pbnRlci1ldmVudHM6YXV0b306aG9zdCgub3ZlcmxheS1oaWRkZW4pe2Rpc3BsYXk6bm9uZX0ubW9kYWwtd3JhcHBlciwubW9kYWwtc2hhZG93e2JvcmRlci1yYWRpdXM6dmFyKC0tYm9yZGVyLXJhZGl1cyk7d2lkdGg6dmFyKC0td2lkdGgpO21pbi13aWR0aDp2YXIoLS1taW4td2lkdGgpO21heC13aWR0aDp2YXIoLS1tYXgtd2lkdGgpO2hlaWdodDp2YXIoLS1oZWlnaHQpO21pbi1oZWlnaHQ6dmFyKC0tbWluLWhlaWdodCk7bWF4LWhlaWdodDp2YXIoLS1tYXgtaGVpZ2h0KTtib3JkZXItd2lkdGg6dmFyKC0tYm9yZGVyLXdpZHRoKTtib3JkZXItc3R5bGU6dmFyKC0tYm9yZGVyLXN0eWxlKTtib3JkZXItY29sb3I6dmFyKC0tYm9yZGVyLWNvbG9yKTtiYWNrZ3JvdW5kOnZhcigtLWJhY2tncm91bmQpOy13ZWJraXQtYm94LXNoYWRvdzp2YXIoLS1ib3gtc2hhZG93KTtib3gtc2hhZG93OnZhcigtLWJveC1zaGFkb3cpO292ZXJmbG93OnZhcigtLW92ZXJmbG93KTt6LWluZGV4OjEwfS5tb2RhbC1zaGFkb3d7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZDp0cmFuc3BhcmVudH1AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDc2OHB4KSBhbmQgKG1pbi1oZWlnaHQ6IDYwMHB4KXs6aG9zdHstLXdpZHRoOjYwMHB4Oy0taGVpZ2h0OjUwMHB4Oy0taW9uLXNhZmUtYXJlYS10b3A6MHB4Oy0taW9uLXNhZmUtYXJlYS1ib3R0b206MHB4Oy0taW9uLXNhZmUtYXJlYS1yaWdodDowcHg7LS1pb24tc2FmZS1hcmVhLWxlZnQ6MHB4fX1AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDc2OHB4KSBhbmQgKG1pbi1oZWlnaHQ6IDc2OHB4KXs6aG9zdHstLXdpZHRoOjYwMHB4Oy0taGVpZ2h0OjYwMHB4fX0ubW9kYWwtaGFuZGxle2xlZnQ6MHB4O3JpZ2h0OjBweDt0b3A6NXB4O2JvcmRlci1yYWRpdXM6OHB4Oy13ZWJraXQtbWFyZ2luLXN0YXJ0OmF1dG87bWFyZ2luLWlubGluZS1zdGFydDphdXRvOy13ZWJraXQtbWFyZ2luLWVuZDphdXRvO21hcmdpbi1pbmxpbmUtZW5kOmF1dG87cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MzZweDtoZWlnaHQ6NXB4Oy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVooMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVooMCk7Ym9yZGVyOjA7YmFja2dyb3VuZDp2YXIoLS1pb24tY29sb3Itc3RlcC0zNTAsIHZhcigtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yLXN0ZXAtMzUwLCAjYzBjMGJlKSk7Y3Vyc29yOnBvaW50ZXI7ei1pbmRleDoxMX0ubW9kYWwtaGFuZGxlOjpiZWZvcmV7LXdlYmtpdC1wYWRkaW5nLXN0YXJ0OjRweDtwYWRkaW5nLWlubGluZS1zdGFydDo0cHg7LXdlYmtpdC1wYWRkaW5nLWVuZDo0cHg7cGFkZGluZy1pbmxpbmUtZW5kOjRweDtwYWRkaW5nLXRvcDo0cHg7cGFkZGluZy1ib3R0b206NHB4O3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjM2cHg7aGVpZ2h0OjVweDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwgLTUwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtjb250ZW50OlxcXCJcXFwifTpob3N0KC5tb2RhbC1zaGVldCl7LS1oZWlnaHQ6Y2FsYygxMDAlIC0gKHZhcigtLWlvbi1zYWZlLWFyZWEtdG9wKSArIDEwcHgpKX06aG9zdCgubW9kYWwtc2hlZXQpIC5tb2RhbC13cmFwcGVyLDpob3N0KC5tb2RhbC1zaGVldCkgLm1vZGFsLXNoYWRvd3twb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MH06aG9zdCgubW9kYWwtc2hlZXQubW9kYWwtbm8tZXhwYW5kLXNjcm9sbCkgaW9uLWZvb3Rlcntwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MDt3aWR0aDp2YXIoLS13aWR0aCl9Omhvc3R7LS1iYWNrZHJvcC1vcGFjaXR5OnZhcigtLWlvbi1iYWNrZHJvcC1vcGFjaXR5LCAwLjMyKX1AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDc2OHB4KSBhbmQgKG1pbi1oZWlnaHQ6IDYwMHB4KXs6aG9zdHstLWJvcmRlci1yYWRpdXM6MnB4Oy0tYm94LXNoYWRvdzowIDI4cHggNDhweCByZ2JhKDAsIDAsIDAsIDAuNCl9fS5tb2RhbC13cmFwcGVyey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsICA0MHB4LCAgMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsICA0MHB4LCAgMCk7b3BhY2l0eTowLjAxfVwiO1xuXG5jb25zdCBNb2RhbCA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIHRoaXMuZGlkUHJlc2VudCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiaW9uTW9kYWxEaWRQcmVzZW50XCIsIDcpO1xuICAgICAgICB0aGlzLndpbGxQcmVzZW50ID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25Nb2RhbFdpbGxQcmVzZW50XCIsIDcpO1xuICAgICAgICB0aGlzLndpbGxEaXNtaXNzID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25Nb2RhbFdpbGxEaXNtaXNzXCIsIDcpO1xuICAgICAgICB0aGlzLmRpZERpc21pc3MgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvbk1vZGFsRGlkRGlzbWlzc1wiLCA3KTtcbiAgICAgICAgdGhpcy5pb25CcmVha3BvaW50RGlkQ2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25CcmVha3BvaW50RGlkQ2hhbmdlXCIsIDcpO1xuICAgICAgICB0aGlzLmRpZFByZXNlbnRTaG9ydGhhbmQgPSBjcmVhdGVFdmVudCh0aGlzLCBcImRpZFByZXNlbnRcIiwgNyk7XG4gICAgICAgIHRoaXMud2lsbFByZXNlbnRTaG9ydGhhbmQgPSBjcmVhdGVFdmVudCh0aGlzLCBcIndpbGxQcmVzZW50XCIsIDcpO1xuICAgICAgICB0aGlzLndpbGxEaXNtaXNzU2hvcnRoYW5kID0gY3JlYXRlRXZlbnQodGhpcywgXCJ3aWxsRGlzbWlzc1wiLCA3KTtcbiAgICAgICAgdGhpcy5kaWREaXNtaXNzU2hvcnRoYW5kID0gY3JlYXRlRXZlbnQodGhpcywgXCJkaWREaXNtaXNzXCIsIDcpO1xuICAgICAgICB0aGlzLmlvbk1vdW50ID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25Nb3VudFwiLCA3KTtcbiAgICAgICAgdGhpcy5sb2NrQ29udHJvbGxlciA9IGNyZWF0ZUxvY2tDb250cm9sbGVyKCk7XG4gICAgICAgIHRoaXMudHJpZ2dlckNvbnRyb2xsZXIgPSBjcmVhdGVUcmlnZ2VyQ29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLmNvcmVEZWxlZ2F0ZSA9IENvcmVEZWxlZ2F0ZSgpO1xuICAgICAgICB0aGlzLmlzU2hlZXRNb2RhbCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmluaGVyaXRlZEF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgdGhpcy5pbmxpbmUgPSBmYWxzZTtcbiAgICAgICAgLy8gV2hldGhlciBvciBub3QgbW9kYWwgaXMgYmVpbmcgZGlzbWlzc2VkIHZpYSBnZXN0dXJlXG4gICAgICAgIHRoaXMuZ2VzdHVyZUFuaW1hdGlvbkRpc21pc3NpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcmVzZW50ZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLmhhc0NvbnRyb2xsZXIgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGB0cnVlYCwgdGhlIGtleWJvYXJkIHdpbGwgYmUgYXV0b21hdGljYWxseSBkaXNtaXNzZWQgd2hlbiB0aGUgb3ZlcmxheSBpcyBwcmVzZW50ZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmtleWJvYXJkQ2xvc2UgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29udHJvbHMgd2hldGhlciBzY3JvbGxpbmcgb3IgZHJhZ2dpbmcgd2l0aGluIHRoZSBzaGVldCBtb2RhbCBleHBhbmRzXG4gICAgICAgICAqIGl0IHRvIGEgbGFyZ2VyIGJyZWFrcG9pbnQuIFRoaXMgb25seSB0YWtlcyBlZmZlY3Qgd2hlbiBgYnJlYWtwb2ludHNgXG4gICAgICAgICAqIGFuZCBgaW5pdGlhbEJyZWFrcG9pbnRgIGFyZSBzZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIGB0cnVlYCwgc2Nyb2xsaW5nIG9yIGRyYWdnaW5nIGFueXdoZXJlIGluIHRoZSBtb2RhbCB3aWxsIGZpcnN0IGV4cGFuZFxuICAgICAgICAgKiBpdCB0byB0aGUgbmV4dCBicmVha3BvaW50LiBPbmNlIGZ1bGx5IGV4cGFuZGVkLCBzY3JvbGxpbmcgd2lsbCBhZmZlY3QgdGhlXG4gICAgICAgICAqIGNvbnRlbnQuXG4gICAgICAgICAqIElmIGBmYWxzZWAsIHNjcm9sbGluZyB3aWxsIGFsd2F5cyBhZmZlY3QgdGhlIGNvbnRlbnQuIFRoZSBtb2RhbCB3aWxsXG4gICAgICAgICAqIG9ubHkgZXhwYW5kIHdoZW4gZHJhZ2dpbmcgdGhlIGhlYWRlciBvciBoYW5kbGUuIFRoZSBtb2RhbCB3aWxsIGNsb3NlIHdoZW5cbiAgICAgICAgICogZHJhZ2dpbmcgdGhlIGhlYWRlciBvciBoYW5kbGUuIEl0IGNhbiBhbHNvIGJlIGNsb3NlZCB3aGVuIGRyYWdnaW5nIHRoZVxuICAgICAgICAgKiBjb250ZW50LCBidXQgb25seSBpZiB0aGUgY29udGVudCBpcyBzY3JvbGxlZCB0byB0aGUgdG9wLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5leHBhbmRUb1Njcm9sbCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGRlY2ltYWwgdmFsdWUgYmV0d2VlbiAwIGFuZCAxIHRoYXQgaW5kaWNhdGVzIHRoZVxuICAgICAgICAgKiBwb2ludCBhZnRlciB3aGljaCB0aGUgYmFja2Ryb3Agd2lsbCBiZWdpbiB0byBmYWRlIGluXG4gICAgICAgICAqIHdoZW4gdXNpbmcgYSBzaGVldCBtb2RhbC4gUHJpb3IgdG8gdGhpcyBwb2ludCwgdGhlXG4gICAgICAgICAqIGJhY2tkcm9wIHdpbGwgYmUgaGlkZGVuIGFuZCB0aGUgY29udGVudCB1bmRlcm5lYXRoXG4gICAgICAgICAqIHRoZSBzaGVldCBjYW4gYmUgaW50ZXJhY3RlZCB3aXRoLiBUaGlzIHZhbHVlIGlzIGV4Y2x1c2l2ZVxuICAgICAgICAgKiBtZWFuaW5nIHRoZSBiYWNrZHJvcCB3aWxsIGJlY29tZSBhY3RpdmUgYWZ0ZXIgdGhlIHZhbHVlXG4gICAgICAgICAqIHNwZWNpZmllZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYmFja2Ryb3BCcmVha3BvaW50ID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbnRlcmFjdGlvbiBiZWhhdmlvciBmb3IgdGhlIHNoZWV0IG1vZGFsIHdoZW4gdGhlIGhhbmRsZSBpcyBwcmVzc2VkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBEZWZhdWx0cyB0byBgXCJub25lXCJgLCB3aGljaCAgbWVhbnMgdGhlIG1vZGFsIHdpbGwgbm90IGNoYW5nZSBzaXplIG9yIHBvc2l0aW9uIHdoZW4gdGhlIGhhbmRsZSBpcyBwcmVzc2VkLlxuICAgICAgICAgKiBTZXQgdG8gYFwiY3ljbGVcImAgdG8gbGV0IHRoZSBtb2RhbCBjeWNsZSBiZXR3ZWVuIGF2YWlsYWJsZSBicmVha3BvaW50cyB3aGVuIHByZXNzZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEhhbmRsZSBiZWhhdmlvciBpcyB1bmF2YWlsYWJsZSB3aGVuIHRoZSBgaGFuZGxlYCBwcm9wZXJ0eSBpcyBzZXQgdG8gYGZhbHNlYCBvclxuICAgICAgICAgKiB3aGVuIHRoZSBgYnJlYWtwb2ludHNgIHByb3BlcnR5IGlzIG5vdCBzZXQgKHVzaW5nIGEgZnVsbHNjcmVlbiBvciBjYXJkIG1vZGFsKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlQmVoYXZpb3IgPSAnbm9uZSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBgdHJ1ZWAsIHRoZSBtb2RhbCB3aWxsIGJlIGRpc21pc3NlZCB3aGVuIHRoZSBiYWNrZHJvcCBpcyBjbGlja2VkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iYWNrZHJvcERpc21pc3MgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgYHRydWVgLCBhIGJhY2tkcm9wIHdpbGwgYmUgZGlzcGxheWVkIGJlaGluZCB0aGUgbW9kYWwuXG4gICAgICAgICAqIFRoaXMgcHJvcGVydHkgY29udHJvbHMgd2hldGhlciBvciBub3QgdGhlIGJhY2tkcm9wXG4gICAgICAgICAqIGRhcmtlbnMgdGhlIHNjcmVlbiB3aGVuIHRoZSBtb2RhbCBpcyBwcmVzZW50ZWQuXG4gICAgICAgICAqIEl0IGRvZXMgbm90IGNvbnRyb2wgd2hldGhlciBvciBub3QgdGhlIGJhY2tkcm9wXG4gICAgICAgICAqIGlzIGFjdGl2ZSBvciBwcmVzZW50IGluIHRoZSBET00uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNob3dCYWNrZHJvcCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBgdHJ1ZWAsIHRoZSBtb2RhbCB3aWxsIGFuaW1hdGUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFuaW1hdGVkID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGB0cnVlYCwgdGhlIG1vZGFsIHdpbGwgb3Blbi4gSWYgYGZhbHNlYCwgdGhlIG1vZGFsIHdpbGwgY2xvc2UuXG4gICAgICAgICAqIFVzZSB0aGlzIGlmIHlvdSBuZWVkIGZpbmVyIGdyYWluZWQgY29udHJvbCBvdmVyIHByZXNlbnRhdGlvbiwgb3RoZXJ3aXNlXG4gICAgICAgICAqIGp1c3QgdXNlIHRoZSBtb2RhbENvbnRyb2xsZXIgb3IgdGhlIGB0cmlnZ2VyYCBwcm9wZXJ0eS5cbiAgICAgICAgICogTm90ZTogYGlzT3BlbmAgd2lsbCBub3QgYXV0b21hdGljYWxseSBiZSBzZXQgYmFjayB0byBgZmFsc2VgIHdoZW5cbiAgICAgICAgICogdGhlIG1vZGFsIGRpc21pc3Nlcy4gWW91IHdpbGwgbmVlZCB0byBkbyB0aGF0IGluIHlvdXIgY29kZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBgdHJ1ZWAsIHRoZSBjb21wb25lbnQgcGFzc2VkIGludG8gYGlvbi1tb2RhbGAgd2lsbFxuICAgICAgICAgKiBhdXRvbWF0aWNhbGx5IGJlIG1vdW50ZWQgd2hlbiB0aGUgbW9kYWwgaXMgY3JlYXRlZC4gVGhlXG4gICAgICAgICAqIGNvbXBvbmVudCB3aWxsIHJlbWFpbiBtb3VudGVkIGV2ZW4gd2hlbiB0aGUgbW9kYWwgaXMgZGlzbWlzc2VkLlxuICAgICAgICAgKiBIb3dldmVyLCB0aGUgY29tcG9uZW50IHdpbGwgYmUgZGVzdHJveWVkIHdoZW4gdGhlIG1vZGFsIGlzXG4gICAgICAgICAqIGRlc3Ryb3llZC4gVGhpcyBwcm9wZXJ0eSBpcyBub3QgcmVhY3RpdmUgYW5kIHNob3VsZCBvbmx5IGJlXG4gICAgICAgICAqIHVzZWQgd2hlbiBpbml0aWFsbHkgY3JlYXRpbmcgYSBtb2RhbC5cbiAgICAgICAgICpcbiAgICAgICAgICogTm90ZTogVGhpcyBmZWF0dXJlIG9ubHkgYXBwbGllcyB0byBpbmxpbmUgbW9kYWxzIGluIEphdmFTY3JpcHRcbiAgICAgICAgICogZnJhbWV3b3JrcyBzdWNoIGFzIEFuZ3VsYXIsIFJlYWN0LCBhbmQgVnVlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5rZWVwQ29udGVudHNNb3VudGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBgdHJ1ZWAsIGZvY3VzIHdpbGwgbm90IGJlIGFsbG93ZWQgdG8gbW92ZSBvdXRzaWRlIG9mIHRoaXMgb3ZlcmxheS5cbiAgICAgICAgICogSWYgYGZhbHNlYCwgZm9jdXMgd2lsbCBiZSBhbGxvd2VkIHRvIG1vdmUgb3V0c2lkZSBvZiB0aGUgb3ZlcmxheS5cbiAgICAgICAgICpcbiAgICAgICAgICogSW4gbW9zdCBzY2VuYXJpb3MgdGhpcyBwcm9wZXJ0eSBzaG91bGQgcmVtYWluIHNldCB0byBgdHJ1ZWAuIFNldHRpbmdcbiAgICAgICAgICogdGhpcyBwcm9wZXJ0eSB0byBgZmFsc2VgIGNhbiBjYXVzZSBzZXZlcmUgYWNjZXNzaWJpbGl0eSBpc3N1ZXMgYXMgdXNlcnNcbiAgICAgICAgICogcmVseWluZyBvbiBhc3Npc3RpdmUgdGVjaG5vbG9naWVzIG1heSBiZSBhYmxlIHRvIG1vdmUgZm9jdXMgaW50b1xuICAgICAgICAgKiBhIGNvbmZ1c2luZyBzdGF0ZS4gV2UgcmVjb21tZW5kIG9ubHkgc2V0dGluZyB0aGlzIHRvIGBmYWxzZWAgd2hlblxuICAgICAgICAgKiBhYnNvbHV0ZWx5IG5lY2Vzc2FyeS5cbiAgICAgICAgICpcbiAgICAgICAgICogRGV2ZWxvcGVycyBtYXkgd2FudCB0byBjb25zaWRlciBkaXNhYmxpbmcgZm9jdXMgdHJhcHBpbmcgaWYgdGhpc1xuICAgICAgICAgKiBvdmVybGF5IHByZXNlbnRzIGEgbm9uLUlvbmljIG92ZXJsYXkgZnJvbSBhIDNyZCBwYXJ0eSBsaWJyYXJ5LlxuICAgICAgICAgKiBEZXZlbG9wZXJzIHdvdWxkIGRpc2FibGUgZm9jdXMgdHJhcHBpbmcgb24gdGhlIElvbmljIG92ZXJsYXlcbiAgICAgICAgICogd2hlbiBwcmVzZW50aW5nIHRoZSAzcmQgcGFydHkgb3ZlcmxheSBhbmQgdGhlbiByZS1lbmFibGVcbiAgICAgICAgICogZm9jdXMgdHJhcHBpbmcgd2hlbiBkaXNtaXNzaW5nIHRoZSAzcmQgcGFydHkgb3ZlcmxheSBhbmQgbW92aW5nXG4gICAgICAgICAqIGZvY3VzIGJhY2sgdG8gdGhlIElvbmljIG92ZXJsYXkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvY3VzVHJhcCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IGEgbW9kYWwgY2FuIGRpc21pc3NcbiAgICAgICAgICogd2hlbiBjYWxsaW5nIHRoZSBgZGlzbWlzc2AgbWV0aG9kLlxuICAgICAgICAgKlxuICAgICAgICAgKiBJZiB0aGUgdmFsdWUgaXMgYHRydWVgIG9yIHRoZSB2YWx1ZSdzIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgLCB0aGUgbW9kYWwgd2lsbCBjbG9zZSB3aGVuIHRyeWluZyB0byBkaXNtaXNzLlxuICAgICAgICAgKiBJZiB0aGUgdmFsdWUgaXMgYGZhbHNlYCBvciB0aGUgdmFsdWUncyBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAsIHRoZSBtb2RhbCB3aWxsIG5vdCBjbG9zZSB3aGVuIHRyeWluZyB0byBkaXNtaXNzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBTZWUgaHR0cHM6Ly9pb25pY2ZyYW1ld29yay5jb20vZG9jcy90cm91Ymxlc2hvb3RpbmcvcnVudGltZSNhY2Nlc3NpbmctdGhpc1xuICAgICAgICAgKiBpZiB5b3UgbmVlZCB0byBhY2Nlc3MgYHRoaXNgIGZyb20gd2l0aGluIHRoZSBjYWxsYmFjay5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FuRGlzbWlzcyA9IHRydWU7XG4gICAgICAgIHRoaXMub25IYW5kbGVDbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc2hlZXRUcmFuc2l0aW9uLCBoYW5kbGVCZWhhdmlvciB9ID0gdGhpcztcbiAgICAgICAgICAgIGlmIChoYW5kbGVCZWhhdmlvciAhPT0gJ2N5Y2xlJyB8fCBzaGVldFRyYW5zaXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFRoZSBzaGVldCBtb2RhbCBzaG91bGQgbm90IGFkdmFuY2UgdG8gdGhlIG5leHQgYnJlYWtwb2ludFxuICAgICAgICAgICAgICAgICAqIGlmIHRoZSBoYW5kbGUgYmVoYXZpb3IgaXMgbm90IGBjeWNsZWAgb3IgaWYgdGhlIGhhbmRsZVxuICAgICAgICAgICAgICAgICAqIGlzIGNsaWNrZWQgd2hpbGUgdGhlIHNoZWV0IGlzIG1vdmluZyB0byBhIGJyZWFrcG9pbnQuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tb3ZlVG9OZXh0QnJlYWtwb2ludCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uQmFja2Ryb3BUYXAgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHNoZWV0VHJhbnNpdGlvbiB9ID0gdGhpcztcbiAgICAgICAgICAgIGlmIChzaGVldFRyYW5zaXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFdoZW4gdGhlIGhhbmRsZSBpcyBkb3VibGUgY2xpY2tlZCBhdCB0aGUgbGFyZ2VzdCBicmVha3BvaW50LFxuICAgICAgICAgICAgICAgICAqIGl0IHdpbGwgc3RhcnQgdG8gbW92ZSB0byB0aGUgZmlyc3QgYnJlYWtwb2ludC4gV2hpbGUgdHJhbnNpdGlvbmluZyxcbiAgICAgICAgICAgICAgICAgKiB0aGUgYmFja2Ryb3Agd2lsbCBvZnRlbiByZWNlaXZlIHRoZSBzZWNvbmQgY2xpY2suIFdlIHByZXZlbnQgdGhlXG4gICAgICAgICAgICAgICAgICogYmFja2Ryb3AgZnJvbSBkaXNtaXNzaW5nIHRoZSBtb2RhbCB3aGlsZSBtb3ZpbmcgYmV0d2VlbiBicmVha3BvaW50cy5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRpc21pc3ModW5kZWZpbmVkLCBCQUNLRFJPUCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25MaWZlY3ljbGUgPSAobW9kYWxFdmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWwgPSB0aGlzLnVzZXJzRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBMSUZFQ1lDTEVfTUFQW21vZGFsRXZlbnQudHlwZV07XG4gICAgICAgICAgICBpZiAoZWwgJiYgbmFtZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ID0gbmV3IEN1c3RvbUV2ZW50KG5hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgYnViYmxlczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IG1vZGFsRXZlbnQuZGV0YWlsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQoZXYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBvbklzT3BlbkNoYW5nZShuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgaWYgKG5ld1ZhbHVlID09PSB0cnVlICYmIG9sZFZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5wcmVzZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmV3VmFsdWUgPT09IGZhbHNlICYmIG9sZFZhbHVlID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmlnZ2VyQ2hhbmdlZCgpIHtcbiAgICAgICAgY29uc3QgeyB0cmlnZ2VyLCBlbCwgdHJpZ2dlckNvbnRyb2xsZXIgfSA9IHRoaXM7XG4gICAgICAgIGlmICh0cmlnZ2VyKSB7XG4gICAgICAgICAgICB0cmlnZ2VyQ29udHJvbGxlci5hZGRDbGlja0xpc3RlbmVyKGVsLCB0cmlnZ2VyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBicmVha3BvaW50c0NoYW5nZWQoYnJlYWtwb2ludHMpIHtcbiAgICAgICAgaWYgKGJyZWFrcG9pbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydGVkQnJlYWtwb2ludHMgPSBicmVha3BvaW50cy5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIGNvbnN0IHsgZWwgfSA9IHRoaXM7XG4gICAgICAgIHByZXBhcmVPdmVybGF5KGVsKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyQ2hhbmdlZCgpO1xuICAgIH1cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyQ29udHJvbGxlci5yZW1vdmVDbGlja0xpc3RlbmVyKCk7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IHsgYnJlYWtwb2ludHMsIGluaXRpYWxCcmVha3BvaW50LCBlbCwgaHRtbEF0dHJpYnV0ZXMgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGlzU2hlZXRNb2RhbCA9ICh0aGlzLmlzU2hlZXRNb2RhbCA9IGJyZWFrcG9pbnRzICE9PSB1bmRlZmluZWQgJiYgaW5pdGlhbEJyZWFrcG9pbnQgIT09IHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXNUb0luaGVyaXQgPSBbJ2FyaWEtbGFiZWwnLCAncm9sZSddO1xuICAgICAgICB0aGlzLmluaGVyaXRlZEF0dHJpYnV0ZXMgPSBpbmhlcml0QXR0cmlidXRlcyhlbCwgYXR0cmlidXRlc1RvSW5oZXJpdCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIHVzaW5nIGEgY29udHJvbGxlciBtb2RhbCB5b3UgY2FuIHNldCBhdHRyaWJ1dGVzXG4gICAgICAgICAqIHVzaW5nIHRoZSBodG1sQXR0cmlidXRlcyBwcm9wZXJ0eS4gU2luY2UgdGhlIGFib3ZlIGF0dHJpYnV0ZXNcbiAgICAgICAgICogbmVlZCB0byBiZSBpbmhlcml0ZWQgaW5zaWRlIG9mIHRoZSBtb2RhbCwgd2UgbmVlZCB0byBsb29rXG4gICAgICAgICAqIGFuZCBzZWUgaWYgdGhlc2UgYXR0cmlidXRlcyBhcmUgYmVpbmcgc2V0IHZpYSBodG1sQXR0cmlidXRlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogV2UgY291bGQgYWx0ZXJuYXRpdmVseSBtb3ZlIHRoaXMgdG8gY29tcG9uZW50RGlkTG9hZCB0byBzaW1wbGlmeSB0aGUgd29ya1xuICAgICAgICAgKiBoZXJlLCBidXQgd2UnZCB0aGVuIG5lZWQgdG8gbWFrZSBpbmhlcml0ZWRBdHRyaWJ1dGVzIGEgU3RhdGUgdmFyaWFibGUsXG4gICAgICAgICAqIHRodXMgY2F1c2luZyBhbm90aGVyIHJlbmRlciB0byBhbHdheXMgaGFwcGVuIGFmdGVyIHRoZSBmaXJzdCByZW5kZXIuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoaHRtbEF0dHJpYnV0ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYXR0cmlidXRlc1RvSW5oZXJpdC5mb3JFYWNoKChhdHRyaWJ1dGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVWYWx1ZSA9IGh0bWxBdHRyaWJ1dGVzW2F0dHJpYnV0ZV07XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBJZiBhbiBhdHRyaWJ1dGUgd2UgbmVlZCB0byBpbmhlcml0IHdhc1xuICAgICAgICAgICAgICAgICAgICAgKiBzZXQgdXNpbmcgaHRtbEF0dHJpYnV0ZXMgdGhlbiBhZGQgaXQgdG9cbiAgICAgICAgICAgICAgICAgICAgICogaW5oZXJpdGVkQXR0cmlidXRlcyBhbmQgcmVtb3ZlIGl0IGZyb20gaHRtbEF0dHJpYnV0ZXMuXG4gICAgICAgICAgICAgICAgICAgICAqIFRoaXMgZW5zdXJlcyB0aGUgYXR0cmlidXRlIGlzIGluaGVyaXRlZCBhbmQgbm90XG4gICAgICAgICAgICAgICAgICAgICAqIHNldCBvbiB0aGUgaG9zdC5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogSW4gdGhpcyBjYXNlLCBpZiBhbiBpbmhlcml0ZWQgYXR0cmlidXRlIGlzIHNldFxuICAgICAgICAgICAgICAgICAgICAgKiBvbiB0aGUgaG9zdCBlbGVtZW50IGFuZCB1c2luZyBodG1sQXR0cmlidXRlcyB0aGVuXG4gICAgICAgICAgICAgICAgICAgICAqIGh0bWxBdHRyaWJ1dGVzIHdpbnMsIGJ1dCB0aGF0J3Mgbm90IGEgcGF0dGVybiB0aGF0IHdlIHJlY29tbWVuZC5cbiAgICAgICAgICAgICAgICAgICAgICogVGhlIG9ubHkgdGltZSB5b3UnZCBuZWVkIGh0bWxBdHRyaWJ1dGVzIGlzIHdoZW4gdXNpbmcgbW9kYWxDb250cm9sbGVyLlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmhlcml0ZWRBdHRyaWJ1dGVzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmluaGVyaXRlZEF0dHJpYnV0ZXMpLCB7IFthdHRyaWJ1dGVdOiBodG1sQXR0cmlidXRlc1thdHRyaWJ1dGVdIH0pO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgaHRtbEF0dHJpYnV0ZXNbYXR0cmlidXRlXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNTaGVldE1vZGFsKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRCcmVha3BvaW50ID0gdGhpcy5pbml0aWFsQnJlYWtwb2ludDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnJlYWtwb2ludHMgIT09IHVuZGVmaW5lZCAmJiBpbml0aWFsQnJlYWtwb2ludCAhPT0gdW5kZWZpbmVkICYmICFicmVha3BvaW50cy5pbmNsdWRlcyhpbml0aWFsQnJlYWtwb2ludCkpIHtcbiAgICAgICAgICAgIHByaW50SW9uV2FybmluZygnW2lvbi1tb2RhbF0gLSBZb3VyIGJyZWFrcG9pbnRzIGFycmF5IG11c3QgaW5jbHVkZSB0aGUgaW5pdGlhbEJyZWFrcG9pbnQgdmFsdWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoKF9hID0gdGhpcy5odG1sQXR0cmlidXRlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlkKSkge1xuICAgICAgICAgICAgc2V0T3ZlcmxheUlkKHRoaXMuZWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBtb2RhbCB3YXMgcmVuZGVyZWQgd2l0aCBpc09wZW49XCJ0cnVlXCJcbiAgICAgICAgICogdGhlbiB3ZSBzaG91bGQgb3BlbiBtb2RhbCBpbW1lZGlhdGVseS5cbiAgICAgICAgICovXG4gICAgICAgIGlmICh0aGlzLmlzT3BlbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmFmKCgpID0+IHRoaXMucHJlc2VudCgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJyZWFrcG9pbnRzQ2hhbmdlZCh0aGlzLmJyZWFrcG9pbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gYmluZGluZyB2YWx1ZXMgaW4gZnJhbWV3b3JrcyBzdWNoIGFzIEFuZ3VsYXJcbiAgICAgICAgICogaXQgaXMgcG9zc2libGUgZm9yIHRoZSB2YWx1ZSB0byBiZSBzZXQgYWZ0ZXIgdGhlIFdlYiBDb21wb25lbnRcbiAgICAgICAgICogaW5pdGlhbGl6ZXMgYnV0IGJlZm9yZSB0aGUgdmFsdWUgd2F0Y2hlciBpcyBzZXQgdXAgaW4gU3RlbmNpbC5cbiAgICAgICAgICogQXMgYSByZXN1bHQsIHRoZSB3YXRjaGVyIGNhbGxiYWNrIG1heSBub3QgYmUgZmlyZWQuXG4gICAgICAgICAqIFdlIHdvcmsgYXJvdW5kIHRoaXMgYnkgbWFudWFsbHkgY2FsbGluZyB0aGUgd2F0Y2hlclxuICAgICAgICAgKiBjYWxsYmFjayB3aGVuIHRoZSBjb21wb25lbnQgaGFzIGxvYWRlZCBhbmQgdGhlIHdhdGNoZXJcbiAgICAgICAgICogaXMgY29uZmlndXJlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJpZ2dlckNoYW5nZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdCBhbiBvdmVybGF5XG4gICAgICogaXMgYmVpbmcgdXNlZCBpbmxpbmUgb3IgdmlhIGEgY29udHJvbGxlci9KU1xuICAgICAqIGFuZCByZXR1cm5zIHRoZSBjb3JyZWN0IGRlbGVnYXRlLlxuICAgICAqIEJ5IGRlZmF1bHQsIHN1YnNlcXVlbnQgY2FsbHMgdG8gZ2V0RGVsZWdhdGVcbiAgICAgKiB3aWxsIHVzZSBhIGNhY2hlZCB2ZXJzaW9uIG9mIHRoZSBkZWxlZ2F0ZS5cbiAgICAgKiBUaGlzIGlzIHVzZWZ1bCBmb3IgY2FsbGluZyBkaXNtaXNzIGFmdGVyXG4gICAgICogcHJlc2VudCBzbyB0aGF0IHRoZSBjb3JyZWN0IGRlbGVnYXRlIGlzIGdpdmVuLlxuICAgICAqL1xuICAgIGdldERlbGVnYXRlKGZvcmNlID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRoaXMud29ya2luZ0RlbGVnYXRlICYmICFmb3JjZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkZWxlZ2F0ZTogdGhpcy53b3JraW5nRGVsZWdhdGUsXG4gICAgICAgICAgICAgICAgaW5saW5lOiB0aGlzLmlubGluZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHVzaW5nIG92ZXJsYXkgaW5saW5lXG4gICAgICAgICAqIHdlIHBvdGVudGlhbGx5IG5lZWQgdG8gdXNlIHRoZSBjb3JlRGVsZWdhdGVcbiAgICAgICAgICogc28gdGhhdCB0aGlzIHdvcmtzIGluIHZhbmlsbGEgSlMgYXBwcy5cbiAgICAgICAgICogSWYgYSBkZXZlbG9wZXIgaGFzIHByZXNlbnRlZCB0aGlzIGNvbXBvbmVudFxuICAgICAgICAgKiB2aWEgYSBjb250cm9sbGVyLCB0aGVuIHdlIGNhbiBhc3N1bWVcbiAgICAgICAgICogdGhlIGNvbXBvbmVudCBpcyBhbHJlYWR5IGluIHRoZVxuICAgICAgICAgKiBjb3JyZWN0IHBsYWNlLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgcGFyZW50RWwgPSB0aGlzLmVsLnBhcmVudE5vZGU7XG4gICAgICAgIGNvbnN0IGlubGluZSA9ICh0aGlzLmlubGluZSA9IHBhcmVudEVsICE9PSBudWxsICYmICF0aGlzLmhhc0NvbnRyb2xsZXIpO1xuICAgICAgICBjb25zdCBkZWxlZ2F0ZSA9ICh0aGlzLndvcmtpbmdEZWxlZ2F0ZSA9IGlubGluZSA/IHRoaXMuZGVsZWdhdGUgfHwgdGhpcy5jb3JlRGVsZWdhdGUgOiB0aGlzLmRlbGVnYXRlKTtcbiAgICAgICAgcmV0dXJuIHsgaW5saW5lLCBkZWxlZ2F0ZSB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IHRoZVxuICAgICAqIG1vZGFsIGlzIGFsbG93ZWQgdG8gZGlzbWlzcyBiYXNlZFxuICAgICAqIG9uIHRoZSBzdGF0ZSBvZiB0aGUgY2FuRGlzbWlzcyBwcm9wLlxuICAgICAqL1xuICAgIGFzeW5jIGNoZWNrQ2FuRGlzbWlzcyhkYXRhLCByb2xlKSB7XG4gICAgICAgIGNvbnN0IHsgY2FuRGlzbWlzcyB9ID0gdGhpcztcbiAgICAgICAgaWYgKHR5cGVvZiBjYW5EaXNtaXNzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FuRGlzbWlzcyhkYXRhLCByb2xlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FuRGlzbWlzcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlc2VudCB0aGUgbW9kYWwgb3ZlcmxheSBhZnRlciBpdCBoYXMgYmVlbiBjcmVhdGVkLlxuICAgICAqL1xuICAgIGFzeW5jIHByZXNlbnQoKSB7XG4gICAgICAgIGNvbnN0IHVubG9jayA9IGF3YWl0IHRoaXMubG9ja0NvbnRyb2xsZXIubG9jaygpO1xuICAgICAgICBpZiAodGhpcy5wcmVzZW50ZWQpIHtcbiAgICAgICAgICAgIHVubG9jaygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgcHJlc2VudGluZ0VsZW1lbnQsIGVsIH0gPSB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIG1vZGFsIGlzIHByZXNlbnRlZCBtdWx0aXBsZSB0aW1lcyAoaW5saW5lIG1vZGFscyksIHdlXG4gICAgICAgICAqIG5lZWQgdG8gcmVzZXQgdGhlIGN1cnJlbnQgYnJlYWtwb2ludCB0byB0aGUgaW5pdGlhbCBicmVha3BvaW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jdXJyZW50QnJlYWtwb2ludCA9IHRoaXMuaW5pdGlhbEJyZWFrcG9pbnQ7XG4gICAgICAgIGNvbnN0IHsgaW5saW5lLCBkZWxlZ2F0ZSB9ID0gdGhpcy5nZXREZWxlZ2F0ZSh0cnVlKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXQgaW9uTW91bnQgc28gSlMgRnJhbWV3b3JrcyBoYXZlIGFuIG9wcG9ydHVuaXR5XG4gICAgICAgICAqIHRvIGFkZCB0aGUgY2hpbGQgY29tcG9uZW50IHRvIHRoZSBET00uIFRoZSBjaGlsZFxuICAgICAgICAgKiBjb21wb25lbnQgd2lsbCBiZSBhc3NpZ25lZCB0byB0aGlzLnVzZXJzRWxlbWVudCBiZWxvdy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW9uTW91bnQuZW1pdCgpO1xuICAgICAgICB0aGlzLnVzZXJzRWxlbWVudCA9IGF3YWl0IGF0dGFjaENvbXBvbmVudChkZWxlZ2F0ZSwgZWwsIHRoaXMuY29tcG9uZW50LCBbJ2lvbi1wYWdlJ10sIHRoaXMuY29tcG9uZW50UHJvcHMsIGlubGluZSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIHVzaW5nIHRoZSBsYXp5IGxvYWRlZCBidWlsZCBvZiBTdGVuY2lsLCB3ZSBuZWVkIHRvIHdhaXRcbiAgICAgICAgICogZm9yIGV2ZXJ5IFN0ZW5jaWwgY29tcG9uZW50IGluc3RhbmNlIHRvIGJlIHJlYWR5IGJlZm9yZSBwcmVzZW50aW5nXG4gICAgICAgICAqIG90aGVyd2lzZSB0aGVyZSBjYW4gYmUgYSBmbGFzaCBvZiB1bnN0eWxlZCBjb250ZW50LiBXaXRoIHRoZVxuICAgICAgICAgKiBjdXN0b20gZWxlbWVudHMgYnVuZGxlIHdlIG5lZWQgdG8gd2FpdCBmb3IgdGhlIEpTIGZyYW1ld29ya1xuICAgICAgICAgKiBtb3VudCB0aGUgaW5uZXIgY29udGVudHMgb2YgdGhlIG92ZXJsYXkgb3RoZXJ3aXNlIFdlYktpdCBtYXlcbiAgICAgICAgICogZ2V0IHRoZSB0cmFuc2l0aW9uIGluY29ycmVjdC5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChoYXNMYXp5QnVpbGQoZWwpKSB7XG4gICAgICAgICAgICBhd2FpdCBkZWVwUmVhZHkodGhpcy51c2Vyc0VsZW1lbnQpO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiBrZWVwQ29udGVudHNNb3VudGVkPVwidHJ1ZVwiIHRoZW4gdGhlXG4gICAgICAgICAgICAgKiBKUyBGcmFtZXdvcmsgaGFzIGFscmVhZHkgbW91bnRlZCB0aGUgaW5uZXJcbiAgICAgICAgICAgICAqIGNvbnRlbnRzIHNvIHRoZXJlIGlzIG5vIG5lZWQgdG8gd2FpdC5cbiAgICAgICAgICAgICAqIE90aGVyd2lzZSwgd2UgbmVlZCB0byB3YWl0IGZvciB0aGUgSlNcbiAgICAgICAgICAgICAqIEZyYW1ld29yayB0byBtb3VudCB0aGUgaW5uZXIgY29udGVudHNcbiAgICAgICAgICAgICAqIG9mIHRoaXMgY29tcG9uZW50LlxuICAgICAgICAgICAgICovXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRoaXMua2VlcENvbnRlbnRzTW91bnRlZCkge1xuICAgICAgICAgICAgYXdhaXQgd2FpdEZvck1vdW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgd3JpdGVUYXNrKCgpID0+IHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnc2hvdy1tb2RhbCcpKTtcbiAgICAgICAgY29uc3QgaGFzQ2FyZE1vZGFsID0gcHJlc2VudGluZ0VsZW1lbnQgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdlIG5lZWQgdG8gY2hhbmdlIHRoZSBzdGF0dXMgYmFyIGF0IHRoZVxuICAgICAgICAgKiBzdGFydCBvZiB0aGUgYW5pbWF0aW9uIHNvIHRoYXQgaXQgY29tcGxldGVzXG4gICAgICAgICAqIGJ5IHRoZSB0aW1lIHRoZSBjYXJkIGFuaW1hdGlvbiBpcyBkb25lLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGhhc0NhcmRNb2RhbCAmJiBnZXRJb25Nb2RlKHRoaXMpID09PSAnaW9zJykge1xuICAgICAgICAgICAgLy8gQ2FjaGUgdGhlIG9yaWdpbmFsIHN0YXR1cyBiYXIgY29sb3IgYmVmb3JlIHRoZSBtb2RhbCBpcyBwcmVzZW50ZWRcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFyU3R5bGUgPSBhd2FpdCBTdGF0dXNCYXIuZ2V0U3R5bGUoKTtcbiAgICAgICAgICAgIHNldENhcmRTdGF0dXNCYXJEYXJrKCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcHJlc2VudCh0aGlzLCAnbW9kYWxFbnRlcicsIGlvc0VudGVyQW5pbWF0aW9uLCBtZEVudGVyQW5pbWF0aW9uLCB7XG4gICAgICAgICAgICBwcmVzZW50aW5nRWw6IHByZXNlbnRpbmdFbGVtZW50LFxuICAgICAgICAgICAgY3VycmVudEJyZWFrcG9pbnQ6IHRoaXMuaW5pdGlhbEJyZWFrcG9pbnQsXG4gICAgICAgICAgICBiYWNrZHJvcEJyZWFrcG9pbnQ6IHRoaXMuYmFja2Ryb3BCcmVha3BvaW50LFxuICAgICAgICAgICAgZXhwYW5kVG9TY3JvbGw6IHRoaXMuZXhwYW5kVG9TY3JvbGwsXG4gICAgICAgIH0pO1xuICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmUgKi9cbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoaXMgbmVlZHMgdG8gYmUgc2V0dXAgYmVmb3JlIGFueVxuICAgICAgICAgICAgICogbm9uLXRyYW5zaXRpb24gYXN5bmMgd29yayBzbyBpdCBjYW4gYmUgZGVyZWZlcmVuY2VkXG4gICAgICAgICAgICAgKiBpbiB0aGUgZGlzbWlzcyBtZXRob2QuIFRoZSBkaXNtaXNzIG1ldGhvZFxuICAgICAgICAgICAgICogb25seSB3YWl0cyBmb3IgdGhlIGVudGVyaW5nIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAqIHRvIGZpbmlzaC4gSXQgZG9lcyBub3Qgd2FpdCBmb3IgYWxsIG9mIHRoZSBgcHJlc2VudGBcbiAgICAgICAgICAgICAqIG1ldGhvZCB0byByZXNvbHZlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkT3BlbkNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdlc3R1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFdoZW4gdGhlIG5hdGl2ZSBrZXlib2FyZCBpcyBvcGVuZWQgYW5kIHRoZSB3ZWJ2aWV3XG4gICAgICAgICAgICAgICAgICAgICAqIGlzIHJlc2l6ZWQsIHRoZSBnZXN0dXJlIGltcGxlbWVudGF0aW9uIHdpbGwgYmVjb21lIHVucmVzcG9uc2l2ZVxuICAgICAgICAgICAgICAgICAgICAgKiBhbmQgZW50ZXIgYSBmcmVlLXNjcm9sbCBtb2RlLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBXaGVuIHRoZSBrZXlib2FyZCBpcyBvcGVuZWQsIHdlIGRpc2FibGUgdGhlIGdlc3R1cmUgZm9yXG4gICAgICAgICAgICAgICAgICAgICAqIGEgc2luZ2xlIGZyYW1lIGFuZCByZS1lbmFibGUgb25jZSB0aGUgY29udGVudHMgaGF2ZSByZXBvc2l0aW9uZWRcbiAgICAgICAgICAgICAgICAgICAgICogZnJvbSB0aGUga2V5Ym9hcmQgcGxhY2VtZW50LlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXN0dXJlLmVuYWJsZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHJhZigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXN0dXJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXN0dXJlLmVuYWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKEtFWUJPQVJEX0RJRF9PUEVOLCB0aGlzLmtleWJvYXJkT3BlbkNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc1NoZWV0TW9kYWwpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdFNoZWV0R2VzdHVyZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhhc0NhcmRNb2RhbCkge1xuICAgICAgICAgICAgdGhpcy5pbml0U3dpcGVUb0Nsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdW5sb2NrKCk7XG4gICAgfVxuICAgIGluaXRTd2lwZVRvQ2xvc2UoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKGdldElvbk1vZGUodGhpcykgIT09ICdpb3MnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBlbCB9ID0gdGhpcztcbiAgICAgICAgLy8gQWxsIG9mIHRoZSBlbGVtZW50cyBuZWVkZWQgZm9yIHRoZSBzd2lwZSBnZXN0dXJlXG4gICAgICAgIC8vIHNob3VsZCBiZSBpbiB0aGUgRE9NIGFuZCByZWZlcmVuY2VkIGJ5IG5vdywgZXhjZXB0XG4gICAgICAgIC8vIGZvciB0aGUgcHJlc2VudGluZyBlbFxuICAgICAgICBjb25zdCBhbmltYXRpb25CdWlsZGVyID0gdGhpcy5sZWF2ZUFuaW1hdGlvbiB8fCBjb25maWcuZ2V0KCdtb2RhbExlYXZlJywgaW9zTGVhdmVBbmltYXRpb24pO1xuICAgICAgICBjb25zdCBhbmkgPSAodGhpcy5hbmltYXRpb24gPSBhbmltYXRpb25CdWlsZGVyKGVsLCB7XG4gICAgICAgICAgICBwcmVzZW50aW5nRWw6IHRoaXMucHJlc2VudGluZ0VsZW1lbnQsXG4gICAgICAgICAgICBleHBhbmRUb1Njcm9sbDogdGhpcy5leHBhbmRUb1Njcm9sbCxcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBjb250ZW50RWwgPSBmaW5kSW9uQ29udGVudChlbCk7XG4gICAgICAgIGlmICghY29udGVudEVsKSB7XG4gICAgICAgICAgICBwcmludElvbkNvbnRlbnRFcnJvck1zZyhlbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzQmFyU3R5bGUgPSAoX2EgPSB0aGlzLnN0YXR1c0JhclN0eWxlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBTdHlsZS5EZWZhdWx0O1xuICAgICAgICB0aGlzLmdlc3R1cmUgPSBjcmVhdGVTd2lwZVRvQ2xvc2VHZXN0dXJlKGVsLCBhbmksIHN0YXR1c0JhclN0eWxlLCAoKSA9PiB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFdoaWxlIHRoZSBnZXN0dXJlIGFuaW1hdGlvbiBpcyBmaW5pc2hpbmdcbiAgICAgICAgICAgICAqIGl0IGlzIHBvc3NpYmxlIGZvciBhIHVzZXIgdG8gdGFwIHRoZSBiYWNrZHJvcC5cbiAgICAgICAgICAgICAqIFRoaXMgd291bGQgcmVzdWx0IGluIHRoZSBkaXNtaXNzIGFuaW1hdGlvblxuICAgICAgICAgICAgICogYmVpbmcgcGxheWVkIGFnYWluLiBUeXBpY2FsbHkgdGhpcyBpcyBhdm9pZGVkXG4gICAgICAgICAgICAgKiBieSBzZXR0aW5nIGBwcmVzZW50ZWQgPSBmYWxzZWAgb24gdGhlIG92ZXJsYXlcbiAgICAgICAgICAgICAqIGNvbXBvbmVudDsgaG93ZXZlciwgd2UgY2Fubm90IGRvIHRoYXQgaGVyZSBhc1xuICAgICAgICAgICAgICogdGhhdCB3b3VsZCBwcmV2ZW50IHRoZSBlbGVtZW50IGZyb20gYmVpbmdcbiAgICAgICAgICAgICAqIHJlbW92ZWQgZnJvbSB0aGUgRE9NLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLmdlc3R1cmVBbmltYXRpb25EaXNtaXNzaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmVzZXQgdGhlIHN0YXR1cyBiYXIgc3R5bGUgYXMgdGhlIGRpc21pc3MgYW5pbWF0aW9uXG4gICAgICAgICAgICAgKiBzdGFydHMgb3RoZXJ3aXNlIHRoZSBzdGF0dXMgYmFyIHdpbGwgYmUgdGhlIHdyb25nXG4gICAgICAgICAgICAgKiBjb2xvciBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBkaXNtaXNzIGFuaW1hdGlvbi5cbiAgICAgICAgICAgICAqIFRoZSBkaXNtaXNzIG1ldGhvZCBkb2VzIHRoaXMgYXMgd2VsbCwgYnV0XG4gICAgICAgICAgICAgKiBpbiB0aGlzIGNhc2UgaXQncyBvbmx5IGNhbGxlZCBvbmNlIHRoZSBhbmltYXRpb25cbiAgICAgICAgICAgICAqIGhhcyBmaW5pc2hlZC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2V0Q2FyZFN0YXR1c0JhckRlZmF1bHQodGhpcy5zdGF0dXNCYXJTdHlsZSk7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbi5vbkZpbmlzaChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kaXNtaXNzKHVuZGVmaW5lZCwgR0VTVFVSRSk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXN0dXJlQW5pbWF0aW9uRGlzbWlzc2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdlc3R1cmUuZW5hYmxlKHRydWUpO1xuICAgIH1cbiAgICBpbml0U2hlZXRHZXN0dXJlKCkge1xuICAgICAgICBjb25zdCB7IHdyYXBwZXJFbCwgaW5pdGlhbEJyZWFrcG9pbnQsIGJhY2tkcm9wQnJlYWtwb2ludCB9ID0gdGhpcztcbiAgICAgICAgaWYgKCF3cmFwcGVyRWwgfHwgaW5pdGlhbEJyZWFrcG9pbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFuaW1hdGlvbkJ1aWxkZXIgPSB0aGlzLmVudGVyQW5pbWF0aW9uIHx8IGNvbmZpZy5nZXQoJ21vZGFsRW50ZXInLCBpb3NFbnRlckFuaW1hdGlvbik7XG4gICAgICAgIGNvbnN0IGFuaSA9ICh0aGlzLmFuaW1hdGlvbiA9IGFuaW1hdGlvbkJ1aWxkZXIodGhpcy5lbCwge1xuICAgICAgICAgICAgcHJlc2VudGluZ0VsOiB0aGlzLnByZXNlbnRpbmdFbGVtZW50LFxuICAgICAgICAgICAgY3VycmVudEJyZWFrcG9pbnQ6IGluaXRpYWxCcmVha3BvaW50LFxuICAgICAgICAgICAgYmFja2Ryb3BCcmVha3BvaW50LFxuICAgICAgICAgICAgZXhwYW5kVG9TY3JvbGw6IHRoaXMuZXhwYW5kVG9TY3JvbGwsXG4gICAgICAgIH0pKTtcbiAgICAgICAgYW5pLnByb2dyZXNzU3RhcnQodHJ1ZSwgMSk7XG4gICAgICAgIGNvbnN0IHsgZ2VzdHVyZSwgbW92ZVNoZWV0VG9CcmVha3BvaW50IH0gPSBjcmVhdGVTaGVldEdlc3R1cmUodGhpcy5lbCwgdGhpcy5iYWNrZHJvcEVsLCB3cmFwcGVyRWwsIGluaXRpYWxCcmVha3BvaW50LCBiYWNrZHJvcEJyZWFrcG9pbnQsIGFuaSwgdGhpcy5zb3J0ZWRCcmVha3BvaW50cywgdGhpcy5leHBhbmRUb1Njcm9sbCwgKCkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSB0aGlzLmN1cnJlbnRCcmVha3BvaW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwOyB9LCAoKSA9PiB0aGlzLnNoZWV0T25EaXNtaXNzKCksIChicmVha3BvaW50KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50QnJlYWtwb2ludCAhPT0gYnJlYWtwb2ludCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEJyZWFrcG9pbnQgPSBicmVha3BvaW50O1xuICAgICAgICAgICAgICAgIHRoaXMuaW9uQnJlYWtwb2ludERpZENoYW5nZS5lbWl0KHsgYnJlYWtwb2ludCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2VzdHVyZSA9IGdlc3R1cmU7XG4gICAgICAgIHRoaXMubW92ZVNoZWV0VG9CcmVha3BvaW50ID0gbW92ZVNoZWV0VG9CcmVha3BvaW50O1xuICAgICAgICB0aGlzLmdlc3R1cmUuZW5hYmxlKHRydWUpO1xuICAgIH1cbiAgICBzaGVldE9uRGlzbWlzcygpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoaWxlIHRoZSBnZXN0dXJlIGFuaW1hdGlvbiBpcyBmaW5pc2hpbmdcbiAgICAgICAgICogaXQgaXMgcG9zc2libGUgZm9yIGEgdXNlciB0byB0YXAgdGhlIGJhY2tkcm9wLlxuICAgICAgICAgKiBUaGlzIHdvdWxkIHJlc3VsdCBpbiB0aGUgZGlzbWlzcyBhbmltYXRpb25cbiAgICAgICAgICogYmVpbmcgcGxheWVkIGFnYWluLiBUeXBpY2FsbHkgdGhpcyBpcyBhdm9pZGVkXG4gICAgICAgICAqIGJ5IHNldHRpbmcgYHByZXNlbnRlZCA9IGZhbHNlYCBvbiB0aGUgb3ZlcmxheVxuICAgICAgICAgKiBjb21wb25lbnQ7IGhvd2V2ZXIsIHdlIGNhbm5vdCBkbyB0aGF0IGhlcmUgYXNcbiAgICAgICAgICogdGhhdCB3b3VsZCBwcmV2ZW50IHRoZSBlbGVtZW50IGZyb20gYmVpbmdcbiAgICAgICAgICogcmVtb3ZlZCBmcm9tIHRoZSBET00uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdlc3R1cmVBbmltYXRpb25EaXNtaXNzaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hbmltYXRpb24ub25GaW5pc2goYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50QnJlYWtwb2ludCA9IDA7XG4gICAgICAgICAgICB0aGlzLmlvbkJyZWFrcG9pbnREaWRDaGFuZ2UuZW1pdCh7IGJyZWFrcG9pbnQ6IHRoaXMuY3VycmVudEJyZWFrcG9pbnQgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRpc21pc3ModW5kZWZpbmVkLCBHRVNUVVJFKTtcbiAgICAgICAgICAgIHRoaXMuZ2VzdHVyZUFuaW1hdGlvbkRpc21pc3NpbmcgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc21pc3MgdGhlIG1vZGFsIG92ZXJsYXkgYWZ0ZXIgaXQgaGFzIGJlZW4gcHJlc2VudGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGEgQW55IGRhdGEgdG8gZW1pdCBpbiB0aGUgZGlzbWlzcyBldmVudHMuXG4gICAgICogQHBhcmFtIHJvbGUgVGhlIHJvbGUgb2YgdGhlIGVsZW1lbnQgdGhhdCBpcyBkaXNtaXNzaW5nIHRoZSBtb2RhbC4gRm9yIGV4YW1wbGUsICdjYW5jZWwnIG9yICdiYWNrZHJvcCcuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGEgbm8tb3AgaWYgdGhlIG92ZXJsYXkgaGFzIG5vdCBiZWVuIHByZXNlbnRlZCB5ZXQuIElmIHlvdSB3YW50XG4gICAgICogdG8gcmVtb3ZlIGFuIG92ZXJsYXkgZnJvbSB0aGUgRE9NIHRoYXQgd2FzIG5ldmVyIHByZXNlbnRlZCwgdXNlIHRoZVxuICAgICAqIFtyZW1vdmVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L3JlbW92ZSkgbWV0aG9kLlxuICAgICAqL1xuICAgIGFzeW5jIGRpc21pc3MoZGF0YSwgcm9sZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLmdlc3R1cmVBbmltYXRpb25EaXNtaXNzaW5nICYmIHJvbGUgIT09IEdFU1RVUkUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQmVjYXVzZSB0aGUgY2FuRGlzbWlzcyBjaGVjayBiZWxvdyBpcyBhc3luYyxcbiAgICAgICAgICogd2UgbmVlZCB0byBjbGFpbSBhIGxvY2sgYmVmb3JlIHRoZSBjaGVjayBoYXBwZW5zLFxuICAgICAgICAgKiBpbiBjYXNlIHRoZSBkaXNtaXNzIHRyYW5zaXRpb24gZG9lcyBydW4uXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCB1bmxvY2sgPSBhd2FpdCB0aGlzLmxvY2tDb250cm9sbGVyLmxvY2soKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGEgY2FuRGlzbWlzcyBoYW5kbGVyIGlzIHJlc3BvbnNpYmxlXG4gICAgICAgICAqIGZvciBjYWxsaW5nIHRoZSBkaXNtaXNzIG1ldGhvZCwgd2Ugc2hvdWxkXG4gICAgICAgICAqIG5vdCBydW4gdGhlIGNhbkRpc21pc3MgY2hlY2sgYWdhaW4uXG4gICAgICAgICAqL1xuICAgICAgICBpZiAocm9sZSAhPT0gJ2hhbmRsZXInICYmICEoYXdhaXQgdGhpcy5jaGVja0NhbkRpc21pc3MoZGF0YSwgcm9sZSkpKSB7XG4gICAgICAgICAgICB1bmxvY2soKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHByZXNlbnRpbmdFbGVtZW50IH0gPSB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2UgbmVlZCB0byBzdGFydCB0aGUgc3RhdHVzIGJhciBjaGFuZ2VcbiAgICAgICAgICogYmVmb3JlIHRoZSBhbmltYXRpb24gc28gdGhhdCB0aGUgY2hhbmdlXG4gICAgICAgICAqIGZpbmlzaGVzIHdoZW4gdGhlIGRpc21pc3MgYW5pbWF0aW9uIGRvZXMuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBoYXNDYXJkTW9kYWwgPSBwcmVzZW50aW5nRWxlbWVudCAhPT0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoaGFzQ2FyZE1vZGFsICYmIGdldElvbk1vZGUodGhpcykgPT09ICdpb3MnKSB7XG4gICAgICAgICAgICBzZXRDYXJkU3RhdHVzQmFyRGVmYXVsdCh0aGlzLnN0YXR1c0JhclN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmUgKi9cbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHRoaXMua2V5Ym9hcmRPcGVuQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKEtFWUJPQVJEX0RJRF9PUEVOLCB0aGlzLmtleWJvYXJkT3BlbkNhbGxiYWNrKTtcbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRPcGVuQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGlzbWlzc2VkID0gYXdhaXQgZGlzbWlzcyh0aGlzLCBkYXRhLCByb2xlLCAnbW9kYWxMZWF2ZScsIGlvc0xlYXZlQW5pbWF0aW9uLCBtZExlYXZlQW5pbWF0aW9uLCB7XG4gICAgICAgICAgICBwcmVzZW50aW5nRWw6IHByZXNlbnRpbmdFbGVtZW50LFxuICAgICAgICAgICAgY3VycmVudEJyZWFrcG9pbnQ6IChfYSA9IHRoaXMuY3VycmVudEJyZWFrcG9pbnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRoaXMuaW5pdGlhbEJyZWFrcG9pbnQsXG4gICAgICAgICAgICBiYWNrZHJvcEJyZWFrcG9pbnQ6IHRoaXMuYmFja2Ryb3BCcmVha3BvaW50LFxuICAgICAgICAgICAgZXhwYW5kVG9TY3JvbGw6IHRoaXMuZXhwYW5kVG9TY3JvbGwsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZGlzbWlzc2VkKSB7XG4gICAgICAgICAgICBjb25zdCB7IGRlbGVnYXRlIH0gPSB0aGlzLmdldERlbGVnYXRlKCk7XG4gICAgICAgICAgICBhd2FpdCBkZXRhY2hDb21wb25lbnQoZGVsZWdhdGUsIHRoaXMudXNlcnNFbGVtZW50KTtcbiAgICAgICAgICAgIHdyaXRlVGFzaygoKSA9PiB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctbW9kYWwnKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5hbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbi5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5nZXN0dXJlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXN0dXJlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRCcmVha3BvaW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdW5sb2NrKCk7XG4gICAgICAgIHJldHVybiBkaXNtaXNzZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgbW9kYWwgZGlkIGRpc21pc3MuXG4gICAgICovXG4gICAgb25EaWREaXNtaXNzKCkge1xuICAgICAgICByZXR1cm4gZXZlbnRNZXRob2QodGhpcy5lbCwgJ2lvbk1vZGFsRGlkRGlzbWlzcycpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIG1vZGFsIHdpbGwgZGlzbWlzcy5cbiAgICAgKi9cbiAgICBvbldpbGxEaXNtaXNzKCkge1xuICAgICAgICByZXR1cm4gZXZlbnRNZXRob2QodGhpcy5lbCwgJ2lvbk1vZGFsV2lsbERpc21pc3MnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW92ZSBhIHNoZWV0IHN0eWxlIG1vZGFsIHRvIGEgc3BlY2lmaWMgYnJlYWtwb2ludC4gVGhlIGJyZWFrcG9pbnQgdmFsdWUgbXVzdFxuICAgICAqIGJlIGEgdmFsdWUgZGVmaW5lZCBpbiB5b3VyIGBicmVha3BvaW50c2AgYXJyYXkuXG4gICAgICovXG4gICAgYXN5bmMgc2V0Q3VycmVudEJyZWFrcG9pbnQoYnJlYWtwb2ludCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTaGVldE1vZGFsKSB7XG4gICAgICAgICAgICBwcmludElvbldhcm5pbmcoJ1tpb24tbW9kYWxdIC0gc2V0Q3VycmVudEJyZWFrcG9pbnQgaXMgb25seSBzdXBwb3J0ZWQgb24gc2hlZXQgbW9kYWxzLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5icmVha3BvaW50cy5pbmNsdWRlcyhicmVha3BvaW50KSkge1xuICAgICAgICAgICAgcHJpbnRJb25XYXJuaW5nKGBbaW9uLW1vZGFsXSAtIEF0dGVtcHRlZCB0byBzZXQgaW52YWxpZCBicmVha3BvaW50IHZhbHVlICR7YnJlYWtwb2ludH0uIFBsZWFzZSBkb3VibGUgY2hlY2sgdGhhdCB0aGUgYnJlYWtwb2ludCB2YWx1ZSBpcyBwYXJ0IG9mIHlvdXIgZGVmaW5lZCBicmVha3BvaW50cy5gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGN1cnJlbnRCcmVha3BvaW50LCBtb3ZlU2hlZXRUb0JyZWFrcG9pbnQsIGNhbkRpc21pc3MsIGJyZWFrcG9pbnRzLCBhbmltYXRlZCB9ID0gdGhpcztcbiAgICAgICAgaWYgKGN1cnJlbnRCcmVha3BvaW50ID09PSBicmVha3BvaW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1vdmVTaGVldFRvQnJlYWtwb2ludCkge1xuICAgICAgICAgICAgdGhpcy5zaGVldFRyYW5zaXRpb24gPSBtb3ZlU2hlZXRUb0JyZWFrcG9pbnQoe1xuICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQsXG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludE9mZnNldDogMSAtIGN1cnJlbnRCcmVha3BvaW50LFxuICAgICAgICAgICAgICAgIGNhbkRpc21pc3M6IGNhbkRpc21pc3MgIT09IHVuZGVmaW5lZCAmJiBjYW5EaXNtaXNzICE9PSB0cnVlICYmIGJyZWFrcG9pbnRzWzBdID09PSAwLFxuICAgICAgICAgICAgICAgIGFuaW1hdGVkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNoZWV0VHJhbnNpdGlvbjtcbiAgICAgICAgICAgIHRoaXMuc2hlZXRUcmFuc2l0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgYnJlYWtwb2ludCBvZiBhIHNoZWV0IHN0eWxlIG1vZGFsXG4gICAgICovXG4gICAgYXN5bmMgZ2V0Q3VycmVudEJyZWFrcG9pbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRCcmVha3BvaW50O1xuICAgIH1cbiAgICBhc3luYyBtb3ZlVG9OZXh0QnJlYWtwb2ludCgpIHtcbiAgICAgICAgY29uc3QgeyBicmVha3BvaW50cywgY3VycmVudEJyZWFrcG9pbnQgfSA9IHRoaXM7XG4gICAgICAgIGlmICghYnJlYWtwb2ludHMgfHwgY3VycmVudEJyZWFrcG9pbnQgPT0gbnVsbCkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB0aGUgbW9kYWwgZG9lcyBub3QgaGF2ZSBicmVha3BvaW50cyBhbmQvb3IgdGhlIGN1cnJlbnRcbiAgICAgICAgICAgICAqIGJyZWFrcG9pbnQgaXMgbm90IHNldCwgd2UgY2FuJ3QgbW92ZSB0byB0aGUgbmV4dCBicmVha3BvaW50LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWxsb3dlZEJyZWFrcG9pbnRzID0gYnJlYWtwb2ludHMuZmlsdGVyKChiKSA9PiBiICE9PSAwKTtcbiAgICAgICAgY29uc3QgY3VycmVudEJyZWFrcG9pbnRJbmRleCA9IGFsbG93ZWRCcmVha3BvaW50cy5pbmRleE9mKGN1cnJlbnRCcmVha3BvaW50KTtcbiAgICAgICAgY29uc3QgbmV4dEJyZWFrcG9pbnRJbmRleCA9IChjdXJyZW50QnJlYWtwb2ludEluZGV4ICsgMSkgJSBhbGxvd2VkQnJlYWtwb2ludHMubGVuZ3RoO1xuICAgICAgICBjb25zdCBuZXh0QnJlYWtwb2ludCA9IGFsbG93ZWRCcmVha3BvaW50c1tuZXh0QnJlYWtwb2ludEluZGV4XTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIGN1cnJlbnQgYnJlYWtwb2ludCB0byB0aGUgbmV4dCBhdmFpbGFibGUgYnJlYWtwb2ludC5cbiAgICAgICAgICogSWYgdGhlIGN1cnJlbnQgYnJlYWtwb2ludCBpcyB0aGUgbGFzdCBicmVha3BvaW50LCB3ZSBzZXQgdGhlIGN1cnJlbnRcbiAgICAgICAgICogYnJlYWtwb2ludCB0byB0aGUgZmlyc3Qgbm9uLXplcm8gYnJlYWtwb2ludCB0byBhdm9pZCBkaXNtaXNzaW5nIHRoZSBzaGVldC5cbiAgICAgICAgICovXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0Q3VycmVudEJyZWFrcG9pbnQobmV4dEJyZWFrcG9pbnQpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGhhbmRsZSwgaXNTaGVldE1vZGFsLCBwcmVzZW50aW5nRWxlbWVudCwgaHRtbEF0dHJpYnV0ZXMsIGhhbmRsZUJlaGF2aW9yLCBpbmhlcml0ZWRBdHRyaWJ1dGVzLCBmb2N1c1RyYXAsIGV4cGFuZFRvU2Nyb2xsLCB9ID0gdGhpcztcbiAgICAgICAgY29uc3Qgc2hvd0hhbmRsZSA9IGhhbmRsZSAhPT0gZmFsc2UgJiYgaXNTaGVldE1vZGFsO1xuICAgICAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICAgICAgY29uc3QgaXNDYXJkTW9kYWwgPSBwcmVzZW50aW5nRWxlbWVudCAhPT0gdW5kZWZpbmVkICYmIG1vZGUgPT09ICdpb3MnO1xuICAgICAgICBjb25zdCBpc0hhbmRsZUN5Y2xlID0gaGFuZGxlQmVoYXZpb3IgPT09ICdjeWNsZSc7XG4gICAgICAgIHJldHVybiAoaChIb3N0LCBPYmplY3QuYXNzaWduKHsga2V5OiAnMGJjYmRjZmNkN2Q4OTBlYjU5OWRhM2Y5N2YyMWMzMTdkMzRmOGUwZScsIFwibm8tcm91dGVyXCI6IHRydWUsIHRhYmluZGV4OiBcIi0xXCIgfSwgaHRtbEF0dHJpYnV0ZXMsIHsgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICB6SW5kZXg6IGAkezIwMDAwICsgdGhpcy5vdmVybGF5SW5kZXh9YCxcbiAgICAgICAgICAgIH0sIGNsYXNzOiBPYmplY3QuYXNzaWduKHsgW21vZGVdOiB0cnVlLCBbJ21vZGFsLWRlZmF1bHQnXTogIWlzQ2FyZE1vZGFsICYmICFpc1NoZWV0TW9kYWwsIFtgbW9kYWwtY2FyZGBdOiBpc0NhcmRNb2RhbCwgW2Btb2RhbC1zaGVldGBdOiBpc1NoZWV0TW9kYWwsIFtgbW9kYWwtbm8tZXhwYW5kLXNjcm9sbGBdOiBpc1NoZWV0TW9kYWwgJiYgIWV4cGFuZFRvU2Nyb2xsLCAnb3ZlcmxheS1oaWRkZW4nOiB0cnVlLCBbRk9DVVNfVFJBUF9ESVNBQkxFX0NMQVNTXTogZm9jdXNUcmFwID09PSBmYWxzZSB9LCBnZXRDbGFzc01hcCh0aGlzLmNzc0NsYXNzKSksIG9uSW9uQmFja2Ryb3BUYXA6IHRoaXMub25CYWNrZHJvcFRhcCwgb25Jb25Nb2RhbERpZFByZXNlbnQ6IHRoaXMub25MaWZlY3ljbGUsIG9uSW9uTW9kYWxXaWxsUHJlc2VudDogdGhpcy5vbkxpZmVjeWNsZSwgb25Jb25Nb2RhbFdpbGxEaXNtaXNzOiB0aGlzLm9uTGlmZWN5Y2xlLCBvbklvbk1vZGFsRGlkRGlzbWlzczogdGhpcy5vbkxpZmVjeWNsZSB9KSwgaChcImlvbi1iYWNrZHJvcFwiLCB7IGtleTogJ2Q3MjE1OWU3M2RhYTVhZjczNDlhYTllOGY2OTVhYTQzNWViNDMwNjknLCByZWY6IChlbCkgPT4gKHRoaXMuYmFja2Ryb3BFbCA9IGVsKSwgdmlzaWJsZTogdGhpcy5zaG93QmFja2Ryb3AsIHRhcHBhYmxlOiB0aGlzLmJhY2tkcm9wRGlzbWlzcywgcGFydDogXCJiYWNrZHJvcFwiIH0pLCBtb2RlID09PSAnaW9zJyAmJiBoKFwiZGl2XCIsIHsga2V5OiAnZmQyZDliMTM2NzZhZTcyNDczODgxNjQ5YTM5N2I2ZWFjZGUwM2EwMycsIGNsYXNzOiBcIm1vZGFsLXNoYWRvd1wiIH0pLCBoKFwiZGl2XCIsIE9iamVjdC5hc3NpZ24oeyBrZXk6ICc5MDhlY2NiMWFkOTgyZGNkZTJkYmNmZjBjYmIxOGI2ZTYwZjhiYTc0JyxcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgIHJvbGUgYW5kIGFyaWEtbW9kYWwgbXVzdCBiZSB1c2VkIG9uIHRoZVxuICAgICAgICAgICAgICBzYW1lIGVsZW1lbnQuIFRoZXkgbXVzdCBhbHNvIGJlIHNldCBpbnNpZGUgdGhlXG4gICAgICAgICAgICAgIHNoYWRvdyBET00gb3RoZXJ3aXNlIGlvbi1idXR0b24gd2lsbCBub3QgYmUgaGlnaGxpZ2h0ZWRcbiAgICAgICAgICAgICAgd2hlbiB1c2luZyBWb2ljZU92ZXI6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yNDcxMzRcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICByb2xlOiBcImRpYWxvZ1wiIH0sIGluaGVyaXRlZEF0dHJpYnV0ZXMsIHsgXCJhcmlhLW1vZGFsXCI6IFwidHJ1ZVwiLCBjbGFzczogXCJtb2RhbC13cmFwcGVyIGlvbi1vdmVybGF5LXdyYXBwZXJcIiwgcGFydDogXCJjb250ZW50XCIsIHJlZjogKGVsKSA9PiAodGhpcy53cmFwcGVyRWwgPSBlbCkgfSksIHNob3dIYW5kbGUgJiYgKGgoXCJidXR0b25cIiwgeyBrZXk6ICczMzJkYzBiNDAzNjNhNzdjN2JlNjIzMzFkOWYyNmRlZjkxYzc5MGU5JywgY2xhc3M6IFwibW9kYWwtaGFuZGxlXCIsXG4gICAgICAgICAgICAvLyBQcmV2ZW50cyB0aGUgaGFuZGxlIGZyb20gcmVjZWl2aW5nIGtleWJvYXJkIGZvY3VzIHdoZW4gaXQgZG9lcyBub3QgY3ljbGVcbiAgICAgICAgICAgIHRhYkluZGV4OiAhaXNIYW5kbGVDeWNsZSA/IC0xIDogMCwgXCJhcmlhLWxhYmVsXCI6IFwiQWN0aXZhdGUgdG8gYWRqdXN0IHRoZSBzaXplIG9mIHRoZSBkaWFsb2cgb3ZlcmxheWluZyB0aGUgc2NyZWVuXCIsIG9uQ2xpY2s6IGlzSGFuZGxlQ3ljbGUgPyB0aGlzLm9uSGFuZGxlQ2xpY2sgOiB1bmRlZmluZWQsIHBhcnQ6IFwiaGFuZGxlXCIgfSkpLCBoKFwic2xvdFwiLCB7IGtleTogJ2MzMjY5ODM1MDE5M2M0NTAzMjdlOTcwNDlkYWY4YjhkMWZkYTBkMGUnIH0pKSkpO1xuICAgIH1cbiAgICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gICAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICAgICAgXCJpc09wZW5cIjogW1wib25Jc09wZW5DaGFuZ2VcIl0sXG4gICAgICAgIFwidHJpZ2dlclwiOiBbXCJ0cmlnZ2VyQ2hhbmdlZFwiXVxuICAgIH07IH1cbn07XG5jb25zdCBMSUZFQ1lDTEVfTUFQID0ge1xuICAgIGlvbk1vZGFsRGlkUHJlc2VudDogJ2lvblZpZXdEaWRFbnRlcicsXG4gICAgaW9uTW9kYWxXaWxsUHJlc2VudDogJ2lvblZpZXdXaWxsRW50ZXInLFxuICAgIGlvbk1vZGFsV2lsbERpc21pc3M6ICdpb25WaWV3V2lsbExlYXZlJyxcbiAgICBpb25Nb2RhbERpZERpc21pc3M6ICdpb25WaWV3RGlkTGVhdmUnLFxufTtcbk1vZGFsLnN0eWxlID0ge1xuICAgIGlvczogbW9kYWxJb3NDc3MsXG4gICAgbWQ6IG1vZGFsTWRDc3Ncbn07XG5cbmV4cG9ydCB7IE1vZGFsIGFzIGlvbl9tb2RhbCB9O1xuIl0sIm5hbWVzIjpbInIiLCJyZWdpc3Rlckluc3RhbmNlIiwiZCIsImNyZWF0ZUV2ZW50IiwibSIsInByaW50SW9uV2FybmluZyIsInciLCJ3cml0ZVRhc2siLCJlIiwiZ2V0SW9uTW9kZSIsImwiLCJjb25maWciLCJoIiwiaiIsIkhvc3QiLCJrIiwiZ2V0RWxlbWVudCIsImYiLCJmaW5kQ2xvc2VzdElvbkNvbnRlbnQiLCJpIiwiaXNJb25Db250ZW50IiwiZGlzYWJsZUNvbnRlbnRTY3JvbGxZIiwicmVzZXRDb250ZW50U2Nyb2xsWSIsImEiLCJmaW5kSW9uQ29udGVudCIsInAiLCJwcmludElvbkNvbnRlbnRFcnJvck1zZyIsIkMiLCJDb3JlRGVsZWdhdGUiLCJhdHRhY2hDb21wb25lbnQiLCJkZXRhY2hDb21wb25lbnQiLCJjbGFtcCIsImciLCJnZXRFbGVtZW50Um9vdCIsInJhZiIsImIiLCJpbmhlcml0QXR0cmlidXRlcyIsImhhc0xhenlCdWlsZCIsImMiLCJjcmVhdGVMb2NrQ29udHJvbGxlciIsImdldENhcGFjaXRvciIsIkciLCJHRVNUVVJFIiwiTyIsIk9WRVJMQVlfR0VTVFVSRV9QUklPUklUWSIsIkYiLCJGT0NVU19UUkFQX0RJU0FCTEVfQ0xBU1MiLCJjcmVhdGVUcmlnZ2VyQ29udHJvbGxlciIsIkIiLCJCQUNLRFJPUCIsInByZXBhcmVPdmVybGF5Iiwic2V0T3ZlcmxheUlkIiwicHJlc2VudCIsImRpc21pc3MiLCJldmVudE1ldGhvZCIsImdldENsYXNzTWFwIiwiZGVlcFJlYWR5Iiwid2FpdEZvck1vdW50IiwiS0VZQk9BUkRfRElEX09QRU4iLCJjcmVhdGVBbmltYXRpb24iLCJnZXRUaW1lR2l2ZW5Qcm9ncmVzc2lvbiIsImNyZWF0ZUdlc3R1cmUiLCJ3aW4iLCJTdHlsZSIsIlN0YXR1c0JhciIsImdldEVuZ2luZSIsImNhcGFjaXRvciIsImlzUGx1Z2luQXZhaWxhYmxlIiwiUGx1Z2lucyIsInVuZGVmaW5lZCIsInNldFN0eWxlIiwib3B0aW9ucyIsImVuZ2luZSIsImdldFN0eWxlIiwiX3JlZiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiRGVmYXVsdCIsInN0eWxlIiwiZ2V0SW5mbyIsImFwcGx5IiwiYXJndW1lbnRzIiwiZ2V0QmFja2Ryb3BWYWx1ZUZvclNoZWV0IiwieCIsImJhY2tkcm9wQnJlYWtwb2ludCIsInNsb3BlIiwic2V0Q2FyZFN0YXR1c0JhckRhcmsiLCJpbm5lcldpZHRoIiwiRGFyayIsInNldENhcmRTdGF0dXNCYXJEZWZhdWx0IiwiZGVmYXVsdFN0eWxlIiwiaGFuZGxlQ2FuRGlzbWlzcyIsIl9yZWYyIiwiZWwiLCJhbmltYXRpb24iLCJjYW5EaXNtaXNzIiwic2hvdWxkRGlzbWlzcyIsImlzUnVubmluZyIsIm9uRmluaXNoIiwib25lVGltZUNhbGxiYWNrIiwiX3giLCJfeDIiLCJjYWxjdWxhdGVTcHJpbmdTdGVwIiwidCIsIlN3aXBlVG9DbG9zZURlZmF1bHRzIiwiTUlOX1BSRVNFTlRJTkdfU0NBTEUiLCJjcmVhdGVTd2lwZVRvQ2xvc2VHZXN0dXJlIiwic3RhdHVzQmFyU3R5bGUiLCJvbkRpc21pc3MiLCJESVNNSVNTX1RIUkVTSE9MRCIsImhlaWdodCIsIm9mZnNldEhlaWdodCIsImlzT3BlbiIsImNhbkRpc21pc3NCbG9ja3NHZXN0dXJlIiwiY29udGVudEVsIiwic2Nyb2xsRWwiLCJjYW5EaXNtaXNzTWF4U3RlcCIsImluaXRpYWxTY3JvbGxZIiwibGFzdFN0ZXAiLCJnZXRTY3JvbGxZIiwic2Nyb2xsWSIsImNhblN0YXJ0IiwiZGV0YWlsIiwidGFyZ2V0IiwiZXZlbnQiLCJjbG9zZXN0Iiwicm9vdCIsInF1ZXJ5U2VsZWN0b3IiLCJoYXNSZWZyZXNoZXJJbkNvbnRlbnQiLCJzY3JvbGxUb3AiLCJmb290ZXIiLCJvblN0YXJ0IiwiZGVsdGFZIiwicHJvZ3Jlc3NTdGFydCIsIm9uTW92ZSIsInN0ZXAiLCJpc0F0dGVtcHRpbmdEaXNtaXNzV2l0aENhbkRpc21pc3MiLCJtYXhTdGVwIiwicHJvY2Vzc2VkU3RlcCIsImNsYW1wZWRTdGVwIiwicHJvZ3Jlc3NTdGVwIiwib25FbmQiLCJ2ZWxvY2l0eSIsInZlbG9jaXR5WSIsInRocmVzaG9sZCIsInNob3VsZENvbXBsZXRlIiwibmV3U3RlcFZhbHVlIiwiZWFzaW5nIiwiZHVyYXRpb24iLCJjb21wdXRlRHVyYXRpb24iLCJnZXN0dXJlIiwiZW5hYmxlIiwicHJvZ3Jlc3NFbmQiLCJnZXN0dXJlTmFtZSIsImdlc3R1cmVQcmlvcml0eSIsImRpcmVjdGlvbiIsInJlbWFpbmluZyIsIk1hdGgiLCJhYnMiLCJjcmVhdGVTaGVldEVudGVyQW5pbWF0aW9uIiwib3B0cyIsImN1cnJlbnRCcmVha3BvaW50IiwiZXhwYW5kVG9TY3JvbGwiLCJzaG91bGRTaG93QmFja2Ryb3AiLCJpbml0aWFsQmFja2Ryb3AiLCJiYWNrZHJvcEFuaW1hdGlvbiIsImZyb21UbyIsImJlZm9yZVN0eWxlcyIsImFmdGVyQ2xlYXJTdHlsZXMiLCJ3cmFwcGVyQW5pbWF0aW9uIiwia2V5ZnJhbWVzIiwib2Zmc2V0Iiwib3BhY2l0eSIsInRyYW5zZm9ybSIsImNvbnRlbnRBbmltYXRpb24iLCJtYXhIZWlnaHQiLCJjcmVhdGVTaGVldExlYXZlQW5pbWF0aW9uIiwiYmFja2Ryb3BWYWx1ZSIsImRlZmF1bHRCYWNrZHJvcCIsImN1c3RvbUJhY2tkcm9wIiwiY3JlYXRlRW50ZXJBbmltYXRpb24kMSIsImlvc0VudGVyQW5pbWF0aW9uIiwiYmFzZUVsIiwicHJlc2VudGluZ0VsIiwiYWRkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJiYXNlQW5pbWF0aW9uIiwiYWRkQW5pbWF0aW9uIiwiaXNNb2JpbGUiLCJ3aW5kb3ciLCJoYXNDYXJkTW9kYWwiLCJ0YWdOYW1lIiwicHJlc2VudGluZ0VsZW1lbnQiLCJwcmVzZW50aW5nRWxSb290IiwicHJlc2VudGluZ0FuaW1hdGlvbiIsIm92ZXJmbG93IiwiYm9keUVsIiwiZG9jdW1lbnQiLCJib2R5IiwidHJhbnNmb3JtT2Zmc2V0IiwiQ1NTIiwic3VwcG9ydHMiLCJtb2RhbFRyYW5zZm9ybSIsInRvUHJlc2VudGluZ1NjYWxlIiwiZmluYWxUcmFuc2Zvcm0iLCJhZnRlclN0eWxlcyIsImJlZm9yZUFkZFdyaXRlIiwic2V0UHJvcGVydHkiLCJmaWx0ZXIiLCJib3JkZXJSYWRpdXMiLCJzaGFkb3dBbmltYXRpb24iLCJjcmVhdGVMZWF2ZUFuaW1hdGlvbiQxIiwiaW9zTGVhdmVBbmltYXRpb24iLCJiZWZvcmVDbGVhclN0eWxlcyIsImN1cnJlbnRTdGVwIiwibnVtTW9kYWxzIiwiQXJyYXkiLCJmcm9tIiwibGVuZ3RoIiwiY3JlYXRlRW50ZXJBbmltYXRpb24iLCJtZEVudGVyQW5pbWF0aW9uIiwiY3JlYXRlTGVhdmVBbmltYXRpb24iLCJtZExlYXZlQW5pbWF0aW9uIiwiY3JlYXRlU2hlZXRHZXN0dXJlIiwiYmFja2Ryb3BFbCIsIndyYXBwZXJFbCIsImluaXRpYWxCcmVha3BvaW50IiwiYnJlYWtwb2ludHMiLCJnZXRDdXJyZW50QnJlYWtwb2ludCIsIm9uQnJlYWtwb2ludENoYW5nZSIsIlNoZWV0RGVmYXVsdHMiLCJXUkFQUEVSX0tFWUZSQU1FUyIsIkJBQ0tEUk9QX0tFWUZSQU1FUyIsIkNPTlRFTlRfS0VZRlJBTUVTIiwiY2xpZW50SGVpZ2h0IiwiY2FjaGVkU2Nyb2xsRWwiLCJjYWNoZWRGb290ZXJFbHMiLCJjYWNoZWRGb290ZXJZUG9zaXRpb24iLCJjdXJyZW50Rm9vdGVyU3RhdGUiLCJtYXhCcmVha3BvaW50IiwibWluQnJlYWtwb2ludCIsImNoaWxkQW5pbWF0aW9ucyIsImZpbmQiLCJhbmkiLCJpZCIsImVuYWJsZUJhY2tkcm9wIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiZGlzYWJsZUJhY2tkcm9wIiwiYWRkIiwic3dhcEZvb3RlclBvc2l0aW9uIiwibmV3UG9zaXRpb24iLCJwYWdlIiwiZm9yRWFjaCIsImNhY2hlZEZvb3RlckVsIiwicmVtb3ZlUHJvcGVydHkiLCJhcHBlbmRDaGlsZCIsImZvb3RlckhlaWdodHMiLCJpbmRleCIsImNhY2hlZEZvb3RlckVsUmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImJvZHlSZWN0IiwiYWJzb2x1dGVUb3AiLCJ0b3AiLCJhYnNvbHV0ZUxlZnQiLCJsZWZ0IiwiY2xpZW50V2lkdGgiLCJoZWFkZXIiLCJzaG91bGRFbmFibGVCYWNrZHJvcCIsInRhcmdldEVsIiwiZm9jdXMiLCJjdXJyZW50WSIsImluaXRpYWxTdGVwIiwic2Vjb25kVG9MYXN0QnJlYWtwb2ludCIsImRpZmYiLCJyZWR1Y2UiLCJtb3ZlU2hlZXRUb0JyZWFrcG9pbnQiLCJicmVha3BvaW50IiwiYnJlYWtwb2ludE9mZnNldCIsImFuaW1hdGVkIiwic2hvdWxkUHJldmVudERpc21pc3MiLCJzbmFwVG9CcmVha3BvaW50Iiwic2hvdWxkUmVtYWluT3BlbiIsIlByb21pc2UiLCJyZXNvbHZlIiwibW9kYWxJb3NDc3MiLCJtb2RhbE1kQ3NzIiwiTW9kYWwiLCJjb25zdHJ1Y3RvciIsImhvc3RSZWYiLCJkaWRQcmVzZW50Iiwid2lsbFByZXNlbnQiLCJ3aWxsRGlzbWlzcyIsImRpZERpc21pc3MiLCJpb25CcmVha3BvaW50RGlkQ2hhbmdlIiwiZGlkUHJlc2VudFNob3J0aGFuZCIsIndpbGxQcmVzZW50U2hvcnRoYW5kIiwid2lsbERpc21pc3NTaG9ydGhhbmQiLCJkaWREaXNtaXNzU2hvcnRoYW5kIiwiaW9uTW91bnQiLCJsb2NrQ29udHJvbGxlciIsInRyaWdnZXJDb250cm9sbGVyIiwiY29yZURlbGVnYXRlIiwiaXNTaGVldE1vZGFsIiwiaW5oZXJpdGVkQXR0cmlidXRlcyIsImlubGluZSIsImdlc3R1cmVBbmltYXRpb25EaXNtaXNzaW5nIiwicHJlc2VudGVkIiwiaGFzQ29udHJvbGxlciIsImtleWJvYXJkQ2xvc2UiLCJoYW5kbGVCZWhhdmlvciIsImJhY2tkcm9wRGlzbWlzcyIsInNob3dCYWNrZHJvcCIsImtlZXBDb250ZW50c01vdW50ZWQiLCJmb2N1c1RyYXAiLCJvbkhhbmRsZUNsaWNrIiwic2hlZXRUcmFuc2l0aW9uIiwibW92ZVRvTmV4dEJyZWFrcG9pbnQiLCJvbkJhY2tkcm9wVGFwIiwib25MaWZlY3ljbGUiLCJtb2RhbEV2ZW50IiwidXNlcnNFbGVtZW50IiwibmFtZSIsIkxJRkVDWUNMRV9NQVAiLCJ0eXBlIiwiZXYiLCJDdXN0b21FdmVudCIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwiZGlzcGF0Y2hFdmVudCIsIm9uSXNPcGVuQ2hhbmdlIiwibmV3VmFsdWUiLCJvbGRWYWx1ZSIsInRyaWdnZXJDaGFuZ2VkIiwidHJpZ2dlciIsImFkZENsaWNrTGlzdGVuZXIiLCJicmVha3BvaW50c0NoYW5nZWQiLCJzb3J0ZWRCcmVha3BvaW50cyIsInNvcnQiLCJjb25uZWN0ZWRDYWxsYmFjayIsImRpc2Nvbm5lY3RlZENhbGxiYWNrIiwicmVtb3ZlQ2xpY2tMaXN0ZW5lciIsImNvbXBvbmVudFdpbGxMb2FkIiwiX2EiLCJodG1sQXR0cmlidXRlcyIsImF0dHJpYnV0ZXNUb0luaGVyaXQiLCJhdHRyaWJ1dGUiLCJhdHRyaWJ1dGVWYWx1ZSIsIk9iamVjdCIsImFzc2lnbiIsImluY2x1ZGVzIiwiY29tcG9uZW50RGlkTG9hZCIsImdldERlbGVnYXRlIiwiZm9yY2UiLCJ3b3JraW5nRGVsZWdhdGUiLCJkZWxlZ2F0ZSIsInBhcmVudEVsIiwicGFyZW50Tm9kZSIsImNoZWNrQ2FuRGlzbWlzcyIsImRhdGEiLCJyb2xlIiwiX3RoaXMiLCJfdGhpczIiLCJ1bmxvY2siLCJsb2NrIiwiZW1pdCIsImNvbXBvbmVudCIsImNvbXBvbmVudFByb3BzIiwia2V5Ym9hcmRPcGVuQ2FsbGJhY2siLCJhZGRFdmVudExpc3RlbmVyIiwiaW5pdFNoZWV0R2VzdHVyZSIsImluaXRTd2lwZVRvQ2xvc2UiLCJfdGhpczMiLCJhbmltYXRpb25CdWlsZGVyIiwibGVhdmVBbmltYXRpb24iLCJnZXQiLCJlbnRlckFuaW1hdGlvbiIsInNoZWV0T25EaXNtaXNzIiwiX3RoaXM0IiwiX3RoaXM1IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc21pc3NlZCIsImRlc3Ryb3kiLCJvbkRpZERpc21pc3MiLCJvbldpbGxEaXNtaXNzIiwic2V0Q3VycmVudEJyZWFrcG9pbnQiLCJfdGhpczYiLCJfdGhpczciLCJfdGhpczgiLCJhbGxvd2VkQnJlYWtwb2ludHMiLCJjdXJyZW50QnJlYWtwb2ludEluZGV4IiwiaW5kZXhPZiIsIm5leHRCcmVha3BvaW50SW5kZXgiLCJuZXh0QnJlYWtwb2ludCIsInJlbmRlciIsImhhbmRsZSIsInNob3dIYW5kbGUiLCJtb2RlIiwiaXNDYXJkTW9kYWwiLCJpc0hhbmRsZUN5Y2xlIiwia2V5IiwidGFiaW5kZXgiLCJ6SW5kZXgiLCJvdmVybGF5SW5kZXgiLCJjbGFzcyIsImNzc0NsYXNzIiwib25Jb25CYWNrZHJvcFRhcCIsIm9uSW9uTW9kYWxEaWRQcmVzZW50Iiwib25Jb25Nb2RhbFdpbGxQcmVzZW50Iiwib25Jb25Nb2RhbFdpbGxEaXNtaXNzIiwib25Jb25Nb2RhbERpZERpc21pc3MiLCJyZWYiLCJ2aXNpYmxlIiwidGFwcGFibGUiLCJwYXJ0IiwidGFiSW5kZXgiLCJvbkNsaWNrIiwid2F0Y2hlcnMiLCJpb25Nb2RhbERpZFByZXNlbnQiLCJpb25Nb2RhbFdpbGxQcmVzZW50IiwiaW9uTW9kYWxXaWxsRGlzbWlzcyIsImlvbk1vZGFsRGlkRGlzbWlzcyIsImlvcyIsIm1kIiwiaW9uX21vZGFsIl0sInNvdXJjZVJvb3QiOiJ3ZWJwYWNrOi8vLyIsInhfZ29vZ2xlX2lnbm9yZUxpc3QiOlswXX0=