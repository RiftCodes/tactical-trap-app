"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_input-shims-7dc1f6dc_js"],{

/***/ 4026:
/*!*******************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/input-shims-7dc1f6dc.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   startInputShims: () => (/* binding */ startInputShims)
/* harmony export */ });
/* harmony import */ var C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 9204);
/* harmony import */ var _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-a5d50daf.js */ 6639);
/* harmony import */ var _index_e919e353_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-e919e353.js */ 1293);
/* harmony import */ var _helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helpers-78efeec3.js */ 9522);
/* harmony import */ var _keyboard_73175e24_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./keyboard-73175e24.js */ 7726);
/* harmony import */ var _index_738d7504_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index-738d7504.js */ 7243);
/* harmony import */ var _ionic_global_ca86cf32_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ionic-global-ca86cf32.js */ 1367);
/* harmony import */ var _index_527b9e34_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./index-527b9e34.js */ 4514);
/* harmony import */ var _capacitor_59395cbd_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./capacitor-59395cbd.js */ 1341);

/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */








const cloneMap = new WeakMap();
const relocateInput = (componentEl, inputEl, shouldRelocate, inputRelativeY = 0, disabledClonedInput = false) => {
  if (cloneMap.has(componentEl) === shouldRelocate) {
    return;
  }
  if (shouldRelocate) {
    addClone(componentEl, inputEl, inputRelativeY, disabledClonedInput);
  } else {
    removeClone(componentEl, inputEl);
  }
};
const isFocused = input => {
  /**
   * https://developer.mozilla.org/en-US/docs/Web/API/Node/getRootNode
   * Calling getRootNode on an element in standard web page will return HTMLDocument.
   * Calling getRootNode on an element inside of the Shadow DOM will return the associated ShadowRoot.
   * Calling getRootNode on an element that is not attached to a document/shadow tree will return
   * the root of the DOM tree it belongs to.
   * isFocused is used for the hide-caret utility which only considers input/textarea elements
   * that are present in the DOM, so we don't set types for that final case since it does not apply.
   */
  return input === input.getRootNode().activeElement;
};
const addClone = (componentEl, inputEl, inputRelativeY, disabledClonedInput = false) => {
  // this allows for the actual input to receive the focus from
  // the user's touch event, but before it receives focus, it
  // moves the actual input to a location that will not screw
  // up the app's layout, and does not allow the native browser
  // to attempt to scroll the input into place (messing up headers/footers)
  // the cloned input fills the area of where native input should be
  // while the native input fakes out the browser by relocating itself
  // before it receives the actual focus event
  // We hide the focused input (with the visible caret) invisible by making it scale(0),
  const parentEl = inputEl.parentNode;
  // DOM WRITES
  const clonedEl = inputEl.cloneNode(false);
  clonedEl.classList.add('cloned-input');
  clonedEl.tabIndex = -1;
  /**
   * Making the cloned input disabled prevents
   * Chrome for Android from still scrolling
   * the entire page since this cloned input
   * will briefly be hidden by the keyboard
   * even though it is not focused.
   *
   * This is not needed on iOS. While this
   * does not cause functional issues on iOS,
   * the input still appears slightly dimmed even
   * if we set opacity: 1.
   */
  if (disabledClonedInput) {
    clonedEl.disabled = true;
  }
  parentEl.appendChild(clonedEl);
  cloneMap.set(componentEl, clonedEl);
  const doc = componentEl.ownerDocument;
  const tx = doc.dir === 'rtl' ? 9999 : -9999;
  componentEl.style.pointerEvents = 'none';
  inputEl.style.transform = `translate3d(${tx}px,${inputRelativeY}px,0) scale(0)`;
};
const removeClone = (componentEl, inputEl) => {
  const clone = cloneMap.get(componentEl);
  if (clone) {
    cloneMap.delete(componentEl);
    clone.remove();
  }
  componentEl.style.pointerEvents = '';
  inputEl.style.transform = '';
};
/**
 * Factoring in 50px gives us some room
 * in case the keyboard shows password/autofill bars
 * asynchronously.
 */
const SCROLL_AMOUNT_PADDING = 50;
const enableHideCaretOnScroll = (componentEl, inputEl, scrollEl) => {
  if (!scrollEl || !inputEl) {
    return () => {
      return;
    };
  }
  const scrollHideCaret = shouldHideCaret => {
    if (isFocused(inputEl)) {
      relocateInput(componentEl, inputEl, shouldHideCaret);
    }
  };
  const onBlur = () => relocateInput(componentEl, inputEl, false);
  const hideCaret = () => scrollHideCaret(true);
  const showCaret = () => scrollHideCaret(false);
  (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.a)(scrollEl, 'ionScrollStart', hideCaret);
  (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.a)(scrollEl, 'ionScrollEnd', showCaret);
  inputEl.addEventListener('blur', onBlur);
  return () => {
    (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.b)(scrollEl, 'ionScrollStart', hideCaret);
    (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.b)(scrollEl, 'ionScrollEnd', showCaret);
    inputEl.removeEventListener('blur', onBlur);
  };
};
const SKIP_SELECTOR = 'input, textarea, [no-blur], [contenteditable]';
const enableInputBlurring = () => {
  let focused = true;
  let didScroll = false;
  const doc = document;
  const onScroll = () => {
    didScroll = true;
  };
  const onFocusin = () => {
    focused = true;
  };
  const onTouchend = ev => {
    // if app did scroll return early
    if (didScroll) {
      didScroll = false;
      return;
    }
    const active = doc.activeElement;
    if (!active) {
      return;
    }
    // only blur if the active element is a text-input or a textarea
    if (active.matches(SKIP_SELECTOR)) {
      return;
    }
    // if the selected target is the active element, do not blur
    const tapped = ev.target;
    if (tapped === active) {
      return;
    }
    if (tapped.matches(SKIP_SELECTOR) || tapped.closest(SKIP_SELECTOR)) {
      return;
    }
    focused = false;
    // TODO FW-2796: find a better way, why 50ms?
    setTimeout(() => {
      if (!focused) {
        active.blur();
      }
    }, 50);
  };
  (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.a)(doc, 'ionScrollStart', onScroll);
  doc.addEventListener('focusin', onFocusin, true);
  doc.addEventListener('touchend', onTouchend, false);
  return () => {
    (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.b)(doc, 'ionScrollStart', onScroll, true);
    doc.removeEventListener('focusin', onFocusin, true);
    doc.removeEventListener('touchend', onTouchend, false);
  };
};
const SCROLL_ASSIST_SPEED = 0.3;
const getScrollData = (componentEl, contentEl, keyboardHeight, platformHeight) => {
  var _a;
  const itemEl = (_a = componentEl.closest('ion-item,[ion-item]')) !== null && _a !== void 0 ? _a : componentEl;
  return calcScrollData(itemEl.getBoundingClientRect(), contentEl.getBoundingClientRect(), keyboardHeight, platformHeight);
};
const calcScrollData = (inputRect, contentRect, keyboardHeight, platformHeight) => {
  // compute input's Y values relative to the body
  const inputTop = inputRect.top;
  const inputBottom = inputRect.bottom;
  // compute visible area
  const visibleAreaTop = contentRect.top;
  const visibleAreaBottom = Math.min(contentRect.bottom, platformHeight - keyboardHeight);
  // compute safe area
  const safeAreaTop = visibleAreaTop + 15;
  const safeAreaBottom = visibleAreaBottom - SCROLL_AMOUNT_PADDING;
  // figure out if each edge of the input is within the safe area
  const distanceToBottom = safeAreaBottom - inputBottom;
  const distanceToTop = safeAreaTop - inputTop;
  // desiredScrollAmount is the negated distance to the safe area according to our calculations.
  const desiredScrollAmount = Math.round(distanceToBottom < 0 ? -distanceToBottom : distanceToTop > 0 ? -distanceToTop : 0);
  // our calculations make some assumptions that aren't always true, like the keyboard being closed when an input
  // gets focus, so make sure we don't scroll the input above the visible area
  const scrollAmount = Math.min(desiredScrollAmount, inputTop - visibleAreaTop);
  const distance = Math.abs(scrollAmount);
  const duration = distance / SCROLL_ASSIST_SPEED;
  const scrollDuration = Math.min(400, Math.max(150, duration));
  return {
    scrollAmount,
    scrollDuration,
    scrollPadding: keyboardHeight,
    inputSafeY: -(inputTop - safeAreaTop) + 4
  };
};
const PADDING_TIMER_KEY = '$ionPaddingTimer';
/**
 * Scroll padding adds additional padding to the bottom
 * of ion-content so that there is enough scroll space
 * for an input to be scrolled above the keyboard. This
 * is needed in environments where the webview does not
 * resize when the keyboard opens.
 *
 * Example: If an input at the bottom of ion-content is
 * focused, there is no additional scrolling space below
 * it, so the input cannot be scrolled above the keyboard.
 * Scroll padding fixes this by adding padding equal to the
 * height of the keyboard to the bottom of the content.
 *
 * Common environments where this is needed:
 * - Mobile Safari: The keyboard overlays the content
 * - Capacitor/Cordova on iOS: The keyboard overlays the content
 * when the KeyboardResize mode is set to 'none'.
 */
const setScrollPadding = (contentEl, paddingAmount, clearCallback) => {
  const timer = contentEl[PADDING_TIMER_KEY];
  if (timer) {
    clearTimeout(timer);
  }
  if (paddingAmount > 0) {
    contentEl.style.setProperty('--keyboard-offset', `${paddingAmount}px`);
  } else {
    contentEl[PADDING_TIMER_KEY] = setTimeout(() => {
      contentEl.style.setProperty('--keyboard-offset', '0px');
      if (clearCallback) {
        clearCallback();
      }
    }, 120);
  }
};
/**
 * When an input is about to be focused,
 * set a timeout to clear any scroll padding
 * on the content. Note: The clearing
 * is done on a timeout so that if users
 * are moving focus from one input to the next
 * then re-adding scroll padding to the new
 * input with cancel the timeout to clear the
 * scroll padding.
 */
const setClearScrollPaddingListener = (inputEl, contentEl, doneCallback) => {
  const clearScrollPadding = () => {
    if (contentEl) {
      setScrollPadding(contentEl, 0, doneCallback);
    }
  };
  inputEl.addEventListener('focusout', clearScrollPadding, {
    once: true
  });
};
let currentPadding = 0;
const SKIP_SCROLL_ASSIST = 'data-ionic-skip-scroll-assist';
const enableScrollAssist = (componentEl, inputEl, contentEl, footerEl, keyboardHeight, enableScrollPadding, keyboardResize, disableClonedInput = false) => {
  /**
   * Scroll padding should only be added if:
   * 1. The global scrollPadding config option
   * is set to true.
   * 2. The native keyboard resize mode is either "none"
   * (keyboard overlays webview) or undefined (resize
   * information unavailable)
   * Resize info is available on Capacitor 4+
   */
  const addScrollPadding = enableScrollPadding && (keyboardResize === undefined || keyboardResize.mode === _keyboard_73175e24_js__WEBPACK_IMPORTED_MODULE_4__.a.None);
  /**
   * This tracks whether or not the keyboard has been
   * presented for a single focused text field. Note
   * that it does not track if the keyboard is open
   * in general such as if the keyboard is open for
   * a different focused text field.
   */
  let hasKeyboardBeenPresentedForTextField = false;
  /**
   * When adding scroll padding we need to know
   * how much of the viewport the keyboard obscures.
   * We do this by subtracting the keyboard height
   * from the platform height.
   *
   * If we compute this value when switching between
   * inputs then the webview may already be resized.
   * At this point, `win.innerHeight` has already accounted
   * for the keyboard meaning we would then subtract
   * the keyboard height again. This will result in the input
   * being scrolled more than it needs to.
   */
  const platformHeight = _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.w !== undefined ? _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.w.innerHeight : 0;
  /**
   * Scroll assist is run when a text field
   * is focused. However, it may need to
   * re-run when the keyboard size changes
   * such that the text field is now hidden
   * underneath the keyboard.
   * This function re-runs scroll assist
   * when that happens.
   *
   * One limitation of this is on a web browser
   * where native keyboard APIs do not have cross-browser
   * support. `ionKeyboardDidShow` relies on the Visual Viewport API.
   * This means that if the keyboard changes but does not change
   * geometry, then scroll assist will not re-run even if
   * the user has scrolled the text field under the keyboard.
   * This is not a problem when running in Cordova/Capacitor
   * because `ionKeyboardDidShow` uses the native events
   * which fire every time the keyboard changes.
   */
  const keyboardShow = ev => {
    /**
     * If the keyboard has not yet been presented
     * for this text field then the text field has just
     * received focus. In that case, the focusin listener
     * will run scroll assist.
     */
    if (hasKeyboardBeenPresentedForTextField === false) {
      hasKeyboardBeenPresentedForTextField = true;
      return;
    }
    /**
     * Otherwise, the keyboard has already been presented
     * for the focused text field.
     * This means that the keyboard likely changed
     * geometry, and we need to re-run scroll assist.
     * This can happen when the user rotates their device
     * or when they switch keyboards.
     *
     * Make sure we pass in the computed keyboard height
     * rather than the estimated keyboard height.
     *
     * Since the keyboard is already open then we do not
     * need to wait for the webview to resize, so we pass
     * "waitForResize: false".
     */
    jsSetFocus(componentEl, inputEl, contentEl, footerEl, ev.detail.keyboardHeight, addScrollPadding, disableClonedInput, platformHeight, false);
  };
  /**
   * Reset the internal state when the text field loses focus.
   */
  const focusOut = () => {
    hasKeyboardBeenPresentedForTextField = false;
    _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.w === null || _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.w === void 0 ? void 0 : _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.w.removeEventListener('ionKeyboardDidShow', keyboardShow);
    componentEl.removeEventListener('focusout', focusOut);
  };
  /**
   * When the input is about to receive
   * focus, we need to move it to prevent
   * mobile Safari from adjusting the viewport.
   */
  const focusIn = /*#__PURE__*/function () {
    var _ref = (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      /**
       * Scroll assist should not run again
       * on inputs that have been manually
       * focused inside of the scroll assist
       * implementation.
       */
      if (inputEl.hasAttribute(SKIP_SCROLL_ASSIST)) {
        inputEl.removeAttribute(SKIP_SCROLL_ASSIST);
        return;
      }
      jsSetFocus(componentEl, inputEl, contentEl, footerEl, keyboardHeight, addScrollPadding, disableClonedInput, platformHeight);
      _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.w === null || _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.w === void 0 ? void 0 : _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.w.addEventListener('ionKeyboardDidShow', keyboardShow);
      componentEl.addEventListener('focusout', focusOut);
    });
    return function focusIn() {
      return _ref.apply(this, arguments);
    };
  }();
  componentEl.addEventListener('focusin', focusIn);
  return () => {
    componentEl.removeEventListener('focusin', focusIn);
    _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.w === null || _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.w === void 0 ? void 0 : _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.w.removeEventListener('ionKeyboardDidShow', keyboardShow);
    componentEl.removeEventListener('focusout', focusOut);
  };
};
/**
 * Use this function when you want to manually
 * focus an input but not have scroll assist run again.
 */
const setManualFocus = el => {
  /**
   * If element is already focused then
   * a new focusin event will not be dispatched
   * to remove the SKIL_SCROLL_ASSIST attribute.
   */
  if (document.activeElement === el) {
    return;
  }
  el.setAttribute(SKIP_SCROLL_ASSIST, 'true');
  el.focus();
};
const jsSetFocus = /*#__PURE__*/function () {
  var _ref2 = (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (componentEl, inputEl, contentEl, footerEl, keyboardHeight, enableScrollPadding, disableClonedInput = false, platformHeight = 0, waitForResize = true) {
    if (!contentEl && !footerEl) {
      return;
    }
    const scrollData = getScrollData(componentEl, contentEl || footerEl, keyboardHeight, platformHeight);
    if (contentEl && Math.abs(scrollData.scrollAmount) < 4) {
      // the text input is in a safe position that doesn't
      // require it to be scrolled into view, just set focus now
      setManualFocus(inputEl);
      /**
       * Even though the input does not need
       * scroll assist, we should preserve the
       * the scroll padding as users could be moving
       * focus from an input that needs scroll padding
       * to an input that does not need scroll padding.
       * If we remove the scroll padding now, users will
       * see the page jump.
       */
      if (enableScrollPadding && contentEl !== null) {
        setScrollPadding(contentEl, currentPadding);
        setClearScrollPaddingListener(inputEl, contentEl, () => currentPadding = 0);
      }
      return;
    }
    // temporarily move the focus to the focus holder so the browser
    // doesn't freak out while it's trying to get the input in place
    // at this point the native text input still does not have focus
    relocateInput(componentEl, inputEl, true, scrollData.inputSafeY, disableClonedInput);
    setManualFocus(inputEl);
    /**
     * Relocating/Focusing input causes the
     * click event to be cancelled, so
     * manually fire one here.
     */
    (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.r)(() => componentEl.click());
    /**
     * If enabled, we can add scroll padding to
     * the bottom of the content so that scroll assist
     * has enough room to scroll the input above
     * the keyboard.
     */
    if (enableScrollPadding && contentEl) {
      currentPadding = scrollData.scrollPadding;
      setScrollPadding(contentEl, currentPadding);
    }
    if (typeof window !== 'undefined') {
      let scrollContentTimeout;
      const _scrollContent = /*#__PURE__*/function () {
        var _ref3 = (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
          // clean up listeners and timeouts
          if (scrollContentTimeout !== undefined) {
            clearTimeout(scrollContentTimeout);
          }
          window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          window.removeEventListener('ionKeyboardDidShow', _scrollContent);
          // scroll the input into place
          if (contentEl) {
            yield (0,_index_e919e353_js__WEBPACK_IMPORTED_MODULE_2__.c)(contentEl, 0, scrollData.scrollAmount, scrollData.scrollDuration);
          }
          // the scroll view is in the correct position now
          // give the native text input focus
          relocateInput(componentEl, inputEl, false, scrollData.inputSafeY);
          // ensure this is the focused input
          setManualFocus(inputEl);
          /**
           * When the input is about to be blurred
           * we should set a timeout to remove
           * any scroll padding.
           */
          if (enableScrollPadding) {
            setClearScrollPaddingListener(inputEl, contentEl, () => currentPadding = 0);
          }
        });
        return function scrollContent() {
          return _ref3.apply(this, arguments);
        };
      }();
      const doubleKeyboardEventListener = () => {
        window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
        window.addEventListener('ionKeyboardDidShow', _scrollContent);
      };
      if (contentEl) {
        const scrollEl = yield (0,_index_e919e353_js__WEBPACK_IMPORTED_MODULE_2__.g)(contentEl);
        /**
         * scrollData will only consider the amount we need
         * to scroll in order to properly bring the input
         * into view. It will not consider the amount
         * we can scroll in the content element.
         * As a result, scrollData may request a greater
         * scroll position than is currently available
         * in the DOM. If this is the case, we need to
         * wait for the webview to resize/the keyboard
         * to show in order for additional scroll
         * bandwidth to become available.
         */
        const totalScrollAmount = scrollEl.scrollHeight - scrollEl.clientHeight;
        if (waitForResize && scrollData.scrollAmount > totalScrollAmount - scrollEl.scrollTop) {
          /**
           * On iOS devices, the system will show a "Passwords" bar above the keyboard
           * after the initial keyboard is shown. This prevents the webview from resizing
           * until the "Passwords" bar is shown, so we need to wait for that to happen first.
           */
          if (inputEl.type === 'password') {
            // Add 50px to account for the "Passwords" bar
            scrollData.scrollAmount += SCROLL_AMOUNT_PADDING;
            window.addEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          } else {
            window.addEventListener('ionKeyboardDidShow', _scrollContent);
          }
          /**
           * This should only fire in 2 instances:
           * 1. The app is very slow.
           * 2. The app is running in a browser on an old OS
           * that does not support Ionic Keyboard Events
           */
          scrollContentTimeout = setTimeout(_scrollContent, 1000);
          return;
        }
      }
      _scrollContent();
    }
  });
  return function jsSetFocus(_x, _x2, _x3, _x4, _x5, _x6) {
    return _ref2.apply(this, arguments);
  };
}();
const INPUT_BLURRING = true;
const startInputShims = /*#__PURE__*/function () {
  var _ref4 = (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (config, platform) {
    /**
     * If doc is undefined then we are in an SSR environment
     * where input shims do not apply.
     */
    if (_index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.d === undefined) {
      return;
    }
    const isIOS = platform === 'ios';
    const isAndroid = platform === 'android';
    /**
     * Hide Caret and Input Blurring are needed on iOS.
     * Scroll Assist and Scroll Padding are needed on iOS and Android
     * with Chrome web browser (not Chrome webview).
     */
    const keyboardHeight = config.getNumber('keyboardHeight', 290);
    const scrollAssist = config.getBoolean('scrollAssist', true);
    const hideCaret = config.getBoolean('hideCaretOnScroll', isIOS);
    /**
     * The team is evaluating if inputBlurring is still needed. As a result
     * this feature is disabled by default as of Ionic 8.0. Developers are
     * able to re-enable it temporarily. The team may remove this utility
     * if it is determined that doing so would not bring any adverse side effects.
     * TODO FW-6014 remove input blurring utility (including implementation)
     */
    const inputBlurring = config.getBoolean('inputBlurring', false);
    const scrollPadding = config.getBoolean('scrollPadding', true);
    const inputs = Array.from(_index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.d.querySelectorAll('ion-input, ion-textarea'));
    const hideCaretMap = new WeakMap();
    const scrollAssistMap = new WeakMap();
    /**
     * Grab the native keyboard resize configuration
     * and pass it to scroll assist. Scroll assist requires
     * that we adjust the input right before the input
     * is about to be focused. If we called `Keyboard.getResizeMode`
     * on focusin in scroll assist, we could potentially adjust the
     * input too late since this call is async.
     */
    const keyboardResizeMode = yield _keyboard_73175e24_js__WEBPACK_IMPORTED_MODULE_4__.K.getResizeMode();
    const registerInput = /*#__PURE__*/function () {
      var _ref5 = (0,C_Users_faiza_OneDrive_Desktop_desko_On_Going_Tactical_Traps_ble_lock_v1_4_1_ble_lock_capacitor_v1_4_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (componentEl) {
        yield new Promise(resolve => (0,_helpers_78efeec3_js__WEBPACK_IMPORTED_MODULE_3__.c)(componentEl, resolve));
        const inputRoot = componentEl.shadowRoot || componentEl;
        const inputEl = inputRoot.querySelector('input') || inputRoot.querySelector('textarea');
        const scrollEl = (0,_index_e919e353_js__WEBPACK_IMPORTED_MODULE_2__.f)(componentEl);
        const footerEl = !scrollEl ? componentEl.closest('ion-footer') : null;
        if (!inputEl) {
          return;
        }
        if (!!scrollEl && hideCaret && !hideCaretMap.has(componentEl)) {
          const rmFn = enableHideCaretOnScroll(componentEl, inputEl, scrollEl);
          hideCaretMap.set(componentEl, rmFn);
        }
        /**
         * date/datetime-locale inputs on mobile devices show date picker
         * overlays instead of keyboards. As a result, scroll assist is
         * not needed. This also works around a bug in iOS <16 where
         * scroll assist causes the browser to lock up. See FW-1997.
         */
        const isDateInput = inputEl.type === 'date' || inputEl.type === 'datetime-local';
        if (!isDateInput && (!!scrollEl || !!footerEl) && scrollAssist && !scrollAssistMap.has(componentEl)) {
          const rmFn = enableScrollAssist(componentEl, inputEl, scrollEl, footerEl, keyboardHeight, scrollPadding, keyboardResizeMode, isAndroid);
          scrollAssistMap.set(componentEl, rmFn);
        }
      });
      return function registerInput(_x9) {
        return _ref5.apply(this, arguments);
      };
    }();
    const unregisterInput = componentEl => {
      if (hideCaret) {
        const fn = hideCaretMap.get(componentEl);
        if (fn) {
          fn();
        }
        hideCaretMap.delete(componentEl);
      }
      if (scrollAssist) {
        const fn = scrollAssistMap.get(componentEl);
        if (fn) {
          fn();
        }
        scrollAssistMap.delete(componentEl);
      }
    };
    if (inputBlurring && INPUT_BLURRING) {
      enableInputBlurring();
    }
    // Input might be already loaded in the DOM before ion-device-hacks did.
    // At this point we need to look for all of the inputs not registered yet
    // and register them.
    for (const input of inputs) {
      registerInput(input);
    }
    _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.d.addEventListener('ionInputDidLoad', ev => {
      registerInput(ev.detail);
    });
    _index_a5d50daf_js__WEBPACK_IMPORTED_MODULE_1__.d.addEventListener('ionInputDidUnload', ev => {
      unregisterInput(ev.detail);
    });
  });
  return function startInputShims(_x7, _x8) {
    return _ref4.apply(this, arguments);
  };
}();


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW5wdXQtc2hpbXMtN2RjMWY2ZGNfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDeUQ7QUFDbUQ7QUFDYTtBQUM3QztBQUMvQztBQUNPO0FBQ1A7QUFDSTtBQUVqQyxNQUFNb0IsUUFBUSxHQUFHLElBQUlDLE9BQU8sQ0FBQyxDQUFDO0FBQzlCLE1BQU1DLGFBQWEsR0FBR0EsQ0FBQ0MsV0FBVyxFQUFFQyxPQUFPLEVBQUVDLGNBQWMsRUFBRUMsY0FBYyxHQUFHLENBQUMsRUFBRUMsbUJBQW1CLEdBQUcsS0FBSyxLQUFLO0VBQzdHLElBQUlQLFFBQVEsQ0FBQ1EsR0FBRyxDQUFDTCxXQUFXLENBQUMsS0FBS0UsY0FBYyxFQUFFO0lBQzlDO0VBQ0o7RUFDQSxJQUFJQSxjQUFjLEVBQUU7SUFDaEJJLFFBQVEsQ0FBQ04sV0FBVyxFQUFFQyxPQUFPLEVBQUVFLGNBQWMsRUFBRUMsbUJBQW1CLENBQUM7RUFDdkUsQ0FBQyxNQUNJO0lBQ0RHLFdBQVcsQ0FBQ1AsV0FBVyxFQUFFQyxPQUFPLENBQUM7RUFDckM7QUFDSixDQUFDO0FBQ0QsTUFBTU8sU0FBUyxHQUFJQyxLQUFLLElBQUs7RUFDekI7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0ksT0FBT0EsS0FBSyxLQUFLQSxLQUFLLENBQUNDLFdBQVcsQ0FBQyxDQUFDLENBQUNDLGFBQWE7QUFDdEQsQ0FBQztBQUNELE1BQU1MLFFBQVEsR0FBR0EsQ0FBQ04sV0FBVyxFQUFFQyxPQUFPLEVBQUVFLGNBQWMsRUFBRUMsbUJBQW1CLEdBQUcsS0FBSyxLQUFLO0VBQ3BGO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBLE1BQU1RLFFBQVEsR0FBR1gsT0FBTyxDQUFDWSxVQUFVO0VBQ25DO0VBQ0EsTUFBTUMsUUFBUSxHQUFHYixPQUFPLENB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QyxHQUFBO0lBQUEsT0FBQTlCLEtBQUEsQ0FBQTVCLEtBQUEsT0FBQUMsU0FBQTtFQUFBO0FBQUEsR0FrR3BCIiwic291cmNlcyI6WyIuL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9kaXN0L2VzbS9pbnB1dC1zaGltcy03ZGMxZjZkYy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgdyBhcyB3aW4sIGQgYXMgZG9jIH0gZnJvbSAnLi9pbmRleC1hNWQ1MGRhZi5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldFNjcm9sbEVsZW1lbnQsIGMgYXMgc2Nyb2xsQnlQb2ludCwgZiBhcyBmaW5kQ2xvc2VzdElvbkNvbnRlbnQgfSBmcm9tICcuL2luZGV4LWU5MTllMzUzLmpzJztcbmltcG9ydCB7IGEgYXMgYWRkRXZlbnRMaXN0ZW5lciwgYiBhcyByZW1vdmVFdmVudExpc3RlbmVyLCByIGFzIHJhZiwgYyBhcyBjb21wb25lbnRPblJlYWR5IH0gZnJvbSAnLi9oZWxwZXJzLTc4ZWZlZWMzLmpzJztcbmltcG9ydCB7IGEgYXMgS2V5Ym9hcmRSZXNpemUsIEsgYXMgS2V5Ym9hcmQgfSBmcm9tICcuL2tleWJvYXJkLTczMTc1ZTI0LmpzJztcbmltcG9ydCAnLi9pbmRleC03MzhkNzUwNC5qcyc7XG5pbXBvcnQgJy4vaW9uaWMtZ2xvYmFsLWNhODZjZjMyLmpzJztcbmltcG9ydCAnLi9pbmRleC01MjdiOWUzNC5qcyc7XG5pbXBvcnQgJy4vY2FwYWNpdG9yLTU5Mzk1Y2JkLmpzJztcblxuY29uc3QgY2xvbmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmVsb2NhdGVJbnB1dCA9IChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2hvdWxkUmVsb2NhdGUsIGlucHV0UmVsYXRpdmVZID0gMCwgZGlzYWJsZWRDbG9uZWRJbnB1dCA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKGNsb25lTWFwLmhhcyhjb21wb25lbnRFbCkgPT09IHNob3VsZFJlbG9jYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNob3VsZFJlbG9jYXRlKSB7XG4gICAgICAgIGFkZENsb25lKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBpbnB1dFJlbGF0aXZlWSwgZGlzYWJsZWRDbG9uZWRJbnB1dCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZW1vdmVDbG9uZShjb21wb25lbnRFbCwgaW5wdXRFbCk7XG4gICAgfVxufTtcbmNvbnN0IGlzRm9jdXNlZCA9IChpbnB1dCkgPT4ge1xuICAgIC8qKlxuICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ob2RlL2dldFJvb3ROb2RlXG4gICAgICogQ2FsbGluZyBnZXRSb290Tm9kZSBvbiBhbiBlbGVtZW50IGluIHN0YW5kYXJkIHdlYiBwYWdlIHdpbGwgcmV0dXJuIEhUTUxEb2N1bWVudC5cbiAgICAgKiBDYWxsaW5nIGdldFJvb3ROb2RlIG9uIGFuIGVsZW1lbnQgaW5zaWRlIG9mIHRoZSBTaGFkb3cgRE9NIHdpbGwgcmV0dXJuIHRoZSBhc3NvY2lhdGVkIFNoYWRvd1Jvb3QuXG4gICAgICogQ2FsbGluZyBnZXRSb290Tm9kZSBvbiBhbiBlbGVtZW50IHRoYXQgaXMgbm90IGF0dGFjaGVkIHRvIGEgZG9jdW1lbnQvc2hhZG93IHRyZWUgd2lsbCByZXR1cm5cbiAgICAgKiB0aGUgcm9vdCBvZiB0aGUgRE9NIHRyZWUgaXQgYmVsb25ncyB0by5cbiAgICAgKiBpc0ZvY3VzZWQgaXMgdXNlZCBmb3IgdGhlIGhpZGUtY2FyZXQgdXRpbGl0eSB3aGljaCBvbmx5IGNvbnNpZGVycyBpbnB1dC90ZXh0YXJlYSBlbGVtZW50c1xuICAgICAqIHRoYXQgYXJlIHByZXNlbnQgaW4gdGhlIERPTSwgc28gd2UgZG9uJ3Qgc2V0IHR5cGVzIGZvciB0aGF0IGZpbmFsIGNhc2Ugc2luY2UgaXQgZG9lcyBub3QgYXBwbHkuXG4gICAgICovXG4gICAgcmV0dXJuIGlucHV0ID09PSBpbnB1dC5nZXRSb290Tm9kZSgpLmFjdGl2ZUVsZW1lbnQ7XG59O1xuY29uc3QgYWRkQ2xvbmUgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIGlucHV0UmVsYXRpdmVZLCBkaXNhYmxlZENsb25lZElucHV0ID0gZmFsc2UpID0+IHtcbiAgICAvLyB0aGlzIGFsbG93cyBmb3IgdGhlIGFjdHVhbCBpbnB1dCB0byByZWNlaXZlIHRoZSBmb2N1cyBmcm9tXG4gICAgLy8gdGhlIHVzZXIncyB0b3VjaCBldmVudCwgYnV0IGJlZm9yZSBpdCByZWNlaXZlcyBmb2N1cywgaXRcbiAgICAvLyBtb3ZlcyB0aGUgYWN0dWFsIGlucHV0IHRvIGEgbG9jYXRpb24gdGhhdCB3aWxsIG5vdCBzY3Jld1xuICAgIC8vIHVwIHRoZSBhcHAncyBsYXlvdXQsIGFuZCBkb2VzIG5vdCBhbGxvdyB0aGUgbmF0aXZlIGJyb3dzZXJcbiAgICAvLyB0byBhdHRlbXB0IHRvIHNjcm9sbCB0aGUgaW5wdXQgaW50byBwbGFjZSAobWVzc2luZyB1cCBoZWFkZXJzL2Zvb3RlcnMpXG4gICAgLy8gdGhlIGNsb25lZCBpbnB1dCBmaWxscyB0aGUgYXJlYSBvZiB3aGVyZSBuYXRpdmUgaW5wdXQgc2hvdWxkIGJlXG4gICAgLy8gd2hpbGUgdGhlIG5hdGl2ZSBpbnB1dCBmYWtlcyBvdXQgdGhlIGJyb3dzZXIgYnkgcmVsb2NhdGluZyBpdHNlbGZcbiAgICAvLyBiZWZvcmUgaXQgcmVjZWl2ZXMgdGhlIGFjdHVhbCBmb2N1cyBldmVudFxuICAgIC8vIFdlIGhpZGUgdGhlIGZvY3VzZWQgaW5wdXQgKHdpdGggdGhlIHZpc2libGUgY2FyZXQpIGludmlzaWJsZSBieSBtYWtpbmcgaXQgc2NhbGUoMCksXG4gICAgY29uc3QgcGFyZW50RWwgPSBpbnB1dEVsLnBhcmVudE5vZGU7XG4gICAgLy8gRE9NIFdSSVRFU1xuICAgIGNvbnN0IGNsb25lZEVsID0gaW5wdXRFbC5jbG9uZU5vZGUoZmFsc2UpO1xuICAgIGNsb25lZEVsLmNsYXNzTGlzdC5hZGQoJ2Nsb25lZC1pbnB1dCcpO1xuICAgIGNsb25lZEVsLnRhYkluZGV4ID0gLTE7XG4gICAgLyoqXG4gICAgICogTWFraW5nIHRoZSBjbG9uZWQgaW5wdXQgZGlzYWJsZWQgcHJldmVudHNcbiAgICAgKiBDaHJvbWUgZm9yIEFuZHJvaWQgZnJvbSBzdGlsbCBzY3JvbGxpbmdcbiAgICAgKiB0aGUgZW50aXJlIHBhZ2Ugc2luY2UgdGhpcyBjbG9uZWQgaW5wdXRcbiAgICAgKiB3aWxsIGJyaWVmbHkgYmUgaGlkZGVuIGJ5IHRoZSBrZXlib2FyZFxuICAgICAqIGV2ZW4gdGhvdWdoIGl0IGlzIG5vdCBmb2N1c2VkLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBub3QgbmVlZGVkIG9uIGlPUy4gV2hpbGUgdGhpc1xuICAgICAqIGRvZXMgbm90IGNhdXNlIGZ1bmN0aW9uYWwgaXNzdWVzIG9uIGlPUyxcbiAgICAgKiB0aGUgaW5wdXQgc3RpbGwgYXBwZWFycyBzbGlnaHRseSBkaW1tZWQgZXZlblxuICAgICAqIGlmIHdlIHNldCBvcGFjaXR5OiAxLlxuICAgICAqL1xuICAgIGlmIChkaXNhYmxlZENsb25lZElucHV0KSB7XG4gICAgICAgIGNsb25lZEVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcGFyZW50RWwuYXBwZW5kQ2hpbGQoY2xvbmVkRWwpO1xuICAgIGNsb25lTWFwLnNldChjb21wb25lbnRFbCwgY2xvbmVkRWwpO1xuICAgIGNvbnN0IGRvYyA9IGNvbXBvbmVudEVsLm93bmVyRG9jdW1lbnQ7XG4gICAgY29uc3QgdHggPSBkb2MuZGlyID09PSAncnRsJyA/IDk5OTkgOiAtOTk5OTtcbiAgICBjb21wb25lbnRFbC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIGlucHV0RWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7dHh9cHgsJHtpbnB1dFJlbGF0aXZlWX1weCwwKSBzY2FsZSgwKWA7XG59O1xuY29uc3QgcmVtb3ZlQ2xvbmUgPSAoY29tcG9uZW50RWwsIGlucHV0RWwpID0+IHtcbiAgICBjb25zdCBjbG9uZSA9IGNsb25lTWFwLmdldChjb21wb25lbnRFbCk7XG4gICAgaWYgKGNsb25lKSB7XG4gICAgICAgIGNsb25lTWFwLmRlbGV0ZShjb21wb25lbnRFbCk7XG4gICAgICAgIGNsb25lLnJlbW92ZSgpO1xuICAgIH1cbiAgICBjb21wb25lbnRFbC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJyc7XG4gICAgaW5wdXRFbC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbn07XG4vKipcbiAqIEZhY3RvcmluZyBpbiA1MHB4IGdpdmVzIHVzIHNvbWUgcm9vbVxuICogaW4gY2FzZSB0aGUga2V5Ym9hcmQgc2hvd3MgcGFzc3dvcmQvYXV0b2ZpbGwgYmFyc1xuICogYXN5bmNocm9ub3VzbHkuXG4gKi9cbmNvbnN0IFNDUk9MTF9BTU9VTlRfUEFERElORyA9IDUwO1xuXG5jb25zdCBlbmFibGVIaWRlQ2FyZXRPblNjcm9sbCA9IChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2Nyb2xsRWwpID0+IHtcbiAgICBpZiAoIXNjcm9sbEVsIHx8ICFpbnB1dEVsKSB7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHNjcm9sbEhpZGVDYXJldCA9IChzaG91bGRIaWRlQ2FyZXQpID0+IHtcbiAgICAgICAgaWYgKGlzRm9jdXNlZChpbnB1dEVsKSkge1xuICAgICAgICAgICAgcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2hvdWxkSGlkZUNhcmV0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgb25CbHVyID0gKCkgPT4gcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgZmFsc2UpO1xuICAgIGNvbnN0IGhpZGVDYXJldCA9ICgpID0+IHNjcm9sbEhpZGVDYXJldCh0cnVlKTtcbiAgICBjb25zdCBzaG93Q2FyZXQgPSAoKSA9PiBzY3JvbGxIaWRlQ2FyZXQoZmFsc2UpO1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoc2Nyb2xsRWwsICdpb25TY3JvbGxTdGFydCcsIGhpZGVDYXJldCk7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbEVuZCcsIHNob3dDYXJldCk7XG4gICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgb25CbHVyKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsU3RhcnQnLCBoaWRlQ2FyZXQpO1xuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsRW5kJywgc2hvd0NhcmV0KTtcbiAgICAgICAgaW5wdXRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgb25CbHVyKTtcbiAgICB9O1xufTtcblxuY29uc3QgU0tJUF9TRUxFQ1RPUiA9ICdpbnB1dCwgdGV4dGFyZWEsIFtuby1ibHVyXSwgW2NvbnRlbnRlZGl0YWJsZV0nO1xuY29uc3QgZW5hYmxlSW5wdXRCbHVycmluZyA9ICgpID0+IHtcbiAgICBsZXQgZm9jdXNlZCA9IHRydWU7XG4gICAgbGV0IGRpZFNjcm9sbCA9IGZhbHNlO1xuICAgIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICAgIGNvbnN0IG9uU2Nyb2xsID0gKCkgPT4ge1xuICAgICAgICBkaWRTY3JvbGwgPSB0cnVlO1xuICAgIH07XG4gICAgY29uc3Qgb25Gb2N1c2luID0gKCkgPT4ge1xuICAgICAgICBmb2N1c2VkID0gdHJ1ZTtcbiAgICB9O1xuICAgIGNvbnN0IG9uVG91Y2hlbmQgPSAoZXYpID0+IHtcbiAgICAgICAgLy8gaWYgYXBwIGRpZCBzY3JvbGwgcmV0dXJuIGVhcmx5XG4gICAgICAgIGlmIChkaWRTY3JvbGwpIHtcbiAgICAgICAgICAgIGRpZFNjcm9sbCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9IGRvYy5hY3RpdmVFbGVtZW50O1xuICAgICAgICBpZiAoIWFjdGl2ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIG9ubHkgYmx1ciBpZiB0aGUgYWN0aXZlIGVsZW1lbnQgaXMgYSB0ZXh0LWlucHV0IG9yIGEgdGV4dGFyZWFcbiAgICAgICAgaWYgKGFjdGl2ZS5tYXRjaGVzKFNLSVBfU0VMRUNUT1IpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgdGhlIHNlbGVjdGVkIHRhcmdldCBpcyB0aGUgYWN0aXZlIGVsZW1lbnQsIGRvIG5vdCBibHVyXG4gICAgICAgIGNvbnN0IHRhcHBlZCA9IGV2LnRhcmdldDtcbiAgICAgICAgaWYgKHRhcHBlZCA9PT0gYWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcHBlZC5tYXRjaGVzKFNLSVBfU0VMRUNUT1IpIHx8IHRhcHBlZC5jbG9zZXN0KFNLSVBfU0VMRUNUT1IpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAvLyBUT0RPIEZXLTI3OTY6IGZpbmQgYSBiZXR0ZXIgd2F5LCB3aHkgNTBtcz9cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmUuYmx1cigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCA1MCk7XG4gICAgfTtcbiAgICBhZGRFdmVudExpc3RlbmVyKGRvYywgJ2lvblNjcm9sbFN0YXJ0Jywgb25TY3JvbGwpO1xuICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luLCB0cnVlKTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblRvdWNoZW5kLCBmYWxzZSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihkb2MsICdpb25TY3JvbGxTdGFydCcsIG9uU2Nyb2xsLCB0cnVlKTtcbiAgICAgICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBvbkZvY3VzaW4sIHRydWUpO1xuICAgICAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblRvdWNoZW5kLCBmYWxzZSk7XG4gICAgfTtcbn07XG5cbmNvbnN0IFNDUk9MTF9BU1NJU1RfU1BFRUQgPSAwLjM7XG5jb25zdCBnZXRTY3JvbGxEYXRhID0gKGNvbXBvbmVudEVsLCBjb250ZW50RWwsIGtleWJvYXJkSGVpZ2h0LCBwbGF0Zm9ybUhlaWdodCkgPT4ge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBpdGVtRWwgPSAoX2EgPSBjb21wb25lbnRFbC5jbG9zZXN0KCdpb24taXRlbSxbaW9uLWl0ZW1dJykpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGNvbXBvbmVudEVsO1xuICAgIHJldHVybiBjYWxjU2Nyb2xsRGF0YShpdGVtRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGNvbnRlbnRFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwga2V5Ym9hcmRIZWlnaHQsIHBsYXRmb3JtSGVpZ2h0KTtcbn07XG5jb25zdCBjYWxjU2Nyb2xsRGF0YSA9IChpbnB1dFJlY3QsIGNvbnRlbnRSZWN0LCBrZXlib2FyZEhlaWdodCwgcGxhdGZvcm1IZWlnaHQpID0+IHtcbiAgICAvLyBjb21wdXRlIGlucHV0J3MgWSB2YWx1ZXMgcmVsYXRpdmUgdG8gdGhlIGJvZHlcbiAgICBjb25zdCBpbnB1dFRvcCA9IGlucHV0UmVjdC50b3A7XG4gICAgY29uc3QgaW5wdXRCb3R0b20gPSBpbnB1dFJlY3QuYm90dG9tO1xuICAgIC8vIGNvbXB1dGUgdmlzaWJsZSBhcmVhXG4gICAgY29uc3QgdmlzaWJsZUFyZWFUb3AgPSBjb250ZW50UmVjdC50b3A7XG4gICAgY29uc3QgdmlzaWJsZUFyZWFCb3R0b20gPSBNYXRoLm1pbihjb250ZW50UmVjdC5ib3R0b20sIHBsYXRmb3JtSGVpZ2h0IC0ga2V5Ym9hcmRIZWlnaHQpO1xuICAgIC8vIGNvbXB1dGUgc2FmZSBhcmVhXG4gICAgY29uc3Qgc2FmZUFyZWFUb3AgPSB2aXNpYmxlQXJlYVRvcCArIDE1O1xuICAgIGNvbnN0IHNhZmVBcmVhQm90dG9tID0gdmlzaWJsZUFyZWFCb3R0b20gLSBTQ1JPTExfQU1PVU5UX1BBRERJTkc7XG4gICAgLy8gZmlndXJlIG91dCBpZiBlYWNoIGVkZ2Ugb2YgdGhlIGlucHV0IGlzIHdpdGhpbiB0aGUgc2FmZSBhcmVhXG4gICAgY29uc3QgZGlzdGFuY2VUb0JvdHRvbSA9IHNhZmVBcmVhQm90dG9tIC0gaW5wdXRCb3R0b207XG4gICAgY29uc3QgZGlzdGFuY2VUb1RvcCA9IHNhZmVBcmVhVG9wIC0gaW5wdXRUb3A7XG4gICAgLy8gZGVzaXJlZFNjcm9sbEFtb3VudCBpcyB0aGUgbmVnYXRlZCBkaXN0YW5jZSB0byB0aGUgc2FmZSBhcmVhIGFjY29yZGluZyB0byBvdXIgY2FsY3VsYXRpb25zLlxuICAgIGNvbnN0IGRlc2lyZWRTY3JvbGxBbW91bnQgPSBNYXRoLnJvdW5kKGRpc3RhbmNlVG9Cb3R0b20gPCAwID8gLWRpc3RhbmNlVG9Cb3R0b20gOiBkaXN0YW5jZVRvVG9wID4gMCA/IC1kaXN0YW5jZVRvVG9wIDogMCk7XG4gICAgLy8gb3VyIGNhbGN1bGF0aW9ucyBtYWtlIHNvbWUgYXNzdW1wdGlvbnMgdGhhdCBhcmVuJ3QgYWx3YXlzIHRydWUsIGxpa2UgdGhlIGtleWJvYXJkIGJlaW5nIGNsb3NlZCB3aGVuIGFuIGlucHV0XG4gICAgLy8gZ2V0cyBmb2N1cywgc28gbWFrZSBzdXJlIHdlIGRvbid0IHNjcm9sbCB0aGUgaW5wdXQgYWJvdmUgdGhlIHZpc2libGUgYXJlYVxuICAgIGNvbnN0IHNjcm9sbEFtb3VudCA9IE1hdGgubWluKGRlc2lyZWRTY3JvbGxBbW91bnQsIGlucHV0VG9wIC0gdmlzaWJsZUFyZWFUb3ApO1xuICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5hYnMoc2Nyb2xsQW1vdW50KTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGRpc3RhbmNlIC8gU0NST0xMX0FTU0lTVF9TUEVFRDtcbiAgICBjb25zdCBzY3JvbGxEdXJhdGlvbiA9IE1hdGgubWluKDQwMCwgTWF0aC5tYXgoMTUwLCBkdXJhdGlvbikpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNjcm9sbEFtb3VudCxcbiAgICAgICAgc2Nyb2xsRHVyYXRpb24sXG4gICAgICAgIHNjcm9sbFBhZGRpbmc6IGtleWJvYXJkSGVpZ2h0LFxuICAgICAgICBpbnB1dFNhZmVZOiAtKGlucHV0VG9wIC0gc2FmZUFyZWFUb3ApICsgNCxcbiAgICB9O1xufTtcblxuY29uc3QgUEFERElOR19USU1FUl9LRVkgPSAnJGlvblBhZGRpbmdUaW1lcic7XG4vKipcbiAqIFNjcm9sbCBwYWRkaW5nIGFkZHMgYWRkaXRpb25hbCBwYWRkaW5nIHRvIHRoZSBib3R0b21cbiAqIG9mIGlvbi1jb250ZW50IHNvIHRoYXQgdGhlcmUgaXMgZW5vdWdoIHNjcm9sbCBzcGFjZVxuICogZm9yIGFuIGlucHV0IHRvIGJlIHNjcm9sbGVkIGFib3ZlIHRoZSBrZXlib2FyZC4gVGhpc1xuICogaXMgbmVlZGVkIGluIGVudmlyb25tZW50cyB3aGVyZSB0aGUgd2VidmlldyBkb2VzIG5vdFxuICogcmVzaXplIHdoZW4gdGhlIGtleWJvYXJkIG9wZW5zLlxuICpcbiAqIEV4YW1wbGU6IElmIGFuIGlucHV0IGF0IHRoZSBib3R0b20gb2YgaW9uLWNvbnRlbnQgaXNcbiAqIGZvY3VzZWQsIHRoZXJlIGlzIG5vIGFkZGl0aW9uYWwgc2Nyb2xsaW5nIHNwYWNlIGJlbG93XG4gKiBpdCwgc28gdGhlIGlucHV0IGNhbm5vdCBiZSBzY3JvbGxlZCBhYm92ZSB0aGUga2V5Ym9hcmQuXG4gKiBTY3JvbGwgcGFkZGluZyBmaXhlcyB0aGlzIGJ5IGFkZGluZyBwYWRkaW5nIGVxdWFsIHRvIHRoZVxuICogaGVpZ2h0IG9mIHRoZSBrZXlib2FyZCB0byB0aGUgYm90dG9tIG9mIHRoZSBjb250ZW50LlxuICpcbiAqIENvbW1vbiBlbnZpcm9ubWVudHMgd2hlcmUgdGhpcyBpcyBuZWVkZWQ6XG4gKiAtIE1vYmlsZSBTYWZhcmk6IFRoZSBrZXlib2FyZCBvdmVybGF5cyB0aGUgY29udGVudFxuICogLSBDYXBhY2l0b3IvQ29yZG92YSBvbiBpT1M6IFRoZSBrZXlib2FyZCBvdmVybGF5cyB0aGUgY29udGVudFxuICogd2hlbiB0aGUgS2V5Ym9hcmRSZXNpemUgbW9kZSBpcyBzZXQgdG8gJ25vbmUnLlxuICovXG5jb25zdCBzZXRTY3JvbGxQYWRkaW5nID0gKGNvbnRlbnRFbCwgcGFkZGluZ0Ftb3VudCwgY2xlYXJDYWxsYmFjaykgPT4ge1xuICAgIGNvbnN0IHRpbWVyID0gY29udGVudEVsW1BBRERJTkdfVElNRVJfS0VZXTtcbiAgICBpZiAodGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICB9XG4gICAgaWYgKHBhZGRpbmdBbW91bnQgPiAwKSB7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1rZXlib2FyZC1vZmZzZXQnLCBgJHtwYWRkaW5nQW1vdW50fXB4YCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb250ZW50RWxbUEFERElOR19USU1FUl9LRVldID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb250ZW50RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0ta2V5Ym9hcmQtb2Zmc2V0JywgJzBweCcpO1xuICAgICAgICAgICAgaWYgKGNsZWFyQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjbGVhckNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDEyMCk7XG4gICAgfVxufTtcbi8qKlxuICogV2hlbiBhbiBpbnB1dCBpcyBhYm91dCB0byBiZSBmb2N1c2VkLFxuICogc2V0IGEgdGltZW91dCB0byBjbGVhciBhbnkgc2Nyb2xsIHBhZGRpbmdcbiAqIG9uIHRoZSBjb250ZW50LiBOb3RlOiBUaGUgY2xlYXJpbmdcbiAqIGlzIGRvbmUgb24gYSB0aW1lb3V0IHNvIHRoYXQgaWYgdXNlcnNcbiAqIGFyZSBtb3ZpbmcgZm9jdXMgZnJvbSBvbmUgaW5wdXQgdG8gdGhlIG5leHRcbiAqIHRoZW4gcmUtYWRkaW5nIHNjcm9sbCBwYWRkaW5nIHRvIHRoZSBuZXdcbiAqIGlucHV0IHdpdGggY2FuY2VsIHRoZSB0aW1lb3V0IHRvIGNsZWFyIHRoZVxuICogc2Nyb2xsIHBhZGRpbmcuXG4gKi9cbmNvbnN0IHNldENsZWFyU2Nyb2xsUGFkZGluZ0xpc3RlbmVyID0gKGlucHV0RWwsIGNvbnRlbnRFbCwgZG9uZUNhbGxiYWNrKSA9PiB7XG4gICAgY29uc3QgY2xlYXJTY3JvbGxQYWRkaW5nID0gKCkgPT4ge1xuICAgICAgICBpZiAoY29udGVudEVsKSB7XG4gICAgICAgICAgICBzZXRTY3JvbGxQYWRkaW5nKGNvbnRlbnRFbCwgMCwgZG9uZUNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGNsZWFyU2Nyb2xsUGFkZGluZywgeyBvbmNlOiB0cnVlIH0pO1xufTtcblxubGV0IGN1cnJlbnRQYWRkaW5nID0gMDtcbmNvbnN0IFNLSVBfU0NST0xMX0FTU0lTVCA9ICdkYXRhLWlvbmljLXNraXAtc2Nyb2xsLWFzc2lzdCc7XG5jb25zdCBlbmFibGVTY3JvbGxBc3Npc3QgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIGNvbnRlbnRFbCwgZm9vdGVyRWwsIGtleWJvYXJkSGVpZ2h0LCBlbmFibGVTY3JvbGxQYWRkaW5nLCBrZXlib2FyZFJlc2l6ZSwgZGlzYWJsZUNsb25lZElucHV0ID0gZmFsc2UpID0+IHtcbiAgICAvKipcbiAgICAgKiBTY3JvbGwgcGFkZGluZyBzaG91bGQgb25seSBiZSBhZGRlZCBpZjpcbiAgICAgKiAxLiBUaGUgZ2xvYmFsIHNjcm9sbFBhZGRpbmcgY29uZmlnIG9wdGlvblxuICAgICAqIGlzIHNldCB0byB0cnVlLlxuICAgICAqIDIuIFRoZSBuYXRpdmUga2V5Ym9hcmQgcmVzaXplIG1vZGUgaXMgZWl0aGVyIFwibm9uZVwiXG4gICAgICogKGtleWJvYXJkIG92ZXJsYXlzIHdlYnZpZXcpIG9yIHVuZGVmaW5lZCAocmVzaXplXG4gICAgICogaW5mb3JtYXRpb24gdW5hdmFpbGFibGUpXG4gICAgICogUmVzaXplIGluZm8gaXMgYXZhaWxhYmxlIG9uIENhcGFjaXRvciA0K1xuICAgICAqL1xuICAgIGNvbnN0IGFkZFNjcm9sbFBhZGRpbmcgPSBlbmFibGVTY3JvbGxQYWRkaW5nICYmIChrZXlib2FyZFJlc2l6ZSA9PT0gdW5kZWZpbmVkIHx8IGtleWJvYXJkUmVzaXplLm1vZGUgPT09IEtleWJvYXJkUmVzaXplLk5vbmUpO1xuICAgIC8qKlxuICAgICAqIFRoaXMgdHJhY2tzIHdoZXRoZXIgb3Igbm90IHRoZSBrZXlib2FyZCBoYXMgYmVlblxuICAgICAqIHByZXNlbnRlZCBmb3IgYSBzaW5nbGUgZm9jdXNlZCB0ZXh0IGZpZWxkLiBOb3RlXG4gICAgICogdGhhdCBpdCBkb2VzIG5vdCB0cmFjayBpZiB0aGUga2V5Ym9hcmQgaXMgb3BlblxuICAgICAqIGluIGdlbmVyYWwgc3VjaCBhcyBpZiB0aGUga2V5Ym9hcmQgaXMgb3BlbiBmb3JcbiAgICAgKiBhIGRpZmZlcmVudCBmb2N1c2VkIHRleHQgZmllbGQuXG4gICAgICovXG4gICAgbGV0IGhhc0tleWJvYXJkQmVlblByZXNlbnRlZEZvclRleHRGaWVsZCA9IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIFdoZW4gYWRkaW5nIHNjcm9sbCBwYWRkaW5nIHdlIG5lZWQgdG8ga25vd1xuICAgICAqIGhvdyBtdWNoIG9mIHRoZSB2aWV3cG9ydCB0aGUga2V5Ym9hcmQgb2JzY3VyZXMuXG4gICAgICogV2UgZG8gdGhpcyBieSBzdWJ0cmFjdGluZyB0aGUga2V5Ym9hcmQgaGVpZ2h0XG4gICAgICogZnJvbSB0aGUgcGxhdGZvcm0gaGVpZ2h0LlxuICAgICAqXG4gICAgICogSWYgd2UgY29tcHV0ZSB0aGlzIHZhbHVlIHdoZW4gc3dpdGNoaW5nIGJldHdlZW5cbiAgICAgKiBpbnB1dHMgdGhlbiB0aGUgd2VidmlldyBtYXkgYWxyZWFkeSBiZSByZXNpemVkLlxuICAgICAqIEF0IHRoaXMgcG9pbnQsIGB3aW4uaW5uZXJIZWlnaHRgIGhhcyBhbHJlYWR5IGFjY291bnRlZFxuICAgICAqIGZvciB0aGUga2V5Ym9hcmQgbWVhbmluZyB3ZSB3b3VsZCB0aGVuIHN1YnRyYWN0XG4gICAgICogdGhlIGtleWJvYXJkIGhlaWdodCBhZ2Fpbi4gVGhpcyB3aWxsIHJlc3VsdCBpbiB0aGUgaW5wdXRcbiAgICAgKiBiZWluZyBzY3JvbGxlZCBtb3JlIHRoYW4gaXQgbmVlZHMgdG8uXG4gICAgICovXG4gICAgY29uc3QgcGxhdGZvcm1IZWlnaHQgPSB3aW4gIT09IHVuZGVmaW5lZCA/IHdpbi5pbm5lckhlaWdodCA6IDA7XG4gICAgLyoqXG4gICAgICogU2Nyb2xsIGFzc2lzdCBpcyBydW4gd2hlbiBhIHRleHQgZmllbGRcbiAgICAgKiBpcyBmb2N1c2VkLiBIb3dldmVyLCBpdCBtYXkgbmVlZCB0b1xuICAgICAqIHJlLXJ1biB3aGVuIHRoZSBrZXlib2FyZCBzaXplIGNoYW5nZXNcbiAgICAgKiBzdWNoIHRoYXQgdGhlIHRleHQgZmllbGQgaXMgbm93IGhpZGRlblxuICAgICAqIHVuZGVybmVhdGggdGhlIGtleWJvYXJkLlxuICAgICAqIFRoaXMgZnVuY3Rpb24gcmUtcnVucyBzY3JvbGwgYXNzaXN0XG4gICAgICogd2hlbiB0aGF0IGhhcHBlbnMuXG4gICAgICpcbiAgICAgKiBPbmUgbGltaXRhdGlvbiBvZiB0aGlzIGlzIG9uIGEgd2ViIGJyb3dzZXJcbiAgICAgKiB3aGVyZSBuYXRpdmUga2V5Ym9hcmQgQVBJcyBkbyBub3QgaGF2ZSBjcm9zcy1icm93c2VyXG4gICAgICogc3VwcG9ydC4gYGlvbktleWJvYXJkRGlkU2hvd2AgcmVsaWVzIG9uIHRoZSBWaXN1YWwgVmlld3BvcnQgQVBJLlxuICAgICAqIFRoaXMgbWVhbnMgdGhhdCBpZiB0aGUga2V5Ym9hcmQgY2hhbmdlcyBidXQgZG9lcyBub3QgY2hhbmdlXG4gICAgICogZ2VvbWV0cnksIHRoZW4gc2Nyb2xsIGFzc2lzdCB3aWxsIG5vdCByZS1ydW4gZXZlbiBpZlxuICAgICAqIHRoZSB1c2VyIGhhcyBzY3JvbGxlZCB0aGUgdGV4dCBmaWVsZCB1bmRlciB0aGUga2V5Ym9hcmQuXG4gICAgICogVGhpcyBpcyBub3QgYSBwcm9ibGVtIHdoZW4gcnVubmluZyBpbiBDb3Jkb3ZhL0NhcGFjaXRvclxuICAgICAqIGJlY2F1c2UgYGlvbktleWJvYXJkRGlkU2hvd2AgdXNlcyB0aGUgbmF0aXZlIGV2ZW50c1xuICAgICAqIHdoaWNoIGZpcmUgZXZlcnkgdGltZSB0aGUga2V5Ym9hcmQgY2hhbmdlcy5cbiAgICAgKi9cbiAgICBjb25zdCBrZXlib2FyZFNob3cgPSAoZXYpID0+IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRoZSBrZXlib2FyZCBoYXMgbm90IHlldCBiZWVuIHByZXNlbnRlZFxuICAgICAgICAgKiBmb3IgdGhpcyB0ZXh0IGZpZWxkIHRoZW4gdGhlIHRleHQgZmllbGQgaGFzIGp1c3RcbiAgICAgICAgICogcmVjZWl2ZWQgZm9jdXMuIEluIHRoYXQgY2FzZSwgdGhlIGZvY3VzaW4gbGlzdGVuZXJcbiAgICAgICAgICogd2lsbCBydW4gc2Nyb2xsIGFzc2lzdC5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChoYXNLZXlib2FyZEJlZW5QcmVzZW50ZWRGb3JUZXh0RmllbGQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBoYXNLZXlib2FyZEJlZW5QcmVzZW50ZWRGb3JUZXh0RmllbGQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPdGhlcndpc2UsIHRoZSBrZXlib2FyZCBoYXMgYWxyZWFkeSBiZWVuIHByZXNlbnRlZFxuICAgICAgICAgKiBmb3IgdGhlIGZvY3VzZWQgdGV4dCBmaWVsZC5cbiAgICAgICAgICogVGhpcyBtZWFucyB0aGF0IHRoZSBrZXlib2FyZCBsaWtlbHkgY2hhbmdlZFxuICAgICAgICAgKiBnZW9tZXRyeSwgYW5kIHdlIG5lZWQgdG8gcmUtcnVuIHNjcm9sbCBhc3Npc3QuXG4gICAgICAgICAqIFRoaXMgY2FuIGhhcHBlbiB3aGVuIHRoZSB1c2VyIHJvdGF0ZXMgdGhlaXIgZGV2aWNlXG4gICAgICAgICAqIG9yIHdoZW4gdGhleSBzd2l0Y2gga2V5Ym9hcmRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBNYWtlIHN1cmUgd2UgcGFzcyBpbiB0aGUgY29tcHV0ZWQga2V5Ym9hcmQgaGVpZ2h0XG4gICAgICAgICAqIHJhdGhlciB0aGFuIHRoZSBlc3RpbWF0ZWQga2V5Ym9hcmQgaGVpZ2h0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBTaW5jZSB0aGUga2V5Ym9hcmQgaXMgYWxyZWFkeSBvcGVuIHRoZW4gd2UgZG8gbm90XG4gICAgICAgICAqIG5lZWQgdG8gd2FpdCBmb3IgdGhlIHdlYnZpZXcgdG8gcmVzaXplLCBzbyB3ZSBwYXNzXG4gICAgICAgICAqIFwid2FpdEZvclJlc2l6ZTogZmFsc2VcIi5cbiAgICAgICAgICovXG4gICAgICAgIGpzU2V0Rm9jdXMoY29tcG9uZW50RWwsIGlucHV0RWwsIGNvbnRlbnRFbCwgZm9vdGVyRWwsIGV2LmRldGFpbC5rZXlib2FyZEhlaWdodCwgYWRkU2Nyb2xsUGFkZGluZywgZGlzYWJsZUNsb25lZElucHV0LCBwbGF0Zm9ybUhlaWdodCwgZmFsc2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIGludGVybmFsIHN0YXRlIHdoZW4gdGhlIHRleHQgZmllbGQgbG9zZXMgZm9jdXMuXG4gICAgICovXG4gICAgY29uc3QgZm9jdXNPdXQgPSAoKSA9PiB7XG4gICAgICAgIGhhc0tleWJvYXJkQmVlblByZXNlbnRlZEZvclRleHRGaWVsZCA9IGZhbHNlO1xuICAgICAgICB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93Jywga2V5Ym9hcmRTaG93KTtcbiAgICAgICAgY29tcG9uZW50RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBmb2N1c091dCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSBpbnB1dCBpcyBhYm91dCB0byByZWNlaXZlXG4gICAgICogZm9jdXMsIHdlIG5lZWQgdG8gbW92ZSBpdCB0byBwcmV2ZW50XG4gICAgICogbW9iaWxlIFNhZmFyaSBmcm9tIGFkanVzdGluZyB0aGUgdmlld3BvcnQuXG4gICAgICovXG4gICAgY29uc3QgZm9jdXNJbiA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNjcm9sbCBhc3Npc3Qgc2hvdWxkIG5vdCBydW4gYWdhaW5cbiAgICAgICAgICogb24gaW5wdXRzIHRoYXQgaGF2ZSBiZWVuIG1hbnVhbGx5XG4gICAgICAgICAqIGZvY3VzZWQgaW5zaWRlIG9mIHRoZSBzY3JvbGwgYXNzaXN0XG4gICAgICAgICAqIGltcGxlbWVudGF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGlucHV0RWwuaGFzQXR0cmlidXRlKFNLSVBfU0NST0xMX0FTU0lTVCkpIHtcbiAgICAgICAgICAgIGlucHV0RWwucmVtb3ZlQXR0cmlidXRlKFNLSVBfU0NST0xMX0FTU0lTVCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAganNTZXRGb2N1cyhjb21wb25lbnRFbCwgaW5wdXRFbCwgY29udGVudEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQsIGFkZFNjcm9sbFBhZGRpbmcsIGRpc2FibGVDbG9uZWRJbnB1dCwgcGxhdGZvcm1IZWlnaHQpO1xuICAgICAgICB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4uYWRkRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93Jywga2V5Ym9hcmRTaG93KTtcbiAgICAgICAgY29tcG9uZW50RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBmb2N1c091dCk7XG4gICAgfTtcbiAgICBjb21wb25lbnRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgZm9jdXNJbik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgY29tcG9uZW50RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGZvY3VzSW4pO1xuICAgICAgICB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93Jywga2V5Ym9hcmRTaG93KTtcbiAgICAgICAgY29tcG9uZW50RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBmb2N1c091dCk7XG4gICAgfTtcbn07XG4vKipcbiAqIFVzZSB0aGlzIGZ1bmN0aW9uIHdoZW4geW91IHdhbnQgdG8gbWFudWFsbHlcbiAqIGZvY3VzIGFuIGlucHV0IGJ1dCBub3QgaGF2ZSBzY3JvbGwgYXNzaXN0IHJ1biBhZ2Fpbi5cbiAqL1xuY29uc3Qgc2V0TWFudWFsRm9jdXMgPSAoZWwpID0+IHtcbiAgICAvKipcbiAgICAgKiBJZiBlbGVtZW50IGlzIGFscmVhZHkgZm9jdXNlZCB0aGVuXG4gICAgICogYSBuZXcgZm9jdXNpbiBldmVudCB3aWxsIG5vdCBiZSBkaXNwYXRjaGVkXG4gICAgICogdG8gcmVtb3ZlIHRoZSBTS0lMX1NDUk9MTF9BU1NJU1QgYXR0cmlidXRlLlxuICAgICAqL1xuICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBlbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsLnNldEF0dHJpYnV0ZShTS0lQX1NDUk9MTF9BU1NJU1QsICd0cnVlJyk7XG4gICAgZWwuZm9jdXMoKTtcbn07XG5jb25zdCBqc1NldEZvY3VzID0gYXN5bmMgKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBjb250ZW50RWwsIGZvb3RlckVsLCBrZXlib2FyZEhlaWdodCwgZW5hYmxlU2Nyb2xsUGFkZGluZywgZGlzYWJsZUNsb25lZElucHV0ID0gZmFsc2UsIHBsYXRmb3JtSGVpZ2h0ID0gMCwgd2FpdEZvclJlc2l6ZSA9IHRydWUpID0+IHtcbiAgICBpZiAoIWNvbnRlbnRFbCAmJiAhZm9vdGVyRWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzY3JvbGxEYXRhID0gZ2V0U2Nyb2xsRGF0YShjb21wb25lbnRFbCwgKGNvbnRlbnRFbCB8fCBmb290ZXJFbCksIGtleWJvYXJkSGVpZ2h0LCBwbGF0Zm9ybUhlaWdodCk7XG4gICAgaWYgKGNvbnRlbnRFbCAmJiBNYXRoLmFicyhzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCkgPCA0KSB7XG4gICAgICAgIC8vIHRoZSB0ZXh0IGlucHV0IGlzIGluIGEgc2FmZSBwb3NpdGlvbiB0aGF0IGRvZXNuJ3RcbiAgICAgICAgLy8gcmVxdWlyZSBpdCB0byBiZSBzY3JvbGxlZCBpbnRvIHZpZXcsIGp1c3Qgc2V0IGZvY3VzIG5vd1xuICAgICAgICBzZXRNYW51YWxGb2N1cyhpbnB1dEVsKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW4gdGhvdWdoIHRoZSBpbnB1dCBkb2VzIG5vdCBuZWVkXG4gICAgICAgICAqIHNjcm9sbCBhc3Npc3QsIHdlIHNob3VsZCBwcmVzZXJ2ZSB0aGVcbiAgICAgICAgICogdGhlIHNjcm9sbCBwYWRkaW5nIGFzIHVzZXJzIGNvdWxkIGJlIG1vdmluZ1xuICAgICAgICAgKiBmb2N1cyBmcm9tIGFuIGlucHV0IHRoYXQgbmVlZHMgc2Nyb2xsIHBhZGRpbmdcbiAgICAgICAgICogdG8gYW4gaW5wdXQgdGhhdCBkb2VzIG5vdCBuZWVkIHNjcm9sbCBwYWRkaW5nLlxuICAgICAgICAgKiBJZiB3ZSByZW1vdmUgdGhlIHNjcm9sbCBwYWRkaW5nIG5vdywgdXNlcnMgd2lsbFxuICAgICAgICAgKiBzZWUgdGhlIHBhZ2UganVtcC5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChlbmFibGVTY3JvbGxQYWRkaW5nICYmIGNvbnRlbnRFbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc2V0U2Nyb2xsUGFkZGluZyhjb250ZW50RWwsIGN1cnJlbnRQYWRkaW5nKTtcbiAgICAgICAgICAgIHNldENsZWFyU2Nyb2xsUGFkZGluZ0xpc3RlbmVyKGlucHV0RWwsIGNvbnRlbnRFbCwgKCkgPT4gKGN1cnJlbnRQYWRkaW5nID0gMCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gdGVtcG9yYXJpbHkgbW92ZSB0aGUgZm9jdXMgdG8gdGhlIGZvY3VzIGhvbGRlciBzbyB0aGUgYnJvd3NlclxuICAgIC8vIGRvZXNuJ3QgZnJlYWsgb3V0IHdoaWxlIGl0J3MgdHJ5aW5nIHRvIGdldCB0aGUgaW5wdXQgaW4gcGxhY2VcbiAgICAvLyBhdCB0aGlzIHBvaW50IHRoZSBuYXRpdmUgdGV4dCBpbnB1dCBzdGlsbCBkb2VzIG5vdCBoYXZlIGZvY3VzXG4gICAgcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgdHJ1ZSwgc2Nyb2xsRGF0YS5pbnB1dFNhZmVZLCBkaXNhYmxlQ2xvbmVkSW5wdXQpO1xuICAgIHNldE1hbnVhbEZvY3VzKGlucHV0RWwpO1xuICAgIC8qKlxuICAgICAqIFJlbG9jYXRpbmcvRm9jdXNpbmcgaW5wdXQgY2F1c2VzIHRoZVxuICAgICAqIGNsaWNrIGV2ZW50IHRvIGJlIGNhbmNlbGxlZCwgc29cbiAgICAgKiBtYW51YWxseSBmaXJlIG9uZSBoZXJlLlxuICAgICAqL1xuICAgIHJhZigoKSA9PiBjb21wb25lbnRFbC5jbGljaygpKTtcbiAgICAvKipcbiAgICAgKiBJZiBlbmFibGVkLCB3ZSBjYW4gYWRkIHNjcm9sbCBwYWRkaW5nIHRvXG4gICAgICogdGhlIGJvdHRvbSBvZiB0aGUgY29udGVudCBzbyB0aGF0IHNjcm9sbCBhc3Npc3RcbiAgICAgKiBoYXMgZW5vdWdoIHJvb20gdG8gc2Nyb2xsIHRoZSBpbnB1dCBhYm92ZVxuICAgICAqIHRoZSBrZXlib2FyZC5cbiAgICAgKi9cbiAgICBpZiAoZW5hYmxlU2Nyb2xsUGFkZGluZyAmJiBjb250ZW50RWwpIHtcbiAgICAgICAgY3VycmVudFBhZGRpbmcgPSBzY3JvbGxEYXRhLnNjcm9sbFBhZGRpbmc7XG4gICAgICAgIHNldFNjcm9sbFBhZGRpbmcoY29udGVudEVsLCBjdXJyZW50UGFkZGluZyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsZXQgc2Nyb2xsQ29udGVudFRpbWVvdXQ7XG4gICAgICAgIGNvbnN0IHNjcm9sbENvbnRlbnQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBjbGVhbiB1cCBsaXN0ZW5lcnMgYW5kIHRpbWVvdXRzXG4gICAgICAgICAgICBpZiAoc2Nyb2xsQ29udGVudFRpbWVvdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzY3JvbGxDb250ZW50VGltZW91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93JywgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBzY3JvbGxDb250ZW50KTtcbiAgICAgICAgICAgIC8vIHNjcm9sbCB0aGUgaW5wdXQgaW50byBwbGFjZVxuICAgICAgICAgICAgaWYgKGNvbnRlbnRFbCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNjcm9sbEJ5UG9pbnQoY29udGVudEVsLCAwLCBzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCwgc2Nyb2xsRGF0YS5zY3JvbGxEdXJhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0aGUgc2Nyb2xsIHZpZXcgaXMgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb24gbm93XG4gICAgICAgICAgICAvLyBnaXZlIHRoZSBuYXRpdmUgdGV4dCBpbnB1dCBmb2N1c1xuICAgICAgICAgICAgcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgZmFsc2UsIHNjcm9sbERhdGEuaW5wdXRTYWZlWSk7XG4gICAgICAgICAgICAvLyBlbnN1cmUgdGhpcyBpcyB0aGUgZm9jdXNlZCBpbnB1dFxuICAgICAgICAgICAgc2V0TWFudWFsRm9jdXMoaW5wdXRFbCk7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFdoZW4gdGhlIGlucHV0IGlzIGFib3V0IHRvIGJlIGJsdXJyZWRcbiAgICAgICAgICAgICAqIHdlIHNob3VsZCBzZXQgYSB0aW1lb3V0IHRvIHJlbW92ZVxuICAgICAgICAgICAgICogYW55IHNjcm9sbCBwYWRkaW5nLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoZW5hYmxlU2Nyb2xsUGFkZGluZykge1xuICAgICAgICAgICAgICAgIHNldENsZWFyU2Nyb2xsUGFkZGluZ0xpc3RlbmVyKGlucHV0RWwsIGNvbnRlbnRFbCwgKCkgPT4gKGN1cnJlbnRQYWRkaW5nID0gMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93JywgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBzY3JvbGxDb250ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGNvbnRlbnRFbCkge1xuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsRWwgPSBhd2FpdCBnZXRTY3JvbGxFbGVtZW50KGNvbnRlbnRFbCk7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHNjcm9sbERhdGEgd2lsbCBvbmx5IGNvbnNpZGVyIHRoZSBhbW91bnQgd2UgbmVlZFxuICAgICAgICAgICAgICogdG8gc2Nyb2xsIGluIG9yZGVyIHRvIHByb3Blcmx5IGJyaW5nIHRoZSBpbnB1dFxuICAgICAgICAgICAgICogaW50byB2aWV3LiBJdCB3aWxsIG5vdCBjb25zaWRlciB0aGUgYW1vdW50XG4gICAgICAgICAgICAgKiB3ZSBjYW4gc2Nyb2xsIGluIHRoZSBjb250ZW50IGVsZW1lbnQuXG4gICAgICAgICAgICAgKiBBcyBhIHJlc3VsdCwgc2Nyb2xsRGF0YSBtYXkgcmVxdWVzdCBhIGdyZWF0ZXJcbiAgICAgICAgICAgICAqIHNjcm9sbCBwb3NpdGlvbiB0aGFuIGlzIGN1cnJlbnRseSBhdmFpbGFibGVcbiAgICAgICAgICAgICAqIGluIHRoZSBET00uIElmIHRoaXMgaXMgdGhlIGNhc2UsIHdlIG5lZWQgdG9cbiAgICAgICAgICAgICAqIHdhaXQgZm9yIHRoZSB3ZWJ2aWV3IHRvIHJlc2l6ZS90aGUga2V5Ym9hcmRcbiAgICAgICAgICAgICAqIHRvIHNob3cgaW4gb3JkZXIgZm9yIGFkZGl0aW9uYWwgc2Nyb2xsXG4gICAgICAgICAgICAgKiBiYW5kd2lkdGggdG8gYmVjb21lIGF2YWlsYWJsZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29uc3QgdG90YWxTY3JvbGxBbW91bnQgPSBzY3JvbGxFbC5zY3JvbGxIZWlnaHQgLSBzY3JvbGxFbC5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICBpZiAod2FpdEZvclJlc2l6ZSAmJiBzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCA+IHRvdGFsU2Nyb2xsQW1vdW50IC0gc2Nyb2xsRWwuc2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogT24gaU9TIGRldmljZXMsIHRoZSBzeXN0ZW0gd2lsbCBzaG93IGEgXCJQYXNzd29yZHNcIiBiYXIgYWJvdmUgdGhlIGtleWJvYXJkXG4gICAgICAgICAgICAgICAgICogYWZ0ZXIgdGhlIGluaXRpYWwga2V5Ym9hcmQgaXMgc2hvd24uIFRoaXMgcHJldmVudHMgdGhlIHdlYnZpZXcgZnJvbSByZXNpemluZ1xuICAgICAgICAgICAgICAgICAqIHVudGlsIHRoZSBcIlBhc3N3b3Jkc1wiIGJhciBpcyBzaG93biwgc28gd2UgbmVlZCB0byB3YWl0IGZvciB0aGF0IHRvIGhhcHBlbiBmaXJzdC5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoaW5wdXRFbC50eXBlID09PSAncGFzc3dvcmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCA1MHB4IHRvIGFjY291bnQgZm9yIHRoZSBcIlBhc3N3b3Jkc1wiIGJhclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCArPSBTQ1JPTExfQU1PVU5UX1BBRERJTkc7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIHNjcm9sbENvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUaGlzIHNob3VsZCBvbmx5IGZpcmUgaW4gMiBpbnN0YW5jZXM6XG4gICAgICAgICAgICAgICAgICogMS4gVGhlIGFwcCBpcyB2ZXJ5IHNsb3cuXG4gICAgICAgICAgICAgICAgICogMi4gVGhlIGFwcCBpcyBydW5uaW5nIGluIGEgYnJvd3NlciBvbiBhbiBvbGQgT1NcbiAgICAgICAgICAgICAgICAgKiB0aGF0IGRvZXMgbm90IHN1cHBvcnQgSW9uaWMgS2V5Ym9hcmQgRXZlbnRzXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgc2Nyb2xsQ29udGVudFRpbWVvdXQgPSBzZXRUaW1lb3V0KHNjcm9sbENvbnRlbnQsIDEwMDApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzY3JvbGxDb250ZW50KCk7XG4gICAgfVxufTtcblxuY29uc3QgSU5QVVRfQkxVUlJJTkcgPSB0cnVlO1xuY29uc3Qgc3RhcnRJbnB1dFNoaW1zID0gYXN5bmMgKGNvbmZpZywgcGxhdGZvcm0pID0+IHtcbiAgICAvKipcbiAgICAgKiBJZiBkb2MgaXMgdW5kZWZpbmVkIHRoZW4gd2UgYXJlIGluIGFuIFNTUiBlbnZpcm9ubWVudFxuICAgICAqIHdoZXJlIGlucHV0IHNoaW1zIGRvIG5vdCBhcHBseS5cbiAgICAgKi9cbiAgICBpZiAoZG9jID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpc0lPUyA9IHBsYXRmb3JtID09PSAnaW9zJztcbiAgICBjb25zdCBpc0FuZHJvaWQgPSBwbGF0Zm9ybSA9PT0gJ2FuZHJvaWQnO1xuICAgIC8qKlxuICAgICAqIEhpZGUgQ2FyZXQgYW5kIElucHV0IEJsdXJyaW5nIGFyZSBuZWVkZWQgb24gaU9TLlxuICAgICAqIFNjcm9sbCBBc3Npc3QgYW5kIFNjcm9sbCBQYWRkaW5nIGFyZSBuZWVkZWQgb24gaU9TIGFuZCBBbmRyb2lkXG4gICAgICogd2l0aCBDaHJvbWUgd2ViIGJyb3dzZXIgKG5vdCBDaHJvbWUgd2VidmlldykuXG4gICAgICovXG4gICAgY29uc3Qga2V5Ym9hcmRIZWlnaHQgPSBjb25maWcuZ2V0TnVtYmVyKCdrZXlib2FyZEhlaWdodCcsIDI5MCk7XG4gICAgY29uc3Qgc2Nyb2xsQXNzaXN0ID0gY29uZmlnLmdldEJvb2xlYW4oJ3Njcm9sbEFzc2lzdCcsIHRydWUpO1xuICAgIGNvbnN0IGhpZGVDYXJldCA9IGNvbmZpZy5nZXRCb29sZWFuKCdoaWRlQ2FyZXRPblNjcm9sbCcsIGlzSU9TKTtcbiAgICAvKipcbiAgICAgKiBUaGUgdGVhbSBpcyBldmFsdWF0aW5nIGlmIGlucHV0Qmx1cnJpbmcgaXMgc3RpbGwgbmVlZGVkLiBBcyBhIHJlc3VsdFxuICAgICAqIHRoaXMgZmVhdHVyZSBpcyBkaXNhYmxlZCBieSBkZWZhdWx0IGFzIG9mIElvbmljIDguMC4gRGV2ZWxvcGVycyBhcmVcbiAgICAgKiBhYmxlIHRvIHJlLWVuYWJsZSBpdCB0ZW1wb3JhcmlseS4gVGhlIHRlYW0gbWF5IHJlbW92ZSB0aGlzIHV0aWxpdHlcbiAgICAgKiBpZiBpdCBpcyBkZXRlcm1pbmVkIHRoYXQgZG9pbmcgc28gd291bGQgbm90IGJyaW5nIGFueSBhZHZlcnNlIHNpZGUgZWZmZWN0cy5cbiAgICAgKiBUT0RPIEZXLTYwMTQgcmVtb3ZlIGlucHV0IGJsdXJyaW5nIHV0aWxpdHkgKGluY2x1ZGluZyBpbXBsZW1lbnRhdGlvbilcbiAgICAgKi9cbiAgICBjb25zdCBpbnB1dEJsdXJyaW5nID0gY29uZmlnLmdldEJvb2xlYW4oJ2lucHV0Qmx1cnJpbmcnLCBmYWxzZSk7XG4gICAgY29uc3Qgc2Nyb2xsUGFkZGluZyA9IGNvbmZpZy5nZXRCb29sZWFuKCdzY3JvbGxQYWRkaW5nJywgdHJ1ZSk7XG4gICAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShkb2MucXVlcnlTZWxlY3RvckFsbCgnaW9uLWlucHV0LCBpb24tdGV4dGFyZWEnKSk7XG4gICAgY29uc3QgaGlkZUNhcmV0TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgICBjb25zdCBzY3JvbGxBc3Npc3RNYXAgPSBuZXcgV2Vha01hcCgpO1xuICAgIC8qKlxuICAgICAqIEdyYWIgdGhlIG5hdGl2ZSBrZXlib2FyZCByZXNpemUgY29uZmlndXJhdGlvblxuICAgICAqIGFuZCBwYXNzIGl0IHRvIHNjcm9sbCBhc3Npc3QuIFNjcm9sbCBhc3Npc3QgcmVxdWlyZXNcbiAgICAgKiB0aGF0IHdlIGFkanVzdCB0aGUgaW5wdXQgcmlnaHQgYmVmb3JlIHRoZSBpbnB1dFxuICAgICAqIGlzIGFib3V0IHRvIGJlIGZvY3VzZWQuIElmIHdlIGNhbGxlZCBgS2V5Ym9hcmQuZ2V0UmVzaXplTW9kZWBcbiAgICAgKiBvbiBmb2N1c2luIGluIHNjcm9sbCBhc3Npc3QsIHdlIGNvdWxkIHBvdGVudGlhbGx5IGFkanVzdCB0aGVcbiAgICAgKiBpbnB1dCB0b28gbGF0ZSBzaW5jZSB0aGlzIGNhbGwgaXMgYXN5bmMuXG4gICAgICovXG4gICAgY29uc3Qga2V5Ym9hcmRSZXNpemVNb2RlID0gYXdhaXQgS2V5Ym9hcmQuZ2V0UmVzaXplTW9kZSgpO1xuICAgIGNvbnN0IHJlZ2lzdGVySW5wdXQgPSBhc3luYyAoY29tcG9uZW50RWwpID0+IHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IGNvbXBvbmVudE9uUmVhZHkoY29tcG9uZW50RWwsIHJlc29sdmUpKTtcbiAgICAgICAgY29uc3QgaW5wdXRSb290ID0gY29tcG9uZW50RWwuc2hhZG93Um9vdCB8fCBjb21wb25lbnRFbDtcbiAgICAgICAgY29uc3QgaW5wdXRFbCA9IGlucHV0Um9vdC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpIHx8IGlucHV0Um9vdC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpO1xuICAgICAgICBjb25zdCBzY3JvbGxFbCA9IGZpbmRDbG9zZXN0SW9uQ29udGVudChjb21wb25lbnRFbCk7XG4gICAgICAgIGNvbnN0IGZvb3RlckVsID0gIXNjcm9sbEVsID8gY29tcG9uZW50RWwuY2xvc2VzdCgnaW9uLWZvb3RlcicpIDogbnVsbDtcbiAgICAgICAgaWYgKCFpbnB1dEVsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhc2Nyb2xsRWwgJiYgaGlkZUNhcmV0ICYmICFoaWRlQ2FyZXRNYXAuaGFzKGNvbXBvbmVudEVsKSkge1xuICAgICAgICAgICAgY29uc3Qgcm1GbiA9IGVuYWJsZUhpZGVDYXJldE9uU2Nyb2xsKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBzY3JvbGxFbCk7XG4gICAgICAgICAgICBoaWRlQ2FyZXRNYXAuc2V0KGNvbXBvbmVudEVsLCBybUZuKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogZGF0ZS9kYXRldGltZS1sb2NhbGUgaW5wdXRzIG9uIG1vYmlsZSBkZXZpY2VzIHNob3cgZGF0ZSBwaWNrZXJcbiAgICAgICAgICogb3ZlcmxheXMgaW5zdGVhZCBvZiBrZXlib2FyZHMuIEFzIGEgcmVzdWx0LCBzY3JvbGwgYXNzaXN0IGlzXG4gICAgICAgICAqIG5vdCBuZWVkZWQuIFRoaXMgYWxzbyB3b3JrcyBhcm91bmQgYSBidWcgaW4gaU9TIDwxNiB3aGVyZVxuICAgICAgICAgKiBzY3JvbGwgYXNzaXN0IGNhdXNlcyB0aGUgYnJvd3NlciB0byBsb2NrIHVwLiBTZWUgRlctMTk5Ny5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGlzRGF0ZUlucHV0ID0gaW5wdXRFbC50eXBlID09PSAnZGF0ZScgfHwgaW5wdXRFbC50eXBlID09PSAnZGF0ZXRpbWUtbG9jYWwnO1xuICAgICAgICBpZiAoIWlzRGF0ZUlucHV0ICYmXG4gICAgICAgICAgICAoISFzY3JvbGxFbCB8fCAhIWZvb3RlckVsKSAmJlxuICAgICAgICAgICAgc2Nyb2xsQXNzaXN0ICYmXG4gICAgICAgICAgICAhc2Nyb2xsQXNzaXN0TWFwLmhhcyhjb21wb25lbnRFbCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJtRm4gPSBlbmFibGVTY3JvbGxBc3Npc3QoY29tcG9uZW50RWwsIGlucHV0RWwsIHNjcm9sbEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQsIHNjcm9sbFBhZGRpbmcsIGtleWJvYXJkUmVzaXplTW9kZSwgaXNBbmRyb2lkKTtcbiAgICAgICAgICAgIHNjcm9sbEFzc2lzdE1hcC5zZXQoY29tcG9uZW50RWwsIHJtRm4pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB1bnJlZ2lzdGVySW5wdXQgPSAoY29tcG9uZW50RWwpID0+IHtcbiAgICAgICAgaWYgKGhpZGVDYXJldCkge1xuICAgICAgICAgICAgY29uc3QgZm4gPSBoaWRlQ2FyZXRNYXAuZ2V0KGNvbXBvbmVudEVsKTtcbiAgICAgICAgICAgIGlmIChmbikge1xuICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoaWRlQ2FyZXRNYXAuZGVsZXRlKGNvbXBvbmVudEVsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2Nyb2xsQXNzaXN0KSB7XG4gICAgICAgICAgICBjb25zdCBmbiA9IHNjcm9sbEFzc2lzdE1hcC5nZXQoY29tcG9uZW50RWwpO1xuICAgICAgICAgICAgaWYgKGZuKSB7XG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNjcm9sbEFzc2lzdE1hcC5kZWxldGUoY29tcG9uZW50RWwpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAoaW5wdXRCbHVycmluZyAmJiBJTlBVVF9CTFVSUklORykge1xuICAgICAgICBlbmFibGVJbnB1dEJsdXJyaW5nKCk7XG4gICAgfVxuICAgIC8vIElucHV0IG1pZ2h0IGJlIGFscmVhZHkgbG9hZGVkIGluIHRoZSBET00gYmVmb3JlIGlvbi1kZXZpY2UtaGFja3MgZGlkLlxuICAgIC8vIEF0IHRoaXMgcG9pbnQgd2UgbmVlZCB0byBsb29rIGZvciBhbGwgb2YgdGhlIGlucHV0cyBub3QgcmVnaXN0ZXJlZCB5ZXRcbiAgICAvLyBhbmQgcmVnaXN0ZXIgdGhlbS5cbiAgICBmb3IgKGNvbnN0IGlucHV0IG9mIGlucHV0cykge1xuICAgICAgICByZWdpc3RlcklucHV0KGlucHV0KTtcbiAgICB9XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2lvbklucHV0RGlkTG9hZCcsIChldikgPT4ge1xuICAgICAgICByZWdpc3RlcklucHV0KGV2LmRldGFpbCk7XG4gICAgfSk7XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2lvbklucHV0RGlkVW5sb2FkJywgKGV2KSA9PiB7XG4gICAgICAgIHVucmVnaXN0ZXJJbnB1dChldi5kZXRhaWwpO1xuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgc3RhcnRJbnB1dFNoaW1zIH07XG4iXSwibmFtZXMiOlsidyIsIndpbiIsImQiLCJkb2MiLCJnIiwiZ2V0U2Nyb2xsRWxlbWVudCIsImMiLCJzY3JvbGxCeVBvaW50IiwiZiIsImZpbmRDbG9zZXN0SW9uQ29udGVudCIsImEiLCJhZGRFdmVudExpc3RlbmVyIiwiYiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyIiwicmFmIiwiY29tcG9uZW50T25SZWFkeSIsIktleWJvYXJkUmVzaXplIiwiSyIsIktleWJvYXJkIiwiY2xvbmVNYXAiLCJXZWFrTWFwIiwicmVsb2NhdGVJbnB1dCIsImNvbXBvbmVudEVsIiwiaW5wdXRFbCIsInNob3VsZFJlbG9jYXRlIiwiaW5wdXRSZWxhdGl2ZVkiLCJkaXNhYmxlZENsb25lZElucHV0IiwiaGFzIiwiYWRkQ2xvbmUiLCJyZW1vdmVDbG9uZSIsImlzRm9jdXNlZCIsImlucHV0IiwiZ2V0Um9vdE5vZGUiLCJhY3RpdmVFbGVtZW50IiwicGFyZW50RWwiLCJwYXJlbnROb2RlIiwiY2xvbmVkRWwiLCJjbG9uZU5vZGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0YWJJbmRleCIsImRpc2FibGVkIiwiYXBwZW5kQ2hpbGQiLCJzZXQiLCJvd25lckRvY3VtZW50IiwidHgiLCJkaXIiLCJzdHlsZSIsInBvaW50ZXJFdmVudHMiLCJ0cmFuc2Zvcm0iLCJjbG9uZSIsImdldCIsImRlbGV0ZSIsInJlbW92ZSIsIlNDUk9MTF9BTU9VTlRfUEFERElORyIsImVuYWJsZUhpZGVDYXJldE9uU2Nyb2xsIiwic2Nyb2xsRWwiLCJzY3JvbGxIaWRlQ2FyZXQiLCJzaG91bGRIaWRlQ2FyZXQiLCJvbkJsdXIiLCJoaWRlQ2FyZXQiLCJzaG93Q2FyZXQiLCJTS0lQX1NFTEVDVE9SIiwiZW5hYmxlSW5wdXRCbHVycmluZyIsImZvY3VzZWQiLCJkaWRTY3JvbGwiLCJkb2N1bWVudCIsIm9uU2Nyb2xsIiwib25Gb2N1c2luIiwib25Ub3VjaGVuZCIsImV2IiwiYWN0aXZlIiwibWF0Y2hlcyIsInRhcHBlZCIsInRhcmdldCIsImNsb3Nlc3QiLCJzZXRUaW1lb3V0IiwiYmx1ciIsIlNDUk9MTF9BU1NJU1RfU1BFRUQiLCJnZXRTY3JvbGxEYXRhIiwiY29udGVudEVsIiwia2V5Ym9hcmRIZWlnaHQiLCJwbGF0Zm9ybUhlaWdodCIsIl9hIiwiaXRlbUVsIiwiY2FsY1Njcm9sbERhdGEiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJpbnB1dFJlY3QiLCJjb250ZW50UmVjdCIsImlucHV0VG9wIiwidG9wIiwiaW5wdXRCb3R0b20iLCJib3R0b20iLCJ2aXNpYmxlQXJlYVRvcCIsInZpc2libGVBcmVhQm90dG9tIiwiTWF0aCIsIm1pbiIsInNhZmVBcmVhVG9wIiwic2FmZUFyZWFCb3R0b20iLCJkaXN0YW5jZVRvQm90dG9tIiwiZGlzdGFuY2VUb1RvcCIsImRlc2lyZWRTY3JvbGxBbW91bnQiLCJyb3VuZCIsInNjcm9sbEFtb3VudCIsImRpc3RhbmNlIiwiYWJzIiwiZHVyYXRpb24iLCJzY3JvbGxEdXJhdGlvbiIsIm1heCIsInNjcm9sbFBhZGRpbmciLCJpbnB1dFNhZmVZIiwiUEFERElOR19USU1FUl9LRVkiLCJzZXRTY3JvbGxQYWRkaW5nIiwicGFkZGluZ0Ftb3VudCIsImNsZWFyQ2FsbGJhY2siLCJ0aW1lciIsImNsZWFyVGltZW91dCIsInNldFByb3BlcnR5Iiwic2V0Q2xlYXJTY3JvbGxQYWRkaW5nTGlzdGVuZXIiLCJkb25lQ2FsbGJhY2siLCJjbGVhclNjcm9sbFBhZGRpbmciLCJvbmNlIiwiY3VycmVudFBhZGRpbmciLCJTS0lQX1NDUk9MTF9BU1NJU1QiLCJlbmFibGVTY3JvbGxBc3Npc3QiLCJmb290ZXJFbCIsImVuYWJsZVNjcm9sbFBhZGRpbmciLCJrZXlib2FyZFJlc2l6ZSIsImRpc2FibGVDbG9uZWRJbnB1dCIsImFkZFNjcm9sbFBhZGRpbmciLCJ1bmRlZmluZWQiLCJtb2RlIiwiTm9uZSIsImhhc0tleWJvYXJkQmVlblByZXNlbnRlZEZvclRleHRGaWVsZCIsImlubmVySGVpZ2h0Iiwia2V5Ym9hcmRTaG93IiwianNTZXRGb2N1cyIsImRldGFpbCIsImZvY3VzT3V0IiwiZm9jdXNJbiIsIl9yZWYiLCJfYXN5bmNUb0dlbmVyYXRvciIsImhhc0F0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImFwcGx5IiwiYXJndW1lbnRzIiwic2V0TWFudWFsRm9jdXMiLCJlbCIsInNldEF0dHJpYnV0ZSIsImZvY3VzIiwiX3JlZjIiLCJ3YWl0Rm9yUmVzaXplIiwic2Nyb2xsRGF0YSIsImNsaWNrIiwid2luZG93Iiwic2Nyb2xsQ29udGVudFRpbWVvdXQiLCJzY3JvbGxDb250ZW50IiwiX3JlZjMiLCJkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIiLCJ0b3RhbFNjcm9sbEFtb3VudCIsInNjcm9sbEhlaWdodCIsImNsaWVudEhlaWdodCIsInNjcm9sbFRvcCIsInR5cGUiLCJfeCIsIl94MiIsIl94MyIsIl94NCIsIl94NSIsIl94NiIsIklOUFVUX0JMVVJSSU5HIiwic3RhcnRJbnB1dFNoaW1zIiwiX3JlZjQiLCJjb25maWciLCJwbGF0Zm9ybSIsImlzSU9TIiwiaXNBbmRyb2lkIiwiZ2V0TnVtYmVyIiwic2Nyb2xsQXNzaXN0IiwiZ2V0Qm9vbGVhbiIsImlucHV0Qmx1cnJpbmciLCJpbnB1dHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaGlkZUNhcmV0TWFwIiwic2Nyb2xsQXNzaXN0TWFwIiwia2V5Ym9hcmRSZXNpemVNb2RlIiwiZ2V0UmVzaXplTW9kZSIsInJlZ2lzdGVySW5wdXQiLCJfcmVmNSIsIlByb21pc2UiLCJyZXNvbHZlIiwiaW5wdXRSb290Iiwic2hhZG93Um9vdCIsInF1ZXJ5U2VsZWN0b3IiLCJybUZuIiwiaXNEYXRlSW5wdXQiLCJfeDkiLCJ1bnJlZ2lzdGVySW5wdXQiLCJmbiIsIl94NyIsIl94OCJdLCJzb3VyY2VSb290Ijoid2VicGFjazovLy8iLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMF19